// ==UserScript==
// @name Kiite cafe plus
// @version 0.4.2
// @license MIT
// @author yakisova41
// @description kiite cafe Background playback and Continuous playback
// @description:ja kiite cafe バックグラウンド再生 連続再生
// @match https://cafe.kiite.jp/*
// @match https://embed.nicovideo.jp/kiite-embed-client
// @namespace https://yakisova.com
// ==/UserScript==

var gH=Object.create;var Ev=Object.defineProperty;var pH=Object.getOwnPropertyDescriptor;var fH=Object.getOwnPropertyNames;var zH=Object.getPrototypeOf,MH=Object.prototype.hasOwnProperty;var x1=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var mH=(e,t,a,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of fH(t))!MH.call(e,n)&&n!==a&&Ev(e,n,{get:()=>t[n],enumerable:!(r=pH(t,n))||r.enumerable});return e};var d1=(e,t,a)=>(a=e!=null?gH(zH(e)):{},mH(t||!e||!e.__esModule?Ev(a,"default",{value:e,enumerable:!0}):a,e));var Wv=x1(V1=>{"use strict";var yr=Symbol.for("react.element"),HH=Symbol.for("react.portal"),xH=Symbol.for("react.fragment"),VH=Symbol.for("react.strict_mode"),wH=Symbol.for("react.profiler"),LH=Symbol.for("react.provider"),yH=Symbol.for("react.context"),CH=Symbol.for("react.forward_ref"),BH=Symbol.for("react.suspense"),SH=Symbol.for("react.memo"),_H=Symbol.for("react.lazy"),kv=Symbol.iterator;function TH(e){return e===null||typeof e!="object"?null:(e=kv&&e[kv]||e["@@iterator"],typeof e=="function"?e:null)}var Iv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jv=Object.assign,Rv={};function N4(e,t,a){this.props=e,this.context=t,this.refs=Rv,this.updater=a||Iv}N4.prototype.isReactComponent={};N4.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};N4.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Nv(){}Nv.prototype=N4.prototype;function Wo(e,t,a){this.props=e,this.context=t,this.refs=Rv,this.updater=a||Iv}var Go=Wo.prototype=new Nv;Go.constructor=Wo;jv(Go,N4.prototype);Go.isPureReactComponent=!0;var Pv=Array.isArray,Fv=Object.prototype.hasOwnProperty,qo={current:null},Uv={key:!0,ref:!0,__self:!0,__source:!0};function $v(e,t,a){var r,n={},i=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(i=""+t.key),t)Fv.call(t,r)&&!Uv.hasOwnProperty(r)&&(n[r]=t[r]);var l=arguments.length-2;if(l===1)n.children=a;else if(1<l){for(var c=Array(l),v=0;v<l;v++)c[v]=arguments[v+2];n.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)n[r]===void 0&&(n[r]=l[r]);return{$$typeof:yr,type:e,key:i,ref:h,props:n,_owner:qo.current}}function OH(e,t){return{$$typeof:yr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ko(e){return typeof e=="object"&&e!==null&&e.$$typeof===yr}function bH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var Dv=/\/+/g;function $o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bH(""+e.key):t.toString(36)}function ti(e,t,a,r,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(i){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case yr:case HH:h=!0}}if(h)return h=e,n=n(h),e=r===""?"."+$o(h,0):r,Pv(n)?(a="",e!=null&&(a=e.replace(Dv,"$&/")+"/"),ti(n,t,a,"",function(v){return v})):n!=null&&(Ko(n)&&(n=OH(n,a+(!n.key||h&&h.key===n.key?"":(""+n.key).replace(Dv,"$&/")+"/")+e)),t.push(n)),1;if(h=0,r=r===""?".":r+":",Pv(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+$o(i,l);h+=ti(i,t,a,c,n)}else if(c=TH(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+$o(i,l++),h+=ti(i,t,a,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function Z5(e,t,a){if(e==null)return e;var r=[],n=0;return ti(e,r,"","",function(i){return t.call(a,i,n++)}),r}function AH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},ei={transition:null},EH={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:ei,ReactCurrentOwner:qo};V1.Children={map:Z5,forEach:function(e,t,a){Z5(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return Z5(e,function(){t++}),t},toArray:function(e){return Z5(e,function(t){return t})||[]},only:function(e){if(!Ko(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};V1.Component=N4;V1.Fragment=xH;V1.Profiler=wH;V1.PureComponent=Wo;V1.StrictMode=VH;V1.Suspense=BH;V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EH;V1.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=jv({},e.props),n=e.key,i=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,h=qo.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Fv.call(t,c)&&!Uv.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=a;else if(1<c){l=Array(c);for(var v=0;v<c;v++)l[v]=arguments[v+2];r.children=l}return{$$typeof:yr,type:e.type,key:n,ref:i,props:r,_owner:h}};V1.createContext=function(e){return e={$$typeof:yH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LH,_context:e},e.Consumer=e};V1.createElement=$v;V1.createFactory=function(e){var t=$v.bind(null,e);return t.type=e,t};V1.createRef=function(){return{current:null}};V1.forwardRef=function(e){return{$$typeof:CH,render:e}};V1.isValidElement=Ko;V1.lazy=function(e){return{$$typeof:_H,_payload:{_status:-1,_result:e},_init:AH}};V1.memo=function(e,t){return{$$typeof:SH,type:e,compare:t===void 0?null:t}};V1.startTransition=function(e){var t=ei.transition;ei.transition={};try{e()}finally{ei.transition=t}};V1.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};V1.useCallback=function(e,t){return It.current.useCallback(e,t)};V1.useContext=function(e){return It.current.useContext(e)};V1.useDebugValue=function(){};V1.useDeferredValue=function(e){return It.current.useDeferredValue(e)};V1.useEffect=function(e,t){return It.current.useEffect(e,t)};V1.useId=function(){return It.current.useId()};V1.useImperativeHandle=function(e,t,a){return It.current.useImperativeHandle(e,t,a)};V1.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};V1.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};V1.useMemo=function(e,t){return It.current.useMemo(e,t)};V1.useReducer=function(e,t,a){return It.current.useReducer(e,t,a)};V1.useRef=function(e){return It.current.useRef(e)};V1.useState=function(e){return It.current.useState(e)};V1.useSyncExternalStore=function(e,t,a){return It.current.useSyncExternalStore(e,t,a)};V1.useTransition=function(){return It.current.useTransition()};V1.version="18.2.0"});var Jt=x1((h_,Gv)=>{"use strict";Gv.exports=Wv()});var a8=x1(R1=>{"use strict";function Jo(e,t){var a=e.length;e.push(t);t:for(;0<a;){var r=a-1>>>1,n=e[r];if(0<ai(n,t))e[r]=t,e[a]=n,a=r;else break t}}function U2(e){return e.length===0?null:e[0]}function ni(e){if(e.length===0)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;t:for(var r=0,n=e.length,i=n>>>1;r<i;){var h=2*(r+1)-1,l=e[h],c=h+1,v=e[c];if(0>ai(l,a))c<n&&0>ai(v,l)?(e[r]=v,e[c]=a,r=c):(e[r]=l,e[h]=a,r=h);else if(c<n&&0>ai(v,a))e[r]=v,e[c]=a,r=c;else break t}}return t}function ai(e,t){var a=e.sortIndex-t.sortIndex;return a!==0?a:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(qv=performance,R1.unstable_now=function(){return qv.now()}):(Xo=Date,Kv=Xo.now(),R1.unstable_now=function(){return Xo.now()-Kv});var qv,Xo,Kv,ce=[],r0=[],kH=1,y2=null,Bt=3,ii=!1,Q0=!1,Br=!1,Qv=typeof setTimeout=="function"?setTimeout:null,Jv=typeof clearTimeout=="function"?clearTimeout:null,Xv=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Zo(e){for(var t=U2(r0);t!==null;){if(t.callback===null)ni(r0);else if(t.startTime<=e)ni(r0),t.sortIndex=t.expirationTime,Jo(ce,t);else break;t=U2(r0)}}function t3(e){if(Br=!1,Zo(e),!Q0)if(U2(ce)!==null)Q0=!0,a3(e3);else{var t=U2(r0);t!==null&&r3(t3,t.startTime-e)}}function e3(e,t){Q0=!1,Br&&(Br=!1,Jv(Sr),Sr=-1),ii=!0;var a=Bt;try{for(Zo(t),y2=U2(ce);y2!==null&&(!(y2.expirationTime>t)||e&&!e8());){var r=y2.callback;if(typeof r=="function"){y2.callback=null,Bt=y2.priorityLevel;var n=r(y2.expirationTime<=t);t=R1.unstable_now(),typeof n=="function"?y2.callback=n:y2===U2(ce)&&ni(ce),Zo(t)}else ni(ce);y2=U2(ce)}if(y2!==null)var i=!0;else{var h=U2(r0);h!==null&&r3(t3,h.startTime-t),i=!1}return i}finally{y2=null,Bt=a,ii=!1}}var hi=!1,ri=null,Sr=-1,Zv=5,t8=-1;function e8(){return!(R1.unstable_now()-t8<Zv)}function Yo(){if(ri!==null){var e=R1.unstable_now();t8=e;var t=!0;try{t=ri(!0,e)}finally{t?Cr():(hi=!1,ri=null)}}else hi=!1}var Cr;typeof Xv=="function"?Cr=function(){Xv(Yo)}:typeof MessageChannel<"u"?(Qo=new MessageChannel,Yv=Qo.port2,Qo.port1.onmessage=Yo,Cr=function(){Yv.postMessage(null)}):Cr=function(){Qv(Yo,0)};var Qo,Yv;function a3(e){ri=e,hi||(hi=!0,Cr())}function r3(e,t){Sr=Qv(function(){e(R1.unstable_now())},t)}R1.unstable_IdlePriority=5;R1.unstable_ImmediatePriority=1;R1.unstable_LowPriority=4;R1.unstable_NormalPriority=3;R1.unstable_Profiling=null;R1.unstable_UserBlockingPriority=2;R1.unstable_cancelCallback=function(e){e.callback=null};R1.unstable_continueExecution=function(){Q0||ii||(Q0=!0,a3(e3))};R1.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Zv=0<e?Math.floor(1e3/e):5};R1.unstable_getCurrentPriorityLevel=function(){return Bt};R1.unstable_getFirstCallbackNode=function(){return U2(ce)};R1.unstable_next=function(e){switch(Bt){case 1:case 2:case 3:var t=3;break;default:t=Bt}var a=Bt;Bt=t;try{return e()}finally{Bt=a}};R1.unstable_pauseExecution=function(){};R1.unstable_requestPaint=function(){};R1.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=Bt;Bt=e;try{return t()}finally{Bt=a}};R1.unstable_scheduleCallback=function(e,t,a){var r=R1.unstable_now();switch(typeof a=="object"&&a!==null?(a=a.delay,a=typeof a=="number"&&0<a?r+a:r):a=r,e){case 1:var n=-1;break;case 2:n=250;break;case 5:n=1073741823;break;case 4:n=1e4;break;default:n=5e3}return n=a+n,e={id:kH++,callback:t,priorityLevel:e,startTime:a,expirationTime:n,sortIndex:-1},a>r?(e.sortIndex=a,Jo(r0,e),U2(ce)===null&&e===U2(r0)&&(Br?(Jv(Sr),Sr=-1):Br=!0,r3(t3,a-r))):(e.sortIndex=n,Jo(ce,e),Q0||ii||(Q0=!0,a3(e3))),e};R1.unstable_shouldYield=e8;R1.unstable_wrapCallback=function(e){var t=Bt;return function(){var a=Bt;Bt=t;try{return e.apply(this,arguments)}finally{Bt=a}}}});var n8=x1((o_,r8)=>{"use strict";r8.exports=a8()});var su=x1(f2=>{"use strict";var vd=Jt(),g2=n8();function t1(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dd=new Set,Yr={};function s4(e,t){oa(e,t),oa(e+"Capture",t)}function oa(e,t){for(Yr[e]=t,e=0;e<t.length;e++)dd.add(t[e])}var De=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C3=Object.prototype.hasOwnProperty,PH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i8={},h8={};function DH(e){return C3.call(h8,e)?!0:C3.call(i8,e)?!1:PH.test(e)?h8[e]=!0:(i8[e]=!0,!1)}function IH(e,t,a,r){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jH(e,t,a,r){if(t===null||typeof t>"u"||IH(e,t,a,r))return!0;if(r)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,a,r,n,i,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=h}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mc=/[\-:]([a-z])/g;function mc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mc,mc);wt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mc,mc);wt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mc,mc);wt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hc(e,t,a,r){var n=wt.hasOwnProperty(t)?wt[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jH(t,a,n,r)&&(a=null),r||n===null?DH(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):n.mustUseProperty?e[n.propertyName]=a===null?n.type===3?!1:"":a:(t=n.attributeName,r=n.attributeNamespace,a===null?e.removeAttribute(t):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,r?e.setAttributeNS(r,t,a):e.setAttribute(t,a))))}var Ne=vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,li=Symbol.for("react.element"),$4=Symbol.for("react.portal"),W4=Symbol.for("react.fragment"),xc=Symbol.for("react.strict_mode"),B3=Symbol.for("react.profiler"),ud=Symbol.for("react.provider"),gd=Symbol.for("react.context"),Vc=Symbol.for("react.forward_ref"),S3=Symbol.for("react.suspense"),_3=Symbol.for("react.suspense_list"),wc=Symbol.for("react.memo"),i0=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var pd=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var l8=Symbol.iterator;function _r(e){return e===null||typeof e!="object"?null:(e=l8&&e[l8]||e["@@iterator"],typeof e=="function"?e:null)}var J1=Object.assign,n3;function Dr(e){if(n3===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);n3=t&&t[1]||""}return`
`+n3+e}var i3=!1;function h3(e,t){if(!e||i3)return"";i3=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var r=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){r=v}e.call(t.prototype)}else{try{throw Error()}catch(v){r=v}e()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var n=v.stack.split(`
`),i=r.stack.split(`
`),h=n.length-1,l=i.length-1;1<=h&&0<=l&&n[h]!==i[l];)l--;for(;1<=h&&0<=l;h--,l--)if(n[h]!==i[l]){if(h!==1||l!==1)do if(h--,l--,0>l||n[h]!==i[l]){var c=`
`+n[h].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=h&&0<=l);break}}}finally{i3=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?Dr(e):""}function RH(e){switch(e.tag){case 5:return Dr(e.type);case 16:return Dr("Lazy");case 13:return Dr("Suspense");case 19:return Dr("SuspenseList");case 0:case 2:case 15:return e=h3(e.type,!1),e;case 11:return e=h3(e.type.render,!1),e;case 1:return e=h3(e.type,!0),e;default:return""}}function T3(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W4:return"Fragment";case $4:return"Portal";case B3:return"Profiler";case xc:return"StrictMode";case S3:return"Suspense";case _3:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gd:return(e.displayName||"Context")+".Consumer";case ud:return(e._context.displayName||"Context")+".Provider";case Vc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wc:return t=e.displayName||null,t!==null?t:T3(e.type)||"Memo";case i0:t=e._payload,e=e._init;try{return T3(e(t))}catch{}}return null}function NH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T3(t);case 8:return t===xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function m0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function FH(e){var t=fd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(h){r=""+h,i.call(this,h)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function oi(e){e._valueTracker||(e._valueTracker=FH(e))}function zd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=fd(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function Pi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function O3(e,t){var a=t.checked;return J1({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function o8(e,t){var a=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;a=m0(t.value!=null?t.value:a),e._wrapperState={initialChecked:r,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Md(e,t){t=t.checked,t!=null&&Hc(e,"checked",t,!1)}function b3(e,t){Md(e,t);var a=m0(t.value),r=t.type;if(a!=null)r==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?A3(e,t.type,a):t.hasOwnProperty("defaultValue")&&A3(e,t.type,m0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function c8(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function A3(e,t,a){(t!=="number"||Pi(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Ir=Array.isArray;function aa(e,t,a,r){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&r&&(e[a].defaultSelected=!0)}else{for(a=""+m0(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function E3(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(t1(91));return J1({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function s8(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(t1(92));if(Ir(a)){if(1<a.length)throw Error(t1(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:m0(a)}}function md(e,t){var a=m0(t.value),r=m0(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),r!=null&&(e.defaultValue=""+r)}function v8(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function k3(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ci,xd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,a,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ci=ci||document.createElement("div"),ci.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ci.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qr(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UH=["Webkit","ms","Moz","O"];Object.keys(Nr).forEach(function(e){UH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nr[t]=Nr[e]})});function Vd(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Nr.hasOwnProperty(e)&&Nr[e]?(""+t).trim():t+"px"}function wd(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var r=a.indexOf("--")===0,n=Vd(a,t[a],r);a==="float"&&(a="cssFloat"),r?e.setProperty(a,n):e[a]=n}}var $H=J1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P3(e,t){if(t){if($H[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(t1(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(t1(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(t1(61))}if(t.style!=null&&typeof t.style!="object")throw Error(t1(62))}}function D3(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I3=null;function Lc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var j3=null,ra=null,na=null;function d8(e){if(e=fn(e)){if(typeof j3!="function")throw Error(t1(280));var t=e.stateNode;t&&(t=sh(t),j3(e.stateNode,e.type,t))}}function Ld(e){ra?na?na.push(e):na=[e]:ra=e}function yd(){if(ra){var e=ra,t=na;if(na=ra=null,d8(e),t)for(e=0;e<t.length;e++)d8(t[e])}}function Cd(e,t){return e(t)}function Bd(){}var l3=!1;function Sd(e,t,a){if(l3)return e(t,a);l3=!0;try{return Cd(e,t,a)}finally{l3=!1,(ra!==null||na!==null)&&(Bd(),yd())}}function Jr(e,t){var a=e.stateNode;if(a===null)return null;var r=sh(a);if(r===null)return null;a=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(t1(231,t,typeof a));return a}var R3=!1;if(De)try{F4={},Object.defineProperty(F4,"passive",{get:function(){R3=!0}}),window.addEventListener("test",F4,F4),window.removeEventListener("test",F4,F4)}catch{R3=!1}var F4;function WH(e,t,a,r,n,i,h,l,c){var v=Array.prototype.slice.call(arguments,3);try{t.apply(a,v)}catch(d){this.onError(d)}}var Fr=!1,Di=null,Ii=!1,N3=null,GH={onError:function(e){Fr=!0,Di=e}};function qH(e,t,a,r,n,i,h,l,c){Fr=!1,Di=null,WH.apply(GH,arguments)}function KH(e,t,a,r,n,i,h,l,c){if(qH.apply(this,arguments),Fr){if(Fr){var v=Di;Fr=!1,Di=null}else throw Error(t1(198));Ii||(Ii=!0,N3=v)}}function v4(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function _d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function u8(e){if(v4(e)!==e)throw Error(t1(188))}function XH(e){var t=e.alternate;if(!t){if(t=v4(e),t===null)throw Error(t1(188));return t!==e?null:e}for(var a=e,r=t;;){var n=a.return;if(n===null)break;var i=n.alternate;if(i===null){if(r=n.return,r!==null){a=r;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return u8(n),e;if(i===r)return u8(n),t;i=i.sibling}throw Error(t1(188))}if(a.return!==r.return)a=n,r=i;else{for(var h=!1,l=n.child;l;){if(l===a){h=!0,a=n,r=i;break}if(l===r){h=!0,r=n,a=i;break}l=l.sibling}if(!h){for(l=i.child;l;){if(l===a){h=!0,a=i,r=n;break}if(l===r){h=!0,r=i,a=n;break}l=l.sibling}if(!h)throw Error(t1(189))}}if(a.alternate!==r)throw Error(t1(190))}if(a.tag!==3)throw Error(t1(188));return a.stateNode.current===a?e:t}function Td(e){return e=XH(e),e!==null?Od(e):null}function Od(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Od(e);if(t!==null)return t;e=e.sibling}return null}var bd=g2.unstable_scheduleCallback,g8=g2.unstable_cancelCallback,YH=g2.unstable_shouldYield,QH=g2.unstable_requestPaint,ht=g2.unstable_now,JH=g2.unstable_getCurrentPriorityLevel,yc=g2.unstable_ImmediatePriority,Ad=g2.unstable_UserBlockingPriority,ji=g2.unstable_NormalPriority,ZH=g2.unstable_LowPriority,Ed=g2.unstable_IdlePriority,hh=null,ue=null;function tx(e){if(ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot(hh,e,void 0,(e.current.flags&128)===128)}catch{}}var K2=Math.clz32?Math.clz32:rx,ex=Math.log,ax=Math.LN2;function rx(e){return e>>>=0,e===0?32:31-(ex(e)/ax|0)|0}var si=64,vi=4194304;function jr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ri(e,t){var a=e.pendingLanes;if(a===0)return 0;var r=0,n=e.suspendedLanes,i=e.pingedLanes,h=a&268435455;if(h!==0){var l=h&~n;l!==0?r=jr(l):(i&=h,i!==0&&(r=jr(i)))}else h=a&~n,h!==0?r=jr(h):i!==0&&(r=jr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(r&4&&(r|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)a=31-K2(t),n=1<<a,r|=e[a],t&=~n;return r}function nx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ix(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var h=31-K2(i),l=1<<h,c=n[h];c===-1?(!(l&a)||l&r)&&(n[h]=nx(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function F3(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function kd(){var e=si;return si<<=1,!(si&4194240)&&(si=64),e}function o3(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function gn(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-K2(t),e[t]=a}function hx(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<a;){var n=31-K2(a),i=1<<n;t[n]=0,r[n]=-1,e[n]=-1,a&=~i}}function Cc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-K2(a),n=1<<r;n&t|e[r]&t&&(e[r]|=t),a&=~n}}var b1=0;function Pd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Dd,Bc,Id,jd,Rd,U3=!1,di=[],v0=null,d0=null,u0=null,Zr=new Map,tn=new Map,l0=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p8(e,t){switch(e){case"focusin":case"focusout":v0=null;break;case"dragenter":case"dragleave":d0=null;break;case"mouseover":case"mouseout":u0=null;break;case"pointerover":case"pointerout":Zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tn.delete(t.pointerId)}}function Tr(e,t,a,r,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:i,targetContainers:[n]},t!==null&&(t=fn(t),t!==null&&Bc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function ox(e,t,a,r,n){switch(t){case"focusin":return v0=Tr(v0,e,t,a,r,n),!0;case"dragenter":return d0=Tr(d0,e,t,a,r,n),!0;case"mouseover":return u0=Tr(u0,e,t,a,r,n),!0;case"pointerover":var i=n.pointerId;return Zr.set(i,Tr(Zr.get(i)||null,e,t,a,r,n)),!0;case"gotpointercapture":return i=n.pointerId,tn.set(i,Tr(tn.get(i)||null,e,t,a,r,n)),!0}return!1}function Nd(e){var t=t4(e.target);if(t!==null){var a=v4(t);if(a!==null){if(t=a.tag,t===13){if(t=_d(a),t!==null){e.blockedOn=t,Rd(e.priority,function(){Id(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ci(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=$3(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);I3=r,a.target.dispatchEvent(r),I3=null}else return t=fn(a),t!==null&&Bc(t),e.blockedOn=a,!1;t.shift()}return!0}function f8(e,t,a){Ci(e)&&a.delete(t)}function cx(){U3=!1,v0!==null&&Ci(v0)&&(v0=null),d0!==null&&Ci(d0)&&(d0=null),u0!==null&&Ci(u0)&&(u0=null),Zr.forEach(f8),tn.forEach(f8)}function Or(e,t){e.blockedOn===t&&(e.blockedOn=null,U3||(U3=!0,g2.unstable_scheduleCallback(g2.unstable_NormalPriority,cx)))}function en(e){function t(n){return Or(n,e)}if(0<di.length){Or(di[0],e);for(var a=1;a<di.length;a++){var r=di[a];r.blockedOn===e&&(r.blockedOn=null)}}for(v0!==null&&Or(v0,e),d0!==null&&Or(d0,e),u0!==null&&Or(u0,e),Zr.forEach(t),tn.forEach(t),a=0;a<l0.length;a++)r=l0[a],r.blockedOn===e&&(r.blockedOn=null);for(;0<l0.length&&(a=l0[0],a.blockedOn===null);)Nd(a),a.blockedOn===null&&l0.shift()}var ia=Ne.ReactCurrentBatchConfig,Ni=!0;function sx(e,t,a,r){var n=b1,i=ia.transition;ia.transition=null;try{b1=1,Sc(e,t,a,r)}finally{b1=n,ia.transition=i}}function vx(e,t,a,r){var n=b1,i=ia.transition;ia.transition=null;try{b1=4,Sc(e,t,a,r)}finally{b1=n,ia.transition=i}}function Sc(e,t,a,r){if(Ni){var n=$3(e,t,a,r);if(n===null)p3(e,t,r,Fi,a),p8(e,r);else if(ox(n,e,t,a,r))r.stopPropagation();else if(p8(e,r),t&4&&-1<lx.indexOf(e)){for(;n!==null;){var i=fn(n);if(i!==null&&Dd(i),i=$3(e,t,a,r),i===null&&p3(e,t,r,Fi,a),i===n)break;n=i}n!==null&&r.stopPropagation()}else p3(e,t,r,null,a)}}var Fi=null;function $3(e,t,a,r){if(Fi=null,e=Lc(r),e=t4(e),e!==null)if(t=v4(e),t===null)e=null;else if(a=t.tag,a===13){if(e=_d(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fi=e,null}function Fd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JH()){case yc:return 1;case Ad:return 4;case ji:case ZH:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var c0=null,_c=null,Bi=null;function Ud(){if(Bi)return Bi;var e,t=_c,a=t.length,r,n="value"in c0?c0.value:c0.textContent,i=n.length;for(e=0;e<a&&t[e]===n[e];e++);var h=a-e;for(r=1;r<=h&&t[a-r]===n[i-r];r++);return Bi=n.slice(e,1<r?1-r:void 0)}function Si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ui(){return!0}function z8(){return!1}function p2(e){function t(a,r,n,i,h){this._reactName=a,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=h,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ui:z8,this.isPropagationStopped=z8,this}return J1(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),t}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tc=p2(pa),pn=J1({},pa,{view:0,detail:0}),dx=p2(pn),c3,s3,br,lh=J1({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==br&&(br&&e.type==="mousemove"?(c3=e.screenX-br.screenX,s3=e.screenY-br.screenY):s3=c3=0,br=e),c3)},movementY:function(e){return"movementY"in e?e.movementY:s3}}),M8=p2(lh),ux=J1({},lh,{dataTransfer:0}),gx=p2(ux),px=J1({},pn,{relatedTarget:0}),v3=p2(px),fx=J1({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),zx=p2(fx),Mx=J1({},pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mx=p2(Mx),Hx=J1({},pa,{data:0}),m8=p2(Hx),xx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wx[e])?!!t[e]:!1}function Oc(){return Lx}var yx=J1({},pn,{key:function(e){if(e.key){var t=xx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cx=p2(yx),Bx=J1({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H8=p2(Bx),Sx=J1({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),_x=p2(Sx),Tx=J1({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ox=p2(Tx),bx=J1({},lh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ax=p2(bx),Ex=[9,13,27,32],bc=De&&"CompositionEvent"in window,Ur=null;De&&"documentMode"in document&&(Ur=document.documentMode);var kx=De&&"TextEvent"in window&&!Ur,$d=De&&(!bc||Ur&&8<Ur&&11>=Ur),x8=String.fromCharCode(32),V8=!1;function Wd(e,t){switch(e){case"keyup":return Ex.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var G4=!1;function Px(e,t){switch(e){case"compositionend":return Gd(t);case"keypress":return t.which!==32?null:(V8=!0,x8);case"textInput":return e=t.data,e===x8&&V8?null:e;default:return null}}function Dx(e,t){if(G4)return e==="compositionend"||!bc&&Wd(e,t)?(e=Ud(),Bi=_c=c0=null,G4=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $d&&t.locale!=="ko"?null:t.data;default:return null}}var Ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ix[e.type]:t==="textarea"}function qd(e,t,a,r){Ld(r),t=Ui(t,"onChange"),0<t.length&&(a=new Tc("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var $r=null,an=null;function jx(e){n7(e,0)}function oh(e){var t=X4(e);if(zd(t))return e}function Rx(e,t){if(e==="change")return t}var Kd=!1;De&&(De?(pi="oninput"in document,pi||(d3=document.createElement("div"),d3.setAttribute("oninput","return;"),pi=typeof d3.oninput=="function"),gi=pi):gi=!1,Kd=gi&&(!document.documentMode||9<document.documentMode));var gi,pi,d3;function L8(){$r&&($r.detachEvent("onpropertychange",Xd),an=$r=null)}function Xd(e){if(e.propertyName==="value"&&oh(an)){var t=[];qd(t,an,e,Lc(e)),Sd(jx,t)}}function Nx(e,t,a){e==="focusin"?(L8(),$r=t,an=a,$r.attachEvent("onpropertychange",Xd)):e==="focusout"&&L8()}function Fx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oh(an)}function Ux(e,t){if(e==="click")return oh(t)}function $x(e,t){if(e==="input"||e==="change")return oh(t)}function Wx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Y2=typeof Object.is=="function"?Object.is:Wx;function rn(e,t){if(Y2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var n=a[r];if(!C3.call(t,n)||!Y2(e[n],t[n]))return!1}return!0}function y8(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function C8(e,t){var a=y8(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=y8(a)}}function Yd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qd(){for(var e=window,t=Pi();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Pi(e.document)}return t}function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gx(e){var t=Qd(),a=e.focusedElem,r=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&Yd(a.ownerDocument.documentElement,a)){if(r!==null&&Ac(a)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=a.textContent.length,i=Math.min(r.start,n);r=r.end===void 0?i:Math.min(r.end,n),!e.extend&&i>r&&(n=r,r=i,i=n),n=C8(a,i);var h=C8(a,r);n&&h&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qx=De&&"documentMode"in document&&11>=document.documentMode,q4=null,W3=null,Wr=null,G3=!1;function B8(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;G3||q4==null||q4!==Pi(r)||(r=q4,"selectionStart"in r&&Ac(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wr&&rn(Wr,r)||(Wr=r,r=Ui(W3,"onSelect"),0<r.length&&(t=new Tc("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=q4)))}function fi(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var K4={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},u3={},Jd={};De&&(Jd=document.createElement("div").style,"AnimationEvent"in window||(delete K4.animationend.animation,delete K4.animationiteration.animation,delete K4.animationstart.animation),"TransitionEvent"in window||delete K4.transitionend.transition);function ch(e){if(u3[e])return u3[e];if(!K4[e])return e;var t=K4[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Jd)return u3[e]=t[a];return e}var Zd=ch("animationend"),t7=ch("animationiteration"),e7=ch("animationstart"),a7=ch("transitionend"),r7=new Map,S8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function x0(e,t){r7.set(e,t),s4(t,[e])}for(zi=0;zi<S8.length;zi++)Mi=S8[zi],_8=Mi.toLowerCase(),T8=Mi[0].toUpperCase()+Mi.slice(1),x0(_8,"on"+T8);var Mi,_8,T8,zi;x0(Zd,"onAnimationEnd");x0(t7,"onAnimationIteration");x0(e7,"onAnimationStart");x0("dblclick","onDoubleClick");x0("focusin","onFocus");x0("focusout","onBlur");x0(a7,"onTransitionEnd");oa("onMouseEnter",["mouseout","mouseover"]);oa("onMouseLeave",["mouseout","mouseover"]);oa("onPointerEnter",["pointerout","pointerover"]);oa("onPointerLeave",["pointerout","pointerover"]);s4("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));s4("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));s4("onBeforeInput",["compositionend","keypress","textInput","paste"]);s4("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));s4("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));s4("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function O8(e,t,a){var r=e.type||"unknown-event";e.currentTarget=a,KH(r,t,void 0,e),e.currentTarget=null}function n7(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],n=r.event;r=r.listeners;t:{var i=void 0;if(t)for(var h=r.length-1;0<=h;h--){var l=r[h],c=l.instance,v=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break t;O8(n,l,v),i=c}else for(h=0;h<r.length;h++){if(l=r[h],c=l.instance,v=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break t;O8(n,l,v),i=c}}}if(Ii)throw e=N3,Ii=!1,N3=null,e}function W1(e,t){var a=t[Q3];a===void 0&&(a=t[Q3]=new Set);var r=e+"__bubble";a.has(r)||(i7(t,e,2,!1),a.add(r))}function g3(e,t,a){var r=0;t&&(r|=4),i7(a,e,r,t)}var mi="_reactListening"+Math.random().toString(36).slice(2);function nn(e){if(!e[mi]){e[mi]=!0,dd.forEach(function(a){a!=="selectionchange"&&(Kx.has(a)||g3(a,!1,e),g3(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mi]||(t[mi]=!0,g3("selectionchange",!1,t))}}function i7(e,t,a,r){switch(Fd(t)){case 1:var n=sx;break;case 4:n=vx;break;default:n=Sc}a=n.bind(null,t,a,e),n=void 0,!R3||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function p3(e,t,a,r,n){var i=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var l=r.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(h===4)for(h=r.return;h!==null;){var c=h.tag;if((c===3||c===4)&&(c=h.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;h=h.return}for(;l!==null;){if(h=t4(l),h===null)return;if(c=h.tag,c===5||c===6){r=i=h;continue t}l=l.parentNode}}r=r.return}Sd(function(){var v=i,d=Lc(a),z=[];t:{var L=r7.get(e);if(L!==void 0){var y=Tc,w=e;switch(e){case"keypress":if(Si(a)===0)break t;case"keydown":case"keyup":y=Cx;break;case"focusin":w="focus",y=v3;break;case"focusout":w="blur",y=v3;break;case"beforeblur":case"afterblur":y=v3;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=M8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_x;break;case Zd:case t7:case e7:y=zx;break;case a7:y=Ox;break;case"scroll":y=dx;break;case"wheel":y=Ax;break;case"copy":case"cut":case"paste":y=mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=H8}var O=(t&4)!==0,k=!O&&e==="scroll",V=O?L!==null?L+"Capture":null:L;O=[];for(var x=v,C;x!==null;){C=x;var T=C.stateNode;if(C.tag===5&&T!==null&&(C=T,V!==null&&(T=Jr(x,V),T!=null&&O.push(hn(x,T,C)))),k)break;x=x.return}0<O.length&&(L=new y(L,w,null,a,d),z.push({event:L,listeners:O}))}}if(!(t&7)){t:{if(L=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",L&&a!==I3&&(w=a.relatedTarget||a.fromElement)&&(t4(w)||w[Ie]))break t;if((y||L)&&(L=d.window===d?d:(L=d.ownerDocument)?L.defaultView||L.parentWindow:window,y?(w=a.relatedTarget||a.toElement,y=v,w=w?t4(w):null,w!==null&&(k=v4(w),w!==k||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=v),y!==w)){if(O=M8,T="onMouseLeave",V="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(O=H8,T="onPointerLeave",V="onPointerEnter",x="pointer"),k=y==null?L:X4(y),C=w==null?L:X4(w),L=new O(T,x+"leave",y,a,d),L.target=k,L.relatedTarget=C,T=null,t4(d)===v&&(O=new O(V,x+"enter",w,a,d),O.target=C,O.relatedTarget=k,T=O),k=T,y&&w)e:{for(O=y,V=w,x=0,C=O;C;C=U4(C))x++;for(C=0,T=V;T;T=U4(T))C++;for(;0<x-C;)O=U4(O),x--;for(;0<C-x;)V=U4(V),C--;for(;x--;){if(O===V||V!==null&&O===V.alternate)break e;O=U4(O),V=U4(V)}O=null}else O=null;y!==null&&b8(z,L,y,O,!1),w!==null&&k!==null&&b8(z,k,w,O,!0)}}t:{if(L=v?X4(v):window,y=L.nodeName&&L.nodeName.toLowerCase(),y==="select"||y==="input"&&L.type==="file")var S=Rx;else if(w8(L))if(Kd)S=$x;else{S=Fx;var R=Nx}else(y=L.nodeName)&&y.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(S=Ux);if(S&&(S=S(e,v))){qd(z,S,a,d);break t}R&&R(e,L,v),e==="focusout"&&(R=L._wrapperState)&&R.controlled&&L.type==="number"&&A3(L,"number",L.value)}switch(R=v?X4(v):window,e){case"focusin":(w8(R)||R.contentEditable==="true")&&(q4=R,W3=v,Wr=null);break;case"focusout":Wr=W3=q4=null;break;case"mousedown":G3=!0;break;case"contextmenu":case"mouseup":case"dragend":G3=!1,B8(z,a,d);break;case"selectionchange":if(qx)break;case"keydown":case"keyup":B8(z,a,d)}var N;if(bc)t:{switch(e){case"compositionstart":var $="onCompositionStart";break t;case"compositionend":$="onCompositionEnd";break t;case"compositionupdate":$="onCompositionUpdate";break t}$=void 0}else G4?Wd(e,a)&&($="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&($="onCompositionStart");$&&($d&&a.locale!=="ko"&&(G4||$!=="onCompositionStart"?$==="onCompositionEnd"&&G4&&(N=Ud()):(c0=d,_c="value"in c0?c0.value:c0.textContent,G4=!0)),R=Ui(v,$),0<R.length&&($=new m8($,e,null,a,d),z.push({event:$,listeners:R}),N?$.data=N:(N=Gd(a),N!==null&&($.data=N)))),(N=kx?Px(e,a):Dx(e,a))&&(v=Ui(v,"onBeforeInput"),0<v.length&&(d=new m8("onBeforeInput","beforeinput",null,a,d),z.push({event:d,listeners:v}),d.data=N))}n7(z,t)})}function hn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ui(e,t){for(var a=t+"Capture",r=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Jr(e,a),i!=null&&r.unshift(hn(e,i,n)),i=Jr(e,t),i!=null&&r.push(hn(e,i,n))),e=e.return}return r}function U4(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function b8(e,t,a,r,n){for(var i=t._reactName,h=[];a!==null&&a!==r;){var l=a,c=l.alternate,v=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&v!==null&&(l=v,n?(c=Jr(a,i),c!=null&&h.unshift(hn(a,c,l))):n||(c=Jr(a,i),c!=null&&h.push(hn(a,c,l)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var Xx=/\r\n?/g,Yx=/\u0000|\uFFFD/g;function A8(e){return(typeof e=="string"?e:""+e).replace(Xx,`
`).replace(Yx,"")}function Hi(e,t,a){if(t=A8(t),A8(e)!==t&&a)throw Error(t1(425))}function $i(){}var q3=null,K3=null;function X3(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Y3=typeof setTimeout=="function"?setTimeout:void 0,Qx=typeof clearTimeout=="function"?clearTimeout:void 0,E8=typeof Promise=="function"?Promise:void 0,Jx=typeof queueMicrotask=="function"?queueMicrotask:typeof E8<"u"?function(e){return E8.resolve(null).then(e).catch(Zx)}:Y3;function Zx(e){setTimeout(function(){throw e})}function f3(e,t){var a=t,r=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){e.removeChild(n),en(t);return}r--}else a!=="$"&&a!=="$?"&&a!=="$!"||r++;a=n}while(a);en(t)}function g0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function k8(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),de="__reactFiber$"+fa,ln="__reactProps$"+fa,Ie="__reactContainer$"+fa,Q3="__reactEvents$"+fa,tV="__reactListeners$"+fa,eV="__reactHandles$"+fa;function t4(e){var t=e[de];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ie]||a[de]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=k8(e);e!==null;){if(a=e[de])return a;e=k8(e)}return t}e=a,a=e.parentNode}return null}function fn(e){return e=e[de]||e[Ie],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function X4(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(t1(33))}function sh(e){return e[ln]||null}var J3=[],Y4=-1;function V0(e){return{current:e}}function G1(e){0>Y4||(e.current=J3[Y4],J3[Y4]=null,Y4--)}function N1(e,t){Y4++,J3[Y4]=e.current,e.current=t}var H0={},Ot=V0(H0),e2=V0(!1),i4=H0;function ca(e,t){var a=e.type.contextTypes;if(!a)return H0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in a)n[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function a2(e){return e=e.childContextTypes,e!=null}function Wi(){G1(e2),G1(Ot)}function P8(e,t,a){if(Ot.current!==H0)throw Error(t1(168));N1(Ot,t),N1(e2,a)}function h7(e,t,a){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return a;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(t1(108,NH(e)||"Unknown",n));return J1({},a,r)}function Gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||H0,i4=Ot.current,N1(Ot,e),N1(e2,e2.current),!0}function D8(e,t,a){var r=e.stateNode;if(!r)throw Error(t1(169));a?(e=h7(e,t,i4),r.__reactInternalMemoizedMergedChildContext=e,G1(e2),G1(Ot),N1(Ot,e)):G1(e2),N1(e2,a)}var Ae=null,vh=!1,z3=!1;function l7(e){Ae===null?Ae=[e]:Ae.push(e)}function aV(e){vh=!0,l7(e)}function w0(){if(!z3&&Ae!==null){z3=!0;var e=0,t=b1;try{var a=Ae;for(b1=1;e<a.length;e++){var r=a[e];do r=r(!0);while(r!==null)}Ae=null,vh=!1}catch(n){throw Ae!==null&&(Ae=Ae.slice(e+1)),bd(yc,w0),n}finally{b1=t,z3=!1}}return null}var Q4=[],J4=0,qi=null,Ki=0,C2=[],B2=0,h4=null,Ee=1,ke="";function J0(e,t){Q4[J4++]=Ki,Q4[J4++]=qi,qi=e,Ki=t}function o7(e,t,a){C2[B2++]=Ee,C2[B2++]=ke,C2[B2++]=h4,h4=e;var r=Ee;e=ke;var n=32-K2(r)-1;r&=~(1<<n),a+=1;var i=32-K2(t)+n;if(30<i){var h=n-n%5;i=(r&(1<<h)-1).toString(32),r>>=h,n-=h,Ee=1<<32-K2(t)+n|a<<n|r,ke=i+e}else Ee=1<<i|a<<n|r,ke=e}function Ec(e){e.return!==null&&(J0(e,1),o7(e,1,0))}function kc(e){for(;e===qi;)qi=Q4[--J4],Q4[J4]=null,Ki=Q4[--J4],Q4[J4]=null;for(;e===h4;)h4=C2[--B2],C2[B2]=null,ke=C2[--B2],C2[B2]=null,Ee=C2[--B2],C2[B2]=null}var u2=null,d2=null,K1=!1,q2=null;function c7(e,t){var a=S2(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function I8(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,u2=e,d2=g0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,u2=e,d2=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=h4!==null?{id:Ee,overflow:ke}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=S2(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,u2=e,d2=null,!0):!1;default:return!1}}function Z3(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tc(e){if(K1){var t=d2;if(t){var a=t;if(!I8(e,t)){if(Z3(e))throw Error(t1(418));t=g0(a.nextSibling);var r=u2;t&&I8(e,t)?c7(r,a):(e.flags=e.flags&-4097|2,K1=!1,u2=e)}}else{if(Z3(e))throw Error(t1(418));e.flags=e.flags&-4097|2,K1=!1,u2=e}}}function j8(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;u2=e}function xi(e){if(e!==u2)return!1;if(!K1)return j8(e),K1=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!X3(e.type,e.memoizedProps)),t&&(t=d2)){if(Z3(e))throw s7(),Error(t1(418));for(;t;)c7(e,t),t=g0(t.nextSibling)}if(j8(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(t1(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){d2=g0(e.nextSibling);break t}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}d2=null}}else d2=u2?g0(e.stateNode.nextSibling):null;return!0}function s7(){for(var e=d2;e;)e=g0(e.nextSibling)}function sa(){d2=u2=null,K1=!1}function Pc(e){q2===null?q2=[e]:q2.push(e)}var rV=Ne.ReactCurrentBatchConfig;function W2(e,t){if(e&&e.defaultProps){t=J1({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}var Xi=V0(null),Yi=null,Z4=null,Dc=null;function Ic(){Dc=Z4=Yi=null}function jc(e){var t=Xi.current;G1(Xi),e._currentValue=t}function ec(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function ha(e,t){Yi=e,Dc=Z4=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(t2=!0),e.firstContext=null)}function T2(e){var t=e._currentValue;if(Dc!==e)if(e={context:e,memoizedValue:t,next:null},Z4===null){if(Yi===null)throw Error(t1(308));Z4=e,Yi.dependencies={lanes:0,firstContext:e}}else Z4=Z4.next=e;return t}var e4=null;function Rc(e){e4===null?e4=[e]:e4.push(e)}function v7(e,t,a,r){var n=t.interleaved;return n===null?(a.next=a,Rc(t)):(a.next=n.next,n.next=a),t.interleaved=a,je(e,r)}function je(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var h0=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pe(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function p0(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,C1&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,je(e,a)}return n=r.interleaved,n===null?(t.next=t,Rc(r)):(t.next=n.next,n.next=t),r.interleaved=t,je(e,a)}function _i(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Cc(e,a)}}function R8(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var n=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var h={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};i===null?n=i=h:i=i.next=h,a=a.next}while(a!==null);i===null?n=i=t:i=i.next=t}else n=i=t;a={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Qi(e,t,a,r){var n=e.updateQueue;h0=!1;var i=n.firstBaseUpdate,h=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,v=c.next;c.next=null,h===null?i=v:h.next=v,h=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==h&&(l===null?d.firstBaseUpdate=v:l.next=v,d.lastBaseUpdate=c))}if(i!==null){var z=n.baseState;h=0,d=v=c=null,l=i;do{var L=l.lane,y=l.eventTime;if((r&L)===L){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var w=e,O=l;switch(L=t,y=a,O.tag){case 1:if(w=O.payload,typeof w=="function"){z=w.call(y,z,L);break t}z=w;break t;case 3:w.flags=w.flags&-65537|128;case 0:if(w=O.payload,L=typeof w=="function"?w.call(y,z,L):w,L==null)break t;z=J1({},z,L);break t;case 2:h0=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,L=n.effects,L===null?n.effects=[l]:L.push(l))}else y={eventTime:y,lane:L,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(v=d=y,c=z):d=d.next=y,h|=L;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;L=l,l=L.next,L.next=null,n.lastBaseUpdate=L,n.shared.pending=null}}while(1);if(d===null&&(c=z),n.baseState=c,n.firstBaseUpdate=v,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do h|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);o4|=h,e.lanes=h,e.memoizedState=z}}function N8(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=a,typeof n!="function")throw Error(t1(191,n));n.call(r)}}}var u7=new vd.Component().refs;function ac(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:J1({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var dh={isMounted:function(e){return(e=e._reactInternals)?v4(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var r=Rt(),n=z0(e),i=Pe(r,n);i.payload=t,a!=null&&(i.callback=a),t=p0(e,i,n),t!==null&&(X2(t,e,n,r),_i(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=Rt(),n=z0(e),i=Pe(r,n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=p0(e,i,n),t!==null&&(X2(t,e,n,r),_i(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Rt(),r=z0(e),n=Pe(a,r);n.tag=2,t!=null&&(n.callback=t),t=p0(e,n,r),t!==null&&(X2(t,e,r,a),_i(t,e,r))}};function F8(e,t,a,r,n,i,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,h):t.prototype&&t.prototype.isPureReactComponent?!rn(a,r)||!rn(n,i):!0}function g7(e,t,a){var r=!1,n=H0,i=t.contextType;return typeof i=="object"&&i!==null?i=T2(i):(n=a2(t)?i4:Ot.current,r=t.contextTypes,i=(r=r!=null)?ca(e,n):H0),t=new t(a,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function U8(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&dh.enqueueReplaceState(t,t.state,null)}function rc(e,t,a,r){var n=e.stateNode;n.props=a,n.state=e.memoizedState,n.refs=u7,Nc(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=T2(i):(i=a2(t)?i4:Ot.current,n.context=ca(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ac(e,t,i,a),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&dh.enqueueReplaceState(n,n.state,null),Qi(e,a,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Ar(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t1(309));var r=a.stateNode}if(!r)throw Error(t1(147,e));var n=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(h){var l=n.refs;l===u7&&(l=n.refs={}),h===null?delete l[i]:l[i]=h},t._stringRef=i,t)}if(typeof e!="string")throw Error(t1(284));if(!a._owner)throw Error(t1(290,e))}return e}function Vi(e,t){throw e=Object.prototype.toString.call(t),Error(t1(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $8(e){var t=e._init;return t(e._payload)}function p7(e){function t(V,x){if(e){var C=V.deletions;C===null?(V.deletions=[x],V.flags|=16):C.push(x)}}function a(V,x){if(!e)return null;for(;x!==null;)t(V,x),x=x.sibling;return null}function r(V,x){for(V=new Map;x!==null;)x.key!==null?V.set(x.key,x):V.set(x.index,x),x=x.sibling;return V}function n(V,x){return V=M0(V,x),V.index=0,V.sibling=null,V}function i(V,x,C){return V.index=C,e?(C=V.alternate,C!==null?(C=C.index,C<x?(V.flags|=2,x):C):(V.flags|=2,x)):(V.flags|=1048576,x)}function h(V){return e&&V.alternate===null&&(V.flags|=2),V}function l(V,x,C,T){return x===null||x.tag!==6?(x=L3(C,V.mode,T),x.return=V,x):(x=n(x,C),x.return=V,x)}function c(V,x,C,T){var S=C.type;return S===W4?d(V,x,C.props.children,T,C.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===i0&&$8(S)===x.type)?(T=n(x,C.props),T.ref=Ar(V,x,C),T.return=V,T):(T=ki(C.type,C.key,C.props,null,V.mode,T),T.ref=Ar(V,x,C),T.return=V,T)}function v(V,x,C,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=y3(C,V.mode,T),x.return=V,x):(x=n(x,C.children||[]),x.return=V,x)}function d(V,x,C,T,S){return x===null||x.tag!==7?(x=n4(C,V.mode,T,S),x.return=V,x):(x=n(x,C),x.return=V,x)}function z(V,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=L3(""+x,V.mode,C),x.return=V,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case li:return C=ki(x.type,x.key,x.props,null,V.mode,C),C.ref=Ar(V,null,x),C.return=V,C;case $4:return x=y3(x,V.mode,C),x.return=V,x;case i0:var T=x._init;return z(V,T(x._payload),C)}if(Ir(x)||_r(x))return x=n4(x,V.mode,C,null),x.return=V,x;Vi(V,x)}return null}function L(V,x,C,T){var S=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return S!==null?null:l(V,x,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case li:return C.key===S?c(V,x,C,T):null;case $4:return C.key===S?v(V,x,C,T):null;case i0:return S=C._init,L(V,x,S(C._payload),T)}if(Ir(C)||_r(C))return S!==null?null:d(V,x,C,T,null);Vi(V,C)}return null}function y(V,x,C,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return V=V.get(C)||null,l(x,V,""+T,S);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case li:return V=V.get(T.key===null?C:T.key)||null,c(x,V,T,S);case $4:return V=V.get(T.key===null?C:T.key)||null,v(x,V,T,S);case i0:var R=T._init;return y(V,x,C,R(T._payload),S)}if(Ir(T)||_r(T))return V=V.get(C)||null,d(x,V,T,S,null);Vi(x,T)}return null}function w(V,x,C,T){for(var S=null,R=null,N=x,$=x=0,e1=null;N!==null&&$<C.length;$++){N.index>$?(e1=N,N=null):e1=N.sibling;var r1=L(V,N,C[$],T);if(r1===null){N===null&&(N=e1);break}e&&N&&r1.alternate===null&&t(V,N),x=i(r1,x,$),R===null?S=r1:R.sibling=r1,R=r1,N=e1}if($===C.length)return a(V,N),K1&&J0(V,$),S;if(N===null){for(;$<C.length;$++)N=z(V,C[$],T),N!==null&&(x=i(N,x,$),R===null?S=N:R.sibling=N,R=N);return K1&&J0(V,$),S}for(N=r(V,N);$<C.length;$++)e1=y(N,V,$,C[$],T),e1!==null&&(e&&e1.alternate!==null&&N.delete(e1.key===null?$:e1.key),x=i(e1,x,$),R===null?S=e1:R.sibling=e1,R=e1);return e&&N.forEach(function(Y){return t(V,Y)}),K1&&J0(V,$),S}function O(V,x,C,T){var S=_r(C);if(typeof S!="function")throw Error(t1(150));if(C=S.call(C),C==null)throw Error(t1(151));for(var R=S=null,N=x,$=x=0,e1=null,r1=C.next();N!==null&&!r1.done;$++,r1=C.next()){N.index>$?(e1=N,N=null):e1=N.sibling;var Y=L(V,N,r1.value,T);if(Y===null){N===null&&(N=e1);break}e&&N&&Y.alternate===null&&t(V,N),x=i(Y,x,$),R===null?S=Y:R.sibling=Y,R=Y,N=e1}if(r1.done)return a(V,N),K1&&J0(V,$),S;if(N===null){for(;!r1.done;$++,r1=C.next())r1=z(V,r1.value,T),r1!==null&&(x=i(r1,x,$),R===null?S=r1:R.sibling=r1,R=r1);return K1&&J0(V,$),S}for(N=r(V,N);!r1.done;$++,r1=C.next())r1=y(N,V,$,r1.value,T),r1!==null&&(e&&r1.alternate!==null&&N.delete(r1.key===null?$:r1.key),x=i(r1,x,$),R===null?S=r1:R.sibling=r1,R=r1);return e&&N.forEach(function(J){return t(V,J)}),K1&&J0(V,$),S}function k(V,x,C,T){if(typeof C=="object"&&C!==null&&C.type===W4&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case li:t:{for(var S=C.key,R=x;R!==null;){if(R.key===S){if(S=C.type,S===W4){if(R.tag===7){a(V,R.sibling),x=n(R,C.props.children),x.return=V,V=x;break t}}else if(R.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===i0&&$8(S)===R.type){a(V,R.sibling),x=n(R,C.props),x.ref=Ar(V,R,C),x.return=V,V=x;break t}a(V,R);break}else t(V,R);R=R.sibling}C.type===W4?(x=n4(C.props.children,V.mode,T,C.key),x.return=V,V=x):(T=ki(C.type,C.key,C.props,null,V.mode,T),T.ref=Ar(V,x,C),T.return=V,V=T)}return h(V);case $4:t:{for(R=C.key;x!==null;){if(x.key===R)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){a(V,x.sibling),x=n(x,C.children||[]),x.return=V,V=x;break t}else{a(V,x);break}else t(V,x);x=x.sibling}x=y3(C,V.mode,T),x.return=V,V=x}return h(V);case i0:return R=C._init,k(V,x,R(C._payload),T)}if(Ir(C))return w(V,x,C,T);if(_r(C))return O(V,x,C,T);Vi(V,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(a(V,x.sibling),x=n(x,C),x.return=V,V=x):(a(V,x),x=L3(C,V.mode,T),x.return=V,V=x),h(V)):a(V,x)}return k}var va=p7(!0),f7=p7(!1),zn={},ge=V0(zn),on=V0(zn),cn=V0(zn);function a4(e){if(e===zn)throw Error(t1(174));return e}function Fc(e,t){switch(N1(cn,t),N1(on,e),N1(ge,zn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:k3(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=k3(t,e)}G1(ge),N1(ge,t)}function da(){G1(ge),G1(on),G1(cn)}function z7(e){a4(cn.current);var t=a4(ge.current),a=k3(t,e.type);t!==a&&(N1(on,e),N1(ge,a))}function Uc(e){on.current===e&&(G1(ge),G1(on))}var Y1=V0(0);function Ji(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var M3=[];function $c(){for(var e=0;e<M3.length;e++)M3[e]._workInProgressVersionPrimary=null;M3.length=0}var Ti=Ne.ReactCurrentDispatcher,m3=Ne.ReactCurrentBatchConfig,l4=0,Q1=null,st=null,pt=null,Zi=!1,Gr=!1,sn=0,nV=0;function St(){throw Error(t1(321))}function Wc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Y2(e[a],t[a]))return!1;return!0}function Gc(e,t,a,r,n,i){if(l4=i,Q1=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ti.current=e===null||e.memoizedState===null?oV:cV,e=a(r,n),Gr){i=0;do{if(Gr=!1,sn=0,25<=i)throw Error(t1(301));i+=1,pt=st=null,t.updateQueue=null,Ti.current=sV,e=a(r,n)}while(Gr)}if(Ti.current=th,t=st!==null&&st.next!==null,l4=0,pt=st=Q1=null,Zi=!1,t)throw Error(t1(300));return e}function qc(){var e=sn!==0;return sn=0,e}function ve(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Q1.memoizedState=pt=e:pt=pt.next=e,pt}function O2(){if(st===null){var e=Q1.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=pt===null?Q1.memoizedState:pt.next;if(t!==null)pt=t,st=e;else{if(e===null)throw Error(t1(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},pt===null?Q1.memoizedState=pt=e:pt=pt.next=e}return pt}function vn(e,t){return typeof t=="function"?t(e):t}function H3(e){var t=O2(),a=t.queue;if(a===null)throw Error(t1(311));a.lastRenderedReducer=e;var r=st,n=r.baseQueue,i=a.pending;if(i!==null){if(n!==null){var h=n.next;n.next=i.next,i.next=h}r.baseQueue=n=i,a.pending=null}if(n!==null){i=n.next,r=r.baseState;var l=h=null,c=null,v=i;do{var d=v.lane;if((l4&d)===d)c!==null&&(c=c.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:e(r,v.action);else{var z={lane:d,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};c===null?(l=c=z,h=r):c=c.next=z,Q1.lanes|=d,o4|=d}v=v.next}while(v!==null&&v!==i);c===null?h=r:c.next=l,Y2(r,t.memoizedState)||(t2=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=c,a.lastRenderedState=r}if(e=a.interleaved,e!==null){n=e;do i=n.lane,Q1.lanes|=i,o4|=i,n=n.next;while(n!==e)}else n===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function x3(e){var t=O2(),a=t.queue;if(a===null)throw Error(t1(311));a.lastRenderedReducer=e;var r=a.dispatch,n=a.pending,i=t.memoizedState;if(n!==null){a.pending=null;var h=n=n.next;do i=e(i,h.action),h=h.next;while(h!==n);Y2(i,t.memoizedState)||(t2=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,r]}function M7(){}function m7(e,t){var a=Q1,r=O2(),n=t(),i=!Y2(r.memoizedState,n);if(i&&(r.memoizedState=n,t2=!0),r=r.queue,Kc(V7.bind(null,a,r,e),[e]),r.getSnapshot!==t||i||pt!==null&&pt.memoizedState.tag&1){if(a.flags|=2048,dn(9,x7.bind(null,a,r,n,t),void 0,null),ft===null)throw Error(t1(349));l4&30||H7(a,t,n)}return n}function H7(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Q1.updateQueue,t===null?(t={lastEffect:null,stores:null},Q1.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function x7(e,t,a,r){t.value=a,t.getSnapshot=r,w7(t)&&L7(e)}function V7(e,t,a){return a(function(){w7(t)&&L7(e)})}function w7(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Y2(e,a)}catch{return!0}}function L7(e){var t=je(e,1);t!==null&&X2(t,e,1,-1)}function W8(e){var t=ve();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:e},t.queue=e,e=e.dispatch=lV.bind(null,Q1,e),[t.memoizedState,e]}function dn(e,t,a,r){return e={tag:e,create:t,destroy:a,deps:r,next:null},t=Q1.updateQueue,t===null?(t={lastEffect:null,stores:null},Q1.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e)),e}function y7(){return O2().memoizedState}function Oi(e,t,a,r){var n=ve();Q1.flags|=e,n.memoizedState=dn(1|t,a,void 0,r===void 0?null:r)}function uh(e,t,a,r){var n=O2();r=r===void 0?null:r;var i=void 0;if(st!==null){var h=st.memoizedState;if(i=h.destroy,r!==null&&Wc(r,h.deps)){n.memoizedState=dn(t,a,i,r);return}}Q1.flags|=e,n.memoizedState=dn(1|t,a,i,r)}function G8(e,t){return Oi(8390656,8,e,t)}function Kc(e,t){return uh(2048,8,e,t)}function C7(e,t){return uh(4,2,e,t)}function B7(e,t){return uh(4,4,e,t)}function S7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _7(e,t,a){return a=a!=null?a.concat([e]):null,uh(4,4,S7.bind(null,t,e),a)}function Xc(){}function T7(e,t){var a=O2();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&Wc(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function O7(e,t){var a=O2();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&Wc(t,r[1])?r[0]:(e=e(),a.memoizedState=[e,t],e)}function b7(e,t,a){return l4&21?(Y2(a,t)||(a=kd(),Q1.lanes|=a,o4|=a,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,t2=!0),e.memoizedState=a)}function iV(e,t){var a=b1;b1=a!==0&&4>a?a:4,e(!0);var r=m3.transition;m3.transition={};try{e(!1),t()}finally{b1=a,m3.transition=r}}function A7(){return O2().memoizedState}function hV(e,t,a){var r=z0(e);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},E7(e))k7(t,a);else if(a=v7(e,t,a,r),a!==null){var n=Rt();X2(a,e,r,n),P7(a,t,r)}}function lV(e,t,a){var r=z0(e),n={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(E7(e))k7(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var h=t.lastRenderedState,l=i(h,a);if(n.hasEagerState=!0,n.eagerState=l,Y2(l,h)){var c=t.interleaved;c===null?(n.next=n,Rc(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}a=v7(e,t,n,r),a!==null&&(n=Rt(),X2(a,e,r,n),P7(a,t,r))}}function E7(e){var t=e.alternate;return e===Q1||t!==null&&t===Q1}function k7(e,t){Gr=Zi=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function P7(e,t,a){if(a&4194240){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,Cc(e,a)}}var th={readContext:T2,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},oV={readContext:T2,useCallback:function(e,t){return ve().memoizedState=[e,t===void 0?null:t],e},useContext:T2,useEffect:G8,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,Oi(4194308,4,S7.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var a=ve();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var r=ve();return t=a!==void 0?a(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=hV.bind(null,Q1,e),[r.memoizedState,e]},useRef:function(e){var t=ve();return e={current:e},t.memoizedState=e},useState:W8,useDebugValue:Xc,useDeferredValue:function(e){return ve().memoizedState=e},useTransition:function(){var e=W8(!1),t=e[0];return e=iV.bind(null,e[1]),ve().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var r=Q1,n=ve();if(K1){if(a===void 0)throw Error(t1(407));a=a()}else{if(a=t(),ft===null)throw Error(t1(349));l4&30||H7(r,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,G8(V7.bind(null,r,i,e),[e]),r.flags|=2048,dn(9,x7.bind(null,r,i,a,t),void 0,null),a},useId:function(){var e=ve(),t=ft.identifierPrefix;if(K1){var a=ke,r=Ee;a=(r&~(1<<32-K2(r)-1)).toString(32)+a,t=":"+t+"R"+a,a=sn++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=nV++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cV={readContext:T2,useCallback:T7,useContext:T2,useEffect:Kc,useImperativeHandle:_7,useInsertionEffect:C7,useLayoutEffect:B7,useMemo:O7,useReducer:H3,useRef:y7,useState:function(){return H3(vn)},useDebugValue:Xc,useDeferredValue:function(e){var t=O2();return b7(t,st.memoizedState,e)},useTransition:function(){var e=H3(vn)[0],t=O2().memoizedState;return[e,t]},useMutableSource:M7,useSyncExternalStore:m7,useId:A7,unstable_isNewReconciler:!1},sV={readContext:T2,useCallback:T7,useContext:T2,useEffect:Kc,useImperativeHandle:_7,useInsertionEffect:C7,useLayoutEffect:B7,useMemo:O7,useReducer:x3,useRef:y7,useState:function(){return x3(vn)},useDebugValue:Xc,useDeferredValue:function(e){var t=O2();return st===null?t.memoizedState=e:b7(t,st.memoizedState,e)},useTransition:function(){var e=x3(vn)[0],t=O2().memoizedState;return[e,t]},useMutableSource:M7,useSyncExternalStore:m7,useId:A7,unstable_isNewReconciler:!1};function ua(e,t){try{var a="",r=t;do a+=RH(r),r=r.return;while(r);var n=a}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function V3(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function nc(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var vV=typeof WeakMap=="function"?WeakMap:Map;function D7(e,t,a){a=Pe(-1,a),a.tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){ah||(ah=!0,gc=r),nc(e,t)},a}function I7(e,t,a){a=Pe(-1,a),a.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;a.payload=function(){return r(n)},a.callback=function(){nc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(a.callback=function(){nc(e,t),typeof r!="function"&&(f0===null?f0=new Set([this]):f0.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),a}function q8(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new vV;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(a)||(n.add(a),e=yV.bind(null,e,t,a),t.then(e,e))}function K8(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function X8(e,t,a,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Pe(-1,1),t.tag=2,p0(a,t,1))),a.lanes|=1),e)}var dV=Ne.ReactCurrentOwner,t2=!1;function jt(e,t,a,r){t.child=e===null?f7(t,null,a,r):va(t,e.child,a,r)}function Y8(e,t,a,r,n){a=a.render;var i=t.ref;return ha(t,n),r=Gc(e,t,a,r,i,n),a=qc(),e!==null&&!t2?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Re(e,t,n)):(K1&&a&&Ec(t),t.flags|=1,jt(e,t,r,n),t.child)}function Q8(e,t,a,r,n){if(e===null){var i=a.type;return typeof i=="function"&&!rs(i)&&i.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=i,j7(e,t,i,r,n)):(e=ki(a.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var h=i.memoizedProps;if(a=a.compare,a=a!==null?a:rn,a(h,r)&&e.ref===t.ref)return Re(e,t,n)}return t.flags|=1,e=M0(i,r),e.ref=t.ref,e.return=t,t.child=e}function j7(e,t,a,r,n){if(e!==null){var i=e.memoizedProps;if(rn(i,r)&&e.ref===t.ref)if(t2=!1,t.pendingProps=r=i,(e.lanes&n)!==0)e.flags&131072&&(t2=!0);else return t.lanes=e.lanes,Re(e,t,n)}return ic(e,t,a,r,n)}function R7(e,t,a){var r=t.pendingProps,n=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},N1(ea,v2),v2|=a;else{if(!(a&1073741824))return e=i!==null?i.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,N1(ea,v2),v2|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:a,N1(ea,v2),v2|=r}else i!==null?(r=i.baseLanes|a,t.memoizedState=null):r=a,N1(ea,v2),v2|=r;return jt(e,t,n,a),t.child}function N7(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function ic(e,t,a,r,n){var i=a2(a)?i4:Ot.current;return i=ca(t,i),ha(t,n),a=Gc(e,t,a,r,i,n),r=qc(),e!==null&&!t2?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Re(e,t,n)):(K1&&r&&Ec(t),t.flags|=1,jt(e,t,a,n),t.child)}function J8(e,t,a,r,n){if(a2(a)){var i=!0;Gi(t)}else i=!1;if(ha(t,n),t.stateNode===null)bi(e,t),g7(t,a,r),rc(t,a,r,n),r=!0;else if(e===null){var h=t.stateNode,l=t.memoizedProps;h.props=l;var c=h.context,v=a.contextType;typeof v=="object"&&v!==null?v=T2(v):(v=a2(a)?i4:Ot.current,v=ca(t,v));var d=a.getDerivedStateFromProps,z=typeof d=="function"||typeof h.getSnapshotBeforeUpdate=="function";z||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==r||c!==v)&&U8(t,h,r,v),h0=!1;var L=t.memoizedState;h.state=L,Qi(t,r,h,n),c=t.memoizedState,l!==r||L!==c||e2.current||h0?(typeof d=="function"&&(ac(t,a,d,r),c=t.memoizedState),(l=h0||F8(t,a,l,r,L,c,v))?(z||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),h.props=r,h.state=c,h.context=v,r=l):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,d7(e,t),l=t.memoizedProps,v=t.type===t.elementType?l:W2(t.type,l),h.props=v,z=t.pendingProps,L=h.context,c=a.contextType,typeof c=="object"&&c!==null?c=T2(c):(c=a2(a)?i4:Ot.current,c=ca(t,c));var y=a.getDerivedStateFromProps;(d=typeof y=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==z||L!==c)&&U8(t,h,r,c),h0=!1,L=t.memoizedState,h.state=L,Qi(t,r,h,n);var w=t.memoizedState;l!==z||L!==w||e2.current||h0?(typeof y=="function"&&(ac(t,a,y,r),w=t.memoizedState),(v=h0||F8(t,a,v,r,L,w,c)||!1)?(d||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,w,c),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,w,c)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),h.props=r,h.state=w,h.context=c,r=v):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),r=!1)}return hc(e,t,a,r,i,n)}function hc(e,t,a,r,n,i){N7(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return n&&D8(t,a,!1),Re(e,t,i);r=t.stateNode,dV.current=t;var l=h&&typeof a.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=va(t,e.child,null,i),t.child=va(t,null,l,i)):jt(e,t,l,i),t.memoizedState=r.state,n&&D8(t,a,!0),t.child}function F7(e){var t=e.stateNode;t.pendingContext?P8(e,t.pendingContext,t.pendingContext!==t.context):t.context&&P8(e,t.context,!1),Fc(e,t.containerInfo)}function Z8(e,t,a,r,n){return sa(),Pc(n),t.flags|=256,jt(e,t,a,r),t.child}var lc={dehydrated:null,treeContext:null,retryLane:0};function oc(e){return{baseLanes:e,cachePool:null,transitions:null}}function U7(e,t,a){var r=t.pendingProps,n=Y1.current,i=!1,h=(t.flags&128)!==0,l;if((l=h)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),N1(Y1,n&1),e===null)return tc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=r.children,e=r.fallback,i?(r=t.mode,i=t.child,h={mode:"hidden",children:h},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=h):i=fh(h,r,0,null),e=n4(e,r,a,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=oc(a),t.memoizedState=lc,e):Yc(t,h));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return uV(e,t,h,r,l,n,a);if(i){i=r.fallback,h=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:r.children};return!(h&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=M0(n,c),r.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=M0(l,i):(i=n4(i,h,a,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,h=e.child.memoizedState,h=h===null?oc(a):{baseLanes:h.baseLanes|a,cachePool:null,transitions:h.transitions},i.memoizedState=h,i.childLanes=e.childLanes&~a,t.memoizedState=lc,r}return i=e.child,e=i.sibling,r=M0(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=a),r.return=t,r.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=r,t.memoizedState=null,r}function Yc(e,t){return t=fh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wi(e,t,a,r){return r!==null&&Pc(r),va(t,e.child,null,a),e=Yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uV(e,t,a,r,n,i,h){if(a)return t.flags&256?(t.flags&=-257,r=V3(Error(t1(422))),wi(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,n=t.mode,r=fh({mode:"visible",children:r.children},n,0,null),i=n4(i,n,h,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&va(t,e.child,null,h),t.child.memoizedState=oc(h),t.memoizedState=lc,i);if(!(t.mode&1))return wi(e,t,h,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(t1(419)),r=V3(i,r,void 0),wi(e,t,h,r)}if(l=(h&e.childLanes)!==0,t2||l){if(r=ft,r!==null){switch(h&-h){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|h)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,je(e,n),X2(r,e,n,-1))}return as(),r=V3(Error(t1(421))),wi(e,t,h,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=CV.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,d2=g0(n.nextSibling),u2=t,K1=!0,q2=null,e!==null&&(C2[B2++]=Ee,C2[B2++]=ke,C2[B2++]=h4,Ee=e.id,ke=e.overflow,h4=t),t=Yc(t,r.children),t.flags|=4096,t)}function td(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ec(e.return,t,a)}function w3(e,t,a,r,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=a,i.tailMode=n)}function $7(e,t,a){var r=t.pendingProps,n=r.revealOrder,i=r.tail;if(jt(e,t,r.children,a),r=Y1.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&td(e,a,t);else if(e.tag===19)td(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(N1(Y1,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&Ji(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),w3(t,!1,n,a,i);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ji(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}w3(t,!0,a,null,i);break;case"together":w3(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Re(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),o4|=t.lanes,!(a&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(t1(153));if(t.child!==null){for(e=t.child,a=M0(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=M0(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function gV(e,t,a){switch(t.tag){case 3:F7(t),sa();break;case 5:z7(t);break;case 1:a2(t.type)&&Gi(t);break;case 4:Fc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;N1(Xi,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(N1(Y1,Y1.current&1),t.flags|=128,null):a&t.child.childLanes?U7(e,t,a):(N1(Y1,Y1.current&1),e=Re(e,t,a),e!==null?e.sibling:null);N1(Y1,Y1.current&1);break;case 19:if(r=(a&t.childLanes)!==0,e.flags&128){if(r)return $7(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),N1(Y1,Y1.current),r)break;return null;case 22:case 23:return t.lanes=0,R7(e,t,a)}return Re(e,t,a)}var W7,cc,G7,q7;W7=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};cc=function(){};G7=function(e,t,a,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,a4(ge.current);var i=null;switch(a){case"input":n=O3(e,n),r=O3(e,r),i=[];break;case"select":n=J1({},n,{value:void 0}),r=J1({},r,{value:void 0}),i=[];break;case"textarea":n=E3(e,n),r=E3(e,r),i=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$i)}P3(a,r);var h;a=null;for(v in n)if(!r.hasOwnProperty(v)&&n.hasOwnProperty(v)&&n[v]!=null)if(v==="style"){var l=n[v];for(h in l)l.hasOwnProperty(h)&&(a||(a={}),a[h]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Yr.hasOwnProperty(v)?i||(i=[]):(i=i||[]).push(v,null));for(v in r){var c=r[v];if(l=n?.[v],r.hasOwnProperty(v)&&c!==l&&(c!=null||l!=null))if(v==="style")if(l){for(h in l)!l.hasOwnProperty(h)||c&&c.hasOwnProperty(h)||(a||(a={}),a[h]="");for(h in c)c.hasOwnProperty(h)&&l[h]!==c[h]&&(a||(a={}),a[h]=c[h])}else a||(i||(i=[]),i.push(v,a)),a=c;else v==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(v,c)):v==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(v,""+c):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Yr.hasOwnProperty(v)?(c!=null&&v==="onScroll"&&W1("scroll",e),i||l===c||(i=[])):(i=i||[]).push(v,c))}a&&(i=i||[]).push("style",a);var v=i;(t.updateQueue=v)&&(t.flags|=4)}};q7=function(e,t,a,r){a!==r&&(t.flags|=4)};function Er(e,t){if(!K1)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _t(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function pV(e,t,a){var r=t.pendingProps;switch(kc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(t),null;case 1:return a2(t.type)&&Wi(),_t(t),null;case 3:return r=t.stateNode,da(),G1(e2),G1(Ot),$c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,q2!==null&&(zc(q2),q2=null))),cc(e,t),_t(t),null;case 5:Uc(t);var n=a4(cn.current);if(a=t.type,e!==null&&t.stateNode!=null)G7(e,t,a,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(t1(166));return _t(t),null}if(e=a4(ge.current),xi(t)){r=t.stateNode,a=t.type;var i=t.memoizedProps;switch(r[de]=t,r[ln]=i,e=(t.mode&1)!==0,a){case"dialog":W1("cancel",r),W1("close",r);break;case"iframe":case"object":case"embed":W1("load",r);break;case"video":case"audio":for(n=0;n<Rr.length;n++)W1(Rr[n],r);break;case"source":W1("error",r);break;case"img":case"image":case"link":W1("error",r),W1("load",r);break;case"details":W1("toggle",r);break;case"input":o8(r,i),W1("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},W1("invalid",r);break;case"textarea":s8(r,i),W1("invalid",r)}P3(a,i),n=null;for(var h in i)if(i.hasOwnProperty(h)){var l=i[h];h==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Hi(r.textContent,l,e),n=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Hi(r.textContent,l,e),n=["children",""+l]):Yr.hasOwnProperty(h)&&l!=null&&h==="onScroll"&&W1("scroll",r)}switch(a){case"input":oi(r),c8(r,i,!0);break;case"textarea":oi(r),v8(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$i)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hd(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(a,{is:r.is}):(e=h.createElement(a),a==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,a),e[de]=t,e[ln]=r,W7(e,t,!1,!1),t.stateNode=e;t:{switch(h=D3(a,r),a){case"dialog":W1("cancel",e),W1("close",e),n=r;break;case"iframe":case"object":case"embed":W1("load",e),n=r;break;case"video":case"audio":for(n=0;n<Rr.length;n++)W1(Rr[n],e);n=r;break;case"source":W1("error",e),n=r;break;case"img":case"image":case"link":W1("error",e),W1("load",e),n=r;break;case"details":W1("toggle",e),n=r;break;case"input":o8(e,r),n=O3(e,r),W1("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=J1({},r,{value:void 0}),W1("invalid",e);break;case"textarea":s8(e,r),n=E3(e,r),W1("invalid",e);break;default:n=r}P3(a,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?wd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xd(e,c)):i==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Qr(e,c):typeof c=="number"&&Qr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&W1("scroll",e):c!=null&&Hc(e,i,c,h))}switch(a){case"input":oi(e),c8(e,r,!1);break;case"textarea":oi(e),v8(e);break;case"option":r.value!=null&&e.setAttribute("value",""+m0(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?aa(e,!!r.multiple,i,!1):r.defaultValue!=null&&aa(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=$i)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _t(t),null;case 6:if(e&&t.stateNode!=null)q7(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(t1(166));if(a=a4(cn.current),a4(ge.current),xi(t)){if(r=t.stateNode,a=t.memoizedProps,r[de]=t,(i=r.nodeValue!==a)&&(e=u2,e!==null))switch(e.tag){case 3:Hi(r.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hi(r.nodeValue,a,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(a.nodeType===9?a:a.ownerDocument).createTextNode(r),r[de]=t,t.stateNode=r}return _t(t),null;case 13:if(G1(Y1),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(K1&&d2!==null&&t.mode&1&&!(t.flags&128))s7(),sa(),t.flags|=98560,i=!1;else if(i=xi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(t1(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t1(317));i[de]=t}else sa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_t(t),i=!1}else q2!==null&&(zc(q2),q2=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Y1.current&1?vt===0&&(vt=3):as())),t.updateQueue!==null&&(t.flags|=4),_t(t),null);case 4:return da(),cc(e,t),e===null&&nn(t.stateNode.containerInfo),_t(t),null;case 10:return jc(t.type._context),_t(t),null;case 17:return a2(t.type)&&Wi(),_t(t),null;case 19:if(G1(Y1),i=t.memoizedState,i===null)return _t(t),null;if(r=(t.flags&128)!==0,h=i.rendering,h===null)if(r)Er(i,!1);else{if(vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Ji(e),h!==null){for(t.flags|=128,Er(i,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=a,a=t.child;a!==null;)i=a,e=r,i.flags&=14680066,h=i.alternate,h===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=h.childLanes,i.lanes=h.lanes,i.child=h.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=h.memoizedProps,i.memoizedState=h.memoizedState,i.updateQueue=h.updateQueue,i.type=h.type,e=h.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return N1(Y1,Y1.current&1|2),t.child}e=e.sibling}i.tail!==null&&ht()>ga&&(t.flags|=128,r=!0,Er(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ji(h),e!==null){if(t.flags|=128,r=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),Er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!K1)return _t(t),null}else 2*ht()-i.renderingStartTime>ga&&a!==1073741824&&(t.flags|=128,r=!0,Er(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(a=i.last,a!==null?a.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ht(),t.sibling=null,a=Y1.current,N1(Y1,r?a&1|2:a&1),t):(_t(t),null);case 22:case 23:return es(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?v2&1073741824&&(_t(t),t.subtreeFlags&6&&(t.flags|=8192)):_t(t),null;case 24:return null;case 25:return null}throw Error(t1(156,t.tag))}function fV(e,t){switch(kc(t),t.tag){case 1:return a2(t.type)&&Wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return da(),G1(e2),G1(Ot),$c(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Uc(t),null;case 13:if(G1(Y1),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(t1(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G1(Y1),null;case 4:return da(),null;case 10:return jc(t.type._context),null;case 22:case 23:return es(),null;case 24:return null;default:return null}}var Li=!1,Tt=!1,zV=typeof WeakSet=="function"?WeakSet:Set,l1=null;function ta(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(r){et(e,t,r)}else a.current=null}function sc(e,t,a){try{a()}catch(r){et(e,t,r)}}var ed=!1;function MV(e,t){if(q3=Ni,e=Qd(),Ac(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break t}var h=0,l=-1,c=-1,v=0,d=0,z=e,L=null;e:for(;;){for(var y;z!==a||n!==0&&z.nodeType!==3||(l=h+n),z!==i||r!==0&&z.nodeType!==3||(c=h+r),z.nodeType===3&&(h+=z.nodeValue.length),(y=z.firstChild)!==null;)L=z,z=y;for(;;){if(z===e)break e;if(L===a&&++v===n&&(l=h),L===i&&++d===r&&(c=h),(y=z.nextSibling)!==null)break;z=L,L=z.parentNode}z=y}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(K3={focusedElem:e,selectionRange:a},Ni=!1,l1=t;l1!==null;)if(t=l1,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,l1=e;else for(;l1!==null;){t=l1;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var O=w.memoizedProps,k=w.memoizedState,V=t.stateNode,x=V.getSnapshotBeforeUpdate(t.elementType===t.type?O:W2(t.type,O),k);V.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t1(163))}}catch(T){et(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,l1=e;break}l1=t.return}return w=ed,ed=!1,w}function qr(e,t,a){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&sc(t,a,i)}n=n.next}while(n!==r)}}function gh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var r=a.create;a.destroy=r()}a=a.next}while(a!==t)}}function vc(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function K7(e){var t=e.alternate;t!==null&&(e.alternate=null,K7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[de],delete t[ln],delete t[Q3],delete t[tV],delete t[eV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X7(e){return e.tag===5||e.tag===3||e.tag===4}function ad(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||X7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dc(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=$i));else if(r!==4&&(e=e.child,e!==null))for(dc(e,t,a),e=e.sibling;e!==null;)dc(e,t,a),e=e.sibling}function uc(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(uc(e,t,a),e=e.sibling;e!==null;)uc(e,t,a),e=e.sibling}var xt=null,G2=!1;function n0(e,t,a){for(a=a.child;a!==null;)Y7(e,t,a),a=a.sibling}function Y7(e,t,a){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount(hh,a)}catch{}switch(a.tag){case 5:Tt||ta(a,t);case 6:var r=xt,n=G2;xt=null,n0(e,t,a),xt=r,G2=n,xt!==null&&(G2?(e=xt,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):xt.removeChild(a.stateNode));break;case 18:xt!==null&&(G2?(e=xt,a=a.stateNode,e.nodeType===8?f3(e.parentNode,a):e.nodeType===1&&f3(e,a),en(e)):f3(xt,a.stateNode));break;case 4:r=xt,n=G2,xt=a.stateNode.containerInfo,G2=!0,n0(e,t,a),xt=r,G2=n;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var i=n,h=i.destroy;i=i.tag,h!==void 0&&(i&2||i&4)&&sc(a,t,h),n=n.next}while(n!==r)}n0(e,t,a);break;case 1:if(!Tt&&(ta(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(l){et(a,t,l)}n0(e,t,a);break;case 21:n0(e,t,a);break;case 22:a.mode&1?(Tt=(r=Tt)||a.memoizedState!==null,n0(e,t,a),Tt=r):n0(e,t,a);break;default:n0(e,t,a)}}function rd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new zV),t.forEach(function(r){var n=BV.bind(null,e,r);a.has(r)||(a.add(r),r.then(n,n))})}}function $2(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var n=a[r];try{var i=e,h=t,l=h;t:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,G2=!1;break t;case 3:xt=l.stateNode.containerInfo,G2=!0;break t;case 4:xt=l.stateNode.containerInfo,G2=!0;break t}l=l.return}if(xt===null)throw Error(t1(160));Y7(i,h,n),xt=null,G2=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(v){et(n,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q7(t,e),t=t.sibling}function Q7(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($2(t,e),se(e),r&4){try{qr(3,e,e.return),gh(3,e)}catch(O){et(e,e.return,O)}try{qr(5,e,e.return)}catch(O){et(e,e.return,O)}}break;case 1:$2(t,e),se(e),r&512&&a!==null&&ta(a,a.return);break;case 5:if($2(t,e),se(e),r&512&&a!==null&&ta(a,a.return),e.flags&32){var n=e.stateNode;try{Qr(n,"")}catch(O){et(e,e.return,O)}}if(r&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,h=a!==null?a.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Md(n,i),D3(l,h);var v=D3(l,i);for(h=0;h<c.length;h+=2){var d=c[h],z=c[h+1];d==="style"?wd(n,z):d==="dangerouslySetInnerHTML"?xd(n,z):d==="children"?Qr(n,z):Hc(n,d,z,v)}switch(l){case"input":b3(n,i);break;case"textarea":md(n,i);break;case"select":var L=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?aa(n,!!i.multiple,y,!1):L!==!!i.multiple&&(i.defaultValue!=null?aa(n,!!i.multiple,i.defaultValue,!0):aa(n,!!i.multiple,i.multiple?[]:"",!1))}n[ln]=i}catch(O){et(e,e.return,O)}}break;case 6:if($2(t,e),se(e),r&4){if(e.stateNode===null)throw Error(t1(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(O){et(e,e.return,O)}}break;case 3:if($2(t,e),se(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{en(t.containerInfo)}catch(O){et(e,e.return,O)}break;case 4:$2(t,e),se(e);break;case 13:$2(t,e),se(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Zc=ht())),r&4&&rd(e);break;case 22:if(d=a!==null&&a.memoizedState!==null,e.mode&1?(Tt=(v=Tt)||d,$2(t,e),Tt=v):$2(t,e),se(e),r&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!d&&e.mode&1)for(l1=e,d=e.child;d!==null;){for(z=l1=d;l1!==null;){switch(L=l1,y=L.child,L.tag){case 0:case 11:case 14:case 15:qr(4,L,L.return);break;case 1:ta(L,L.return);var w=L.stateNode;if(typeof w.componentWillUnmount=="function"){r=L,a=L.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(O){et(r,a,O)}}break;case 5:ta(L,L.return);break;case 22:if(L.memoizedState!==null){id(z);continue}}y!==null?(y.return=L,l1=y):id(z)}d=d.sibling}t:for(d=null,z=e;;){if(z.tag===5){if(d===null){d=z;try{n=z.stateNode,v?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=z.stateNode,c=z.memoizedProps.style,h=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vd("display",h))}catch(O){et(e,e.return,O)}}}else if(z.tag===6){if(d===null)try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(O){et(e,e.return,O)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break t;for(;z.sibling===null;){if(z.return===null||z.return===e)break t;d===z&&(d=null),z=z.return}d===z&&(d=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:$2(t,e),se(e),r&4&&rd(e);break;case 21:break;default:$2(t,e),se(e)}}function se(e){var t=e.flags;if(t&2){try{t:{for(var a=e.return;a!==null;){if(X7(a)){var r=a;break t}a=a.return}throw Error(t1(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Qr(n,""),r.flags&=-33);var i=ad(e);uc(e,i,n);break;case 3:case 4:var h=r.stateNode.containerInfo,l=ad(e);dc(e,l,h);break;default:throw Error(t1(161))}}catch(c){et(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mV(e,t,a){l1=e,J7(e,t,a)}function J7(e,t,a){for(var r=(e.mode&1)!==0;l1!==null;){var n=l1,i=n.child;if(n.tag===22&&r){var h=n.memoizedState!==null||Li;if(!h){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Tt;l=Li;var v=Tt;if(Li=h,(Tt=c)&&!v)for(l1=n;l1!==null;)h=l1,c=h.child,h.tag===22&&h.memoizedState!==null?hd(n):c!==null?(c.return=h,l1=c):hd(n);for(;i!==null;)l1=i,J7(i,t,a),i=i.sibling;l1=n,Li=l,Tt=v}nd(e,t,a)}else n.subtreeFlags&8772&&i!==null?(i.return=n,l1=i):nd(e,t,a)}}function nd(e){for(;l1!==null;){var t=l1;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tt||gh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Tt)if(a===null)r.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:W2(t.type,a.memoizedProps);r.componentDidUpdate(n,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&N8(t,i,r);break;case 3:var h=t.updateQueue;if(h!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}N8(t,h,a)}break;case 5:var l=t.stateNode;if(a===null&&t.flags&4){a=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var d=v.memoizedState;if(d!==null){var z=d.dehydrated;z!==null&&en(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t1(163))}Tt||t.flags&512&&vc(t)}catch(L){et(t,t.return,L)}}if(t===e){l1=null;break}if(a=t.sibling,a!==null){a.return=t.return,l1=a;break}l1=t.return}}function id(e){for(;l1!==null;){var t=l1;if(t===e){l1=null;break}var a=t.sibling;if(a!==null){a.return=t.return,l1=a;break}l1=t.return}}function hd(e){for(;l1!==null;){var t=l1;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{gh(4,t)}catch(c){et(t,a,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){et(t,n,c)}}var i=t.return;try{vc(t)}catch(c){et(t,i,c)}break;case 5:var h=t.return;try{vc(t)}catch(c){et(t,h,c)}}}catch(c){et(t,t.return,c)}if(t===e){l1=null;break}var l=t.sibling;if(l!==null){l.return=t.return,l1=l;break}l1=t.return}}var HV=Math.ceil,eh=Ne.ReactCurrentDispatcher,Qc=Ne.ReactCurrentOwner,_2=Ne.ReactCurrentBatchConfig,C1=0,ft=null,ot=null,Vt=0,v2=0,ea=V0(0),vt=0,un=null,o4=0,ph=0,Jc=0,Kr=null,Zt=null,Zc=0,ga=1/0,be=null,ah=!1,gc=null,f0=null,yi=!1,s0=null,rh=0,Xr=0,pc=null,Ai=-1,Ei=0;function Rt(){return C1&6?ht():Ai!==-1?Ai:Ai=ht()}function z0(e){return e.mode&1?C1&2&&Vt!==0?Vt&-Vt:rV.transition!==null?(Ei===0&&(Ei=kd()),Ei):(e=b1,e!==0||(e=window.event,e=e===void 0?16:Fd(e.type)),e):1}function X2(e,t,a,r){if(50<Xr)throw Xr=0,pc=null,Error(t1(185));gn(e,a,r),(!(C1&2)||e!==ft)&&(e===ft&&(!(C1&2)&&(ph|=a),vt===4&&o0(e,Vt)),r2(e,r),a===1&&C1===0&&!(t.mode&1)&&(ga=ht()+500,vh&&w0()))}function r2(e,t){var a=e.callbackNode;ix(e,t);var r=Ri(e,e===ft?Vt:0);if(r===0)a!==null&&g8(a),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(a!=null&&g8(a),t===1)e.tag===0?aV(ld.bind(null,e)):l7(ld.bind(null,e)),Jx(function(){!(C1&6)&&w0()}),a=null;else{switch(Pd(r)){case 1:a=yc;break;case 4:a=Ad;break;case 16:a=ji;break;case 536870912:a=Ed;break;default:a=ji}a=hu(a,Z7.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function Z7(e,t){if(Ai=-1,Ei=0,C1&6)throw Error(t1(327));var a=e.callbackNode;if(la()&&e.callbackNode!==a)return null;var r=Ri(e,e===ft?Vt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=nh(e,r);else{t=r;var n=C1;C1|=2;var i=eu();(ft!==e||Vt!==t)&&(be=null,ga=ht()+500,r4(e,t));do try{wV();break}catch(l){tu(e,l)}while(1);Ic(),eh.current=i,C1=n,ot!==null?t=0:(ft=null,Vt=0,t=vt)}if(t!==0){if(t===2&&(n=F3(e),n!==0&&(r=n,t=fc(e,n))),t===1)throw a=un,r4(e,0),o0(e,r),r2(e,ht()),a;if(t===6)o0(e,r);else{if(n=e.current.alternate,!(r&30)&&!xV(n)&&(t=nh(e,r),t===2&&(i=F3(e),i!==0&&(r=i,t=fc(e,i))),t===1))throw a=un,r4(e,0),o0(e,r),r2(e,ht()),a;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(t1(345));case 2:Z0(e,Zt,be);break;case 3:if(o0(e,r),(r&130023424)===r&&(t=Zc+500-ht(),10<t)){if(Ri(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){Rt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Y3(Z0.bind(null,e,Zt,be),t);break}Z0(e,Zt,be);break;case 4:if(o0(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var h=31-K2(r);i=1<<h,h=t[h],h>n&&(n=h),r&=~i}if(r=n,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HV(r/1960))-r,10<r){e.timeoutHandle=Y3(Z0.bind(null,e,Zt,be),r);break}Z0(e,Zt,be);break;case 5:Z0(e,Zt,be);break;default:throw Error(t1(329))}}}return r2(e,ht()),e.callbackNode===a?Z7.bind(null,e):null}function fc(e,t){var a=Kr;return e.current.memoizedState.isDehydrated&&(r4(e,t).flags|=256),e=nh(e,t),e!==2&&(t=Zt,Zt=a,t!==null&&zc(t)),e}function zc(e){Zt===null?Zt=e:Zt.push.apply(Zt,e)}function xV(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var r=0;r<a.length;r++){var n=a[r],i=n.getSnapshot;n=n.value;try{if(!Y2(i(),n))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function o0(e,t){for(t&=~Jc,t&=~ph,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-K2(t),r=1<<a;e[a]=-1,t&=~r}}function ld(e){if(C1&6)throw Error(t1(327));la();var t=Ri(e,0);if(!(t&1))return r2(e,ht()),null;var a=nh(e,t);if(e.tag!==0&&a===2){var r=F3(e);r!==0&&(t=r,a=fc(e,r))}if(a===1)throw a=un,r4(e,0),o0(e,t),r2(e,ht()),a;if(a===6)throw Error(t1(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Z0(e,Zt,be),r2(e,ht()),null}function ts(e,t){var a=C1;C1|=1;try{return e(t)}finally{C1=a,C1===0&&(ga=ht()+500,vh&&w0())}}function c4(e){s0!==null&&s0.tag===0&&!(C1&6)&&la();var t=C1;C1|=1;var a=_2.transition,r=b1;try{if(_2.transition=null,b1=1,e)return e()}finally{b1=r,_2.transition=a,C1=t,!(C1&6)&&w0()}}function es(){v2=ea.current,G1(ea)}function r4(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,Qx(a)),ot!==null)for(a=ot.return;a!==null;){var r=a;switch(kc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wi();break;case 3:da(),G1(e2),G1(Ot),$c();break;case 5:Uc(r);break;case 4:da();break;case 13:G1(Y1);break;case 19:G1(Y1);break;case 10:jc(r.type._context);break;case 22:case 23:es()}a=a.return}if(ft=e,ot=e=M0(e.current,null),Vt=v2=t,vt=0,un=null,Jc=ph=o4=0,Zt=Kr=null,e4!==null){for(t=0;t<e4.length;t++)if(a=e4[t],r=a.interleaved,r!==null){a.interleaved=null;var n=r.next,i=a.pending;if(i!==null){var h=i.next;i.next=n,r.next=h}a.pending=r}e4=null}return e}function tu(e,t){do{var a=ot;try{if(Ic(),Ti.current=th,Zi){for(var r=Q1.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Zi=!1}if(l4=0,pt=st=Q1=null,Gr=!1,sn=0,Qc.current=null,a===null||a.return===null){vt=1,un=t,ot=null;break}t:{var i=e,h=a.return,l=a,c=t;if(t=Vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var v=c,d=l,z=d.tag;if(!(d.mode&1)&&(z===0||z===11||z===15)){var L=d.alternate;L?(d.updateQueue=L.updateQueue,d.memoizedState=L.memoizedState,d.lanes=L.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=K8(h);if(y!==null){y.flags&=-257,X8(y,h,l,i,t),y.mode&1&&q8(i,v,t),t=y,c=v;var w=t.updateQueue;if(w===null){var O=new Set;O.add(c),t.updateQueue=O}else w.add(c);break t}else{if(!(t&1)){q8(i,v,t),as();break t}c=Error(t1(426))}}else if(K1&&l.mode&1){var k=K8(h);if(k!==null){!(k.flags&65536)&&(k.flags|=256),X8(k,h,l,i,t),Pc(ua(c,l));break t}}i=c=ua(c,l),vt!==4&&(vt=2),Kr===null?Kr=[i]:Kr.push(i),i=h;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var V=D7(i,c,t);R8(i,V);break t;case 1:l=c;var x=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(f0===null||!f0.has(C)))){i.flags|=65536,t&=-t,i.lanes|=t;var T=I7(i,l,t);R8(i,T);break t}}i=i.return}while(i!==null)}ru(a)}catch(S){t=S,ot===a&&a!==null&&(ot=a=a.return);continue}break}while(1)}function eu(){var e=eh.current;return eh.current=th,e===null?th:e}function as(){(vt===0||vt===3||vt===2)&&(vt=4),ft===null||!(o4&268435455)&&!(ph&268435455)||o0(ft,Vt)}function nh(e,t){var a=C1;C1|=2;var r=eu();(ft!==e||Vt!==t)&&(be=null,r4(e,t));do try{VV();break}catch(n){tu(e,n)}while(1);if(Ic(),C1=a,eh.current=r,ot!==null)throw Error(t1(261));return ft=null,Vt=0,vt}function VV(){for(;ot!==null;)au(ot)}function wV(){for(;ot!==null&&!YH();)au(ot)}function au(e){var t=iu(e.alternate,e,v2);e.memoizedProps=e.pendingProps,t===null?ru(e):ot=t,Qc.current=null}function ru(e){var t=e;do{var a=t.alternate;if(e=t.return,t.flags&32768){if(a=fV(a,t),a!==null){a.flags&=32767,ot=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,ot=null;return}}else if(a=pV(a,t,v2),a!==null){ot=a;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);vt===0&&(vt=5)}function Z0(e,t,a){var r=b1,n=_2.transition;try{_2.transition=null,b1=1,LV(e,t,a,r)}finally{_2.transition=n,b1=r}return null}function LV(e,t,a,r){do la();while(s0!==null);if(C1&6)throw Error(t1(327));a=e.finishedWork;var n=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(t1(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(hx(e,i),e===ft&&(ot=ft=null,Vt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||yi||(yi=!0,hu(ji,function(){return la(),null})),i=(a.flags&15990)!==0,a.subtreeFlags&15990||i){i=_2.transition,_2.transition=null;var h=b1;b1=1;var l=C1;C1|=4,Qc.current=null,MV(e,a),Q7(a,e),Gx(K3),Ni=!!q3,K3=q3=null,e.current=a,mV(a,e,n),QH(),C1=l,b1=h,_2.transition=i}else e.current=a;if(yi&&(yi=!1,s0=e,rh=n),i=e.pendingLanes,i===0&&(f0=null),tx(a.stateNode,r),r2(e,ht()),t!==null)for(r=e.onRecoverableError,a=0;a<t.length;a++)n=t[a],r(n.value,{componentStack:n.stack,digest:n.digest});if(ah)throw ah=!1,e=gc,gc=null,e;return rh&1&&e.tag!==0&&la(),i=e.pendingLanes,i&1?e===pc?Xr++:(Xr=0,pc=e):Xr=0,w0(),null}function la(){if(s0!==null){var e=Pd(rh),t=_2.transition,a=b1;try{if(_2.transition=null,b1=16>e?16:e,s0===null)var r=!1;else{if(e=s0,s0=null,rh=0,C1&6)throw Error(t1(331));var n=C1;for(C1|=4,l1=e.current;l1!==null;){var i=l1,h=i.child;if(l1.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var v=l[c];for(l1=v;l1!==null;){var d=l1;switch(d.tag){case 0:case 11:case 15:qr(8,d,i)}var z=d.child;if(z!==null)z.return=d,l1=z;else for(;l1!==null;){d=l1;var L=d.sibling,y=d.return;if(K7(d),d===v){l1=null;break}if(L!==null){L.return=y,l1=L;break}l1=y}}}var w=i.alternate;if(w!==null){var O=w.child;if(O!==null){w.child=null;do{var k=O.sibling;O.sibling=null,O=k}while(O!==null)}}l1=i}}if(i.subtreeFlags&2064&&h!==null)h.return=i,l1=h;else t:for(;l1!==null;){if(i=l1,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qr(9,i,i.return)}var V=i.sibling;if(V!==null){V.return=i.return,l1=V;break t}l1=i.return}}var x=e.current;for(l1=x;l1!==null;){h=l1;var C=h.child;if(h.subtreeFlags&2064&&C!==null)C.return=h,l1=C;else t:for(h=x;l1!==null;){if(l=l1,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gh(9,l)}}catch(S){et(l,l.return,S)}if(l===h){l1=null;break t}var T=l.sibling;if(T!==null){T.return=l.return,l1=T;break t}l1=l.return}}if(C1=n,w0(),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot(hh,e)}catch{}r=!0}return r}finally{b1=a,_2.transition=t}}return!1}function od(e,t,a){t=ua(a,t),t=D7(e,t,1),e=p0(e,t,1),t=Rt(),e!==null&&(gn(e,1,t),r2(e,t))}function et(e,t,a){if(e.tag===3)od(e,e,a);else for(;t!==null;){if(t.tag===3){od(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(f0===null||!f0.has(r))){e=ua(a,e),e=I7(t,e,1),t=p0(t,e,1),e=Rt(),t!==null&&(gn(t,1,e),r2(t,e));break}}t=t.return}}function yV(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&a,ft===e&&(Vt&a)===a&&(vt===4||vt===3&&(Vt&130023424)===Vt&&500>ht()-Zc?r4(e,0):Jc|=a),r2(e,t)}function nu(e,t){t===0&&(e.mode&1?(t=vi,vi<<=1,!(vi&130023424)&&(vi=4194304)):t=1);var a=Rt();e=je(e,t),e!==null&&(gn(e,t,a),r2(e,a))}function CV(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),nu(e,a)}function BV(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(t1(314))}r!==null&&r.delete(t),nu(e,a)}var iu;iu=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||e2.current)t2=!0;else{if(!(e.lanes&a)&&!(t.flags&128))return t2=!1,gV(e,t,a);t2=!!(e.flags&131072)}else t2=!1,K1&&t.flags&1048576&&o7(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bi(e,t),e=t.pendingProps;var n=ca(t,Ot.current);ha(t,a),n=Gc(null,t,r,e,n,a);var i=qc();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,a2(r)?(i=!0,Gi(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Nc(t),n.updater=dh,t.stateNode=n,n._reactInternals=t,rc(t,r,e,a),t=hc(null,t,r,!0,i,a)):(t.tag=0,K1&&i&&Ec(t),jt(null,t,n,a),t=t.child),t;case 16:r=t.elementType;t:{switch(bi(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=_V(r),e=W2(r,e),n){case 0:t=ic(null,t,r,e,a);break t;case 1:t=J8(null,t,r,e,a);break t;case 11:t=Y8(null,t,r,e,a);break t;case 14:t=Q8(null,t,r,W2(r.type,e),a);break t}throw Error(t1(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:W2(r,n),ic(e,t,r,n,a);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:W2(r,n),J8(e,t,r,n,a);case 3:t:{if(F7(t),e===null)throw Error(t1(387));r=t.pendingProps,i=t.memoizedState,n=i.element,d7(e,t),Qi(t,r,null,a);var h=t.memoizedState;if(r=h.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=ua(Error(t1(423)),t),t=Z8(e,t,r,a,n);break t}else if(r!==n){n=ua(Error(t1(424)),t),t=Z8(e,t,r,a,n);break t}else for(d2=g0(t.stateNode.containerInfo.firstChild),u2=t,K1=!0,q2=null,a=f7(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(sa(),r===n){t=Re(e,t,a);break t}jt(e,t,r,a)}t=t.child}return t;case 5:return z7(t),e===null&&tc(t),r=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,h=n.children,X3(r,n)?h=null:i!==null&&X3(r,i)&&(t.flags|=32),N7(e,t),jt(e,t,h,a),t.child;case 6:return e===null&&tc(t),null;case 13:return U7(e,t,a);case 4:return Fc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=va(t,null,r,a):jt(e,t,r,a),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:W2(r,n),Y8(e,t,r,n,a);case 7:return jt(e,t,t.pendingProps,a),t.child;case 8:return jt(e,t,t.pendingProps.children,a),t.child;case 12:return jt(e,t,t.pendingProps.children,a),t.child;case 10:t:{if(r=t.type._context,n=t.pendingProps,i=t.memoizedProps,h=n.value,N1(Xi,r._currentValue),r._currentValue=h,i!==null)if(Y2(i.value,h)){if(i.children===n.children&&!e2.current){t=Re(e,t,a);break t}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){h=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Pe(-1,a&-a),c.tag=2;var v=i.updateQueue;if(v!==null){v=v.shared;var d=v.pending;d===null?c.next=c:(c.next=d.next,d.next=c),v.pending=c}}i.lanes|=a,c=i.alternate,c!==null&&(c.lanes|=a),ec(i.return,a,t),l.lanes|=a;break}c=c.next}}else if(i.tag===10)h=i.type===t.type?null:i.child;else if(i.tag===18){if(h=i.return,h===null)throw Error(t1(341));h.lanes|=a,l=h.alternate,l!==null&&(l.lanes|=a),ec(h,a,t),h=i.sibling}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===t){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}jt(e,t,n.children,a),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,ha(t,a),n=T2(n),r=r(n),t.flags|=1,jt(e,t,r,a),t.child;case 14:return r=t.type,n=W2(r,t.pendingProps),n=W2(r.type,n),Q8(e,t,r,n,a);case 15:return j7(e,t,t.type,t.pendingProps,a);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:W2(r,n),bi(e,t),t.tag=1,a2(r)?(e=!0,Gi(t)):e=!1,ha(t,a),g7(t,r,n),rc(t,r,n,a),hc(null,t,r,!0,e,a);case 19:return $7(e,t,a);case 22:return R7(e,t,a)}throw Error(t1(156,t.tag))};function hu(e,t){return bd(e,t)}function SV(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function S2(e,t,a,r){return new SV(e,t,a,r)}function rs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _V(e){if(typeof e=="function")return rs(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vc)return 11;if(e===wc)return 14}return 2}function M0(e,t){var a=e.alternate;return a===null?(a=S2(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function ki(e,t,a,r,n,i){var h=2;if(r=e,typeof e=="function")rs(e)&&(h=1);else if(typeof e=="string")h=5;else t:switch(e){case W4:return n4(a.children,n,i,t);case xc:h=8,n|=8;break;case B3:return e=S2(12,a,t,n|2),e.elementType=B3,e.lanes=i,e;case S3:return e=S2(13,a,t,n),e.elementType=S3,e.lanes=i,e;case _3:return e=S2(19,a,t,n),e.elementType=_3,e.lanes=i,e;case pd:return fh(a,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ud:h=10;break t;case gd:h=9;break t;case Vc:h=11;break t;case wc:h=14;break t;case i0:h=16,r=null;break t}throw Error(t1(130,e==null?e:typeof e,""))}return t=S2(h,a,t,n),t.elementType=e,t.type=r,t.lanes=i,t}function n4(e,t,a,r){return e=S2(7,e,r,t),e.lanes=a,e}function fh(e,t,a,r){return e=S2(22,e,r,t),e.elementType=pd,e.lanes=a,e.stateNode={isHidden:!1},e}function L3(e,t,a){return e=S2(6,e,null,t),e.lanes=a,e}function y3(e,t,a){return t=S2(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TV(e,t,a,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=o3(0),this.expirationTimes=o3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=o3(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function ns(e,t,a,r,n,i,h,l,c){return e=new TV(e,t,a,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=S2(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(i),e}function OV(e,t,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$4,key:r==null?null:""+r,children:e,containerInfo:t,implementation:a}}function lu(e){if(!e)return H0;e=e._reactInternals;t:{if(v4(e)!==e||e.tag!==1)throw Error(t1(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(a2(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(t1(171))}if(e.tag===1){var a=e.type;if(a2(a))return h7(e,a,t)}return t}function ou(e,t,a,r,n,i,h,l,c){return e=ns(a,r,!0,e,n,i,h,l,c),e.context=lu(null),a=e.current,r=Rt(),n=z0(a),i=Pe(r,n),i.callback=t??null,p0(a,i,n),e.current.lanes=n,gn(e,n,r),r2(e,r),e}function zh(e,t,a,r){var n=t.current,i=Rt(),h=z0(n);return a=lu(a),t.context===null?t.context=a:t.pendingContext=a,t=Pe(i,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=p0(n,t,h),e!==null&&(X2(e,n,h,i),_i(e,n,h)),h}function ih(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function is(e,t){cd(e,t),(e=e.alternate)&&cd(e,t)}function bV(){return null}var cu=typeof reportError=="function"?reportError:function(e){console.error(e)};function hs(e){this._internalRoot=e}Mh.prototype.render=hs.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(t1(409));zh(e,t,null,null)};Mh.prototype.unmount=hs.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;c4(function(){zh(null,e,null,null)}),t[Ie]=null}};function Mh(e){this._internalRoot=e}Mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=jd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<l0.length&&t!==0&&t<l0[a].priority;a++);l0.splice(a,0,e),a===0&&Nd(e)}};function ls(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sd(){}function AV(e,t,a,r,n){if(n){if(typeof r=="function"){var i=r;r=function(){var v=ih(h);i.call(v)}}var h=ou(t,r,e,0,null,!1,!1,"",sd);return e._reactRootContainer=h,e[Ie]=h.current,nn(e.nodeType===8?e.parentNode:e),c4(),h}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var l=r;r=function(){var v=ih(c);l.call(v)}}var c=ns(e,0,!1,null,null,!1,!1,"",sd);return e._reactRootContainer=c,e[Ie]=c.current,nn(e.nodeType===8?e.parentNode:e),c4(function(){zh(t,c,a,r)}),c}function Hh(e,t,a,r,n){var i=a._reactRootContainer;if(i){var h=i;if(typeof n=="function"){var l=n;n=function(){var c=ih(h);l.call(c)}}zh(t,h,e,n)}else h=AV(a,t,e,n,r);return ih(h)}Dd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=jr(t.pendingLanes);a!==0&&(Cc(t,a|1),r2(t,ht()),!(C1&6)&&(ga=ht()+500,w0()))}break;case 13:c4(function(){var r=je(e,1);if(r!==null){var n=Rt();X2(r,e,1,n)}}),is(e,1)}};Bc=function(e){if(e.tag===13){var t=je(e,134217728);if(t!==null){var a=Rt();X2(t,e,134217728,a)}is(e,134217728)}};Id=function(e){if(e.tag===13){var t=z0(e),a=je(e,t);if(a!==null){var r=Rt();X2(a,e,t,r)}is(e,t)}};jd=function(){return b1};Rd=function(e,t){var a=b1;try{return b1=e,t()}finally{b1=a}};j3=function(e,t,a){switch(t){case"input":if(b3(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var n=sh(r);if(!n)throw Error(t1(90));zd(r),b3(r,n)}}}break;case"textarea":md(e,a);break;case"select":t=a.value,t!=null&&aa(e,!!a.multiple,t,!1)}};Cd=ts;Bd=c4;var EV={usingClientEntryPoint:!1,Events:[fn,X4,sh,Ld,yd,ts]},kr={findFiberByHostInstance:t4,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},kV={bundleType:kr.bundleType,version:kr.version,rendererPackageName:kr.rendererPackageName,rendererConfig:kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Td(e),e===null?null:e.stateNode},findFiberByHostInstance:kr.findFiberByHostInstance||bV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Pr=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Pr.isDisabled&&Pr.supportsFiber))try{hh=Pr.inject(kV),ue=Pr}catch{}var Pr;f2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EV;f2.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ls(t))throw Error(t1(200));return OV(e,t,null,a)};f2.createRoot=function(e,t){if(!ls(e))throw Error(t1(299));var a=!1,r="",n=cu;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=ns(e,1,!1,null,null,a,!1,r,n),e[Ie]=t.current,nn(e.nodeType===8?e.parentNode:e),new hs(t)};f2.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(t1(188)):(e=Object.keys(e).join(","),Error(t1(268,e)));return e=Td(t),e=e===null?null:e.stateNode,e};f2.flushSync=function(e){return c4(e)};f2.hydrate=function(e,t,a){if(!mh(t))throw Error(t1(200));return Hh(null,e,t,!0,a)};f2.hydrateRoot=function(e,t,a){if(!ls(e))throw Error(t1(405));var r=a!=null&&a.hydratedSources||null,n=!1,i="",h=cu;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onRecoverableError!==void 0&&(h=a.onRecoverableError)),t=ou(t,null,e,1,a??null,n,!1,i,h),e[Ie]=t.current,nn(e),r)for(e=0;e<r.length;e++)a=r[e],n=a._getVersion,n=n(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new Mh(t)};f2.render=function(e,t,a){if(!mh(t))throw Error(t1(200));return Hh(null,e,t,!1,a)};f2.unmountComponentAtNode=function(e){if(!mh(e))throw Error(t1(40));return e._reactRootContainer?(c4(function(){Hh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ie]=null})}),!0):!1};f2.unstable_batchedUpdates=ts;f2.unstable_renderSubtreeIntoContainer=function(e,t,a,r){if(!mh(a))throw Error(t1(200));if(e==null||e._reactInternals===void 0)throw Error(t1(38));return Hh(e,t,a,!1,r)};f2.version="18.2.0-next-9e3b772b8-20220608"});var uu=x1((s_,du)=>{"use strict";function vu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vu)}catch(e){console.error(e)}}vu(),du.exports=su()});var pu=x1(os=>{"use strict";var gu=uu();os.createRoot=gu.createRoot,os.hydrateRoot=gu.hydrateRoot;var v_});var vs=x1((cs,ss)=>{(function(e,t){typeof cs=="object"&&typeof ss<"u"?ss.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t()})(cs,function(){"use strict";var e=1e3,t=6e4,a=36e5,r="millisecond",n="second",i="minute",h="hour",l="day",c="week",v="month",d="quarter",z="year",L="date",y="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var J=["th","st","nd","rd"],W=Y%100;return"["+Y+(J[(W-20)%10]||J[W]||J[0])+"]"}},V=function(Y,J,W){var K=String(Y);return!K||K.length>=J?Y:""+Array(J+1-K.length).join(W)+Y},x={s:V,z:function(Y){var J=-Y.utcOffset(),W=Math.abs(J),K=Math.floor(W/60),Z=W%60;return(J<=0?"+":"-")+V(K,2,"0")+":"+V(Z,2,"0")},m:function Y(J,W){if(J.date()<W.date())return-Y(W,J);var K=12*(W.year()-J.year())+(W.month()-J.month()),Z=J.clone().add(K,v),n1=W-Z<0,o1=J.clone().add(K+(n1?-1:1),v);return+(-(K+(W-Z)/(n1?Z-o1:o1-Z))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:v,y:z,w:c,d:l,D:L,h,m:i,s:n,ms:r,Q:d}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},C="en",T={};T[C]=k;var S=function(Y){return Y instanceof e1},R=function Y(J,W,K){var Z;if(!J)return C;if(typeof J=="string"){var n1=J.toLowerCase();T[n1]&&(Z=n1),W&&(T[n1]=W,Z=n1);var o1=J.split("-");if(!Z&&o1.length>1)return Y(o1[0])}else{var s1=J.name;T[s1]=J,Z=s1}return!K&&Z&&(C=Z),Z||!K&&C},N=function(Y,J){if(S(Y))return Y.clone();var W=typeof J=="object"?J:{};return W.date=Y,W.args=arguments,new e1(W)},$=x;$.l=R,$.i=S,$.w=function(Y,J){return N(Y,{locale:J.$L,utc:J.$u,x:J.$x,$offset:J.$offset})};var e1=function(){function Y(W){this.$L=R(W.locale,null,!0),this.parse(W)}var J=Y.prototype;return J.parse=function(W){this.$d=function(K){var Z=K.date,n1=K.utc;if(Z===null)return new Date(NaN);if($.u(Z))return new Date;if(Z instanceof Date)return new Date(Z);if(typeof Z=="string"&&!/Z$/i.test(Z)){var o1=Z.match(w);if(o1){var s1=o1[2]-1||0,B1=(o1[7]||"0").substring(0,3);return n1?new Date(Date.UTC(o1[1],s1,o1[3]||1,o1[4]||0,o1[5]||0,o1[6]||0,B1)):new Date(o1[1],s1,o1[3]||1,o1[4]||0,o1[5]||0,o1[6]||0,B1)}}return new Date(Z)}(W),this.$x=W.x||{},this.init()},J.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},J.$utils=function(){return $},J.isValid=function(){return this.$d.toString()!==y},J.isSame=function(W,K){var Z=N(W);return this.startOf(K)<=Z&&Z<=this.endOf(K)},J.isAfter=function(W,K){return N(W)<this.startOf(K)},J.isBefore=function(W,K){return this.endOf(K)<N(W)},J.$g=function(W,K,Z){return $.u(W)?this[K]:this.set(Z,W)},J.unix=function(){return Math.floor(this.valueOf()/1e3)},J.valueOf=function(){return this.$d.getTime()},J.startOf=function(W,K){var Z=this,n1=!!$.u(K)||K,o1=$.p(W),s1=function(I2,gt){var V2=$.w(Z.$u?Date.UTC(Z.$y,gt,I2):new Date(Z.$y,gt,I2),Z);return n1?V2:V2.endOf(l)},B1=function(I2,gt){return $.w(Z.toDate()[I2].apply(Z.toDate("s"),(n1?[0,0,0,0]:[23,59,59,999]).slice(gt)),Z)},L1=this.$W,j1=this.$M,dt=this.$D,ut="set"+(this.$u?"UTC":"");switch(o1){case z:return n1?s1(1,0):s1(31,11);case v:return n1?s1(1,j1):s1(0,j1+1);case c:var ie=this.$locale().weekStart||0,he=(L1<ie?L1+7:L1)-ie;return s1(n1?dt-he:dt+(6-he),j1);case l:case L:return B1(ut+"Hours",0);case h:return B1(ut+"Minutes",1);case i:return B1(ut+"Seconds",2);case n:return B1(ut+"Milliseconds",3);default:return this.clone()}},J.endOf=function(W){return this.startOf(W,!1)},J.$set=function(W,K){var Z,n1=$.p(W),o1="set"+(this.$u?"UTC":""),s1=(Z={},Z[l]=o1+"Date",Z[L]=o1+"Date",Z[v]=o1+"Month",Z[z]=o1+"FullYear",Z[h]=o1+"Hours",Z[i]=o1+"Minutes",Z[n]=o1+"Seconds",Z[r]=o1+"Milliseconds",Z)[n1],B1=n1===l?this.$D+(K-this.$W):K;if(n1===v||n1===z){var L1=this.clone().set(L,1);L1.$d[s1](B1),L1.init(),this.$d=L1.set(L,Math.min(this.$D,L1.daysInMonth())).$d}else s1&&this.$d[s1](B1);return this.init(),this},J.set=function(W,K){return this.clone().$set(W,K)},J.get=function(W){return this[$.p(W)]()},J.add=function(W,K){var Z,n1=this;W=Number(W);var o1=$.p(K),s1=function(j1){var dt=N(n1);return $.w(dt.date(dt.date()+Math.round(j1*W)),n1)};if(o1===v)return this.set(v,this.$M+W);if(o1===z)return this.set(z,this.$y+W);if(o1===l)return s1(1);if(o1===c)return s1(7);var B1=(Z={},Z[i]=t,Z[h]=a,Z[n]=e,Z)[o1]||1,L1=this.$d.getTime()+W*B1;return $.w(L1,this)},J.subtract=function(W,K){return this.add(-1*W,K)},J.format=function(W){var K=this,Z=this.$locale();if(!this.isValid())return Z.invalidDate||y;var n1=W||"YYYY-MM-DDTHH:mm:ssZ",o1=$.z(this),s1=this.$H,B1=this.$m,L1=this.$M,j1=Z.weekdays,dt=Z.months,ut=function(gt,V2,I0,t0){return gt&&(gt[V2]||gt(K,n1))||I0[V2].slice(0,t0)},ie=function(gt){return $.s(s1%12||12,gt,"0")},he=Z.meridiem||function(gt,V2,I0){var t0=gt<12?"AM":"PM";return I0?t0.toLowerCase():t0},I2={YY:String(this.$y).slice(-2),YYYY:$.s(this.$y,4,"0"),M:L1+1,MM:$.s(L1+1,2,"0"),MMM:ut(Z.monthsShort,L1,dt,3),MMMM:ut(dt,L1),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:ut(Z.weekdaysMin,this.$W,j1,2),ddd:ut(Z.weekdaysShort,this.$W,j1,3),dddd:j1[this.$W],H:String(s1),HH:$.s(s1,2,"0"),h:ie(1),hh:ie(2),a:he(s1,B1,!0),A:he(s1,B1,!1),m:String(B1),mm:$.s(B1,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:o1};return n1.replace(O,function(gt,V2){return V2||I2[gt]||o1.replace(":","")})},J.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},J.diff=function(W,K,Z){var n1,o1=$.p(K),s1=N(W),B1=(s1.utcOffset()-this.utcOffset())*t,L1=this-s1,j1=$.m(this,s1);return j1=(n1={},n1[z]=j1/12,n1[v]=j1,n1[d]=j1/3,n1[c]=(L1-B1)/6048e5,n1[l]=(L1-B1)/864e5,n1[h]=L1/a,n1[i]=L1/t,n1[n]=L1/e,n1)[o1]||L1,Z?j1:$.a(j1)},J.daysInMonth=function(){return this.endOf(v).$D},J.$locale=function(){return T[this.$L]},J.locale=function(W,K){if(!W)return this.$L;var Z=this.clone(),n1=R(W,K,!0);return n1&&(Z.$L=n1),Z},J.clone=function(){return $.w(this.$d,this)},J.toDate=function(){return new Date(this.valueOf())},J.toJSON=function(){return this.isValid()?this.toISOString():null},J.toISOString=function(){return this.$d.toISOString()},J.toString=function(){return this.$d.toUTCString()},Y}(),r1=e1.prototype;return N.prototype=r1,[["$ms",r],["$s",n],["$m",i],["$H",h],["$W",l],["$M",v],["$y",z],["$D",L]].forEach(function(Y){r1[Y[1]]=function(J){return this.$g(J,Y[0],Y[1])}}),N.extend=function(Y,J){return Y.$i||(Y(J,e1,N),Y.$i=!0),N},N.locale=R,N.isDayjs=S,N.unix=function(Y){return N(1e3*Y)},N.en=T[C],N.Ls=T,N.p={},N})});var Mu=x1(Vh=>{"use strict";var DV=Jt(),IV=Symbol.for("react.element"),jV=Symbol.for("react.fragment"),RV=Object.prototype.hasOwnProperty,NV=DV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FV={key:!0,ref:!0,__self:!0,__source:!0};function zu(e,t,a){var r,n={},i=null,h=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)RV.call(t,r)&&!FV.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:IV,type:e,key:i,ref:h,props:n,_owner:NV.current}}Vh.Fragment=jV;Vh.jsx=zu;Vh.jsxs=zu});var at=x1((f_,mu)=>{"use strict";mu.exports=Mu()});var A2=x1((H_,wu)=>{var Mn;typeof window<"u"?Mn=window:typeof global<"u"?Mn=global:typeof self<"u"?Mn=self:Mn={};wu.exports=Mn});var Lu=x1(()=>{});var ds=x1((w_,Cu)=>{var yu=typeof global<"u"?global:typeof window<"u"?window:{},$V=Lu(),mn;typeof document<"u"?mn=document:(mn=yu["__GLOBAL_DOCUMENT_CACHE@4"],mn||(mn=yu["__GLOBAL_DOCUMENT_CACHE@4"]=$V));Cu.exports=mn});var Tu=x1((d4,_u)=>{function Bu(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return Su[e];var a=String(e),r=Fe[a.toLowerCase()];if(r)return r;var r=wh[a.toLowerCase()];if(r)return r;if(a.length===1)return a.charCodeAt(0)}Bu.isEventKey=function(t,a){if(t&&typeof t=="object"){var r=t.which||t.keyCode||t.charCode;if(r==null)return!1;if(typeof a=="string"){var n=Fe[a.toLowerCase()];if(n)return n===r;var n=wh[a.toLowerCase()];if(n)return n===r}else if(typeof a=="number")return a===r;return!1}};d4=_u.exports=Bu;var Fe=d4.code=d4.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},wh=d4.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Z1=97;Z1<123;Z1++)Fe[String.fromCharCode(Z1)]=Z1-32;for(Z1=48;Z1<58;Z1++)Fe[Z1-48]=Z1;var Z1;for(Z1=1;Z1<13;Z1++)Fe["f"+Z1]=Z1+111;for(Z1=0;Z1<10;Z1++)Fe["numpad "+Z1]=Z1+96;var Su=d4.names=d4.title={};for(Z1 in Fe)Su[Fe[Z1]]=Z1;for(us in wh)Fe[us]=wh[us];var us});var bu=x1((L_,Ou)=>{Ou.exports=WV;function WV(e,t){var a,r=null;try{a=JSON.parse(e,t)}catch(n){r=n}return[r,a]}});var Au=x1((y_,Ue)=>{function gs(){return Ue.exports=gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports,gs.apply(this,arguments)}Ue.exports=gs,Ue.exports.__esModule=!0,Ue.exports.default=Ue.exports});var ku=x1((C_,Eu)=>{Eu.exports=qV;var GV=Object.prototype.toString;function qV(e){if(!e)return!1;var t=GV.call(e);return t==="[object Function]"||typeof e=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}});var Du=x1((B_,Pu)=>{"use strict";var KV=A2(),XV=function(t,a){return a===void 0&&(a=!1),function(r,n,i){if(r){t(r);return}if(n.statusCode>=400&&n.statusCode<=599){var h=i;if(a)if(KV.TextDecoder){var l=YV(n.headers&&n.headers["content-type"]);try{h=new TextDecoder(l).decode(i)}catch{}}else h=String.fromCharCode.apply(null,new Uint8Array(i));t({cause:h});return}t(null,i)}};function YV(e){return e===void 0&&(e=""),e.toLowerCase().split(";").reduce(function(t,a){var r=a.split("="),n=r[0],i=r[1];return n.trim()==="charset"?i.trim():t},"utf-8")}Pu.exports=XV});var Nu=x1((S_,ps)=>{"use strict";var Iu=A2(),QV=Au(),JV=ku();pe.httpHandler=Du();var ZV=function(t){var a={};return t&&t.trim().split(`
`).forEach(function(r){var n=r.indexOf(":"),i=r.slice(0,n).trim().toLowerCase(),h=r.slice(n+1).trim();typeof a[i]>"u"?a[i]=h:Array.isArray(a[i])?a[i].push(h):a[i]=[a[i],h]}),a};ps.exports=pe;ps.exports.default=pe;pe.XMLHttpRequest=Iu.XMLHttpRequest||rw;pe.XDomainRequest="withCredentials"in new pe.XMLHttpRequest?pe.XMLHttpRequest:Iu.XDomainRequest;tw(["get","put","post","patch","head","delete"],function(e){pe[e==="delete"?"del":e]=function(t,a,r){return a=ju(t,a,r),a.method=e.toUpperCase(),Ru(a)}});function tw(e,t){for(var a=0;a<e.length;a++)t(e[a])}function ew(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ju(e,t,a){var r=e;return JV(t)?(a=t,typeof e=="string"&&(r={uri:e})):r=QV({},t,{uri:e}),r.callback=a,r}function pe(e,t,a){return t=ju(e,t,a),Ru(t)}function Ru(e){if(typeof e.callback>"u")throw new Error("callback argument missing");var t=!1,a=function(C,T,S){t||(t=!0,e.callback(C,T,S))};function r(){l.readyState===4&&setTimeout(h,0)}function n(){var x=void 0;if(l.response?x=l.response:x=l.responseText||aw(l),O)try{x=JSON.parse(x)}catch{}return x}function i(x){return clearTimeout(k),x instanceof Error||(x=new Error(""+(x||"Unknown XMLHttpRequest Error"))),x.statusCode=0,a(x,V)}function h(){if(!v){var x;clearTimeout(k),e.useXDR&&l.status===void 0?x=200:x=l.status===1223?204:l.status;var C=V,T=null;return x!==0?(C={body:n(),statusCode:x,method:z,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(C.headers=ZV(l.getAllResponseHeaders()))):T=new Error("Internal XMLHttpRequest Error"),a(T,C,C.body)}}var l=e.xhr||null;l||(e.cors||e.useXDR?l=new pe.XDomainRequest:l=new pe.XMLHttpRequest);var c,v,d=l.url=e.uri||e.url,z=l.method=e.method||"GET",L=e.body||e.data,y=l.headers=e.headers||{},w=!!e.sync,O=!1,k,V={body:void 0,headers:{},statusCode:0,method:z,url:d,rawRequest:l};if("json"in e&&e.json!==!1&&(O=!0,y.accept||y.Accept||(y.Accept="application/json"),z!=="GET"&&z!=="HEAD"&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),L=JSON.stringify(e.json===!0?L:e.json))),l.onreadystatechange=r,l.onload=h,l.onerror=i,l.onprogress=function(){},l.onabort=function(){v=!0},l.ontimeout=i,l.open(z,d,!w,e.username,e.password),w||(l.withCredentials=!!e.withCredentials),!w&&e.timeout>0&&(k=setTimeout(function(){if(!v){v=!0,l.abort("timeout");var x=new Error("XMLHttpRequest timeout");x.code="ETIMEDOUT",i(x)}},e.timeout)),l.setRequestHeader)for(c in y)y.hasOwnProperty(c)&&l.setRequestHeader(c,y[c]);else if(e.headers&&!ew(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&typeof e.beforeSend=="function"&&e.beforeSend(l),l.send(L||null),l}function aw(e){try{if(e.responseType==="document")return e.responseXML;var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t)return e.responseXML}catch{}return null}function rw(){}});var Ku=x1((__,qu)=>{var Fu=ds(),zs=Object.create||function(){function e(){}return function(t){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function z2(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}z2.prototype=zs(Error.prototype);z2.prototype.constructor=z2;z2.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Ms(e){function t(r,n,i,h){return(r|0)*3600+(n|0)*60+(i|0)+(h|0)/1e3}var a=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return a?a[3]?t(a[1],a[2],a[3].replace(":",""),a[4]):a[1]>59?t(a[1],a[2],0,a[4]):t(0,a[1],a[2],a[4]):null}function xn(){this.values=zs(null)}xn.prototype={set:function(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)},get:function(e,t,a){return a?this.has(e)?this.values[e]:t[a]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,a){for(var r=0;r<a.length;++r)if(t===a[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var a;return(a=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100)?(this.set(e,t),!0):!1}};function Hn(e,t,a,r){var n=r?e.split(r):[e];for(var i in n)if(typeof n[i]=="string"){var h=n[i].split(a);if(h.length===2){var l=h[0].trim(),c=h[1].trim();t(l,c)}}}function nw(e,t,a){var r=e;function n(){var l=Ms(e);if(l===null)throw new z2(z2.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),l}function i(l,c){var v=new xn;Hn(l,function(d,z){switch(d){case"region":for(var L=a.length-1;L>=0;L--)if(a[L].id===z){v.set(d,a[L].region);break}break;case"vertical":v.alt(d,z,["rl","lr"]);break;case"line":var y=z.split(","),w=y[0];v.integer(d,w),v.percent(d,w)&&v.set("snapToLines",!1),v.alt(d,w,["auto"]),y.length===2&&v.alt("lineAlign",y[1],["start","center","end"]);break;case"position":y=z.split(","),v.percent(d,y[0]),y.length===2&&v.alt("positionAlign",y[1],["start","center","end"]);break;case"size":v.percent(d,z);break;case"align":v.alt(d,z,["start","center","end","left","right"]);break}},/:/,/\s/),c.region=v.get("region",null),c.vertical=v.get("vertical","");try{c.line=v.get("line","auto")}catch{}c.lineAlign=v.get("lineAlign","start"),c.snapToLines=v.get("snapToLines",!0),c.size=v.get("size",100);try{c.align=v.get("align","center")}catch{c.align=v.get("align","middle")}try{c.position=v.get("position","auto")}catch{c.position=v.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},c.align)}c.positionAlign=v.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},c.align)}function h(){e=e.replace(/^\s+/,"")}if(h(),t.startTime=n(),h(),e.substr(0,3)!=="-->")throw new z2(z2.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+r);e=e.substr(3),h(),t.endTime=n(),h(),i(e,t)}var fs=Fu.createElement&&Fu.createElement("textarea"),iw={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Uu={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},hw={v:"title",lang:"lang"},$u={rt:"ruby"};function Gu(e,t){function a(){if(!t)return null;function w(k){return t=t.substr(k.length),k}var O=t.match(/^([^<]*)(<[^>]*>?)?/);return w(O[1]?O[1]:O[2])}function r(w){return fs.innerHTML=w,w=fs.textContent,fs.textContent="",w}function n(w,O){return!$u[O.localName]||$u[O.localName]===w.localName}function i(w,O){var k=iw[w];if(!k)return null;var V=e.document.createElement(k),x=hw[w];return x&&O&&(V[x]=O.trim()),V}for(var h=e.document.createElement("div"),l=h,c,v=[];(c=a())!==null;){if(c[0]==="<"){if(c[1]==="/"){v.length&&v[v.length-1]===c.substr(2).replace(">","")&&(v.pop(),l=l.parentNode);continue}var d=Ms(c.substr(1,c.length-2)),z;if(d){z=e.document.createProcessingInstruction("timestamp",d),l.appendChild(z);continue}var L=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!L||(z=i(L[1],L[3]),!z)||!n(l,z))continue;if(L[2]){var y=L[2].split(".");y.forEach(function(w){var O=/^bg_/.test(w),k=O?w.slice(3):w;if(Uu.hasOwnProperty(k)){var V=O?"background-color":"color",x=Uu[k];z.style[V]=x}}),z.className=y.join(" ")}v.push(L[1]),l.appendChild(z),l=z;continue}l.appendChild(e.document.createTextNode(r(c)))}return h}var Wu=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function lw(e){for(var t=0;t<Wu.length;t++){var a=Wu[t];if(e>=a[0]&&e<=a[1])return!0}return!1}function ow(e){var t=[],a="",r;if(!e||!e.childNodes)return"ltr";function n(l,c){for(var v=c.childNodes.length-1;v>=0;v--)l.push(c.childNodes[v])}function i(l){if(!l||!l.length)return null;var c=l.pop(),v=c.textContent||c.innerText;if(v){var d=v.match(/^.*(\n|\r)/);return d?(l.length=0,d[0]):v}if(c.tagName==="ruby")return i(l);if(c.childNodes)return n(l,c),i(l)}for(n(t,e);a=i(t);)for(var h=0;h<a.length;h++)if(r=a.charCodeAt(h),lw(r))return"rtl";return"ltr"}function cw(e){if(typeof e.line=="number"&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,a=t.textTrackList,r=0,n=0;n<a.length&&a[n]!==t;n++)a[n].mode==="showing"&&r++;return++r*-1}function yh(){}yh.prototype.applyStyles=function(e,t){t=t||this.div;for(var a in e)e.hasOwnProperty(a)&&(t.style[a]=e[a])};yh.prototype.formatStyle=function(e,t){return e===0?0:e+t};function Lh(e,t,a){yh.call(this),this.cue=t,this.cueDiv=Gu(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:ow(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:a.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var n=0;switch(t.positionAlign){case"start":n=t.position;break;case"center":n=t.position-t.size/2;break;case"end":n=t.position-t.size;break}t.vertical===""?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}Lh.prototype=zs(yh.prototype);Lh.prototype.constructor=Lh;function Ft(e){var t,a,r,n;if(e.div){a=e.div.offsetHeight,r=e.div.offsetWidth,n=e.div.offsetTop;var i=(i=e.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects();e=e.div.getBoundingClientRect(),t=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0}this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||a,this.bottom=e.bottom||n+(e.height||a),this.width=e.width||r,this.lineHeight=t!==void 0?t:e.lineHeight}Ft.prototype.move=function(e,t){switch(t=t!==void 0?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}};Ft.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};Ft.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1};Ft.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right};Ft.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}};Ft.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),a=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),r=t*a;return r/(this.height*this.width)};Ft.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}};Ft.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,a=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var n={left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||a};return n};function sw(e,t,a,r){function n(k,V){for(var x,C=new Ft(k),T=1,S=0;S<V.length;S++){for(;k.overlapsOppositeAxis(a,V[S])||k.within(a)&&k.overlapsAny(r);)k.move(V[S]);if(k.within(a))return k;var R=k.intersectPercentage(a);T>R&&(x=new Ft(k),T=R),k=new Ft(C)}return x||C}var i=new Ft(t),h=t.cue,l=cw(h),c=[];if(h.snapToLines){var v;switch(h.vertical){case"":c=["+y","-y"],v="height";break;case"rl":c=["+x","-x"],v="width";break;case"lr":c=["-x","+x"],v="width";break}var d=i.lineHeight,z=d*Math.round(l),L=a[v]+d,y=c[0];Math.abs(z)>L&&(z=z<0?-1:1,z*=Math.ceil(L/d)*d),l<0&&(z+=h.vertical===""?a.height:a.width,c=c.reverse()),i.move(y,z)}else{var w=i.lineHeight/a.height*100;switch(h.lineAlign){case"center":l-=w/2;break;case"end":l-=w;break}switch(h.vertical){case"":t.applyStyles({top:t.formatStyle(l,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(l,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(l,"%")});break}c=["+y","-x","+x","-y"],i=new Ft(t)}var O=n(i,c);t.move(O.toCSSCompatValues(a))}function Ha(){}Ha.StringDecoder=function(){return{decode:function(e){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};Ha.convertCueToDOMTree=function(e,t){return!e||!t?null:Gu(e,t)};var vw=.05,dw="sans-serif",uw="1.5%";Ha.processCues=function(e,t,a){if(!e||!t||!a)return null;for(;a.firstChild;)a.removeChild(a.firstChild);var r=e.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=uw,a.appendChild(r);function n(d){for(var z=0;z<d.length;z++)if(d[z].hasBeenReset||!d[z].displayState)return!0;return!1}if(!n(t)){for(var i=0;i<t.length;i++)r.appendChild(t[i].displayState);return}var h=[],l=Ft.getSimpleBoxPosition(r),c=Math.round(l.height*vw*100)/100,v={font:c+"px "+dw};(function(){for(var d,z,L=0;L<t.length;L++)z=t[L],d=new Lh(e,z,v),r.appendChild(d.div),sw(e,d,l,h),z.displayState=d.div,h.push(Ft.getSimpleBoxPosition(d))})()};Ha.Parser=function(e,t,a){a||(a=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=a||new TextDecoder("utf8"),this.regionList=[]};Ha.Parser.prototype={reportOrThrowError:function(e){if(e instanceof z2)this.onparsingerror&&this.onparsingerror(e);else throw e},parse:function(e){var t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function a(){for(var d=t.buffer,z=0;z<d.length&&d[z]!=="\r"&&d[z]!==`
`;)++z;var L=d.substr(0,z);return d[z]==="\r"&&++z,d[z]===`
`&&++z,t.buffer=d.substr(z),L}function r(d){var z=new xn;if(Hn(d,function(y,w){switch(y){case"id":z.set(y,w);break;case"width":z.percent(y,w);break;case"lines":z.integer(y,w);break;case"regionanchor":case"viewportanchor":var O=w.split(",");if(O.length!==2)break;var k=new xn;if(k.percent("x",O[0]),k.percent("y",O[1]),!k.has("x")||!k.has("y"))break;z.set(y+"X",k.get("x")),z.set(y+"Y",k.get("y"));break;case"scroll":z.alt(y,w,["up"]);break}},/=/,/\s/),z.has("id")){var L=new(t.vttjs.VTTRegion||t.window.VTTRegion);L.width=z.get("width",100),L.lines=z.get("lines",3),L.regionAnchorX=z.get("regionanchorX",0),L.regionAnchorY=z.get("regionanchorY",100),L.viewportAnchorX=z.get("viewportanchorX",0),L.viewportAnchorY=z.get("viewportanchorY",100),L.scroll=z.get("scroll",""),t.onregion&&t.onregion(L),t.regionList.push({id:z.get("id"),region:L})}}function n(d){var z=new xn;Hn(d,function(L,y){switch(L){case"MPEGT":z.integer(L+"S",y);break;case"LOCA":z.set(L+"L",Ms(y));break}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:z.get("MPEGTS"),LOCAL:z.get("LOCAL")})}function i(d){d.match(/X-TIMESTAMP-MAP/)?Hn(d,function(z,L){switch(z){case"X-TIMESTAMP-MAP":n(L);break}},/=/):Hn(d,function(z,L){switch(z){case"Region":r(L);break}},/:/)}try{var h;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;h=a();var l=h.match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new z2(z2.Errors.BadSignature);t.state="HEADER"}for(var c=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(c?c=!1:h=a(),t.state){case"HEADER":/:/.test(h)?i(h):h||(t.state="ID");continue;case"NOTE":h||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(h)){t.state="NOTE";break}if(!h)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch{t.cue.align="middle"}if(t.state="CUE",h.indexOf("-->")===-1){t.cue.id=h;continue}case"CUE":try{nw(h,t.cue,t.regionList)}catch(d){t.reportOrThrowError(d),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var v=h.indexOf("-->")!==-1;if(!h||v&&(c=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+=`
`),t.cue.text+=h.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":h||(t.state="ID");continue}}}catch(d){t.reportOrThrowError(d),t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL")throw new z2(z2.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};qu.exports=Ha});var Qu=x1((T_,Yu)=>{var gw="auto",pw={"":1,lr:1,rl:1},fw={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function zw(e){if(typeof e!="string")return!1;var t=pw[e.toLowerCase()];return t?e.toLowerCase():!1}function ms(e){if(typeof e!="string")return!1;var t=fw[e.toLowerCase()];return t?e.toLowerCase():!1}function Xu(e,t,a){this.hasBeenReset=!1;var r="",n=!1,i=e,h=t,l=a,c=null,v="",d=!0,z="auto",L="start",y="auto",w="auto",O=100,k="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(V){r=""+V}},pauseOnExit:{enumerable:!0,get:function(){return n},set:function(V){n=!!V}},startTime:{enumerable:!0,get:function(){return i},set:function(V){if(typeof V!="number")throw new TypeError("Start time must be set to a number.");i=V,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(V){if(typeof V!="number")throw new TypeError("End time must be set to a number.");h=V,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(V){l=""+V,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(V){c=V,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(V){var x=zw(V);if(x===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=x,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(V){d=!!V,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return z},set:function(V){if(typeof V!="number"&&V!==gw)throw new SyntaxError("Line: an invalid number or illegal string was specified.");z=V,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return L},set:function(V){var x=ms(V);x?(L=x,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return y},set:function(V){if(V<0||V>100)throw new Error("Position must be between 0 and 100.");y=V,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return w},set:function(V){var x=ms(V);x?(w=x,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return O},set:function(V){if(V<0||V>100)throw new Error("Size must be between 0 and 100.");O=V,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return k},set:function(V){var x=ms(V);if(!x)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");k=x,this.hasBeenReset=!0}}}),this.displayState=void 0}Xu.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};Yu.exports=Xu});var Zu=x1((O_,Ju)=>{var Mw={"":!0,up:!0};function mw(e){if(typeof e!="string")return!1;var t=Mw[e.toLowerCase()];return t?e.toLowerCase():!1}function Vn(e){return typeof e=="number"&&e>=0&&e<=100}function Hw(){var e=100,t=3,a=0,r=100,n=0,i=100,h="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(l){if(!Vn(l))throw new Error("Width must be between 0 and 100.");e=l}},lines:{enumerable:!0,get:function(){return t},set:function(l){if(typeof l!="number")throw new TypeError("Lines must be set to a number.");t=l}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(l){if(!Vn(l))throw new Error("RegionAnchorX must be between 0 and 100.");r=l}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(l){if(!Vn(l))throw new Error("RegionAnchorY must be between 0 and 100.");a=l}},viewportAnchorY:{enumerable:!0,get:function(){return i},set:function(l){if(!Vn(l))throw new Error("ViewportAnchorY must be between 0 and 100.");i=l}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(l){if(!Vn(l))throw new Error("ViewportAnchorX must be between 0 and 100.");n=l}},scroll:{enumerable:!0,get:function(){return h},set:function(l){var c=mw(l);c===!1?console.warn("Scroll: an invalid or illegal string was specified."):h=c}}})}Ju.exports=Hw});var eg=x1((b_,tg)=>{var $e=A2(),u4=tg.exports={WebVTT:Ku(),VTTCue:Qu(),VTTRegion:Zu()};$e.vttjs=u4;$e.WebVTT=u4.WebVTT;var xw=u4.VTTCue,Vw=u4.VTTRegion,ww=$e.VTTCue,Lw=$e.VTTRegion;u4.shim=function(){$e.VTTCue=xw,$e.VTTRegion=Vw};u4.restore=function(){$e.VTTCue=ww,$e.VTTRegion=Lw};$e.VTTCue||u4.shim()});var xs=x1((wn,Hs)=>{(function(e){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,a=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(h,l,c){if(c=c||{},h=h.trim(),l=l.trim(),!l){if(!c.alwaysNormalize)return h;var v=i.parseURL(h);if(!v)throw new Error("Error trying to parse base URL.");return v.path=i.normalizePath(v.path),i.buildURLFromParts(v)}var d=i.parseURL(l);if(!d)throw new Error("Error trying to parse relative URL.");if(d.scheme)return c.alwaysNormalize?(d.path=i.normalizePath(d.path),i.buildURLFromParts(d)):l;var z=i.parseURL(h);if(!z)throw new Error("Error trying to parse base URL.");if(!z.netLoc&&z.path&&z.path[0]!=="/"){var L=a.exec(z.path);z.netLoc=L[1],z.path=L[2]}z.netLoc&&!z.path&&(z.path="/");var y={scheme:z.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};if(!d.netLoc&&(y.netLoc=z.netLoc,d.path[0]!=="/"))if(!d.path)y.path=z.path,d.params||(y.params=z.params,d.query||(y.query=z.query));else{var w=z.path,O=w.substring(0,w.lastIndexOf("/")+1)+d.path;y.path=i.normalizePath(O)}return y.path===null&&(y.path=c.alwaysNormalize?i.normalizePath(d.path):d.path),i.buildURLFromParts(y)},parseURL:function(h){var l=t.exec(h);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(h){for(h=h.split("").reverse().join("").replace(r,"");h.length!==(h=h.replace(n,"")).length;);return h.split("").reverse().join("")},buildURLFromParts:function(h){return h.scheme+h.netLoc+h.path+h.params+h.query+h.fragment}};typeof wn=="object"&&typeof Hs=="object"?Hs.exports=i:typeof define=="function"&&define.amd?define([],function(){return i}):typeof wn=="object"?wn.URLToolkit=i:e.URLToolkit=i})(wn)});var yn=x1(Va=>{"use strict";function jw(e,t,a){if(a===void 0&&(a=Array.prototype),e&&typeof a.find=="function")return a.find.call(e,t);for(var r=0;r<e.length;r++)if(Object.prototype.hasOwnProperty.call(e,r)){var n=e[r];if(t.call(void 0,n,r,e))return n}}function Rs(e,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(e):e}function Rw(e,t){if(e===null||typeof e!="object")throw new TypeError("target is not an object");for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}var dg=Rs({HTML:"text/html",isHTML:function(e){return e===dg.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ug=Rs({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===ug.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Va.assign=Rw;Va.find=jw;Va.freeze=Rs;Va.MIME_TYPE=dg;Va.NAMESPACE=ug});var Qs=x1(L0=>{var xg=yn(),fe=xg.find,Cn=xg.NAMESPACE;function Nw(e){return e!==""}function Fw(e){return e?e.split(/[\t\n\f\r ]+/).filter(Nw):[]}function Uw(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function gg(e){if(!e)return[];var t=Fw(e);return Object.keys(t.reduce(Uw,{}))}function $w(e){return function(t){return e&&e.indexOf(t)!==-1}}function Sn(e,t){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}function i2(e,t){var a=e.prototype;if(!(a instanceof t)){let n=function(){};var r=n;n.prototype=t.prototype,n=new n,Sn(a,n),e.prototype=a=n}a.constructor!=e&&(typeof e!="function"&&console.error("unknown Class:"+e),a.constructor=e)}var h2={},Z2=h2.ELEMENT_NODE=1,La=h2.ATTRIBUTE_NODE=2,bh=h2.TEXT_NODE=3,Vg=h2.CDATA_SECTION_NODE=4,wg=h2.ENTITY_REFERENCE_NODE=5,Ww=h2.ENTITY_NODE=6,Lg=h2.PROCESSING_INSTRUCTION_NODE=7,yg=h2.COMMENT_NODE=8,Cg=h2.DOCUMENT_NODE=9,Bg=h2.DOCUMENT_TYPE_NODE=10,Ke=h2.DOCUMENT_FRAGMENT_NODE=11,Gw=h2.NOTATION_NODE=12,bt={},zt={},X_=bt.INDEX_SIZE_ERR=(zt[1]="Index size error",1),Y_=bt.DOMSTRING_SIZE_ERR=(zt[2]="DOMString size error",2),n2=bt.HIERARCHY_REQUEST_ERR=(zt[3]="Hierarchy request error",3),Q_=bt.WRONG_DOCUMENT_ERR=(zt[4]="Wrong document",4),J_=bt.INVALID_CHARACTER_ERR=(zt[5]="Invalid character",5),Z_=bt.NO_DATA_ALLOWED_ERR=(zt[6]="No data allowed",6),tT=bt.NO_MODIFICATION_ALLOWED_ERR=(zt[7]="No modification allowed",7),Sg=bt.NOT_FOUND_ERR=(zt[8]="Not found",8),eT=bt.NOT_SUPPORTED_ERR=(zt[9]="Not supported",9),pg=bt.INUSE_ATTRIBUTE_ERR=(zt[10]="Attribute in use",10),aT=bt.INVALID_STATE_ERR=(zt[11]="Invalid state",11),rT=bt.SYNTAX_ERR=(zt[12]="Syntax error",12),nT=bt.INVALID_MODIFICATION_ERR=(zt[13]="Invalid modification",13),iT=bt.NAMESPACE_ERR=(zt[14]="Invalid namespace",14),hT=bt.INVALID_ACCESS_ERR=(zt[15]="Invalid access",15);function lt(e,t){if(t instanceof Error)var a=t;else a=this,Error.call(this,zt[e]),this.message=zt[e],Error.captureStackTrace&&Error.captureStackTrace(this,lt);return a.code=e,t&&(this.message=this.message+": "+t),a}lt.prototype=Error.prototype;Sn(bt,lt);function qe(){}qe.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var a=[],r=0;r<this.length;r++)wa(this[r],a,e,t);return a.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}};function ya(e,t){this._node=e,this._refresh=t,Us(this)}function Us(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var a=e._refresh(e._node);Rg(e,"length",a.length),Sn(a,e),e._inc=t}}ya.prototype.item=function(e){return Us(this),this[e]};i2(ya,qe);function Ah(){}function _g(e,t){for(var a=e.length;a--;)if(e[a]===t)return a}function fg(e,t,a,r){if(r?t[_g(t,r)]=a:t[t.length++]=a,e){a.ownerElement=e;var n=e.ownerDocument;n&&(r&&bg(n,e,r),qw(n,e,a))}}function zg(e,t,a){var r=_g(t,a);if(r>=0){for(var n=t.length-1;r<n;)t[r]=t[++r];if(t.length=n,e){var i=e.ownerDocument;i&&(bg(i,e,a),a.ownerElement=null)}}else throw new lt(Sg,new Error(e.tagName+"@"+a))}Ah.prototype={length:0,item:qe.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var a=this[t];if(a.nodeName==e)return a}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new lt(pg);var a=this.getNamedItem(e.nodeName);return fg(this._ownerElement,this,e,a),a},setNamedItemNS:function(e){var t=e.ownerElement,a;if(t&&t!=this._ownerElement)throw new lt(pg);return a=this.getNamedItemNS(e.namespaceURI,e.localName),fg(this._ownerElement,this,e,a),a},removeNamedItem:function(e){var t=this.getNamedItem(e);return zg(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var a=this.getNamedItemNS(e,t);return zg(this._ownerElement,this,a),a},getNamedItemNS:function(e,t){for(var a=this.length;a--;){var r=this[a];if(r.localName==t&&r.namespaceURI==e)return r}return null}};function Tg(){}Tg.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,a){var r=new _n;if(r.implementation=this,r.childNodes=new qe,r.doctype=a||null,a&&r.appendChild(a),t){var n=r.createElementNS(e,t);r.appendChild(n)}return r},createDocumentType:function(e,t,a){var r=new Ph;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=a||"",r}};function E1(){}E1.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Eh(this,e,t)},replaceChild:function(e,t){Eh(this,e,t,Eg),t&&this.removeChild(t)},removeChild:function(e){return Ag(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return Fs(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==bh&&e.nodeType==bh?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var a=t._nsMap;if(a){for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&a[r]===e)return r}t=t.nodeType==La?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var a=t._nsMap;if(a&&Object.prototype.hasOwnProperty.call(a,e))return a[e];t=t.nodeType==La?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function Og(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}Sn(h2,E1);Sn(h2,E1.prototype);function Bn(e,t){if(t(e))return!0;if(e=e.firstChild)do if(Bn(e,t))return!0;while(e=e.nextSibling)}function _n(){this.ownerDocument=this}function qw(e,t,a){e&&e._inc++;var r=a.namespaceURI;r===Cn.XMLNS&&(t._nsMap[a.prefix?a.localName:""]=a.value)}function bg(e,t,a,r){e&&e._inc++;var n=a.namespaceURI;n===Cn.XMLNS&&delete t._nsMap[a.prefix?a.localName:""]}function $s(e,t,a){if(e&&e._inc){e._inc++;var r=t.childNodes;if(a)r[r.length++]=a;else{for(var n=t.firstChild,i=0;n;)r[i++]=n,n=n.nextSibling;r.length=i,delete r[r.length]}}}function Ag(e,t){var a=t.previousSibling,r=t.nextSibling;return a?a.nextSibling=r:e.firstChild=r,r?r.previousSibling=a:e.lastChild=a,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,$s(e.ownerDocument,e),t}function Kw(e){return e&&(e.nodeType===E1.DOCUMENT_NODE||e.nodeType===E1.DOCUMENT_FRAGMENT_NODE||e.nodeType===E1.ELEMENT_NODE)}function Xw(e){return e&&(ze(e)||Ws(e)||Xe(e)||e.nodeType===E1.DOCUMENT_FRAGMENT_NODE||e.nodeType===E1.COMMENT_NODE||e.nodeType===E1.PROCESSING_INSTRUCTION_NODE)}function Xe(e){return e&&e.nodeType===E1.DOCUMENT_TYPE_NODE}function ze(e){return e&&e.nodeType===E1.ELEMENT_NODE}function Ws(e){return e&&e.nodeType===E1.TEXT_NODE}function Mg(e,t){var a=e.childNodes||[];if(fe(a,ze)||Xe(t))return!1;var r=fe(a,Xe);return!(t&&r&&a.indexOf(r)>a.indexOf(t))}function mg(e,t){var a=e.childNodes||[];function r(i){return ze(i)&&i!==t}if(fe(a,r))return!1;var n=fe(a,Xe);return!(t&&n&&a.indexOf(n)>a.indexOf(t))}function Yw(e,t,a){if(!Kw(e))throw new lt(n2,"Unexpected parent node type "+e.nodeType);if(a&&a.parentNode!==e)throw new lt(Sg,"child not in parent");if(!Xw(t)||Xe(t)&&e.nodeType!==E1.DOCUMENT_NODE)throw new lt(n2,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Qw(e,t,a){var r=e.childNodes||[],n=t.childNodes||[];if(t.nodeType===E1.DOCUMENT_FRAGMENT_NODE){var i=n.filter(ze);if(i.length>1||fe(n,Ws))throw new lt(n2,"More than one element or text in fragment");if(i.length===1&&!Mg(e,a))throw new lt(n2,"Element in fragment can not be inserted before doctype")}if(ze(t)&&!Mg(e,a))throw new lt(n2,"Only one element can be added and only after doctype");if(Xe(t)){if(fe(r,Xe))throw new lt(n2,"Only one doctype is allowed");var h=fe(r,ze);if(a&&r.indexOf(h)<r.indexOf(a))throw new lt(n2,"Doctype can only be inserted before an element");if(!a&&h)throw new lt(n2,"Doctype can not be appended since element is present")}}function Eg(e,t,a){var r=e.childNodes||[],n=t.childNodes||[];if(t.nodeType===E1.DOCUMENT_FRAGMENT_NODE){var i=n.filter(ze);if(i.length>1||fe(n,Ws))throw new lt(n2,"More than one element or text in fragment");if(i.length===1&&!mg(e,a))throw new lt(n2,"Element in fragment can not be inserted before doctype")}if(ze(t)&&!mg(e,a))throw new lt(n2,"Only one element can be added and only after doctype");if(Xe(t)){let c=function(v){return Xe(v)&&v!==a};var l=c;if(fe(r,c))throw new lt(n2,"Only one doctype is allowed");var h=fe(r,ze);if(a&&r.indexOf(h)<r.indexOf(a))throw new lt(n2,"Doctype can only be inserted before an element")}}function Eh(e,t,a,r){Yw(e,t,a),e.nodeType===E1.DOCUMENT_NODE&&(r||Qw)(e,t,a);var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===Ke){var i=t.firstChild;if(i==null)return t;var h=t.lastChild}else i=h=t;var l=a?a.previousSibling:e.lastChild;i.previousSibling=l,h.nextSibling=a,l?l.nextSibling=i:e.firstChild=i,a==null?e.lastChild=h:a.previousSibling=h;do i.parentNode=e;while(i!==h&&(i=i.nextSibling));return $s(e.ownerDocument||e,e),t.nodeType==Ke&&(t.firstChild=t.lastChild=null),t}function Jw(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,$s(e.ownerDocument,e,t),t}_n.prototype={nodeName:"#document",nodeType:Cg,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==Ke){for(var a=e.firstChild;a;){var r=a.nextSibling;this.insertBefore(a,t),a=r}return e}return Eh(this,e,t),e.ownerDocument=this,this.documentElement===null&&e.nodeType===Z2&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),Ag(this,e)},replaceChild:function(e,t){Eh(this,e,t,Eg),e.ownerDocument=this,t&&this.removeChild(t),ze(e)&&(this.documentElement=e)},importNode:function(e,t){return jg(this,e,t)},getElementById:function(e){var t=null;return Bn(this.documentElement,function(a){if(a.nodeType==Z2&&a.getAttribute("id")==e)return t=a,!0}),t},getElementsByClassName:function(e){var t=gg(e);return new ya(this,function(a){var r=[];return t.length>0&&Bn(a.documentElement,function(n){if(n!==a&&n.nodeType===Z2){var i=n.getAttribute("class");if(i){var h=e===i;if(!h){var l=gg(i);h=t.every($w(l))}h&&r.push(n)}}}),r})},createElement:function(e){var t=new f4;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new qe;var a=t.attributes=new Ah;return a._ownerElement=t,t},createDocumentFragment:function(){var e=new Dh;return e.ownerDocument=this,e.childNodes=new qe,e},createTextNode:function(e){var t=new Gs;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new qs;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Ks;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var a=new Ys;return a.ownerDocument=this,a.tagName=a.target=e,a.nodeValue=a.data=t,a},createAttribute:function(e){var t=new kh;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Xs;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var a=new f4,r=t.split(":"),n=a.attributes=new Ah;return a.childNodes=new qe,a.ownerDocument=this,a.nodeName=t,a.tagName=t,a.namespaceURI=e,r.length==2?(a.prefix=r[0],a.localName=r[1]):a.localName=t,n._ownerElement=a,a},createAttributeNS:function(e,t){var a=new kh,r=t.split(":");return a.ownerDocument=this,a.nodeName=t,a.name=t,a.namespaceURI=e,a.specified=!0,r.length==2?(a.prefix=r[0],a.localName=r[1]):a.localName=t,a}};i2(_n,E1);function f4(){this._nsMap={}}f4.prototype={nodeType:Z2,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var a=this.ownerDocument.createAttribute(e);a.value=a.nodeValue=""+t,this.setAttributeNode(a)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===Ke?this.insertBefore(e,null):Jw(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var a=this.getAttributeNodeNS(e,t);a&&this.removeAttributeNode(a)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var a=this.getAttributeNodeNS(e,t);return a&&a.value||""},setAttributeNS:function(e,t,a){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+a,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new ya(this,function(t){var a=[];return Bn(t,function(r){r!==t&&r.nodeType==Z2&&(e==="*"||r.tagName==e)&&a.push(r)}),a})},getElementsByTagNameNS:function(e,t){return new ya(this,function(a){var r=[];return Bn(a,function(n){n!==a&&n.nodeType===Z2&&(e==="*"||n.namespaceURI===e)&&(t==="*"||n.localName==t)&&r.push(n)}),r})}};_n.prototype.getElementsByTagName=f4.prototype.getElementsByTagName;_n.prototype.getElementsByTagNameNS=f4.prototype.getElementsByTagNameNS;i2(f4,E1);function kh(){}kh.prototype.nodeType=La;i2(kh,E1);function Tn(){}Tn.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(zt[n2])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,a){var r=this.data.substring(0,e),n=this.data.substring(e+t);a=r+a+n,this.nodeValue=this.data=a,this.length=a.length}};i2(Tn,E1);function Gs(){}Gs.prototype={nodeName:"#text",nodeType:bh,splitText:function(e){var t=this.data,a=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(a);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};i2(Gs,Tn);function qs(){}qs.prototype={nodeName:"#comment",nodeType:yg};i2(qs,Tn);function Ks(){}Ks.prototype={nodeName:"#cdata-section",nodeType:Vg};i2(Ks,Tn);function Ph(){}Ph.prototype.nodeType=Bg;i2(Ph,E1);function kg(){}kg.prototype.nodeType=Gw;i2(kg,E1);function Pg(){}Pg.prototype.nodeType=Ww;i2(Pg,E1);function Xs(){}Xs.prototype.nodeType=wg;i2(Xs,E1);function Dh(){}Dh.prototype.nodeName="#document-fragment";Dh.prototype.nodeType=Ke;i2(Dh,E1);function Ys(){}Ys.prototype.nodeType=Lg;i2(Ys,E1);function Dg(){}Dg.prototype.serializeToString=function(e,t,a){return Ig.call(e,t,a)};E1.prototype.toString=Ig;function Ig(e,t){var a=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,i=r.namespaceURI;if(i&&n==null){var n=r.lookupPrefix(i);if(n==null)var h=[{namespace:i,prefix:null}]}return wa(this,a,e,t,h),a.join("")}function Hg(e,t,a){var r=e.prefix||"",n=e.namespaceURI;if(!n||r==="xml"&&n===Cn.XML||n===Cn.XMLNS)return!1;for(var i=a.length;i--;){var h=a[i];if(h.prefix===r)return h.namespace!==n}return!0}function Ns(e,t,a){e.push(" ",t,'="',a.replace(/[<>&"\t\n\r]/g,Og),'"')}function wa(e,t,a,r,n){if(n||(n=[]),r)if(e=r(e),e){if(typeof e=="string"){t.push(e);return}}else return;switch(e.nodeType){case Z2:var i=e.attributes,h=i.length,V=e.firstChild,l=e.tagName;a=Cn.isHTML(e.namespaceURI)||a;var c=l;if(!a&&!e.prefix&&e.namespaceURI){for(var v,d=0;d<i.length;d++)if(i.item(d).name==="xmlns"){v=i.item(d).value;break}if(!v)for(var z=n.length-1;z>=0;z--){var L=n[z];if(L.prefix===""&&L.namespace===e.namespaceURI){v=L.namespace;break}}if(v!==e.namespaceURI)for(var z=n.length-1;z>=0;z--){var L=n[z];if(L.namespace===e.namespaceURI){L.prefix&&(c=L.prefix+":"+l);break}}}t.push("<",c);for(var y=0;y<h;y++){var w=i.item(y);w.prefix=="xmlns"?n.push({prefix:w.localName,namespace:w.value}):w.nodeName=="xmlns"&&n.push({prefix:"",namespace:w.value})}for(var y=0;y<h;y++){var w=i.item(y);if(Hg(w,a,n)){var O=w.prefix||"",k=w.namespaceURI;Ns(t,O?"xmlns:"+O:"xmlns",k),n.push({prefix:O,namespace:k})}wa(w,t,a,r,n)}if(l===c&&Hg(e,a,n)){var O=e.prefix||"",k=e.namespaceURI;Ns(t,O?"xmlns:"+O:"xmlns",k),n.push({prefix:O,namespace:k})}if(V||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),a&&/^script$/i.test(l))for(;V;)V.data?t.push(V.data):wa(V,t,a,r,n.slice()),V=V.nextSibling;else for(;V;)wa(V,t,a,r,n.slice()),V=V.nextSibling;t.push("</",c,">")}else t.push("/>");return;case Cg:case Ke:for(var V=e.firstChild;V;)wa(V,t,a,r,n.slice()),V=V.nextSibling;return;case La:return Ns(t,e.name,e.value);case bh:return t.push(e.data.replace(/[<&>]/g,Og));case Vg:return t.push("<![CDATA[",e.data,"]]>");case yg:return t.push("<!--",e.data,"-->");case Bg:var x=e.publicId,C=e.systemId;if(t.push("<!DOCTYPE ",e.name),x)t.push(" PUBLIC ",x),C&&C!="."&&t.push(" ",C),t.push(">");else if(C&&C!=".")t.push(" SYSTEM ",C,">");else{var T=e.internalSubset;T&&t.push(" [",T,"]"),t.push(">")}return;case Lg:return t.push("<?",e.target," ",e.data,"?>");case wg:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function jg(e,t,a){var r;switch(t.nodeType){case Z2:r=t.cloneNode(!1),r.ownerDocument=e;case Ke:break;case La:a=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,a)for(var n=t.firstChild;n;)r.appendChild(jg(e,n,a)),n=n.nextSibling;return r}function Fs(e,t,a){var r=new t.constructor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i!="object"&&i!=r[n]&&(r[n]=i)}switch(t.childNodes&&(r.childNodes=new qe),r.ownerDocument=e,r.nodeType){case Z2:var h=t.attributes,l=r.attributes=new Ah,c=h.length;l._ownerElement=r;for(var v=0;v<c;v++)r.setAttributeNode(Fs(e,h.item(v),!0));break;case La:a=!0}if(a)for(var d=t.firstChild;d;)r.appendChild(Fs(e,d,a)),d=d.nextSibling;return r}function Rg(e,t,a){e[t]=a}try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case Z2:case Ke:var a=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&a.push(e(t)),t=t.nextSibling;return a.join("");default:return t.nodeValue}};lT=e,Object.defineProperty(ya.prototype,"length",{get:function(){return Us(this),this.$$length}}),Object.defineProperty(E1.prototype,"textContent",{get:function(){return e(this)},set:function(t){switch(this.nodeType){case Z2:case Ke:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),Rg=function(t,a,r){t["$$"+a]=r}}}catch{}var lT;L0.DocumentType=Ph;L0.DOMException=lt;L0.DOMImplementation=Tg;L0.Element=f4;L0.Node=E1;L0.NodeList=qe;L0.XMLSerializer=Dg});var Fg=x1(On=>{var Ng=yn().freeze;On.XML_ENTITIES=Ng({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});On.HTML_ENTITIES=Ng({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"});On.entityMap=On.HTML_ENTITIES});var Yg=x1(Zs=>{var kn=yn().NAMESPACE,Js=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ug=new RegExp("[\\-\\.0-9"+Js.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),$g=new RegExp("^"+Js.source+Ug.source+"*(?::"+Js.source+Ug.source+"*)?$"),bn=0,y0=1,Ca=2,An=3,Ba=4,Sa=5,En=6,Ih=7;function _a(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,_a)}_a.prototype=new Error;_a.prototype.name=_a.name;function qg(){}qg.prototype={parse:function(e,t,a){var r=this.domBuilder;r.startDocument(),Kg(t,t={}),Zw(e,t,a,r,this.errorHandler),r.endDocument()}};function Zw(e,t,a,r,n){function i(n1){if(n1>65535){n1-=65536;var o1=55296+(n1>>10),s1=56320+(n1&1023);return String.fromCharCode(o1,s1)}else return String.fromCharCode(n1)}function h(n1){var o1=n1.slice(1,-1);return Object.hasOwnProperty.call(a,o1)?a[o1]:o1.charAt(0)==="#"?i(parseInt(o1.substr(1).replace("x","0x"))):(n.error("entity not found:"+n1),n1)}function l(n1){if(n1>O){var o1=e.substring(O,n1).replace(/&#?\w+;/g,h);L&&c(O),r.characters(o1,0,n1-O),O=n1}}function c(n1,o1){for(;n1>=d&&(o1=z.exec(e));)v=o1.index,d=v+o1[0].length,L.lineNumber++;L.columnNumber=n1-v+1}for(var v=0,d=0,z=/.*(?:\r\n?|\n)|.*$/g,L=r.locator,y=[{currentNSMap:t}],w={},O=0;;){try{var k=e.indexOf("<",O);if(k<0){if(!e.substr(O).match(/^\s*$/)){var V=r.doc,x=V.createTextNode(e.substr(O));V.appendChild(x),r.currentElement=x}return}switch(k>O&&l(k),e.charAt(k+1)){case"/":var Y=e.indexOf(">",k+3),C=e.substring(k+2,Y).replace(/[ \t\n\r]+$/g,""),T=y.pop();Y<0?(C=e.substring(k+2).replace(/[\s<].*/,""),n.error("end tag name: "+C+" is not complete:"+T.tagName),Y=k+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),n.error("end tag name: "+C+" maybe not complete"),Y=k+1+C.length);var S=T.localNSMap,R=T.tagName==C,N=R||T.tagName&&T.tagName.toLowerCase()==C.toLowerCase();if(N){if(r.endElement(T.uri,T.localName,C),S)for(var $ in S)Object.prototype.hasOwnProperty.call(S,$)&&r.endPrefixMapping($);R||n.fatalError("end tag name: "+C+" is not match the current start tagName:"+T.tagName)}else y.push(T);Y++;break;case"?":L&&c(k),Y=nL(e,k,r);break;case"!":L&&c(k),Y=rL(e,k,r,n);break;default:L&&c(k);var e1=new Xg,r1=y[y.length-1].currentNSMap,Y=tL(e,k,e1,r1,h,n),J=e1.length;if(!e1.closed&&aL(e,Y,e1.tagName,w)&&(e1.closed=!0,a.nbsp||n.warning("unclosed xml attribute")),L&&J){for(var W=Wg(L,{}),K=0;K<J;K++){var Z=e1[K];c(Z.offset),Z.locator=Wg(L,{})}r.locator=W,Gg(e1,r,r1)&&y.push(e1),r.locator=L}else Gg(e1,r,r1)&&y.push(e1);kn.isHTML(e1.uri)&&!e1.closed?Y=eL(e,Y,e1.tagName,h,r):Y++}}catch(n1){if(n1 instanceof _a)throw n1;n.error("element parse error: "+n1),Y=-1}Y>O?O=Y:l(Math.max(k,O)+1)}}function Wg(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function tL(e,t,a,r,n,i){function h(y,w,O){a.attributeNames.hasOwnProperty(y)&&i.fatalError("Attribute "+y+" redefined"),a.addValue(y,w.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,n),O)}for(var l,c,v=++t,d=bn;;){var z=e.charAt(v);switch(z){case"=":if(d===y0)l=e.slice(t,v),d=An;else if(d===Ca)d=An;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===An||d===y0)if(d===y0&&(i.warning('attribute value must after "="'),l=e.slice(t,v)),t=v+1,v=e.indexOf(z,t),v>0)c=e.slice(t,v),h(l,c,t-1),d=Sa;else throw new Error("attribute value no end '"+z+"' match");else if(d==Ba)c=e.slice(t,v),h(l,c,t),i.warning('attribute "'+l+'" missed start quot('+z+")!!"),t=v+1,d=Sa;else throw new Error('attribute value must after "="');break;case"/":switch(d){case bn:a.setTagName(e.slice(t,v));case Sa:case En:case Ih:d=Ih,a.closed=!0;case Ba:case y0:break;case Ca:a.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),d==bn&&a.setTagName(e.slice(t,v)),v;case">":switch(d){case bn:a.setTagName(e.slice(t,v));case Sa:case En:case Ih:break;case Ba:case y0:c=e.slice(t,v),c.slice(-1)==="/"&&(a.closed=!0,c=c.slice(0,-1));case Ca:d===Ca&&(c=l),d==Ba?(i.warning('attribute "'+c+'" missed quot(")!'),h(l,c,t)):((!kn.isHTML(r[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),h(c,c,t));break;case An:throw new Error("attribute value missed!!")}return v;case"\x80":z=" ";default:if(z<=" ")switch(d){case bn:a.setTagName(e.slice(t,v)),d=En;break;case y0:l=e.slice(t,v),d=Ca;break;case Ba:var c=e.slice(t,v);i.warning('attribute "'+c+'" missed quot(")!!'),h(l,c,t);case Sa:d=En;break}else switch(d){case Ca:var L=a.tagName;(!kn.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),h(l,l,t),t=v,d=y0;break;case Sa:i.warning('attribute space is required"'+l+'"!!');case En:d=y0,t=v;break;case An:d=Ba,t=v;break;case Ih:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function Gg(e,t,a){for(var r=e.tagName,n=null,z=e.length;z--;){var i=e[z],h=i.qName,l=i.value,L=h.indexOf(":");if(L>0)var c=i.prefix=h.slice(0,L),v=h.slice(L+1),d=c==="xmlns"&&v;else v=h,c=null,d=h==="xmlns"&&"";i.localName=v,d!==!1&&(n==null&&(n={},Kg(a,a={})),a[d]=n[d]=l,i.uri=kn.XMLNS,t.startPrefixMapping(d,l))}for(var z=e.length;z--;){i=e[z];var c=i.prefix;c&&(c==="xml"&&(i.uri=kn.XML),c!=="xmlns"&&(i.uri=a[c||""]))}var L=r.indexOf(":");L>0?(c=e.prefix=r.slice(0,L),v=e.localName=r.slice(L+1)):(c=null,v=e.localName=r);var y=e.uri=a[c||""];if(t.startElement(y,v,r,e),e.closed){if(t.endElement(y,v,r),n)for(c in n)Object.prototype.hasOwnProperty.call(n,c)&&t.endPrefixMapping(c)}else return e.currentNSMap=a,e.localNSMap=n,!0}function eL(e,t,a,r,n){if(/^(?:script|textarea)$/i.test(a)){var i=e.indexOf("</"+a+">",t),h=e.substring(t+1,i);if(/[&<]/.test(h))return/^script$/i.test(a)?(n.characters(h,0,h.length),i):(h=h.replace(/&#?\w+;/g,r),n.characters(h,0,h.length),i)}return t+1}function aL(e,t,a,r){var n=r[a];return n==null&&(n=e.lastIndexOf("</"+a+">"),n<t&&(n=e.lastIndexOf("</"+a)),r[a]=n),n<t}function Kg(e,t){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}function rL(e,t,a,r){var n=e.charAt(t+2);switch(n){case"-":if(e.charAt(t+3)==="-"){var i=e.indexOf("-->",t+4);return i>t?(a.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(e.substr(t+3,6)=="CDATA["){var i=e.indexOf("]]>",t+9);return a.startCDATA(),a.characters(e,t+9,i-t-9),a.endCDATA(),i+3}var h=iL(e,t),l=h.length;if(l>1&&/!doctype/i.test(h[0][0])){var c=h[1][0],v=!1,d=!1;l>3&&(/^public$/i.test(h[2][0])?(v=h[3][0],d=l>4&&h[4][0]):/^system$/i.test(h[2][0])&&(d=h[3][0]));var z=h[l-1];return a.startDTD(c,v,d),a.endDTD(),z.index+z[0].length}}return-1}function nL(e,t,a){var r=e.indexOf("?>",t);if(r){var n=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var i=n[0].length;return a.processingInstruction(n[1],n[2]),r+2}else return-1}return-1}function Xg(){this.attributeNames={}}Xg.prototype={setTagName:function(e){if(!$g.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,a){if(!$g.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:a}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function iL(e,t){var a,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);a=n.exec(e);)if(r.push(a),a[1])return r}Zs.XMLReader=qg;Zs.ParseError=_a});var rp=x1(Rh=>{var hL=yn(),lL=Qs(),Qg=Fg(),tp=Yg(),oL=lL.DOMImplementation,Jg=hL.NAMESPACE,cL=tp.ParseError,sL=tp.XMLReader;function ep(e){return e.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function ap(e){this.options=e||{locator:{}}}ap.prototype.parseFromString=function(e,t){var a=this.options,r=new sL,n=a.domBuilder||new Pn,i=a.errorHandler,h=a.locator,l=a.xmlns||{},c=/\/x?html?$/.test(t),v=c?Qg.HTML_ENTITIES:Qg.XML_ENTITIES;h&&n.setDocumentLocator(h),r.errorHandler=vL(i,n,h),r.domBuilder=a.domBuilder||n,c&&(l[""]=Jg.HTML),l.xml=l.xml||Jg.XML;var d=a.normalizeLineEndings||ep;return e&&typeof e=="string"?r.parse(d(e),l,v):r.errorHandler.error("invalid doc source"),n.doc};function vL(e,t,a){if(!e){if(t instanceof Pn)return t;e=t}var r={},n=e instanceof Function;a=a||{};function i(h){var l=e[h];!l&&n&&(l=e.length==2?function(c){e(h,c)}:e),r[h]=l&&function(c){l("[xmldom "+h+"]	"+c+t9(a))}||function(){}}return i("warning"),i("error"),i("fatalError"),r}function Pn(){this.cdata=!1}function Ta(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}Pn.prototype={startDocument:function(){this.doc=new oL().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,a,r){var n=this.doc,i=n.createElementNS(e,a||t),h=r.length;jh(this,i),this.currentElement=i,this.locator&&Ta(this.locator,i);for(var l=0;l<h;l++){var e=r.getURI(l),c=r.getValue(l),a=r.getQName(l),v=n.createAttributeNS(e,a);this.locator&&Ta(r.getLocator(l),v),v.value=v.nodeValue=c,i.setAttributeNode(v)}},endElement:function(e,t,a){var r=this.currentElement,n=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var a=this.doc.createProcessingInstruction(e,t);this.locator&&Ta(this.locator,a),jh(this,a)},ignorableWhitespace:function(e,t,a){},characters:function(e,t,a){if(e=Zg.apply(this,arguments),e){if(this.cdata)var r=this.doc.createCDATASection(e);else var r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&Ta(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,a){e=Zg.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&Ta(this.locator,r),jh(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,a){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(e,t,a);this.locator&&Ta(this.locator,n),jh(this,n),this.doc.doctype=n}},warning:function(e){console.warn("[xmldom warning]	"+e,t9(this.locator))},error:function(e){console.error("[xmldom error]	"+e,t9(this.locator))},fatalError:function(e){throw new cL(e,this.locator)}};function t9(e){if(e)return`
@`+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function Zg(e,t,a){return typeof e=="string"?e.substr(t,a):e.length>=t+a||t?new java.lang.String(e,t,a)+"":e}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){Pn.prototype[e]=function(){return null}});function jh(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}Rh.__DOMHandler=Pn;Rh.normalizeLineEndings=ep;Rh.DOMParser=ap});var ip=x1(Nh=>{var np=Qs();Nh.DOMImplementation=np.DOMImplementation;Nh.XMLSerializer=np.XMLSerializer;Nh.DOMParser=rp().DOMParser});var Lp=x1((zT,wp)=>{var Vp=Math.pow(2,32),ay=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a;return t.getBigUint64?(a=t.getBigUint64(0),a<Number.MAX_SAFE_INTEGER?Number(a):a):t.getUint32(0)*Vp+t.getUint32(4)};wp.exports={getUint64:ay,MAX_UINT32:Vp}});var Bp=x1((MT,Cp)=>{var yp=Lp().getUint64,ry=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;a.version===0?(a.earliestPresentationTime=t.getUint32(r),a.firstOffset=t.getUint32(r+4),r+=8):(a.earliestPresentationTime=yp(e.subarray(r)),a.firstOffset=yp(e.subarray(r+8)),r+=16),r+=2;var n=t.getUint16(r);for(r+=2;n>0;r+=12,n--)a.references.push({referenceType:(e[r]&128)>>>7,referencedSize:t.getUint32(r)&2147483647,subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(e[r+8]&128),sapType:(e[r+8]&112)>>>4,sapDeltaTime:t.getUint32(r+8)&268435455});return a};Cp.exports=ry});var Np=x1((FT,Rp)=>{var c9=9e4,s9,v9,qh,d9,Dp,Ip,jp;s9=function(e){return e*c9};v9=function(e,t){return e*t};qh=function(e){return e/c9};d9=function(e,t){return e/t};Dp=function(e,t){return s9(d9(e,t))};Ip=function(e,t){return v9(qh(e),t)};jp=function(e,t,a){return qh(a?e:e-t)};Rp.exports={ONE_SECOND_IN_TS:c9,secondsToVideoTs:s9,secondsToAudioTs:v9,videoTsToSeconds:qh,audioTsToSeconds:d9,audioTsToVideoTs:Dp,videoTsToAudioTs:Ip,metadataTsToSeconds:jp}});var uM=x1((D6,I6)=>{(function(e,t){typeof D6=="object"&&typeof I6<"u"?I6.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.NiconiComments=t())})(D6,function(){"use strict";let e={},t=()=>{e={}},a={reverse:[],default:[],replace:[],ban:[],seekDisable:[],jump:[]},r=()=>{a={reverse:[],default:[],replace:[],ban:[],seekDisable:[],jump:[]}},n=[],i=m=>{n=m};var h=Object.freeze({__proto__:null,get imageCache(){return e},get nicoScripts(){return a},get plugins(){return n},resetImageCache:t,resetNicoScripts:r,setPlugins:i});let l,c=m=>{l=m},v={config:{},debug:!1,enableLegacyPiP:!1,format:"default",formatted:!1,keepCA:!1,mode:"default",scale:1,showCollision:!1,showCommentCount:!1,showFPS:!1,useLegacy:!1,video:void 0},d,z,L=m=>{d=m},y=m=>{z=m};var w=Object.freeze({__proto__:null,get config(){return d},get defaultConfig(){return l},defaultOptions:v,get options(){return z},setConfig:L,setOptions:y,updateConfig:c});class O extends Error{constructor(f={}){super("CanvasRenderingContext2DError",f)}}O.prototype.name="CanvasRenderingContext2DError";class k extends Error{constructor(f={}){super("InvalidFormatError",f)}}k.prototype.name="InvalidFormatError";class V extends Error{constructor(f={}){super(`Invalid option
Please check document: https://xpadev-net.github.io/niconicomments/#p_options`,f)}}V.prototype.name="InvalidOptionError";class x extends Error{pluginName;methodName;constructor(f,H,A={}){super("NotImplementedError",A),this.pluginName=f,this.methodName=H}}x.prototype.name="NotImplementedError";var C=Object.freeze({__proto__:null,CanvasRenderingContext2DError:O,InvalidFormatError:k,InvalidOptionError:V,NotImplementedError:x});let T=(m,f,H)=>{m||(m={}),m[Number(f)]||(m[Number(f)]=[]),m[Number(f)]?.push(H)},S=(m,f)=>{if(m.length!==f.length)return!1;for(let H=0,A=m.length;H<A;++H)if(m[H]!==f[H])return!1;return!0},R=m=>(m.slice(0,1)==="#"&&(m=m.slice(1)),m.length===3&&(m=m.slice(0,1)+m.slice(0,1)+m.slice(1,2)+m.slice(1,2)+m.slice(2,3)+m.slice(2,3)),[m.slice(0,2),m.slice(2,4),m.slice(4,6)].map(function(f){return parseInt(f,16)})),N=m=>(m.slice(0,1)==="#"&&(m=m.slice(1)),m.length===4&&(m=m.slice(0,1)+m.slice(0,1)+m.slice(1,2)+m.slice(1,2)+m.slice(2,3)+m.slice(2,3)+m.slice(3,4)+m.slice(3,4)),[m.slice(0,2),m.slice(2,4),m.slice(4,6),m.slice(4,6)].map((f,H)=>H===3?parseInt(f,16)/256:parseInt(f,16))),$=m=>{if(m.strokeColor){let f=m.strokeColor.length;if(f===3||f===6)return`rgba(${R(m.strokeColor).join(",")},${d.contextStrokeOpacity})`;if(f===4||f===8)return`rgba(${N(m.strokeColor).join(",")})`}return`rgba(${R(m.color==="#000000"?d.contextStrokeInversionColor:d.contextStrokeColor).join(",")},${d.contextStrokeOpacity})`},e1={white:"#FFFFFF",red:"#FF0000",pink:"#FF8080",orange:"#FFC000",yellow:"#FFFF00",green:"#00FF00",cyan:"#00FFFF",blue:"#0000FF",purple:"#C000FF",black:"#000000",white2:"#CCCC99",niconicowhite:"#CCCC99",red2:"#CC0033",truered:"#CC0033",pink2:"#FF33CC",orange2:"#FF6600",passionorange:"#FF6600",yellow2:"#999900",madyellow:"#999900",green2:"#00CC66",elementalgreen:"#00CC66",cyan2:"#00CCCC",blue2:"#3399FF",marinblue:"#3399FF",purple2:"#6633CC",nobleviolet:"#6633CC",black2:"#666666"};var r1=Object.freeze({__proto__:null,colors:e1});let Y=m=>typeof m=="boolean",J=m=>typeof m=="number",W=m=>typeof m=="object",K={formatted:{comment:m=>Z(m,["id","vpos","content","date","date_usec","owner","premium","mail","user_id","layer"]),comments:m=>{if(typeof m!="object")return!1;for(let f of m)if(!K.formatted.comment(f))return!1;return!0},legacyComment:m=>Z(m,["id","vpos","content","date","owner","premium","mail"]),legacyComments:m=>{if(typeof m!="object")return!1;for(let f of m)if(!K.formatted.legacyComment(f))return!1;return!0}},legacy:{rawApiResponses:m=>{if(typeof m!="object")return!1;for(let f of m)for(let H of Object.keys(f)){let A=f[H];if(A&&!(K.legacy.apiChat(A)||K.legacy.apiGlobalNumRes(A)||K.legacy.apiLeaf(A)||K.legacy.apiPing(A)||K.legacy.apiThread(A)))return!1}return!0},apiChat:m=>typeof m=="object"&&Z(m,["content","date","no","thread","vpos"]),apiGlobalNumRes:m=>Z(m,["num_res","thread"]),apiLeaf:m=>Z(m,["count","thread"]),apiPing:m=>Z(m,["content"]),apiThread:m=>Z(m,["resultcode","revision","server_time","thread","ticket"])},xmlDocument:m=>{if(!m.documentElement||m.documentElement.nodeName!=="packet"||!m.documentElement.children)return!1;for(let f of Array.from(m.documentElement.children))if(!(!f||f.nodeName!=="chat")&&!n1(f,["vpos","date"]))return!1;return!0},legacyOwner:{comments:m=>{if(typeof m!="string")return!1;let f=m.split(`
`);for(let H of f)if(H.split(":").length<3)return!1;return!0}},owner:{comment:m=>Z(m,["time","command","comment"]),comments:m=>{if(typeof m!="object")return!1;for(let f of m)if(!K.owner.comment(f))return!1;return!0}},v1:{comment:m=>Z(m,["id","no","vposMs","body","commands","userId","isPremium","score","postedAt","nicoruCount","nicoruId","source","isMyPost"]),thread:m=>{if(!Z(m,["id","fork","commentCount","comments"]))return!1;for(let f of m.comments)if(!K.v1.comment(f))return!1;return!0},threads:m=>{if(typeof m!="object")return!1;for(let f of m)if(!K.v1.thread(f))return!1;return!0}},nicoScript:{range:{target:m=>typeof m=="string"&&!!m.match(/^(?:\u6295?\u30b3\u30e1|\u5168)$/)},replace:{range:m=>typeof m=="string"&&!!m.match(/^[\u5358\u5168]$/),target:m=>typeof m=="string"&&!!m.match(/^(?:\u30b3\u30e1|\u6295\u30b3\u30e1|\u5168|\u542b\u3080|\u542b\u307e\u306a\u3044)$/),condition:m=>typeof m=="string"&&!!m.match(/^(?:\u90e8\u5206\u4e00\u81f4|\u5b8c\u5168\u4e00\u81f4)$/)}},comment:{font:m=>typeof m=="string"&&!!m.match(/^(?:gothic|mincho|defont)$/),loc:m=>typeof m=="string"&&!!m.match(/^(?:ue|naka|shita)$/),size:m=>typeof m=="string"&&!!m.match(/^(?:big|medium|small)$/),command:{key:m=>typeof m=="string"&&!!m.match(/^(?:full|ender|_live|invisible)$/)},color:m=>typeof m=="string"&&Object.keys(e1).includes(m),colorCode:m=>typeof m=="string"&&!!m.match(/^#(?:[0-9a-z]{3}|[0-9a-z]{6})$/),colorCodeAllowAlpha:m=>typeof m=="string"&&!!m.match(/^#(?:[0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/)},config:{initOptions:m=>{if(typeof m!="object"||!m)return!1;let f={useLegacy:Y,formatted:Y,showCollision:Y,showFPS:Y,showCommentCount:Y,drawAllImageOnLoad:Y,debug:Y,enableLegacyPiP:Y,keepCA:Y,scale:J,config:W,format:H=>typeof H=="string"&&!!H.match(/^(XMLDocument|niconicome|formatted|legacy|legacyOwner|owner|v1|default|empty)$/),video:H=>typeof H=="object"&&H.nodeName==="VIDEO"};for(let H of Object.keys(f))if(m[H]!==void 0&&!f[H](m[H]))return console.warn(`[Incorrect input] var: initOptions, key: ${H}, value: ${m[H]}`),!1;return!0}}},Z=(m,f)=>{if(typeof m!="object"||!m)return!1;for(let H of f)if(!Object.prototype.hasOwnProperty.call(m,H))return!1;return!0},n1=(m,f)=>{if(typeof m!="object"||!m)return!1;for(let H of f)if(m.getAttribute(H)===null)return!1;return!0};var o1=Object.freeze({__proto__:null,default:K});let s1=(m,f=!1)=>Object.prototype.hasOwnProperty.call(m,"html5")&&Object.prototype.hasOwnProperty.call(m,"flash")?m[f?"flash":"html5"]:m,B1=m=>!m.resized&&!m.ender&&m.lineCount>=d.lineBreakCount[m.size],L1=m=>{a.default=a.default.filter(j=>!j.long||j.start+j.long>=m);let f,H,A,D;for(let j of a.default)if(j.loc&&(D=j.loc),j.color&&(f=j.color),j.size&&(H=j.size),j.font&&(A=j.font),D&&f&&H&&A)break;return{color:f,size:H,font:A,loc:D}},j1=(m,f)=>(f.target==="\u30B3\u30E1"||f.target==="\u542B\u307E\u306A\u3044")&&m.owner||f.target==="\u6295\u30B3\u30E1"&&!m.owner||f.target==="\u542B\u307E\u306A\u3044"&&m.owner||f.condition==="\u5B8C\u5168\u4E00\u81F4"&&m.content!==f.keyword||f.condition==="\u90E8\u5206\u4E00\u81F4"&&m.content.indexOf(f.keyword)===-1,dt=(m,f)=>{a.replace=a.replace.filter(H=>!H.long||H.start+H.long>=m.vpos);for(let H of a.replace)j1(m,H)||(H.range==="\u5358"?m.content=m.content.replaceAll(H.keyword,H.replace):m.content=H.replace,H.loc&&(f.loc=H.loc),H.color&&(f.color=H.color),H.size&&(f.size=H.size),H.font&&(f.font=H.font))},ut=m=>{let f=j0(m),H=po(m);gt(m,H);let A=L1(m.vpos);dt(m,H);let D=H.size||A.size||"medium";return{size:D,loc:H.loc||A.loc||"naka",color:H.color||A.color||"#FFFFFF",font:H.font||A.font||"defont",fontSize:s1(d.fontSize,f)[D].default,long:H.long?Math.floor(Number(H.long)*100):300,flash:f,full:H.full,ender:H.ender,_live:H._live,invisible:H.invisible,strokeColor:H.strokeColor,wakuColor:H.wakuColor}},ie=m=>{let f=m.split(""),H=[],A="",D="",j="";for(let q of f)q.match(/["'\u300c]/)&&A===""?A=q:q.match(/["']/)&&A===q&&D!=="\\"?(H.push(j.replaceAll("\\n",`
`)),A="",j=""):q.match(/\u300d/)&&A==="\u300C"?(H.push(j),A="",j=""):A===""&&q.match(/\s+/)?j&&(H.push(j),j=""):j+=q,D=q;return H.push(j),H},he=(m,f)=>{let H=ie(m.content.slice(4));H[0]===void 0||H[2]!==void 0&&!K.nicoScript.replace.range(H[2])||H[3]!==void 0&&!K.nicoScript.replace.target(H[3])||H[4]!==void 0&&!K.nicoScript.replace.condition(H[4])||(a.replace.unshift({start:m.vpos,long:f.long===void 0?void 0:Math.floor(f.long*100),keyword:H[0],replace:H[1]||"",range:H[2]||"\u5358",target:H[3]||"\u30B3\u30E1",condition:H[4]||"\u90E8\u5206\u4E00\u81F4",color:f.color,size:f.size,font:f.font,loc:f.loc,no:m.id}),I2())},I2=()=>{a.replace.sort((m,f)=>m.start<f.start?-1:m.start>f.start?1:m.no<f.no?-1:m.no>f.no?1:0)},gt=(m,f)=>{let H=m.content.match(/^[@\uff20](\u30c7\u30d5\u30a9\u30eb\u30c8|\u7f6e\u63db|\u9006|\u30b3\u30e1\u30f3\u30c8\u7981\u6b62|\u30b7\u30fc\u30af\u7981\u6b62|\u30b8\u30e3\u30f3\u30d7)(.*)/);if(!(!H||!m.owner)){if(f.invisible=!0,H[1]==="\u30C7\u30D5\u30A9\u30EB\u30C8"){V2(m,f);return}if(H[1]==="\u9006"){I0(m,f);return}if(H[1]==="\u30B3\u30E1\u30F3\u30C8\u7981\u6B62"){t0(m,f);return}if(H[1]==="\u30B7\u30FC\u30AF\u7981\u6B62"){go(m,f);return}if(H[1]==="\u30B8\u30E3\u30F3\u30D7"&&H[2]){B5(m,f,H[2]);return}H[1]==="\u7F6E\u63DB"&&he(m,f)}},V2=(m,f)=>{a.default.unshift({start:m.vpos,long:f.long===void 0?void 0:Math.floor(f.long*100),color:f.color,size:f.size,font:f.font,loc:f.loc})},I0=(m,f)=>{let H=m.content.match(/^[@\uff20]\u9006(?:\s+)?(\u5168|\u30b3\u30e1|\u6295\u30b3\u30e1)?/);!H||!H[1]||!K.nicoScript.range.target(H[1])||(f.long===void 0&&(f.long=30),a.reverse.unshift({start:m.vpos,end:m.vpos+f.long*100,target:H[1]}))},t0=(m,f)=>{f.long===void 0&&(f.long=30),a.ban.unshift({start:m.vpos,end:m.vpos+f.long*100})},go=(m,f)=>{f.long===void 0&&(f.long=30),a.seekDisable.unshift({start:m.vpos,end:m.vpos+f.long*100})},B5=(m,f,H)=>{let A=H.match(/\s*((?:sm|so|nm|\uff53\uff4d|\uff53\uff4f|\uff4e\uff4d)?[1-9\uff11-\uff19][0-9\uff11-\uff19]*|#[0-9]+:[0-9]+(?:\.[0-9]+)?)\s+(.*)/);!A||!A[1]||a.jump.unshift({start:m.vpos,end:f.long===void 0?void 0:f.long*100,to:A[1],message:A[2]})},po=m=>{let f=m.mail,H=j0(m),A={loc:void 0,size:void 0,fontSize:void 0,color:void 0,strokeColor:void 0,wakuColor:void 0,font:void 0,full:!1,ender:!1,_live:!1,invisible:!1,long:void 0};for(let D of f)fo(m,D,A,H);return m.content.startsWith("/")&&(A.invisible=!0),A},fo=(m,f,H,A)=>{let D=f.toLowerCase(),j=D.match(/^[@\uff20]([0-9.]+)/);if(j){H.long=Number(j[1]);return}let q=S5(D.match(/^nico:stroke:(.+)$/));if(q){H.strokeColor??=q;return}let Q=S5(D.match(/^nico:waku:(.+)$/));if(Q){H.wakuColor??=Q;return}if(K.comment.loc(D)){H.loc??=D;return}if(H.size===void 0&&K.comment.size(D)){H.size=D,H.fontSize=s1(d.fontSize,A)[D].default;return}if(d.colors[D]){H.color??=d.colors[D];return}let u1=D.match(/^#(?:[0-9a-z]{3}|[0-9a-z]{6})$/);if(u1&&m.premium){H.color??=u1[0].toUpperCase();return}if(K.comment.font(D)){H.font??=D;return}K.comment.command.key(D)&&(H[D]=!0)},S5=m=>{if(!m)return;let f=m[1];if(K.comment.color(f))return e1[f];if(K.comment.colorCodeAllowAlpha(f))return f.slice(1)},j0=m=>z.mode==="flash"||z.mode==="default"&&!(m.mail.includes("gothic")||m.mail.includes("defont")||m.mail.includes("mincho"))&&(m.date<d.flashThreshold||m.mail.includes("nico:flash")),_5=(m,f)=>{for(let H of a.reverse)if(!(H.target==="\u30B3\u30E1"&&f||H.target==="\u6295\u30B3\u30E1"&&!f)&&H.start<m&&m<H.end)return!0;return!1},j2=m=>{for(let f of a.ban)if(f.start<m&&m<f.end)return!0;return!1},R0=(m,f,H)=>{let A=0,D=!0,j=0;for(;D&&j<10;){D=!1,j++;for(let q=0;q<m.long;q++){let Q=b4(A,m,f[m.vpos+q]);if(A=Q.currentPos,D=Q.isChanged,Q.isBreak)break}}for(let q=0;q<m.long;q++){let Q=m.vpos+q;T(H,Q,m),!(q>m.long-20)&&T(f,Q,m)}m.posY=A},y1=(m,f,H)=>{let A=Math.round(-288/((1632+m.width)/(m.long+125)))-100,D=(()=>{if(d.canvasHeight<m.height)return(m.height-d.canvasHeight)/-2;let j=0,q=!0,Q=0;for(;q&&Q<10;){q=!1,Q++;for(let u1=A,v1=m.long+125;u1<v1;u1++){let D1=m.vpos+u1,H1=e0(m.comment,D1),I1=!1;if(H1+m.width>=d.collisionRange.right&&H1<=d.collisionRange.right){let T1=b4(j,m,f.right[D1]);j=T1.currentPos,q=T1.isChanged,I1=T1.isBreak}if(H1+m.width>=d.collisionRange.left&&H1<=d.collisionRange.left){let T1=b4(j,m,f.left[D1]);j=T1.currentPos,q=T1.isChanged,I1=T1.isBreak}if(I1)return j}}return j})();for(let j=A,q=m.long+125;j<q;j++){let Q=m.vpos+j,u1=e0(m.comment,Q);T(H,Q,m),u1+m.width>=d.collisionRange.right&&u1<=d.collisionRange.right&&T(f.right,Q,m),u1+m.width>=d.collisionRange.left&&u1<=d.collisionRange.left&&T(f.left,Q,m)}m.posY=D},b4=(m,f,H)=>{let A=!1,D=!1;if(!H)return{currentPos:m,isChanged:A,isBreak:D};for(let j of H)if(m<j.posY+j.height&&m+f.height>j.posY&&j.owner===f.owner&&j.layer===f.layer&&(j.posY+j.height>m&&(m=j.posY+j.height,A=!0),m+f.height>d.canvasHeight)){d.canvasHeight<f.height?f.mail.includes("naka")?m=(f.height-d.canvasHeight)/-2:m=0:m=Math.floor(Math.random()*(d.canvasHeight-f.height)),D=!0;break}return{currentPos:m,isChanged:A,isBreak:D}},e0=(m,f,H=!1)=>{if(m.loc!=="naka")return(d.canvasWidth-m.width)/2;let A=(d.commentDrawRange+m.width*d.nakaCommentSpeedOffset)/(m.long+100),D=f-m.vpos,j=d.commentDrawPadding+d.commentDrawRange-(D+100)*A;return H?d.canvasWidth-m.width-j:j},yt=(m,f)=>{switch(m){case"gulim":case"simsun":return d.font[m].replace("[size]",`${f}`);case"gothic":case"mincho":return`${d.fonts[m].weight} ${f}px ${d.fonts[m].font}`;default:return`${d.fonts.defont.weight} ${f}px ${d.fonts.defont.font}`}},A4=m=>{let f=lr(m),H=or(m),A=H.filter(q=>(f[q.user_id]||0)>=d.sameCAMinScore&&!q.owner),D=cr(A),j=O5(D);return E4(j),H},lr=m=>{let f={};for(let H of m){if(H.user_id===void 0||H.user_id===-1)continue;f[H.user_id]||=0,(H.mail.includes("ca")||H.mail.includes("patissier")||H.mail.includes("ender")||H.mail.includes("full"))&&(f[H.user_id]+=5);let A=(H.content.match(/\r\n|\n|\r/g)||[]).length;A>2&&(f[H.user_id]+=A/2)}return f},or=m=>{let f={};return m.filter(H=>{let A=`${H.content}@@${[...H.mail].sort().filter(j=>!j.match(/@[\d.]+|184|device:.+|patissier|ca/)).join("")}`,D=f[A];return D===void 0||H.vpos-D.vpos>d.sameCAGap||Math.abs(H.date-D.date)<d.sameCARange?(f[A]=H,!0):!1})},E4=m=>{let f=0;for(let H of m)for(let A of H.comments){for(let D of A.comments)D.layer=f;f++}},cr=m=>m.reduce((f,H)=>(T5(H.user_id,f).comments.push(H),f),[]),T5=(m,f)=>{let H=f.find(D=>D.userId===m);if(H)return H;let A={userId:m,comments:[]};return f.push(A),A},O5=m=>m.reduce((f,H)=>(f.push({userId:H.userId,comments:H.comments.reduce((A,D)=>{let j=b5(D.date,A);return j.comments.push(D),j.range.start=Math.min(j.range.start,D.date),j.range.end=Math.max(j.range.end,D.date),A},[])}),f),[]),b5=(m,f)=>{let H=f.find(D=>D.range.start-d.sameCATimestampRange<=m&&D.range.end+d.sameCATimestampRange>=m);if(H)return H;let A={range:{start:m,end:m},comments:[]};return f.push(A),A},k1=m=>(f,H)=>m(f)>m(H)?1:m(f)<m(H)?-1:0,A5=m=>{let f={simsunStrong:new RegExp(d.flashChar.simsunStrong),simsunWeak:new RegExp(d.flashChar.simsunWeak),gulim:new RegExp(d.flashChar.gulim),gothic:new RegExp(d.flashChar.gothic)},H=[],A;return(A=f.simsunStrong.exec(m))!==null&&H.push({font:"simsunStrong",index:A.index}),(A=f.simsunWeak.exec(m))!==null&&H.push({font:"simsunWeak",index:A.index}),(A=f.gulim.exec(m))!==null&&H.push({font:"gulim",index:A.index}),(A=f.gothic.exec(m))!==null&&H.push({font:"gothic",index:A.index}),H},w2=m=>m.match("^simsun.+")?"simsun":m==="gothic"?"defont":m,E5=m=>{let f=[],H=(m.match(/\n|[^\n]+/g)||[]).map(A=>Array.from(A.match(/[ -~｡-ﾟ]+|[^ -~｡-ﾟ]+/g)||[]));for(let A of H){let D=zo(A),j=D[0];j&&j.font?f.push(...D.map(q=>(q.font||(q.font=j.font),q))):f.push(...D)}return f},zo=m=>{let f=[];for(let H of m){if(H.match(/[ -~｡-ﾟ]+/g)!==null){f.push({content:H,slicedContent:H.split(`
`)});continue}Mo(H,f)}return f},Mo=(m,f)=>{let H=A5(m);H.length===0?f.push({content:m,slicedContent:m.split(`
`)}):H.length===1&&H[0]?f.push({content:m,slicedContent:m.split(`
`),font:w2(H[0].font)}):mo(m,H,f)},mo=(m,f,H)=>{if(f.sort(k1(Q=>Q.index)),d.FlashMode==="xp"){let Q=0;for(let v1=1,D1=f.length;v1<D1;v1++){let H1=f[v1],I1=f[v1-1];if(H1===void 0||I1===void 0)continue;let T1=m.slice(Q,H1.index);H.push({content:T1,slicedContent:T1.split(`
`),font:w2(I1.font)}),Q=H1.index}let u1=f[f.length-1];if(u1){let v1=m.slice(Q);H.push({content:v1,slicedContent:v1.split(`
`),font:w2(u1.font)})}return}let A=f[0],D=f[1];if(!A||!D){H.push({content:m,slicedContent:m.split(`
`)});return}if(A.font!=="gothic"){H.push({content:m,slicedContent:m.split(`
`),font:w2(A.font)});return}let j=m.slice(0,D.index),q=m.slice(D.index);H.push({content:j,slicedContent:j.split(`
`),font:w2(A.font)}),H.push({content:q,slicedContent:q.split(`
`),font:w2(D.font)})},k4=(m,f,H=!1)=>{let A=s1(d.lineCounts,f),D=s1(d.CommentStageSize,f),j=D.height/A.doubleResized[m],q=A.default[m];if(H){let Q=A.resized[m];return(D.height-j*(q/Q))/(Q-1)}return(D.height-j)/(q-1)},sr=(m,f)=>{let H=s1(d.lineCounts,f);return s1(d.CommentStageSize,f).height/H.doubleResized[m]},a0=(m,f)=>({...Ho(m,f),height:m.lineHeight*(m.lineCount-1)+m.charSize}),Ho=(m,f)=>{let{fontSize:H,scale:A}=vr(m.charSize),D=[],j=[];f.font=yt(m.font,H);let q=0;for(let Q of m.content){let u1=Q.content.split(`
`);f.font=yt(Q.font||m.font,H);let v1=[];for(let D1=0,H1=u1.length;D1<H1;D1++){let I1=f.measureText(u1[D1]);q+=I1.width,v1.push(I1.width),D1<u1.length-1&&(D.push(Math.ceil(q*A)),q=0)}j.push(v1),D.push(Math.ceil(q*A))}return{width:Math.max(...D),lineWidth:D,itemWidth:j}},vr=m=>(m*=.8,m<d.minFontSize?(m>=1&&(m=Math.floor(m)),{scale:m/d.minFontSize,fontSize:d.minFontSize}):{scale:1,fontSize:Math.floor(m)});var xo=Object.freeze({__proto__:null,ArrayEqual:S,ArrayPush:T,changeCALayer:A4,getCharSize:sr,getConfig:s1,getDefaultCommand:L1,getFlashFontIndex:A5,getFlashFontName:w2,getFontSizeAndScale:vr,getLineHeight:k4,getPosX:e0,getPosY:b4,getStrokeColor:$,hex2rgb:R,hex2rgba:N,isBanActive:j2,isFlashComment:j0,isLineBreakResize:B1,isReverseActive:_5,measure:a0,nativeSort:k1,parseCommandAndNicoScript:ut,parseContent:E5,parseFont:yt,processFixedComment:R0,processMovableComment:y1});let Vo=()=>document.createElement("canvas"),dr=m=>{let f=m.getContext("2d");if(!f)throw new O;return f},wo=(m,f,H,A)=>{m.drawImage(f,H,A)};class ur{context;cacheKey;comment;posY;pluginName="BaseComment";image;constructor(f,H){this.context=H,this.posY=0,f.content=f.content.replace(/\t/g,"\u2003\u2003"),this.comment=this.convertComment(f),this.cacheKey=JSON.stringify(this.comment.content)+`@@${this.pluginName}@@`+[...this.comment.mail].sort().join(",")}get invisible(){return this.comment.invisible}get loc(){return this.comment.loc}get long(){return this.comment.long}get vpos(){return this.comment.vpos}get width(){return this.comment.width}get height(){return this.comment.height}get flash(){return!1}get layer(){return this.comment.layer}get owner(){return this.comment.owner}get mail(){return this.comment.mail}get content(){throw new x(this.pluginName,"set: content")}set content(f){throw new x(this.pluginName,"set: content")}getCommentSize(f){throw console.error("getCommentSize method is not implemented",f),new x(this.pluginName,"getCommentSize")}parseCommandAndNicoscript(f){throw console.error("parseCommandAndNicoscript method is not implemented",f),new x(this.pluginName,"parseCommandAndNicoscript")}parseContent(f){throw console.error("parseContent method is not implemented",f),new x(this.pluginName,"parseContent")}measureText(f){throw console.error("measureText method is not implemented",f),new x(this.pluginName,"measureText")}convertComment(f){throw console.error("convertComment method is not implemented",f),new x(this.pluginName,"convertComment")}draw(f,H,A){if(j2(f))return;let D=_5(f,this.comment.owner),j=e0(this.comment,f,D),q=this.comment.loc==="shita"?d.canvasHeight-this.posY-this.comment.height:this.posY;this._draw(j,q),this._drawRectColor(j,q),this._drawCollision(j,q,H),this._drawDebugInfo(j,q,A)}_draw(f,H){this.image===void 0&&(this.image=this.getTextImage()),this.image&&(this.context.save(),this.comment._live?this.context.globalAlpha=d.contextFillLiveOpacity:this.context.globalAlpha=1,wo(this.context,this.image,f,H),this.context.restore())}_drawRectColor(f,H){this.comment.wakuColor&&(this.context.save(),this.context.strokeStyle=this.comment.wakuColor,this.context.strokeRect(f,H,this.comment.width,this.comment.height),this.context.restore())}_drawDebugInfo(f,H,A){if(A){this.context.save();let D=this.context.font,j=this.context.fillStyle;this.context.font=yt("defont",30),this.context.fillStyle="#ff00ff",this.context.fillText(this.comment.mail.join(","),f,H+30),this.context.font=D,this.context.fillStyle=j,this.context.restore()}}_drawCollision(f,H,A){throw console.error("_drawCollision method is not implemented",f,H,A),new x(this.pluginName,"_drawCollision")}getTextImage(){if(this.comment.invisible||this.comment.lineCount===1&&this.comment.width===0||this.comment.height-(this.comment.charSize-this.comment.lineHeight)<=0)return null;let f=e[this.cacheKey];if(f)return this.image=f.image,setTimeout(()=>{delete this.image},this.comment.long*10+d.cacheAge),clearTimeout(f.timeout),f.timeout=setTimeout(()=>{delete e[this.cacheKey]},this.comment.long*10+d.cacheAge),f.image;if(this.image)return this.image;let H=this._generateTextImage();return this._cacheImage(H),H}_generateTextImage(){throw console.error("_generateTextImage method is not implemented"),new x(this.pluginName,"_generateTextImage")}_cacheImage(f){this.image=f,setTimeout(()=>{delete this.image},this.comment.long*10+d.cacheAge),e[this.cacheKey]={timeout:setTimeout(()=>{delete e[this.cacheKey]},this.comment.long*10+d.cacheAge),image:f}}createCanvas(){let f=Vo(),H=dr(f);return{image:f,context:H}}}class gr extends ur{_globalScale;scale;scaleX;pluginName="FlashComment";constructor(f,H){super(f,H),this.scale??=1,this.scaleX??=1,this._globalScale??=s1(d.commentScale,!0),this.posY??=0}get content(){return this.comment.rawContent}set content(f){let{content:H,lineCount:A,lineOffset:D}=this.parseContent(f),j={...this.comment,rawContent:f,content:H,lineCount:A,lineOffset:D},q=H[0];q&&q.font&&(j.font=q.font),this.comment=this.getCommentSize(j),this.cacheKey=JSON.stringify(this.comment.content)+`@@${this.pluginName}@@`+[...this.comment.mail].sort().join(","),delete this.image}convertComment(f){return this.scale=1,this.scaleX=1,this._globalScale=s1(d.commentScale,!0),this.posY=0,this.getCommentSize(this.parseCommandAndNicoscript(f))}getCommentSize(f){this.context.save(),this.context.font=yt(f.font,f.fontSize);let H=f;if(f.invisible)return H.height=0,H.width=0,H.lineHeight=0,H.fontSize=0,H.resized=!1,H.resizedX=!1,H.resizedY=!1,H.charSize=0,this.context.restore(),H;let A=this.measureText(f);return z.scale!==1&&H.layer===-1&&(A.height*=z.scale,A.width*=z.scale),H.height=A.height*this._globalScale,H.width=A.width*this._globalScale,H.lineHeight=A.lineHeight,H.fontSize=A.fontSize,H.content=A.content,H.resized=A.resized,H.resizedX=A.resizedX,H.resizedY=A.resizedY,H.charSize=A.charSize,this.context.restore(),H}parseCommandAndNicoscript(f){let H=ut(f),{content:A,lineCount:D,lineOffset:j}=this.parseContent(f.content),q=A[0];return q&&q.font&&(H.font=q.font),{...f,rawContent:f.content,...H,content:A,lineCount:D,lineOffset:j}}parseContent(f){let H=E5(f),A=H.reduce((j,q)=>j+(q.content.match(/\n/g)?.length||0),1),D=(f.match(new RegExp(d.FlashScriptChar.super,"g"))?.length||0)*-1*d.scriptCharOffset+(f.match(new RegExp(d.FlashScriptChar.sub,"g"))?.length||0)*d.scriptCharOffset;return{content:H,lineCount:A,lineOffset:D}}measureText(f){let H=s1(d.lineHeight,!0),A=s1(d.fontSize,!0),D=f.lineCount;f.lineHeight??=H[f.size].default,B1(f)&&(f.fontSize=A[f.size].resized,f.lineHeight=H[f.size].resized,f.resized=!0,f.resizedY=!0,this.context.font=yt(f.font,f.fontSize));let{width_arr:j,spacedWidth_arr:q}=this._measureContent(f),Q=function(){let H1=0,I1=-1;for(let T1=0,Qt=q.length;T1<Qt;T1++){let N2=q[T1];N2&&H1<N2&&(H1=N2,I1=T1)}return{max:H1,index:I1}}(),u1=Q.max;this.scaleX=Q.max/(j[Q.index]||1);let v1=u1*this.scale,D1=(f.fontSize*f.lineHeight*D+d.commentYPaddingTop[f.resizedY?"resized":"default"])*this.scale;if(f.loc!=="naka"){let H1=s1(d.CommentStageSize,!0)[f.full?"fullWidth":"width"];if(v1>H1&&!f.resizedX)return f.fontSize=A[f.size].default,f.lineHeight=H[f.size].default,this.scale=H1/v1,f.resizedX=!0,f.resized=!0,this.measureText(f)}return{width:v1,charSize:0,height:D1,resized:!!f.resized,fontSize:f.fontSize,lineHeight:f.lineHeight,content:f.content,resizedX:!!f.resizedX,resizedY:!!f.resizedY}}_measureContent(f){let H=[],A=[],D=0,j=0;for(let q of f.content){let Q=q.content.split(`
`),u1=[];this.context.font=yt(q.font||f.font,f.fontSize);for(let v1=0,D1=Q.length;v1<D1;v1++){let H1=Q[v1];if(H1===void 0)continue;let I1=this.context.measureText(H1);D+=I1.width,j+=I1.width+Math.max(H1.length-1,0)*d.letterSpacing,u1.push(I1.width),v1<Q.length-1&&(H.push(D),A.push(j),j=0,D=0)}H.push(D),A.push(j),q.width=u1}return{width_arr:H,spacedWidth_arr:A}}_drawCollision(f,H,A){if(A){this.context.save(),this.context.strokeStyle="rgba(255,0,255,1)",this.context.strokeRect(f,H,this.comment.width,this.comment.height);for(let D=0,j=this.comment.lineCount;D<j;D++){let q=((D+1)*(this.comment.fontSize*this.comment.lineHeight)+d.commentYPaddingTop[this.comment.resizedY?"resized":"default"])*this.scale;this.context.strokeStyle="rgba(255,255,0,0.25)",this.context.strokeRect(f,H+q*this._globalScale,this.comment.width,this.comment.fontSize*this.comment.lineHeight*-1*this._globalScale*this.scale*(this.comment.layer===-1?z.scale:1))}this.context.restore()}}_generateTextImage(){let{image:f,context:H}=this.createCanvas();f.width=this.comment.width,f.height=this.comment.height,H.strokeStyle=$(this.comment),H.fillStyle=this.comment.color,H.textAlign="start",H.textBaseline="alphabetic",H.lineWidth=4,H.font=yt(this.comment.font,this.comment.fontSize);let A=this._globalScale*this.scale*(this.comment.layer===-1?z.scale:1);H.scale(A*this.scaleX,A);let D=this.comment.lineOffset,j=this.comment.resizedY?"resized":"default",q=d.commentYPaddingTop[j]+this.comment.fontSize*this.comment.lineHeight*d.commentYOffset[this.comment.size][j],Q=this.comment.font,u1=0,v1=0;for(let D1 of this.comment.content){let H1=D1.font||this.comment.font;Q!==H1&&(Q=H1,H.font=yt(H1,this.comment.fontSize));let I1=D1.slicedContent;for(let T1=0,Qt=I1.length;T1<Qt;T1++){let N2=I1[T1];if(N2===void 0)continue;let zr=(D+v1+1)*(this.comment.fontSize*this.comment.lineHeight)+q;if(H.strokeText(N2,u1,zr),H.fillText(N2,u1,zr),T1<Qt-1){u1=0,v1+=1;continue}u1+=D1.width[T1]||0}}return f}}class k5 extends ur{pluginName="HTML5Comment";constructor(f,H){super(f,H),this.posY=0}get content(){return this.comment.rawContent}set content(f){let{content:H,lineCount:A,lineOffset:D}=this.parseContent(f),j={...this.comment,rawContent:f,content:H,lineCount:A,lineOffset:D};this.comment=this.getCommentSize(j),this.cacheKey=JSON.stringify(this.comment.content)+`@@${this.pluginName}@@`+[...this.comment.mail].sort().join(","),delete this.image}convertComment(f){return this.getCommentSize(this.parseCommandAndNicoscript(f))}getCommentSize(f){this.context.save(),this.context.font=yt(f.font,f.fontSize);let H=f;if(f.invisible)return H.height=0,H.width=0,H.lineHeight=0,H.fontSize=0,H.resized=!1,H.resizedX=!1,H.resizedY=!1,H.charSize=0,this.context.restore(),H;let A=this.measureText(f);return z.scale!==1&&H.layer===-1&&(A.height*=z.scale,A.width*=z.scale,A.fontSize*=z.scale),H.height=A.height,H.width=A.width,H.lineHeight=A.lineHeight,H.fontSize=A.fontSize,H.content=A.content,H.resized=A.resized,H.resizedX=A.resizedX,H.resizedY=A.resizedY,H.charSize=A.charSize,this.context.restore(),H}parseCommandAndNicoscript(f){let H=ut(f),{content:A,lineCount:D,lineOffset:j}=this.parseContent(f.content);return{...f,rawContent:f.content,...H,content:A,lineCount:D,lineOffset:j}}parseContent(f){let H=[];H.push({content:f,slicedContent:f.split(`
`)});let A=H.reduce((j,q)=>j+(q.content.match(/\n/g)?.length||0),1);return{content:H,lineCount:A,lineOffset:0}}measureText(f){let H=s1(d.commentScale,!1),A=s1(d.fontSize,!1),D=k4(f.size,!1),j=sr(f.size,!1);if(f.lineHeight||(f.lineHeight=D),f.charSize||(f.charSize=j),f.fontSize=f.charSize*.8,this.context.font=yt(f.font,f.fontSize),B1(f)){f.fontSize=A[f.size].resized;let v1=k4(f.size,!1,!0);f.charSize=f.charSize*(v1/f.lineHeight),f.lineHeight=v1,f.resized=!0,f.resizedY=!0}let{width:q,height:Q,itemWidth:u1}=this._measureComment(f);for(let v1=0,D1=f.content.length;v1<D1;v1++){let H1=f.content[v1];!H1||!u1||(H1.width=u1[v1])}return f.fontSize=(f.charSize||0)*.8,{width:q*H,height:Q*H,resized:!!f.resized,fontSize:f.fontSize,lineHeight:f.lineHeight||0,content:f.content,resizedX:!!f.resizedX,resizedY:!!f.resizedY,charSize:f.charSize||0}}_measureComment(f){let H=s1(d.CommentStageSize,!1)[f.full?"fullWidth":"width"],A=a0(f,this.context);return f.loc!=="naka"&&A.width>H?this._processResizeX(f,A.width):A}_processResizeX(f,H){let A=s1(d.CommentStageSize,!1)[f.full?"fullWidth":"width"],D=k4(f.size,!1),j=sr(f.size,!1),q=A/H;f.resizedX=!0;let Q={...f};Q.charSize=(Q.charSize||0)*q,Q.lineHeight=(Q.lineHeight||0)*q,Q.fontSize=Q.charSize*.8;let u1=a0(Q,this.context);if(u1.width>A)for(;u1.width>=A;){let v1=Q.charSize;Q.charSize-=1,Q.lineHeight*=Q.charSize/v1,Q.fontSize=Q.charSize*.8,u1=a0(Q,this.context)}else{let v1={...Q};for(;u1.width<A;){v1={...Q};let D1=Q.charSize;Q.charSize+=1,Q.lineHeight*=Q.charSize/D1,Q.fontSize=Q.charSize*.8,u1=a0(Q,this.context)}Q=v1}if(f.resizedY){let v1=(Q.charSize||0)/(f.charSize||0);f.charSize=v1*j,f.lineHeight=v1*D}else f.charSize=Q.charSize,f.lineHeight=Q.lineHeight;return f.fontSize=(f.charSize||0)*.8,a0(f,this.context)}_drawCollision(f,H,A){if(A){this.context.save();let D=s1(d.commentScale,!1);this.context.strokeStyle="rgba(0,255,255,1)",this.context.strokeRect(f,H,this.comment.width,this.comment.height);for(let j=0,q=this.comment.lineCount;j<q;j++){let Q=(this.comment.lineHeight*(j+1)+(this.comment.charSize-this.comment.lineHeight)/2+this.comment.lineHeight*-.16+(d.fonts[this.comment.font]?.offset||0))*D;this.context.strokeStyle="rgba(255,255,0,0.5)",this.context.strokeRect(f,H+Q,this.comment.width,this.comment.fontSize*-1*D)}this.context.restore()}}_generateTextImage(){let{fontSize:f,scale:H}=vr(this.comment.charSize),A=(10-H*10)*((this.comment.lineCount+1)/d.hiResCommentCorrection),{image:D,context:j}=this.createCanvas();D.width=this.comment.width+2*2*this.comment.charSize,D.height=this.comment.height+(A+1)*this.comment.lineHeight/H,j.strokeStyle=$(this.comment),j.fillStyle=this.comment.color,j.textAlign="start",j.textBaseline="alphabetic",j.lineWidth=d.contextLineWidth,j.font=yt(this.comment.font,f);let q=s1(d.commentScale,!1)*H*(this.comment.layer===-1?z.scale:1);j.scale(q,q);let Q=0,u1=(this.comment.charSize-this.comment.lineHeight)/2+this.comment.lineHeight*-.16+(d.fonts[this.comment.font]?.offset||0);for(let v1 of this.comment.content){let D1=v1.slicedContent;for(let H1=0,I1=D1.length;H1<I1;H1++){let T1=D1[H1];if(T1===void 0)continue;let Qt=(this.comment.lineHeight*(Q+1+A)+u1)/H;j.strokeText(T1,0,Qt),j.fillText(T1,0,Qt),Q+=1}}return D}}var Lo=Object.freeze({__proto__:null,BaseComment:ur,FlashComment:gr,HTML5Comment:k5});let q1=m=>m.reduce((f,H,A)=>A===0?{...H}:(f.font+=`, ${H.font}`,f),{font:"",offset:0,weight:600}),M1={arial:{font:'Arial, "\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF", "MS PGothic", MSPGothic, MS-PGothic',offset:.01,weight:600},gothic:{font:'"\u6E38\u30B4\u30B7\u30C3\u30AF\u4F53", "\u6E38\u30B4\u30B7\u30C3\u30AF", "Yu Gothic", YuGothic, yugothic, YuGo-Medium',offset:-.04,weight:400},gulim:{font:'Gulim, "\u9ED1\u4F53", SimHei',offset:.03,weight:400},mincho:{font:'"\u6E38\u660E\u671D\u4F53", "\u6E38\u660E\u671D", "Yu Mincho", YuMincho, yumincho, YuMin-Medium',offset:-.01,weight:400},simsun:{font:'"\u5B8B\u4F53", SimSun',offset:.135,weight:400},macGothicPro6:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN W6", HiraKakuProN-W6, "\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',offset:-.05,weight:600},macGothicPro3:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN W3", HiraKakuProN-W3, "\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',offset:-.04,weight:300},macMincho:{font:'"\u30D2\u30E9\u30AE\u30CE\u660E\u671D ProN W3", HiraMinProN-W3, "\u30D2\u30E9\u30AE\u30CE\u660E\u671D ProN", HiraMinProN, "Hiragino Mincho ProN"',offset:-.02,weight:300},macGothic1:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4\u30B7\u30C3\u30AF", "Hiragino Sans", HiraginoSans',offset:-.05,weight:600},macGothic2:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4\u30B7\u30C3\u30AF", "Hiragino Sans", HiraginoSans',offset:-.04,weight:300},sansSerif600:{font:"sans-serif",offset:0,weight:600},sansSerif400:{font:"sans-serif",offset:0,weight:400},serif:{font:"serif",offset:0,weight:400}},N0={win7:{defont:q1([M1.arial]),gothic:q1([M1.gothic,M1.gulim,M1.arial]),mincho:q1([M1.mincho,M1.simsun,M1.arial])},win8_1:{defont:q1([M1.arial]),gothic:q1([M1.gothic,M1.simsun,M1.arial]),mincho:q1([M1.mincho,M1.simsun,M1.arial])},win:{defont:q1([M1.arial]),gothic:q1([M1.gulim,M1.arial]),mincho:q1([M1.simsun,M1.arial])},mac10_9:{defont:q1([M1.macGothicPro6]),gothic:q1([M1.gothic,M1.macGothicPro3]),mincho:q1([M1.mincho,M1.macMincho,M1.macGothicPro3])},mac10_11:{defont:q1([M1.macGothic1]),gothic:q1([M1.gothic,M1.macGothic2]),mincho:q1([M1.mincho,M1.macMincho,M1.macGothic2])},mac:{defont:q1([M1.macGothicPro6]),gothic:q1([M1.macGothicPro3]),mincho:q1([M1.macMincho])},other:{defont:q1([M1.sansSerif600]),gothic:q1([M1.sansSerif400]),mincho:q1([M1.serif])}};var Ct=Object.freeze({__proto__:null,fontTemplates:M1,fonts:N0});let P5=()=>{let m=function(H){return H.match(/windows nt 6\.[12]/i)?"win7":H.match(/windows nt (6\.3|10\.\d+)|win32/i)?"win8_1":H.match(/windows nt/i)?"win":H.match(/mac os x 10(.|_)(9|10)/i)?"mac10_9":H.match(/mac os x 10(.|_)\d{2}|darwin/i)?"mac10_11":H.match(/mac os x/i)?"mac":"other"}(typeof navigator<"u"?navigator.userAgent:process.platform),f={colors:e1,contextStrokeColor:"#000000",contextStrokeInversionColor:"#FFFFFF",contextStrokeOpacity:.4,contextFillLiveOpacity:.5,contextLineWidth:2.8,commentScale:{html5:1920/683,flash:1920/683},CommentStageSize:{html5:{width:512,fullWidth:683,height:384},flash:{width:512,fullWidth:640,height:385}},fontSize:{html5:{small:{default:18,resized:10},medium:{default:27,resized:14},big:{default:39,resized:19.5}},flash:{small:{default:15,resized:7.5},medium:{default:24,resized:12},big:{default:39,resized:19.5}}},lineCounts:{default:{big:8.4,medium:13.1,small:21},resized:{big:16,medium:25.4,small:38},doubleResized:{big:7.8,medium:11.3,small:16.6}},hiResCommentCorrection:20,minFontSize:10,fonts:N0[m],fpsInterval:500,cacheAge:2e3,canvasWidth:1920,canvasHeight:1080,commentDrawRange:1530,commentDrawPadding:195,collisionRange:{left:235,right:1685},sameCARange:3600,sameCAGap:100,sameCAMinScore:10,sameCATimestampRange:300,plugins:[],flashThreshold:1499871600,flashChar:{gulim:"[\u0126\u0127\u0132\u0133\u0138\u013F\u0140\u0149-\u014B\u0166\u0167\u02D0\u02DA\u2074\u207F\u2081-\u2084\u2113\u2153\u2154\u215C-\u215E\u2194\u2195\u223C\u249C-\u24B5\u24D0-\u24E9\u25A3-\u25A9\u25B6\u25B7\u25C0\u25C1\u25C8\u25D0\u25D1\u260E\u260F\u261C\u261E\u2660\u2661\u2663-\u2665\u2667-\u2669\u266C\u3131-\u316E\u3200-\u321C\u3260-\u327B\u3380-\u3384\u3388-\u338D\u3390-\u339B\u339F\u33A0\u33A2-\u33CA\u33CF\u33D0\u33D3\u33D6\u33D8\u33DB-\u33DD\uF900-\uF928\uF92A-\uF994\uF996\uFA0B\uFFE6]",simsunStrong:"[\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u0251\u0261\u02CA\u02CB\u2016\u2035\u216A\u216B\u2223\u2236\u2237\u224C\u226E\u226F\u2295\u2483-\u249B\u2504-\u250B\u256D-\u2573\u2581-\u2583\u2585-\u2587\u2589-\u258B\u258D-\u258F\u2594\u2595\u25E2-\u25E5\u2609\u3016\u3017\u301E\u3021-\u3029\u3105-\u3129\u3220-\u3229\u32A3\u33CE\u33D1\u33D2\u33D5\uE758-\uE864\uFA0C\uFA0D\uFE30\uFE31\uFE33-\uFE44\uFE49-\uFE52\uFE54-\uFE57\uFE59-\uFE66\uFE68-\uFE6B]",simsunWeak:"[\u02C9\u2105\u2109\u2196-\u2199\u220F\u2215\u2248\u2264\u2265\u2299\u2474-\u2482\u250D\u250E\u2511\u2512\u2515\u2516\u2519\u251A\u251E\u251F\u2521\u2522\u2526\u2527\u2529\u252A\u252D\u252E\u2531\u2532\u2535\u2536\u2539\u253A\u253D\u253E\u2540\u2541\u2543-\u254A\u2550-\u256C\u2584\u2588\u258C\u2593]",gothic:"[\u03FB\uFF9F]"},FlashMode:"vista",FlashScriptChar:{super:"[\xAA\xB2\xB3\xB9\xBA\u02B0\u02B2\u02B3\u02B7\u02B8\u02E1-\u02E3\u0304\u1D2C-\u1D43\u1D45-\u1D61\u1D9B-\u1DA1\u1DA3-\u1DBF\u2070\u2071\u2074-\u207F\u2C7D]",sub:"[\u0320\u1D62-\u1D6A\u2080-\u208E\u2090-\u209C\u2C7C]"},font:{gulim:'normal 600 [size]px gulim, "Microsoft JhengHei UI", Arial, "\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF", "MS PGothic", MSPGothic, MS-PGothic',simsun:'normal 400 [size]px simsun, "\u6E38\u660E\u671D\u4F53", "\u6E38\u660E\u671D", "Yu Mincho", YuMincho, yumincho, YuMin-Medium'},lineHeight:{small:{default:18/15,resized:10/7.5},medium:{default:29/25,resized:15/12},big:{default:45/39,resized:24/19.5}},doubleResizeMaxWidth:{full:1200,normal:960},commentYPaddingTop:{default:5,resized:3},commentYMarginBottom:{small:.24,medium:.28,big:.24},commentYOffset:{small:{default:-.2,resized:-.2},medium:{default:-.2,resized:-.2},big:{default:-.2,resized:-.2}},letterSpacing:1,scriptCharOffset:.12,commentLimit:void 0,hideCommentOrder:"asc",lineBreakCount:{big:3,medium:5,small:7},commentPlugins:[{class:gr,condition:j0}],nakaCommentSpeedOffset:.95};c(f)};var yo=Object.freeze({__proto__:null,initConfig:P5});let le=[],Ht={seekDisable:0,seekEnable:0,commentDisable:0,commentEnable:0,jump:0},F0=(m,f)=>{le.push({eventName:m,handler:f}),D5()},S1=(m,f)=>{le=le.filter(H=>H.eventName!==m||H.handler!==f),D5()},D5=()=>{for(let m of Object.keys(Ht)){let f=m;Ht[f]=le.filter(H=>H.eventName===f).length}},U0=(m,f)=>{P4(m,f),Co(m,f),Se(m,f)},P4=(m,f)=>{if(!(Ht.commentDisable<1&&Ht.commentEnable<1))for(let H of a.ban){let A=H.start<m&&m<H.end,D=H.start<f&&f<H.end;A&&!D?_1("commentDisable",{type:"commentDisable",timeStamp:new Date().getTime(),vpos:m}):!A&&D&&_1("commentEnable",{type:"commentEnable",timeStamp:new Date().getTime(),vpos:m})}},Co=(m,f)=>{if(!(Ht.seekDisable<1&&Ht.seekEnable<1))for(let H of a.seekDisable){let A=H.start<m&&m<H.end,D=H.start<f&&f<H.end;A&&!D?_1("seekDisable",{type:"seekDisable",timeStamp:new Date().getTime(),vpos:m}):!A&&D&&_1("seekEnable",{type:"seekEnable",timeStamp:new Date().getTime(),vpos:m})}},Se=(m,f)=>{if(!(Ht.jump<1))for(let H of a.jump){let A=H.start<m&&(!H.end||m<H.end),D=H.start<f&&(!H.end||f<H.end);A&&!D&&_1("jump",{type:"jump",timeStamp:new Date().getTime(),vpos:m,to:H.to,message:H.message})}},_1=(m,f)=>{for(let H of le)m===H.eventName&&H.handler(f)};var I5=Object.freeze({__proto__:null,registerHandler:F0,removeHandler:S1,triggerHandler:U0});let $0=(m,f)=>{let H=[];if(f==="empty"&&m===void 0)return[];if((f==="XMLDocument"||f==="niconicome")&&K.xmlDocument(m))H=Bo(m);else if(f==="formatted"&&K.formatted.legacyComments(m))H=So(m);else if(f==="legacy"&&K.legacy.rawApiResponses(m))H=_o(m);else if(f==="legacyOwner"&&K.legacyOwner.comments(m))H=j5(m);else if(f==="owner"&&K.owner.comments(m))H=pr(m);else if(f==="v1"&&K.v1.threads(m))H=fr(m);else throw new k;return R5(H)},Bo=m=>{let f=[],H=[],A=Array.from(m.documentElement.children).length;for(let D of Array.from(m.documentElement.children)){if(D.nodeName!=="chat")continue;let j={id:Number(D.getAttribute("no"))||A++,vpos:Number(D.getAttribute("vpos")),content:D.innerHTML,date:Number(D.getAttribute("date"))||0,date_usec:Number(D.getAttribute("date_usec"))||0,owner:!D.getAttribute("user_id"),premium:D.getAttribute("premium")==="1",mail:[],user_id:-1,layer:-1};D.getAttribute("mail")&&(j.mail=D.getAttribute("mail")?.split(/\s+/g)||[]),j.content.startsWith("/")&&j.owner&&j.mail.push("invisible");let q=D.getAttribute("user_id")||"",Q=H.indexOf(q);Q===-1?(j.user_id=H.length,H.push(q)):j.user_id=Q,f.push(j)}return f},So=m=>{let f=m;if(!K.formatted.comments(m))for(let H of f)H.layer=-1,H.user_id=0,H.date_usec||(H.date_usec=0);return f},_o=m=>{let f=[],H=[];for(let A of m){if(!K.legacy.apiChat(A.chat))continue;let D=A.chat;if(D.deleted!==1){let j={id:D.no,vpos:D.vpos,content:D.content||"",date:D.date,date_usec:D.date_usec||0,owner:!D.user_id,premium:D.premium===1,mail:[],user_id:-1,layer:-1};D.mail&&(j.mail=D.mail.split(/\s+/g)),D.content.startsWith("/")&&!D.user_id&&j.mail.push("invisible");let q=H.indexOf(D.user_id);q===-1?(j.user_id=H.length,H.push(D.user_id)):j.user_id=q,f.push(j)}}return f},j5=m=>{let f=[],H=m.split(`
`);for(let A=0,D=H.length;A<D;A++){let j=H[A];if(!j)continue;let q=j.split(":");if(q.length<3)continue;if(q.length>3)for(let u1=3,v1=q.length;u1<v1;u1++)q[2]+=`:${q[u1]}`;let Q={id:A,vpos:Number(q[0]),content:q[2]||"",date:A,date_usec:0,owner:!0,premium:!0,mail:[],user_id:-1,layer:-1};q[1]&&(Q.mail=q[1].split(/[\s+]/g)),Q.content.startsWith("/")&&Q.mail.push("invisible"),f.push(Q)}return f},pr=m=>{let f=[];for(let H=0,A=m.length;H<A;H++){let D=m[H];if(!D)continue;let j={id:H,vpos:To(D.time),content:D.comment,date:H,date_usec:0,owner:!0,premium:!0,mail:[],user_id:-1,layer:-1};D.command&&(j.mail=D.command.split(/\s+/g)),j.content.startsWith("/")&&j.mail.push("invisible"),f.push(j)}return f},fr=m=>{let f=[],H=[];for(let A of m){let D=A.comments,j=A.fork;for(let q of D){let Q={id:q.no,vpos:Math.floor(q.vposMs/10),content:q.body,date:Oo(q.postedAt),date_usec:0,owner:j==="owner",premium:q.isPremium,mail:q.commands,user_id:-1,layer:-1};Q.content.startsWith("/")&&Q.owner&&Q.mail.push("invisible");let u1=H.indexOf(q.userId);u1===-1?(Q.user_id=H.length,H.push(q.userId)):Q.user_id=u1,f.push(Q)}}return f},R5=m=>(m.sort((f,H)=>f.vpos<H.vpos?-1:f.vpos>H.vpos?1:f.date<H.date?-1:f.date>H.date?1:f.date_usec<H.date_usec?-1:f.date_usec>H.date_usec?1:0),m),To=m=>{let f=m.match(/^(?:(\d+):(\d+)\.(\d+)|(\d+):(\d+)|(\d+)\.(\d+)|(\d+))$/);if(f){if(f[1]!==void 0&&f[2]!==void 0&&f[3]!==void 0)return(Number(f[1])*60+Number(f[2]))*100+Number(f[3])/Math.pow(10,f[3].length-2);if(f[4]!==void 0&&f[5]!==void 0)return(Number(f[4])*60+Number(f[5]))*100;if(f[6]!==void 0&&f[7]!==void 0)return Number(f[6])*100+Number(f[7])/Math.pow(10,f[7].length-2);if(f[8]!==void 0)return Number(f[8])*100}return 0},Oo=m=>Math.floor(new Date(m).getTime()/1e3);var D4=Object.freeze({__proto__:null,default:$0});let W0=(m,f)=>{for(let H of d.commentPlugins)if(H.condition(m))return new H.class(m,f);return new k5(m,f)};var G0=Object.freeze({__proto__:null,comments:Lo,contexts:h,definition:{colors:r1,config:w,fonts:Ct,initConfig:yo},errors:C,eventHandler:I5,inputParser:D4,typeGuard:o1,utils:xo});let _e=!1;class Te{enableLegacyPiP;showCollision;showFPS;showCommentCount;video;lastVpos;canvas;collision;context;timeline;static typeGuard=K;static default=Te;static FlashComment={condition:j0,class:gr};static internal=G0;constructor(f,H,A={}){let D=performance.now();if(P5(),!K.config.initOptions(A))throw new V;y(Object.assign(v,A)),L(Object.assign(l,z.config)),_e=z.debug,t(),r(),this.canvas=f,this.context=dr(f),this.context.textAlign="start",this.context.textBaseline="alphabetic",this.context.lineWidth=d.contextLineWidth;let j=z.format;z.formatted&&console.warn("Deprecated: options.formatted is no longer recommended. Please use options.format. https://xpadev-net.github.io/niconicomments/#p_format"),j==="default"&&(j=z.formatted?"formatted":"legacy"),z.useLegacy&&console.warn("Deprecated: options.useLegacy is no longer recommended. Please use options.mode. https://xpadev-net.github.io/niconicomments/#p_mode"),z.mode==="default"&&z.useLegacy&&(z.mode="html5");let q=$0(H,j);this.video=z.video||void 0,this.showCollision=z.showCollision,this.showFPS=z.showFPS,this.showCommentCount=z.showCommentCount,this.enableLegacyPiP=z.enableLegacyPiP,this.timeline={},this.collision=["ue","shita","right","left"].reduce((Q,u1)=>(Q[u1]=[],Q),{}),this.lastVpos=-1,this.preRendering(q),R2(`constructor complete: ${performance.now()-D}ms`)}preRendering(f){let H=performance.now();z.keepCA&&(f=A4(f));let A=f.reduce((j,q)=>(j.push(W0(q,this.context)),j),[]);this.getCommentPos(A),this.sortComment();let D=[];for(let j of d.plugins)try{D.push(new j(this.canvas,A))}catch{console.error("Failed to init plugin")}i(D),R2(`preRendering complete: ${performance.now()-H}ms`)}getCommentPos(f){let H=performance.now();for(let A of f)A.invisible||(A.loc==="naka"?y1(A,this.collision,this.timeline):R0(A,this.collision[A.loc],this.timeline));R2(`getCommentPos complete: ${performance.now()-H}ms`)}sortComment(){let f=performance.now();for(let H of Object.keys(this.timeline)){let A=this.timeline[Number(H)];if(!A)continue;let D=[],j=[];for(let q of A)q?.owner?D.push(q):j.push(q);this.timeline[Number(H)]=j.concat(D)}R2(`parseData complete: ${performance.now()-f}ms`)}addComments(...f){let H=f.reduce((A,D)=>(A.push(W0(D,this.context)),A),[]);for(let A of n)try{A.addComments(H)}catch{console.error("Failed to add comments")}for(let A of H)A.invisible||(A.loc==="naka"?y1(A,this.collision,this.timeline):R0(A,this.collision[A.loc],this.timeline))}drawCanvas(f,H=!1){let A=performance.now();if(this.lastVpos===f&&!H)return!1;U0(f,this.lastVpos);let D=this.timeline[f];if(!H&&n.length===0&&D?.filter(j=>j.loc==="naka").length===0&&this.timeline[this.lastVpos]?.filter(j=>j.loc==="naka")?.length===0){let j=D.filter(Q=>Q.loc!=="naka"),q=this.timeline[this.lastVpos]?.filter(Q=>Q.loc!=="naka")||[];if(S(j,q))return!1}this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.lastVpos=f,this._drawVideo(),this._drawCollision(f),this._drawComments(D,f);for(let j of n)try{j.draw(f)}catch{console.error("Failed to draw comments")}return this._drawFPS(A),this._drawCommentCount(D?.length),R2(`drawCanvas complete: ${performance.now()-A}ms`),!0}_drawVideo(){if(this.video){let f,H=this.canvas.height/this.video.videoHeight,A=this.canvas.width/this.video.videoWidth;(this.enableLegacyPiP?H>A:H<A)?f=A:f=H;let D=(this.canvas.width-this.video.videoWidth*f)*.5,j=(this.canvas.height-this.video.videoHeight*f)*.5;this.context.drawImage(this.video,D,j,this.video.videoWidth*f,this.video.videoHeight*f)}}_drawComments(f,H){if(f){let A=(()=>d.commentLimit===void 0?f:d.hideCommentOrder==="asc"?f.slice(-d.commentLimit):f.slice(0,d.commentLimit))();for(let D of A)D.invisible||D.draw(H,this.showCollision,_e)}}_drawCollision(f){if(this.showCollision){this.context.save();let H=this.collision.left[f],A=this.collision.right[f];if(this.context.fillStyle="red",H)for(let D of H)this.context.fillRect(d.collisionRange.left,D.posY,d.contextLineWidth,D.height);if(A)for(let D of A)this.context.fillRect(d.collisionRange.right,D.posY,d.contextLineWidth*-1,D.height);this.context.restore()}}_drawFPS(f){if(this.showFPS){this.context.save(),this.context.font=yt("defont",60),this.context.fillStyle="#00FF00",this.context.strokeStyle=`rgba(${R(d.contextStrokeColor).join(",")},${d.contextStrokeOpacity})`;let H=Math.floor(performance.now()-f),A=Math.floor(1e3/(H===0?1:H));this.context.strokeText(`FPS:${A}(${H}ms)`,100,100),this.context.fillText(`FPS:${A}(${H}ms)`,100,100),this.context.restore()}}_drawCommentCount(f){this.showCommentCount&&(this.context.save(),this.context.font=yt("defont",60),this.context.fillStyle="#00FF00",this.context.strokeStyle=`rgba(${R(d.contextStrokeColor).join(",")},${d.contextStrokeOpacity})`,this.context.strokeText(`Count:${f||0}`,100,200),this.context.fillText(`Count:${f||0}`,100,200),this.context.restore())}addEventListener(f,H){F0(f,H)}removeEventListener(f,H){S1(f,H)}clear(){this.context.clearRect(0,0,d.canvasWidth,d.canvasHeight)}}let R2=m=>{_e&&console.debug(m)};return Te})});var TM=x1(($6,W6)=>{(function(e,t){typeof $6=="object"&&typeof W6<"u"?W6.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t()})($6,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(r,n,i){var h=n.prototype;i.utc=function(y){var w={date:y,utc:!0,args:arguments};return new n(w)},h.utc=function(y){var w=i(this.toDate(),{locale:this.$L,utc:!0});return y?w.add(this.utcOffset(),e):w},h.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var l=h.parse;h.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),l.call(this,y)};var c=h.init;h.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else c.call(this)};var v=h.utcOffset;h.utcOffset=function(y,w){var O=this.$utils().u;if(O(y))return this.$u?0:O(this.$offset)?v.call(this):this.$offset;if(typeof y=="string"&&(y=function(C){C===void 0&&(C="");var T=C.match(t);if(!T)return null;var S=(""+T[0]).match(a)||["-",0,0],R=S[0],N=60*+S[1]+ +S[2];return N===0?0:R==="+"?N:-N}(y),y===null))return this;var k=Math.abs(y)<=16?60*y:y,V=this;if(w)return V.$offset=k,V.$u=y===0,V;if(y!==0){var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(V=this.local().add(k+x,e)).$offset=k,V.$x.$localOffset=x}else V=this.utc();return V};var d=h.format;h.format=function(y){var w=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,w)},h.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var z=h.toDate;h.toDate=function(y){return y==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():z.call(this)};var L=h.diff;h.diff=function(y,w,O){if(y&&this.$u===y.$u)return L.call(this,y,w,O);var k=this.local(),V=i(y).local();return L.call(k,V,w,O)}}})});var OM=x1((G6,q6)=>{(function(e,t){typeof G6=="object"&&typeof q6<"u"?q6.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_duration=t()})(G6,function(){"use strict";var e,t,a=1e3,r=6e4,n=36e5,i=864e5,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,c=2592e6,v=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,d={years:l,months:c,days:i,hours:n,minutes:r,seconds:a,milliseconds:1,weeks:6048e5},z=function(C){return C instanceof x},L=function(C,T,S){return new x(C,S,T.$l)},y=function(C){return t.p(C)+"s"},w=function(C){return C<0},O=function(C){return w(C)?Math.ceil(C):Math.floor(C)},k=function(C){return Math.abs(C)},V=function(C,T){return C?w(C)?{negative:!0,format:""+k(C)+T}:{negative:!1,format:""+C+T}:{negative:!1,format:""}},x=function(){function C(S,R,N){var $=this;if(this.$d={},this.$l=N,S===void 0&&(this.$ms=0,this.parseFromMilliseconds()),R)return L(S*d[y(R)],this);if(typeof S=="number")return this.$ms=S,this.parseFromMilliseconds(),this;if(typeof S=="object")return Object.keys(S).forEach(function(Y){$.$d[y(Y)]=S[Y]}),this.calMilliseconds(),this;if(typeof S=="string"){var e1=S.match(v);if(e1){var r1=e1.slice(2).map(function(Y){return Y!=null?Number(Y):0});return this.$d.years=r1[0],this.$d.months=r1[1],this.$d.weeks=r1[2],this.$d.days=r1[3],this.$d.hours=r1[4],this.$d.minutes=r1[5],this.$d.seconds=r1[6],this.calMilliseconds(),this}}return this}var T=C.prototype;return T.calMilliseconds=function(){var S=this;this.$ms=Object.keys(this.$d).reduce(function(R,N){return R+(S.$d[N]||0)*d[N]},0)},T.parseFromMilliseconds=function(){var S=this.$ms;this.$d.years=O(S/l),S%=l,this.$d.months=O(S/c),S%=c,this.$d.days=O(S/i),S%=i,this.$d.hours=O(S/n),S%=n,this.$d.minutes=O(S/r),S%=r,this.$d.seconds=O(S/a),S%=a,this.$d.milliseconds=S},T.toISOString=function(){var S=V(this.$d.years,"Y"),R=V(this.$d.months,"M"),N=+this.$d.days||0;this.$d.weeks&&(N+=7*this.$d.weeks);var $=V(N,"D"),e1=V(this.$d.hours,"H"),r1=V(this.$d.minutes,"M"),Y=this.$d.seconds||0;this.$d.milliseconds&&(Y+=this.$d.milliseconds/1e3);var J=V(Y,"S"),W=S.negative||R.negative||$.negative||e1.negative||r1.negative||J.negative,K=e1.format||r1.format||J.format?"T":"",Z=(W?"-":"")+"P"+S.format+R.format+$.format+K+e1.format+r1.format+J.format;return Z==="P"||Z==="-P"?"P0D":Z},T.toJSON=function(){return this.toISOString()},T.format=function(S){var R=S||"YYYY-MM-DDTHH:mm:ss",N={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return R.replace(h,function($,e1){return e1||String(N[$])})},T.as=function(S){return this.$ms/d[y(S)]},T.get=function(S){var R=this.$ms,N=y(S);return N==="milliseconds"?R%=1e3:R=N==="weeks"?O(R/d[N]):this.$d[N],R===0?0:R},T.add=function(S,R,N){var $;return $=R?S*d[y(R)]:z(S)?S.$ms:L(S,this).$ms,L(this.$ms+$*(N?-1:1),this)},T.subtract=function(S,R){return this.add(S,R,!0)},T.locale=function(S){var R=this.clone();return R.$l=S,R},T.clone=function(){return L(this.$ms,this)},T.humanize=function(S){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!S)},T.valueOf=function(){return this.asMilliseconds()},T.milliseconds=function(){return this.get("milliseconds")},T.asMilliseconds=function(){return this.as("milliseconds")},T.seconds=function(){return this.get("seconds")},T.asSeconds=function(){return this.as("seconds")},T.minutes=function(){return this.get("minutes")},T.asMinutes=function(){return this.as("minutes")},T.hours=function(){return this.get("hours")},T.asHours=function(){return this.as("hours")},T.days=function(){return this.get("days")},T.asDays=function(){return this.as("days")},T.weeks=function(){return this.get("weeks")},T.asWeeks=function(){return this.as("weeks")},T.months=function(){return this.get("months")},T.asMonths=function(){return this.as("months")},T.years=function(){return this.get("years")},T.asYears=function(){return this.as("years")},C}();return function(C,T,S){e=S,t=S().$utils(),S.duration=function($,e1){var r1=S.locale();return L($,{$l:r1},e1)},S.isDuration=z;var R=T.prototype.add,N=T.prototype.subtract;T.prototype.add=function($,e1){return z($)&&($=$.asMilliseconds()),R.bind(this)($,e1)},T.prototype.subtract=function($,e1){return z($)&&($=$.asMilliseconds()),N.bind(this)($,e1)}}})});var NM=d1(pu());var y5=d1(Jt());var fu=d1(vs());function PV(e){let a=(0,fu.default)(new Date).format();console.log("\x1B[31m[KIITE CAFE PlUS]\x1B[32m "+a,e)}var b2=PV;document.getElementById("bd8dc0500fffd19a8cef3449feba9a50d905282c8638a975b3c67b50807480b6")||(xh=document.createElement("style"),xh.id="bd8dc0500fffd19a8cef3449feba9a50d905282c8638a975b3c67b50807480b6",xh.textContent="body{width:100vw;height:100vh}body #root{width:100%;height:100%}body #root .embed-wrapper{width:100%;height:100%}body #root .embed-wrapper .niconico-react-vjs{width:100% !important;height:100% !important;position:relative}body #root .embed-wrapper .niconico-react-vjs #nico-player{width:100%;height:100%}body #root .embed-wrapper .niconico-react-vjs #comment-layer{width:100%;height:100%;position:absolute;top:0;left:0;touch-action:none;pointer-events:none}body #root .embed-wrapper .niconico-react-vjs .comment-layer-hide{opacity:0}",document.head.appendChild(xh));var xh;var Ma=d1(Jt());var za=class{messageHandlers=[];constructor(t){window.addEventListener("message",a=>{if(a.origin===t){let r=a.data;this.messageHandlers.forEach(n=>{n.type===r.type&&n.callback(r),n.type==="*"&&n.callback(r)})}})}addMessageListener(t,a){this.messageHandlers.push({type:t,callback:a})}removeMessageListener(t,a){this.messageHandlers.forEach((r,n)=>{r.type===t&&r.callback===a&&this.messageHandlers.splice(n,1)})}one(t,a){let r=n=>{a(n),this.removeMessageListener(t,r)};this.messageHandlers.push({type:t,callback:r})}dispatch(t,a){this.messageHandlers.forEach(r=>{r.type===t&&r.callback({type:t,value:a})})}sendParent(t,a,r="*"){window.parent.postMessage({type:t,value:a},r)}};var Vu=d1(at()),UV=({children:e,origin:t})=>{let a=(0,Ma.useRef)(null);return a.current=new za(t),(0,Vu.jsx)(xu.Provider,{value:a.current,children:a.current!==null&&e})},Hu=UV,xu=(0,Ma.createContext)(null),ma=()=>(0,Ma.useContext)(xu);var s2=d1(at(),1),X1=d1(Jt(),1);var P=d1(A2()),a1=d1(ds()),z1=d1(Tu()),bf=d1(bu()),m6=d1(Nu()),B9=d1(eg());var Vs=d1(xs()),We=d1(A2()),ag="http://example.com",yw=function(t,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(t)&&(t=We.default.location&&We.default.location.href||"");var r=typeof We.default.URL=="function",n=/^\/\//.test(t),i=!We.default.location&&!/\/\//i.test(t);if(r?t=new We.default.URL(t,We.default.location||ag):/\/\//i.test(t)||(t=Vs.default.buildAbsoluteURL(We.default.location&&We.default.location.href||"",t)),r){var h=new URL(a,t);return i?h.href.slice(ag.length):n?h.href.slice(h.protocol.length):h.href}return Vs.default.buildAbsoluteURL(t,a)},rg=yw;function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q2.apply(this,arguments)}var Ch=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(r,n){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n)},t.off=function(r,n){if(!this.listeners[r])return!1;var i=this.listeners[r].indexOf(n);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(i,1),i>-1},t.trigger=function(r){var n=this.listeners[r];if(n)if(arguments.length===2)for(var i=n.length,h=0;h<i;++h)n[h].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),c=n.length,v=0;v<c;++v)n[v].apply(this,l)},t.dispose=function(){this.listeners={}},t.pipe=function(r){this.on("data",function(n){r.push(n)})},e}();var ws=d1(A2()),Cw=function(t){return ws.default.atob?ws.default.atob(t):Buffer.from(t,"base64").toString("binary")};function Ls(e){for(var t=Cw(e),a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return a}var Bs=class extends Ch{constructor(){super(),this.buffer=""}push(t){let a;for(this.buffer+=t,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)}},Bw=String.fromCharCode(9),ys=function(e){let t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),a={};return t[1]&&(a.length=parseInt(t[1],10)),t[2]&&(a.offset=parseInt(t[2],10)),a},Sw=function(){let e="[^=]*",t='"[^"]*"|[^,]*',a="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+a+")")},E2=function(e){let t={};if(!e)return t;let a=e.split(Sw()),r=a.length,n;for(;r--;)a[r]!==""&&(n=/([^=]*)=(.*)/.exec(a[r]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),t[n[0]]=n[1]);return t},Ss=class extends Ch{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let a,r;if(t=t.trim(),t.length===0)return;if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}this.tagMappers.reduce((i,h)=>{let l=h(t);return l===t?i:i.concat([l])},[t]).forEach(i=>{for(let h=0;h<this.customParsers.length;h++)if(this.customParsers[h].call(this,i))return;if(i.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:i.slice(1)});return}if(i=i.replace("\r",""),a=/^#EXTM3U/.exec(i),a){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(i),a){r={type:"tag",tagType:"inf"},a[1]&&(r.duration=parseFloat(a[1])),a[2]&&(r.title=a[2]),this.trigger("data",r);return}if(a=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"targetduration"},a[1]&&(r.duration=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-VERSION:([0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"version"},a[1]&&(r.version=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"media-sequence"},a[1]&&(r.number=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(r.number=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(i),a){r={type:"tag",tagType:"playlist-type"},a[1]&&(r.playlistType=a[1]),this.trigger("data",r);return}if(a=/^#EXT-X-BYTERANGE:(.*)?$/.exec(i),a){r=Q2(ys(a[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",r);return}if(a=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(i),a){r={type:"tag",tagType:"allow-cache"},a[1]&&(r.allowed=!/NO/.test(a[1])),this.trigger("data",r);return}if(a=/^#EXT-X-MAP:(.*)$/.exec(i),a){if(r={type:"tag",tagType:"map"},a[1]){let h=E2(a[1]);h.URI&&(r.uri=h.URI),h.BYTERANGE&&(r.byterange=ys(h.BYTERANGE))}this.trigger("data",r);return}if(a=/^#EXT-X-STREAM-INF:(.*)$/.exec(i),a){if(r={type:"tag",tagType:"stream-inf"},a[1]){if(r.attributes=E2(a[1]),r.attributes.RESOLUTION){let h=r.attributes.RESOLUTION.split("x"),l={};h[0]&&(l.width=parseInt(h[0],10)),h[1]&&(l.height=parseInt(h[1],10)),r.attributes.RESOLUTION=l}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r);return}if(a=/^#EXT-X-MEDIA:(.*)$/.exec(i),a){r={type:"tag",tagType:"media"},a[1]&&(r.attributes=E2(a[1])),this.trigger("data",r);return}if(a=/^#EXT-X-ENDLIST/.exec(i),a){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(i),a){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(i),a){r={type:"tag",tagType:"program-date-time"},a[1]&&(r.dateTimeString=a[1],r.dateTimeObject=new Date(a[1])),this.trigger("data",r);return}if(a=/^#EXT-X-KEY:(.*)$/.exec(i),a){r={type:"tag",tagType:"key"},a[1]&&(r.attributes=E2(a[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}if(a=/^#EXT-X-START:(.*)$/.exec(i),a){r={type:"tag",tagType:"start"},a[1]&&(r.attributes=E2(a[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),this.trigger("data",r);return}if(a=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(i),a){r={type:"tag",tagType:"cue-out-cont"},a[1]?r.data=a[1]:r.data="",this.trigger("data",r);return}if(a=/^#EXT-X-CUE-OUT:(.*)?$/.exec(i),a){r={type:"tag",tagType:"cue-out"},a[1]?r.data=a[1]:r.data="",this.trigger("data",r);return}if(a=/^#EXT-X-CUE-IN:(.*)?$/.exec(i),a){r={type:"tag",tagType:"cue-in"},a[1]?r.data=a[1]:r.data="",this.trigger("data",r);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"skip"},r.attributes=E2(a[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(Bw)),this.trigger("data",r);return}if(a=/^#EXT-X-PART:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"part"},r.attributes=E2(a[1]),["DURATION"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseFloat(r.attributes[h]))}),["INDEPENDENT","GAP"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=/YES/.test(r.attributes[h]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=ys(r.attributes.BYTERANGE)),this.trigger("data",r);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"server-control"},r.attributes=E2(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseFloat(r.attributes[h]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=/YES/.test(r.attributes[h]))}),this.trigger("data",r);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"part-inf"},r.attributes=E2(a[1]),["PART-TARGET"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseFloat(r.attributes[h]))}),this.trigger("data",r);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"preload-hint"},r.attributes=E2(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(h){if(r.attributes.hasOwnProperty(h)){r.attributes[h]=parseInt(r.attributes[h],10);let l=h==="BYTERANGE-LENGTH"?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[l]=r.attributes[h],delete r.attributes[h]}}),this.trigger("data",r);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"rendition-report"},r.attributes=E2(a[1]),["LAST-MSN","LAST-PART"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseInt(r.attributes[h],10))}),this.trigger("data",r);return}if(a=/^#EXT-X-DATERANGE:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"daterange"},r.attributes=E2(a[1]),["ID","CLASS"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=String(r.attributes[l]))}),["START-DATE","END-DATE"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=new Date(r.attributes[l]))}),["DURATION","PLANNED-DURATION"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),["END-ON-NEXT"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=/YES/i.test(r.attributes[l]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=r.attributes[l].toString(16))});let h=/^X-([A-Z]+-)+[A-Z]+$/;for(let l in r.attributes){if(!h.test(l))continue;let c=/[0-9A-Fa-f]{6}/g.test(r.attributes[l]),v=/^\d+(\.\d+)?$/.test(r.attributes[l]);r.attributes[l]=c?r.attributes[l].toString(16):v?parseFloat(r.attributes[l]):String(r.attributes[l])}this.trigger("data",r);return}if(a=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(i),a){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}this.trigger("data",{type:"tag",data:i.slice(4)})})}addParser({expression:t,customType:a,dataParser:r,segment:n}){typeof r!="function"&&(r=i=>i),this.customParsers.push(i=>{if(t.exec(i))return this.trigger("data",{type:"custom",data:r(i),customType:a,segment:n}),!0})}addTagMapper({expression:t,map:a}){let r=n=>t.test(n)?a(n):n;this.tagMappers.push(r)}},_w=e=>e.toLowerCase().replace(/-(\w)/g,t=>t[1].toUpperCase()),g4=function(e){let t={};return Object.keys(e).forEach(function(a){t[_w(a)]=e[a]}),t},Cs=function(e){let{serverControl:t,targetDuration:a,partTargetDuration:r}=e;if(!t)return;let n="#EXT-X-SERVER-CONTROL",i="holdBack",h="partHoldBack",l=a&&a*3,c=r&&r*2;a&&!t.hasOwnProperty(i)&&(t[i]=l,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${l}).`})),l&&t[i]<l&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${t[i]}) to targetDuration * 3 (${l})`}),t[i]=l),r&&!t.hasOwnProperty(h)&&(t[h]=r*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[h]}).`})),r&&t[h]<c&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${t[h]}) to partTargetDuration * 2 (${c}).`}),t[h]=c)},Bh=class extends Ch{constructor(){super(),this.lineStream=new Bs,this.parseStream=new Ss,this.lineStream.pipe(this.parseStream);let t=this,a=[],r={},n,i,h=!1,l=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},v="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let z=0,L=0,y={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&n&&(r.map=n),!r.key&&i&&(r.key=i),!r.timeline&&typeof d=="number"&&(r.timeline=d),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(w){let O,k;({tag(){({version(){w.version&&(this.manifest.version=w.version)},"allow-cache"(){this.manifest.allowCache=w.allowed,"allowed"in w||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){let V={};"length"in w&&(r.byterange=V,V.length=w.length,"offset"in w||(w.offset=z)),"offset"in w&&(r.byterange=V,V.offset=w.offset),z=V.offset+V.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),w.duration>0&&(r.duration=w.duration),w.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key(){if(!w.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(w.attributes.METHOD==="NONE"){i=null;return}if(!w.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(w.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:w.attributes};return}if(w.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:w.attributes.URI};return}if(w.attributes.KEYFORMAT===v){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(w.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(w.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),w.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(w.attributes.KEYID&&w.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:w.attributes.KEYFORMAT,keyId:w.attributes.KEYID.substring(2)},pssh:Ls(w.attributes.URI.split(",")[1])};return}w.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:w.attributes.METHOD||"AES-128",uri:w.attributes.URI},typeof w.attributes.IV<"u"&&(i.iv=w.attributes.IV)},"media-sequence"(){if(!isFinite(w.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+w.number});return}this.manifest.mediaSequence=w.number},"discontinuity-sequence"(){if(!isFinite(w.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+w.number});return}this.manifest.discontinuitySequence=w.number,d=w.number},"playlist-type"(){if(!/VOD|EVENT/.test(w.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+w.playlist});return}this.manifest.playlistType=w.playlistType},map(){n={},w.uri&&(n.uri=w.uri),w.byterange&&(n.byterange=w.byterange),i&&(n.key=i)},"stream-inf"(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||c,!w.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),Q2(r.attributes,w.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,!(w.attributes&&w.attributes.TYPE&&w.attributes["GROUP-ID"]&&w.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}let V=this.manifest.mediaGroups[w.attributes.TYPE];V[w.attributes["GROUP-ID"]]=V[w.attributes["GROUP-ID"]]||{},O=V[w.attributes["GROUP-ID"]],k={default:/yes/i.test(w.attributes.DEFAULT)},k.default?k.autoselect=!0:k.autoselect=/yes/i.test(w.attributes.AUTOSELECT),w.attributes.LANGUAGE&&(k.language=w.attributes.LANGUAGE),w.attributes.URI&&(k.uri=w.attributes.URI),w.attributes["INSTREAM-ID"]&&(k.instreamId=w.attributes["INSTREAM-ID"]),w.attributes.CHARACTERISTICS&&(k.characteristics=w.attributes.CHARACTERISTICS),w.attributes.FORCED&&(k.forced=/yes/i.test(w.attributes.FORCED)),O[w.attributes.NAME]=k},discontinuity(){d+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=w.dateTimeString,this.manifest.dateTimeObject=w.dateTimeObject),r.dateTimeString=w.dateTimeString,r.dateTimeObject=w.dateTimeObject},targetduration(){if(!isFinite(w.duration)||w.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+w.duration});return}this.manifest.targetDuration=w.duration,Cs.call(this,this.manifest)},start(){if(!w.attributes||isNaN(w.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:w.attributes["TIME-OFFSET"],precise:w.attributes.PRECISE}},"cue-out"(){r.cueOut=w.data},"cue-out-cont"(){r.cueOutCont=w.data},"cue-in"(){r.cueIn=w.data},skip(){this.manifest.skip=g4(w.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",w.attributes,["SKIPPED-SEGMENTS"])},part(){h=!0;let V=this.manifest.segments.length,x=g4(w.attributes);r.parts=r.parts||[],r.parts.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=L),L=x.byterange.offset+x.byterange.length);let C=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${C} for segment #${V}`,w.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((T,S)=>{T.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${S} lacks required attribute(s): LAST-PART`})})},"server-control"(){let V=this.manifest.serverControl=g4(w.attributes);V.hasOwnProperty("canBlockReload")||(V.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Cs.call(this,this.manifest),V.canSkipDateranges&&!V.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){let V=this.manifest.segments.length,x=g4(w.attributes),C=x.type&&x.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(x),x.byterange&&(x.byterange.hasOwnProperty("offset")||(x.byterange.offset=C?L:0,C&&(L=x.byterange.offset+x.byterange.length)));let T=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${T} for segment #${V}`,w.attributes,["TYPE","URI"]),!!x.type)for(let S=0;S<r.preloadHints.length-1;S++){let R=r.preloadHints[S];R.type&&R.type===x.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${T} for segment #${V} has the same TYPE ${x.type} as preload hint #${S}`})}},"rendition-report"(){let V=g4(w.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(V);let x=this.manifest.renditionReports.length-1,C=["LAST-MSN","URI"];h&&C.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${x}`,w.attributes,C)},"part-inf"(){this.manifest.partInf=g4(w.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",w.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Cs.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(g4(w.attributes));let V=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${V}`,w.attributes,["ID","START-DATE"]);let x=this.manifest.daterange[V];x.endDate&&x.startDate&&new Date(x.endDate)<new Date(x.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),x.duration&&x.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),x.plannedDuration&&x.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});let C=!!x.endOnNext;if(C&&!x.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),C&&(x.duration||x.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),x.duration&&x.endDate){let T=x.startDate,S=T.setSeconds(T.getSeconds()+x.duration);this.manifest.daterange[V].endDate=new Date(S)}if(x&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),!y[x.id])y[x.id]=x;else for(let T in y[x.id])if(y[x.id][T]!==x[T]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}},"independent-segments"(){this.manifest.independentSegments=!0}}[w.tagType]||l).call(t)},uri(){r.uri=w.uri,a.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),i&&(r.key=i),r.timeline=d,n&&(r.map=n),L=0,r={}},comment(){},custom(){w.segment?(r.custom=r.custom||{},r.custom[w.customType]=w.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[w.customType]=w.data)}})[w.type].call(t)})}warnOnMissingAttributes_(t,a,r){let n=[];r.forEach(function(i){a.hasOwnProperty(i)||n.push(i)}),n.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${n.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push(`
`),this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}};var Sh=d1(A2()),p4={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Tw=["video","audio","text"],ng=["Video","Audio","Text"],_s=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(a,r,n){var i=("00"+Number(r).toString(16)).slice(-2),h=("00"+Number(n).toString(16)).slice(-2);return"avc1."+i+"00"+h})};var J2=function(t){t===void 0&&(t="");var a=t.split(","),r=[];return a.forEach(function(n){n=n.trim();var i;Tw.forEach(function(h){var l=p4[h].exec(n.toLowerCase());if(!(!l||l.length<=1)){i=h;var c=n.substring(0,l[1].length),v=n.replace(c,"");r.push({type:c,details:v,mediaType:h})}}),i||r.push({type:n,details:"",mediaType:"unknown"})}),r},ig=function(t,a){if(!t.mediaGroups.AUDIO||!a)return null;var r=t.mediaGroups.AUDIO[a];if(!r)return null;for(var n in r){var i=r[n];if(i.default&&i.playlists)return J2(i.playlists[0].attributes.CODECS)}return null};var Ts=function(t){return t===void 0&&(t=""),p4.audio.test(t.trim().toLowerCase())},Ow=function(t){return t===void 0&&(t=""),p4.text.test(t.trim().toLowerCase())},xa=function(t){if(!(!t||typeof t!="string")){var a=t.toLowerCase().split(",").map(function(i){return _s(i.trim())}),r="video";a.length===1&&Ts(a[0])?r="audio":a.length===1&&Ow(a[0])&&(r="application");var n="mp4";return a.every(function(i){return p4.mp4.test(i)})?n="mp4":a.every(function(i){return p4.webm.test(i)})?n="webm":a.every(function(i){return p4.ogg.test(i)})&&(n="ogg"),r+"/"+n+';codecs="'+t+'"'}},Ln=function(t){return t===void 0&&(t=""),Sh.default.MediaSource&&Sh.default.MediaSource.isTypeSupported&&Sh.default.MediaSource.isTypeSupported(xa(t))||!1},_h=function(t){return t===void 0&&(t=""),t.toLowerCase().split(",").every(function(a){a=a.trim();for(var r=0;r<ng.length;r++){var n=ng[r];if(p4["muxer"+n].test(a))return!0}return!1})},Os="mp4a.40.2",hg="avc1.4d400d";var bw=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Aw=/^application\/dash\+xml/i,bs=function(t){return bw.test(t)?"hls":Aw.test(t)?"dash":t==="application/vnd.videojs.vhs+json"?"vhs-json":null};var lg=d1(A2());var Ew=function(t){return t.toString(2).length},kw=function(t){return Math.ceil(Ew(t)/8)};var Es=function(t){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},Pw=function(t){return Es(t)},c1=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!Pw(t)&&!(t instanceof ArrayBuffer)&&(typeof t!="number"||typeof t=="number"&&t!==t?t=0:t=[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))};var Lt=lg.default.BigInt||Number,As=[Lt("0x1"),Lt("0x100"),Lt("0x10000"),Lt("0x1000000"),Lt("0x100000000"),Lt("0x10000000000"),Lt("0x1000000000000"),Lt("0x100000000000000"),Lt("0x10000000000000000")],U_=function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return t[0]===255?"big":t[0]===204?"little":"unknown"}();var ks=function(t,a){var r=a===void 0?{}:a,n=r.signed,i=n===void 0?!1:n,h=r.le,l=h===void 0?!1:h;t=c1(t);var c=l?"reduce":"reduceRight",v=t[c]?t[c]:Array.prototype[c],d=v.call(t,function(L,y,w){var O=l?w:Math.abs(w+1-t.length);return L+Lt(y)*As[O]},Lt(0));if(i){var z=As[t.length]/Lt(2)-Lt(1);d=Lt(d),d>z&&(d-=z,d-=z,d-=Lt(2))}return Number(d)},og=function(t,a){var r=a===void 0?{}:a,n=r.le,i=n===void 0?!1:n;(typeof t!="bigint"&&typeof t!="number"||typeof t=="number"&&t!==t)&&(t=0),t=Lt(t);for(var h=kw(t),l=new Uint8Array(new ArrayBuffer(h)),c=0;c<h;c++){var v=i?c:Math.abs(c+1-l.length);l[v]=Number(t/As[c]&Lt(255)),t<0&&(l[v]=Math.abs(~l[v]),l[v]-=c===0?1:2)}return l},Ps=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var a=String.fromCharCode.apply(null,c1(t));try{return decodeURIComponent(escape(a))}catch{}return a},Th=function(t,a){if(typeof t!="string"&&t&&typeof t.toString=="function"&&(t=t.toString()),typeof t!="string")return new Uint8Array;a||(t=unescape(encodeURIComponent(t)));for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},cg=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];if(a=a.filter(function(l){return l&&(l.byteLength||l.length)&&typeof l!="string"}),a.length<=1)return c1(a[0]);var n=a.reduce(function(l,c,v){return l+(c.byteLength||c.length)},0),i=new Uint8Array(n),h=0;return a.forEach(function(l){l=c1(l),i.set(l,h),h+=l.byteLength}),i},A1=function(t,a,r){var n=r===void 0?{}:r,i=n.offset,h=i===void 0?0:i,l=n.mask,c=l===void 0?[]:l;t=c1(t),a=c1(a);var v=a.every?a.every:Array.prototype.every;return a.length&&t.length-h>=a.length&&v.call(a,function(d,z){var L=c[z]?c[z]&t[h+z]:t[h+z];return d===L})};var Ds=d1(xs()),Ge=d1(A2()),sg="http://example.com",Dw=function(t,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(t)&&(t=Ge.default.location&&Ge.default.location.href||"");var r=typeof Ge.default.URL=="function",n=/^\/\//.test(t),i=!Ge.default.location&&!/\/\//i.test(t);if(r?t=new Ge.default.URL(t,Ge.default.location||sg):/\/\//i.test(t)||(t=Ds.default.buildAbsoluteURL(Ge.default.location&&Ge.default.location.href||"",t)),r){var h=new URL(a,t);return i?h.href.slice(sg.length):n?h.href.slice(h.protocol.length):h.href}return Ds.default.buildAbsoluteURL(t,a)},Oh=Dw;var Ut=d1(A2());var vg=function(t,a,r){a.forEach(function(n){for(var i in t.mediaGroups[n])for(var h in t.mediaGroups[n][i]){var l=t.mediaGroups[n][i][h];r(l,n,i,h)}})};var Is=d1(A2()),Iw=function(t){return Is.default.atob?Is.default.atob(t):Buffer.from(t,"base64").toString("binary")};function js(e){for(var t=Iw(e),a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return a}var up=d1(ip());var hp=e=>!!e&&typeof e=="object",At=(...e)=>e.reduce((t,a)=>(typeof a!="object"||Object.keys(a).forEach(r=>{Array.isArray(t[r])&&Array.isArray(a[r])?t[r]=t[r].concat(a[r]):hp(t[r])&&hp(a[r])?t[r]=At(t[r],a[r]):t[r]=a[r]}),t),{}),gp=e=>Object.keys(e).map(t=>e[t]),dL=(e,t)=>{let a=[];for(let r=e;r<t;r++)a.push(r);return a},ba=e=>e.reduce((t,a)=>t.concat(a),[]),pp=e=>{if(!e.length)return[];let t=[];for(let a=0;a<e.length;a++)t.push(e[a]);return t},uL=(e,t)=>e.reduce((a,r,n)=>(r[t]&&a.push(n),a),[]),gL=(e,t)=>gp(e.reduce((a,r)=>(r.forEach(n=>{a[t(n)]=n}),a),{})),Aa={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Dn=({baseUrl:e="",source:t="",range:a="",indexRange:r=""})=>{let n={uri:t,resolvedUri:Oh(e||"",t)};if(a||r){let h=(a||r).split("-"),l=Ut.default.BigInt?Ut.default.BigInt(h[0]):parseInt(h[0],10),c=Ut.default.BigInt?Ut.default.BigInt(h[1]):parseInt(h[1],10);l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l)),c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c));let v;typeof c=="bigint"||typeof l=="bigint"?v=Ut.default.BigInt(c)-Ut.default.BigInt(l)+Ut.default.BigInt(1):v=c-l+1,typeof v=="bigint"&&v<Number.MAX_SAFE_INTEGER&&(v=Number(v)),n.byterange={length:v,offset:l}}return n},pL=e=>{let t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=Ut.default.BigInt(e.offset)+Ut.default.BigInt(e.length)-Ut.default.BigInt(1):t=e.offset+e.length-1,`${e.offset}-${t}`},lp=e=>(e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e),fL={static(e){let{duration:t,timescale:a=1,sourceDuration:r,periodDuration:n}=e,i=lp(e.endNumber),h=t/a;return typeof i=="number"?{start:0,end:i}:typeof n=="number"?{start:0,end:n/h}:{start:0,end:r/h}},dynamic(e){let{NOW:t,clientOffset:a,availabilityStartTime:r,timescale:n=1,duration:i,periodStart:h=0,minimumUpdatePeriod:l=0,timeShiftBufferDepth:c=1/0}=e,v=lp(e.endNumber),d=(t+a)/1e3,z=r+h,y=d+l-z,w=Math.ceil(y*n/i),O=Math.floor((d-z-c)*n/i),k=Math.floor((d-z)*n/i);return{start:Math.max(0,O),end:typeof v=="number"?v:Math.min(w,k)}}},zL=e=>t=>{let{duration:a,timescale:r=1,periodStart:n,startNumber:i=1}=e;return{number:i+t,duration:a/r,timeline:n,time:t*a}},a9=e=>{let{type:t,duration:a,timescale:r=1,periodDuration:n,sourceDuration:i}=e,{start:h,end:l}=fL[t](e),c=dL(h,l).map(zL(e));if(t==="static"){let v=c.length-1,d=typeof n=="number"?n:i;c[v].duration=d-a/r*v}return c},fp=e=>{let{baseUrl:t,initialization:a={},sourceDuration:r,indexRange:n="",periodStart:i,presentationTime:h,number:l=0,duration:c}=e;if(!t)throw new Error(Aa.NO_BASE_URL);let v=Dn({baseUrl:t,source:a.sourceURL,range:a.range}),d=Dn({baseUrl:t,source:t,indexRange:n});if(d.map=v,c){let z=a9(e);z.length&&(d.duration=z[0].duration,d.timeline=z[0].timeline)}else r&&(d.duration=r,d.timeline=i);return d.presentationTime=h||i,d.number=l,[d]},Fh=(e,t,a)=>{let r=e.sidx.map?e.sidx.map:null,n=e.sidx.duration,i=e.timeline||0,h=e.sidx.byterange,l=h.offset+h.length,c=t.timescale,v=t.references.filter(k=>k.referenceType!==1),d=[],z=e.endList?"static":"dynamic",L=e.sidx.timeline,y=L,w=e.mediaSequence||0,O;typeof t.firstOffset=="bigint"?O=Ut.default.BigInt(l)+t.firstOffset:O=l+t.firstOffset;for(let k=0;k<v.length;k++){let V=t.references[k],x=V.referencedSize,C=V.subsegmentDuration,T;typeof O=="bigint"?T=O+Ut.default.BigInt(x)-Ut.default.BigInt(1):T=O+x-1;let S=`${O}-${T}`,N=fp({baseUrl:a,timescale:c,timeline:i,periodStart:L,presentationTime:y,number:w,duration:C,sourceDuration:n,indexRange:S,type:z})[0];r&&(N.map=r),d.push(N),typeof O=="bigint"?O+=Ut.default.BigInt(x):O+=x,y+=C/c,w++}return e.segments=d,e},ML=["AUDIO","SUBTITLES"],mL=1/60,zp=e=>gL(e,({timeline:t})=>t).sort((t,a)=>t.timeline>a.timeline?1:-1),HL=(e,t)=>{for(let a=0;a<e.length;a++)if(e[a].attributes.NAME===t)return e[a];return null},op=e=>{let t=[];return vg(e,ML,(a,r,n,i)=>{t=t.concat(a.playlists||[])}),t},cp=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach((a,r)=>{a.number=e.mediaSequence+r})},xL=({oldPlaylists:e,newPlaylists:t,timelineStarts:a})=>{t.forEach(r=>{r.discontinuitySequence=a.findIndex(function({timeline:c}){return c===r.timeline});let n=HL(e,r.attributes.NAME);if(!n||r.sidx)return;let i=r.segments[0],h=n.segments.findIndex(function(c){return Math.abs(c.presentationTime-i.presentationTime)<mL});if(h===-1){cp({playlist:r,mediaSequence:n.mediaSequence+n.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),(!n.segments.length&&r.timeline>n.timeline||n.segments.length&&r.timeline>n.segments[n.segments.length-1].timeline)&&r.discontinuitySequence--;return}n.segments[h].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),cp({playlist:r,mediaSequence:n.segments[h].number})})},VL=({oldManifest:e,newManifest:t})=>{let a=e.playlists.concat(op(e)),r=t.playlists.concat(op(t));return t.timelineStarts=zp([e.timelineStarts,t.timelineStarts]),xL({oldPlaylists:a,newPlaylists:r,timelineStarts:t.timelineStarts}),t},In=e=>e&&e.uri+"-"+pL(e.byterange),e9=e=>gp(e.reduce((a,r)=>{let n=r.attributes.id+(r.attributes.lang||"");return a[n]?(r.segments&&(r.segments[0]&&(r.segments[0].discontinuity=!0),a[n].segments.push(...r.segments)),r.attributes.contentProtection&&(a[n].attributes.contentProtection=r.attributes.contentProtection)):(a[n]=r,a[n].attributes.timelineStarts=[]),a[n].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),a},{})).map(a=>(a.discontinuityStarts=uL(a.segments||[],"discontinuity"),a)),r9=(e,t)=>{let a=In(e.sidx),r=a&&t[a]&&t[a].sidx;return r&&Fh(e,r,e.sidx.resolvedUri),e},wL=(e,t={})=>{if(!Object.keys(t).length)return e;for(let a in e)e[a]=r9(e[a],t);return e},LL=({attributes:e,segments:t,sidx:a,mediaSequence:r,discontinuitySequence:n,discontinuityStarts:i},h)=>{let l={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,["PROGRAM-ID"]:1},uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:n,discontinuityStarts:i,timelineStarts:e.timelineStarts,mediaSequence:r,segments:t};return e.contentProtection&&(l.contentProtection=e.contentProtection),a&&(l.sidx=a),h&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l},yL=({attributes:e,segments:t,mediaSequence:a,discontinuityStarts:r,discontinuitySequence:n})=>{typeof t>"u"&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);let i={NAME:e.id,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1};return e.codecs&&(i.CODECS=e.codecs),{attributes:i,uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:r,discontinuitySequence:n,mediaSequence:a,segments:t}},CL=(e,t={},a=!1)=>{let r,n=e.reduce((i,h)=>{let l=h.attributes.role&&h.attributes.role.value||"",c=h.attributes.lang||"",v=h.attributes.label||"main";if(c&&!h.attributes.label){let z=l?` (${l})`:"";v=`${h.attributes.lang}${z}`}i[v]||(i[v]={language:c,autoselect:!0,default:l==="main",playlists:[],uri:""});let d=r9(LL(h,a),t);return i[v].playlists.push(d),typeof r>"u"&&l==="main"&&(r=h,r.default=!0),i},{});if(!r){let i=Object.keys(n)[0];n[i].default=!0}return n},BL=(e,t={})=>e.reduce((a,r)=>{let n=r.attributes.label||r.attributes.lang||"text";return a[n]||(a[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),a[n].playlists.push(r9(yL(r),t)),a},{}),SL=e=>e.reduce((t,a)=>(a&&a.forEach(r=>{let{channel:n,language:i}=r;t[i]={autoselect:!1,default:!1,instreamId:n,language:i},r.hasOwnProperty("aspectRatio")&&(t[i].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(t[i].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(t[i]["3D"]=r["3D"])}),t),{}),_L=({attributes:e,segments:t,sidx:a,discontinuityStarts:r})=>{let n={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuityStarts:r,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(n.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(n.contentProtection=e.contentProtection),a&&(n.sidx=a),n},TL=({attributes:e})=>e.mimeType==="video/mp4"||e.mimeType==="video/webm"||e.contentType==="video",OL=({attributes:e})=>e.mimeType==="audio/mp4"||e.mimeType==="audio/webm"||e.contentType==="audio",bL=({attributes:e})=>e.mimeType==="text/vtt"||e.contentType==="text",AL=(e,t)=>{e.forEach(a=>{a.mediaSequence=0,a.discontinuitySequence=t.findIndex(function({timeline:r}){return r===a.timeline}),a.segments&&a.segments.forEach((r,n)=>{r.number=n})})},sp=e=>e?Object.keys(e).reduce((t,a)=>{let r=e[a];return t.concat(r.playlists)},[]):[],EL=({dashPlaylists:e,locations:t,sidxMapping:a={},previousManifest:r,eventStream:n})=>{if(!e.length)return{};let{sourceDuration:i,type:h,suggestedPresentationDelay:l,minimumUpdatePeriod:c}=e[0].attributes,v=e9(e.filter(TL)).map(_L),d=e9(e.filter(OL)),z=e9(e.filter(bL)),L=e.map(C=>C.attributes.captionServices).filter(Boolean),y={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:i,playlists:wL(v,a)};c>=0&&(y.minimumUpdatePeriod=c*1e3),t&&(y.locations=t),h==="dynamic"&&(y.suggestedPresentationDelay=l),n&&n.length>0&&(y.eventStream=n);let w=y.playlists.length===0,O=d.length?CL(d,a,w):null,k=z.length?BL(z,a):null,V=v.concat(sp(O),sp(k)),x=V.map(({timelineStarts:C})=>C);return y.timelineStarts=zp(x),AL(V,y.timelineStarts),O&&(y.mediaGroups.AUDIO.audio=O),k&&(y.mediaGroups.SUBTITLES.subs=k),L.length&&(y.mediaGroups["CLOSED-CAPTIONS"].cc=SL(L)),r?VL({oldManifest:r,newManifest:y}):y},kL=(e,t,a)=>{let{NOW:r,clientOffset:n,availabilityStartTime:i,timescale:h=1,periodStart:l=0,minimumUpdatePeriod:c=0}=e,v=(r+n)/1e3,d=i+l,L=v+c-d;return Math.ceil((L*h-t)/a)},Mp=(e,t)=>{let{type:a,minimumUpdatePeriod:r=0,media:n="",sourceDuration:i,timescale:h=1,startNumber:l=1,periodStart:c}=e,v=[],d=-1;for(let z=0;z<t.length;z++){let L=t[z],y=L.d,w=L.r||0,O=L.t||0;d<0&&(d=O),O&&O>d&&(d=O);let k;if(w<0){let C=z+1;C===t.length?a==="dynamic"&&r>0&&n.indexOf("$Number$")>0?k=kL(e,d,y):k=(i*h-d)/y:k=(t[C].t-d)/y}else k=w+1;let V=l+v.length+k,x=l+v.length;for(;x<V;)v.push({number:x,duration:y/h,time:d,timeline:c}),d+=y,x++}return v},PL=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,DL=e=>(t,a,r,n)=>{if(t==="$$")return"$";if(typeof e[a]>"u")return t;let i=""+e[a];return a==="RepresentationID"||(r?n=parseInt(n,10):n=1,i.length>=n)?i:`${new Array(n-i.length+1).join("0")}${i}`},vp=(e,t)=>e.replace(PL,DL(t)),IL=(e,t)=>!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?a9(e):Mp(e,t),jL=(e,t)=>{let a={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=e,n=Dn({baseUrl:e.baseUrl,source:vp(r.sourceURL,a),range:r.range});return IL(e,t).map(h=>{a.Number=h.number,a.Time=h.time;let l=vp(e.media||"",a),c=e.timescale||1,v=e.presentationTimeOffset||0,d=e.periodStart+(h.time-v)/c;return{uri:l,timeline:h.timeline,duration:h.duration,resolvedUri:Oh(e.baseUrl||"",l),map:n,number:h.number,presentationTime:d}})},RL=(e,t)=>{let{baseUrl:a,initialization:r={}}=e,n=Dn({baseUrl:a,source:r.sourceURL,range:r.range}),i=Dn({baseUrl:a,source:t.media,range:t.mediaRange});return i.map=n,i},NL=(e,t)=>{let{duration:a,segmentUrls:r=[],periodStart:n}=e;if(!a&&!t||a&&t)throw new Error(Aa.SEGMENT_TIME_UNSPECIFIED);let i=r.map(c=>RL(e,c)),h;return a&&(h=a9(e)),t&&(h=Mp(e,t)),h.map((c,v)=>{if(i[v]){let d=i[v],z=e.timescale||1,L=e.presentationTimeOffset||0;return d.timeline=c.timeline,d.duration=c.duration,d.number=c.number,d.presentationTime=n+(c.time-L)/z,d}}).filter(c=>c)},FL=({attributes:e,segmentInfo:t})=>{let a,r;t.template?(r=jL,a=At(e,t.template)):t.base?(r=fp,a=At(e,t.base)):t.list&&(r=NL,a=At(e,t.list));let n={attributes:e};if(!r)return n;let i=r(a,t.segmentTimeline);if(a.duration){let{duration:h,timescale:l=1}=a;a.duration=h/l}else i.length?a.duration=i.reduce((h,l)=>Math.max(h,Math.ceil(l.duration)),0):a.duration=0;return n.attributes=a,n.segments=i,t.base&&a.indexRange&&(n.sidx=i[0],n.segments=[]),n},UL=e=>e.map(FL),tt=(e,t)=>pp(e.childNodes).filter(({tagName:a})=>a===t),Uh=e=>e.textContent.trim(),$L=e=>parseFloat(e.split("/").reduce((t,a)=>t/a)),Oa=e=>{let l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!l)return 0;let[c,v,d,z,L,y]=l.slice(1);return parseFloat(c||0)*31536e3+parseFloat(v||0)*2592e3+parseFloat(d||0)*86400+parseFloat(z||0)*3600+parseFloat(L||0)*60+parseFloat(y||0)},WL=e=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)),dp={mediaPresentationDuration(e){return Oa(e)},availabilityStartTime(e){return WL(e)/1e3},minimumUpdatePeriod(e){return Oa(e)},suggestedPresentationDelay(e){return Oa(e)},type(e){return e},timeShiftBufferDepth(e){return Oa(e)},start(e){return Oa(e)},width(e){return parseInt(e,10)},height(e){return parseInt(e,10)},bandwidth(e){return parseInt(e,10)},frameRate(e){return $L(e)},startNumber(e){return parseInt(e,10)},timescale(e){return parseInt(e,10)},presentationTimeOffset(e){return parseInt(e,10)},duration(e){let t=parseInt(e,10);return isNaN(t)?Oa(e):t},d(e){return parseInt(e,10)},t(e){return parseInt(e,10)},r(e){return parseInt(e,10)},presentationTime(e){return parseInt(e,10)},DEFAULT(e){return e}},Mt=e=>e&&e.attributes?pp(e.attributes).reduce((t,a)=>{let r=dp[a.name]||dp.DEFAULT;return t[a.name]=r(a.value),t},{}):{},GL={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},$h=(e,t)=>t.length?ba(e.map(function(a){return t.map(function(r){return Oh(a,Uh(r))})})):e,n9=e=>{let t=tt(e,"SegmentTemplate")[0],a=tt(e,"SegmentList")[0],r=a&&tt(a,"SegmentURL").map(z=>At({tag:"SegmentURL"},Mt(z))),n=tt(e,"SegmentBase")[0],i=a||t,h=i&&tt(i,"SegmentTimeline")[0],l=a||n||t,c=l&&tt(l,"Initialization")[0],v=t&&Mt(t);v&&c?v.initialization=c&&Mt(c):v&&v.initialization&&(v.initialization={sourceURL:v.initialization});let d={template:v,segmentTimeline:h&&tt(h,"S").map(z=>Mt(z)),list:a&&At(Mt(a),{segmentUrls:r,initialization:Mt(c)}),base:n&&At(Mt(n),{initialization:Mt(c)})};return Object.keys(d).forEach(z=>{d[z]||delete d[z]}),d},qL=(e,t,a)=>r=>{let n=tt(r,"BaseURL"),i=$h(t,n),h=At(e,Mt(r)),l=n9(r);return i.map(c=>({segmentInfo:At(a,l),attributes:At(h,{baseUrl:c})}))},KL=e=>e.reduce((t,a)=>{let r=Mt(a);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());let n=GL[r.schemeIdUri];if(n){t[n]={attributes:r};let i=tt(a,"cenc:pssh")[0];if(i){let h=Uh(i);t[n].pssh=h&&js(h)}}return t},{}),XL=e=>{if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof e.value!="string"?[]:e.value.split(";")).map(a=>{let r,n;return n=a,/^CC\d=/.test(a)?[r,n]=a.split("="):/^CC\d$/.test(a)&&(r=a),{channel:r,language:n}});if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof e.value!="string"?[]:e.value.split(";")).map(a=>{let r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(a)){let[n,i=""]=a.split("=");r.channel=n,r.language=a,i.split(",").forEach(h=>{let[l,c]=h.split(":");l==="lang"?r.language=c:l==="er"?r.easyReader=Number(c):l==="war"?r.aspectRatio=Number(c):l==="3D"&&(r["3D"]=Number(c))})}else r.language=a;return r.channel&&(r.channel="SERVICE"+r.channel),r})},YL=e=>ba(tt(e.node,"EventStream").map(t=>{let a=Mt(t),r=a.schemeIdUri;return tt(t,"Event").map(n=>{let i=Mt(n),h=i.presentationTime||0,l=a.timescale||1,c=i.duration||0,v=h/l+e.attributes.start;return{schemeIdUri:r,value:a.value,id:i.id,start:v,end:v+c/l,messageData:Uh(n)||i.messageData,contentEncoding:a.contentEncoding,presentationTimeOffset:a.presentationTimeOffset||0}})})),QL=(e,t,a)=>r=>{let n=Mt(r),i=$h(t,tt(r,"BaseURL")),h=tt(r,"Role")[0],l={role:Mt(h)},c=At(e,n,l),v=tt(r,"Accessibility")[0],d=XL(Mt(v));d&&(c=At(c,{captionServices:d}));let z=tt(r,"Label")[0];if(z&&z.childNodes.length){let k=z.childNodes[0].nodeValue.trim();c=At(c,{label:k})}let L=KL(tt(r,"ContentProtection"));Object.keys(L).length&&(c=At(c,{contentProtection:L}));let y=n9(r),w=tt(r,"Representation"),O=At(a,y);return ba(w.map(qL(c,i,O)))},JL=(e,t)=>(a,r)=>{let n=$h(t,tt(a.node,"BaseURL")),i=At(e,{periodStart:a.attributes.start});typeof a.attributes.duration=="number"&&(i.periodDuration=a.attributes.duration);let h=tt(a.node,"AdaptationSet"),l=n9(a.node);return ba(h.map(QL(i,n,l)))},ZL=({attributes:e,priorPeriodAttributes:t,mpdType:a})=>typeof e.start=="number"?e.start:t&&typeof t.start=="number"&&typeof t.duration=="number"?t.start+t.duration:!t&&a==="static"?0:null,ty=(e,t={})=>{let{manifestUri:a="",NOW:r=Date.now(),clientOffset:n=0}=t,i=tt(e,"Period");if(!i.length)throw new Error(Aa.INVALID_NUMBER_OF_PERIOD);let h=tt(e,"Location"),l=Mt(e),c=$h([a],tt(e,"BaseURL"));l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=r,l.clientOffset=n,h.length&&(l.locations=h.map(Uh));let v=[];return i.forEach((d,z)=>{let L=Mt(d),y=v[z-1];L.start=ZL({attributes:L,priorPeriodAttributes:y?y.attributes:null,mpdType:l.type}),v.push({node:d,attributes:L})}),{locations:l.locations,representationInfo:ba(v.map(JL(l,c))),eventStream:ba(v.map(YL))}},mp=e=>{if(e==="")throw new Error(Aa.DASH_EMPTY_MANIFEST);let t=new up.DOMParser,a,r;try{a=t.parseFromString(e,"application/xml"),r=a&&a.documentElement.tagName==="MPD"?a.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(Aa.DASH_INVALID_XML);return r},ey=e=>{let t=tt(e,"UTCTiming")[0];if(!t)return null;let a=Mt(t);switch(a.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":a.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":a.method="DIRECT",a.value=Date.parse(a.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Aa.UNSUPPORTED_UTC_TIMING_SCHEME)}return a};var Hp=(e,t={})=>{let a=ty(mp(e),t),r=UL(a.representationInfo);return EL({dashPlaylists:r,locations:a.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:a.eventStream})},xp=e=>ey(mp(e));var Af=d1(Bp());var ny=c1([73,68,51]),iy=function(t,a){a===void 0&&(a=0),t=c1(t);var r=t[a+5],n=t[a+6]<<21|t[a+7]<<14|t[a+8]<<7|t[a+9],i=(r&16)>>4;return i?n+20:n+10},z4=function e(t,a){return a===void 0&&(a=0),t=c1(t),t.length-a<10||!A1(t,ny,{offset:a})?a:(a+=iy(t,a),e(t,a))};var LT=new Uint8Array([79,112,117,115,72,101,97,100]);var _p=function(t){return typeof t=="string"?Th(t):t},sy=function(t){return Array.isArray(t)?t.map(function(a){return _p(a)}):[_p(t)]},i9,Tp=function(t){t=c1(t);for(var a=[],r=0;t.length>r;){var n=t[r],i=0,h=0;h++;var l=t[h];for(h++;l&128;)i=(l&127)<<7,l=t[h],h++;i+=l&127;for(var c=0;c<i9.length;c++){var v=i9[c],d=v.id,z=v.parser;if(n===d){a.push(z(t.subarray(h,h+i)));break}}r+=i+h}return a};i9=[{id:3,parser:function(t){var a={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(a.flags&128&&(a.dependsOnEsId=t[a.size]<<8|t[a.size+1],a.size+=2),a.flags&64){var r=t[a.size];a.url=Ps(t.subarray(a.size+1,a.size+1+r)),a.size+=r}return a.flags&32&&(a.ocrEsId=t[a.size]<<8|t[a.size+1],a.size+=2),a.descriptors=Tp(t.subarray(a.size))||[],a}},{id:4,parser:function(t){var a={tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:Tp(t.subarray(13))};return a}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var Op=function e(t,a,r){r===void 0&&(r=!1),a=sy(a),t=c1(t);var n=[];if(!a.length)return n;for(var i=0;i<t.length;){var h=(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0,l=t.subarray(i+4,i+8);if(h===0)break;var c=i+h;if(c>t.length){if(r)break;c=t.length}var v=t.subarray(i+8,c);A1(l,a[0])&&(a.length===1?n.push(v):n.push.apply(n,e(v,a.slice(1),r))),i=c}return n};var jn={EBML:c1([26,69,223,163]),DocType:c1([66,130]),Segment:c1([24,83,128,103]),SegmentInfo:c1([21,73,169,102]),Tracks:c1([22,84,174,107]),Track:c1([174]),TrackNumber:c1([215]),DefaultDuration:c1([35,227,131]),TrackEntry:c1([174]),TrackType:c1([131]),FlagDefault:c1([136]),CodecID:c1([134]),CodecPrivate:c1([99,162]),VideoTrack:c1([224]),AudioTrack:c1([225]),Cluster:c1([31,67,182,117]),Timestamp:c1([231]),TimestampScale:c1([42,215,177]),BlockGroup:c1([160]),BlockDuration:c1([155]),Block:c1([161]),SimpleBlock:c1([163])},h9=[128,64,32,16,8,4,2,1],vy=function(t){for(var a=1,r=0;r<h9.length&&!(t&h9[r]);r++)a++;return a},Wh=function(t,a,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1);var i=vy(t[a]),h=t.subarray(a,a+i);return r&&(h=Array.prototype.slice.call(t,a,a+i),h[0]^=h9[i-1]),{length:i,value:ks(h,{signed:n}),bytes:h}},bp=function e(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(a){return e(a)}):typeof t=="number"?og(t):t},dy=function(t){return Array.isArray(t)?t.map(function(a){return bp(a)}):[bp(t)]},uy=function e(t,a,r){if(r>=a.length)return a.length;var n=Wh(a,r,!1);if(A1(t.bytes,n.bytes))return r;var i=Wh(a,r+n.length);return e(t,a,r+i.length+i.value+n.length)},l9=function e(t,a){a=dy(a),t=c1(t);var r=[];if(!a.length)return r;for(var n=0;n<t.length;){var i=Wh(t,n,!1),h=Wh(t,n+i.length),l=n+i.length+h.length;h.value===127&&(h.value=uy(i,t,l),h.value!==t.length&&(h.value-=l));var c=l+h.value>t.length?t.length:l+h.value,v=t.subarray(l,c);A1(a[0],i.bytes)&&(a.length===1?r.push(v):r=r.concat(e(v,a.slice(1))));var d=i.length+h.length+v.length;n+=d}return r};var gy=c1([0,0,0,1]),py=c1([0,0,1]),fy=c1([0,0,3]),zy=function(t){for(var a=[],r=1;r<t.length-2;)A1(t.subarray(r,r+3),fy)&&(a.push(r+2),r++),r++;if(a.length===0)return t;var n=t.length-a.length,i=new Uint8Array(n),h=0;for(r=0;r<n;h++,r++)h===a[0]&&(h++,a.shift()),i[r]=t[h];return i},Ap=function(t,a,r,n){n===void 0&&(n=1/0),t=c1(t),r=[].concat(r);for(var i=0,h,l=0;i<t.length&&(l<n||h);){var c=void 0;if(A1(t.subarray(i),gy)?c=4:A1(t.subarray(i),py)&&(c=3),!c){i++;continue}if(l++,h)return zy(t.subarray(h,i));var v=void 0;a==="h264"?v=t[i+c]&31:a==="h265"&&(v=t[i+c]>>1&63),r.indexOf(v)!==-1&&(h=i+c),i+=c+(a==="h264"?1:2)}return t.subarray(0,0)},Ep=function(t,a,r){return Ap(t,"h264",a,r)},kp=function(t,a,r){return Ap(t,"h265",a,r)};var $t={webm:c1([119,101,98,109]),matroska:c1([109,97,116,114,111,115,107,97]),flac:c1([102,76,97,67]),ogg:c1([79,103,103,83]),ac3:c1([11,119]),riff:c1([82,73,70,70]),avi:c1([65,86,73]),wav:c1([87,65,86,69]),"3gp":c1([102,116,121,112,51,103]),mp4:c1([102,116,121,112]),fmp4:c1([115,116,121,112]),mov:c1([102,116,121,112,113,116]),moov:c1([109,111,111,118]),moof:c1([109,111,111,102])},Ea={aac:function(t){var a=z4(t);return A1(t,[255,16],{offset:a,mask:[255,22]})},mp3:function(t){var a=z4(t);return A1(t,[255,2],{offset:a,mask:[255,6]})},webm:function(t){var a=l9(t,[jn.EBML,jn.DocType])[0];return A1(a,$t.webm)},mkv:function(t){var a=l9(t,[jn.EBML,jn.DocType])[0];return A1(a,$t.matroska)},mp4:function(t){if(Ea["3gp"](t)||Ea.mov(t))return!1;if(A1(t,$t.mp4,{offset:4})||A1(t,$t.fmp4,{offset:4})||A1(t,$t.moof,{offset:4})||A1(t,$t.moov,{offset:4}))return!0},mov:function(t){return A1(t,$t.mov,{offset:4})},"3gp":function(t){return A1(t,$t["3gp"],{offset:4})},ac3:function(t){var a=z4(t);return A1(t,$t.ac3,{offset:a})},ts:function(t){if(t.length<189&&t.length>=1)return t[0]===71;for(var a=0;a+188<t.length&&a<188;){if(t[a]===71&&t[a+188]===71)return!0;a+=1}return!1},flac:function(t){var a=z4(t);return A1(t,$t.flac,{offset:a})},ogg:function(t){return A1(t,$t.ogg)},avi:function(t){return A1(t,$t.riff)&&A1(t,$t.avi,{offset:8})},wav:function(t){return A1(t,$t.riff)&&A1(t,$t.wav,{offset:8})},h264:function(t){return Ep(t,7,3).length},h265:function(t){return kp(t,[32,33],3).length}},o9=Object.keys(Ea).filter(function(e){return e!=="ts"&&e!=="h264"&&e!=="h265"}).concat(["ts","h264","h265"]);o9.forEach(function(e){var t=Ea[e];Ea[e]=function(a){return t(c1(a))}});var My=Ea,Gh=function(t){t=c1(t);for(var a=0;a<o9.length;a++){var r=o9[a];if(My[r](t))return r}return""},Pp=function(t){return Op(t,["moof"]).length>0};var Yn=d1(Np());var Ef="8.3.0",Qe={},S0=function(e,t){return Qe[e]=Qe[e]||[],t&&(Qe[e]=Qe[e].concat(t)),Qe[e]},my=function(e,t){S0(e,t)},kf=function(e,t){let a=S0(e).indexOf(t);return a<=-1?!1:(Qe[e]=Qe[e].slice(),Qe[e].splice(a,1),!0)},Hy=function(e,t){S0(e,[].concat(t).map(a=>{let r=(...n)=>(kf(e,r),a(...n));return r}))},al={prefixed:!0},Zh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Fp=Zh[0],Un;for(let e=0;e<Zh.length;e++)if(Zh[e][1]in a1.default){Un=Zh[e];break}if(Un){for(let e=0;e<Un.length;e++)al[Fp[e]]=Un[e];al.prefixed=Un[0]!==Fp[0]}var l2=[],xy=(e,t)=>(a,r,n)=>{let i=t.levels[r],h=new RegExp(`^(${i})$`);if(a!=="log"&&n.unshift(a.toUpperCase()+":"),n.unshift(e+":"),l2){l2.push([].concat(n));let c=l2.length-1e3;l2.splice(0,c>0?c:0)}if(!P.default.console)return;let l=P.default.console[a];!l&&a==="debug"&&(l=P.default.console.info||P.default.console.log),!(!l||!i||!h.test(a))&&l[Array.isArray(n)?"apply":"call"](P.default.console,n)};function Pf(e){let t="info",a,r=function(...n){a("log",t,n)};return a=xy(e,r),r.createLogger=n=>Pf(e+": "+n),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},r.level=n=>{if(typeof n=="string"){if(!r.levels.hasOwnProperty(n))throw new Error(`"${n}" in not a valid log level`);t=n}return t},r.history=()=>l2?[].concat(l2):[],r.history.filter=n=>(l2||[]).filter(i=>new RegExp(`.*${n}.*`).test(i[0])),r.history.clear=()=>{l2&&(l2.length=0)},r.history.disable=()=>{l2!==null&&(l2.length=0,l2=null)},r.history.enable=()=>{l2===null&&(l2=[])},r.error=(...n)=>a("error",t,n),r.warn=(...n)=>a("warn",t,n),r.debug=(...n)=>a("debug",t,n),r}var w1=Pf("VIDEOJS"),Df=w1.createLogger,Vy=Object.prototype.toString,If=function(e){return we(e)?Object.keys(e):[]};function ja(e,t){If(e).forEach(a=>t(e[a],a))}function jf(e,t,a=0){return If(e).reduce((r,n)=>t(r,e[n],n),a)}function we(e){return!!e&&typeof e=="object"}function Wa(e){return we(e)&&Vy.call(e)==="[object Object]"&&e.constructor===Object}function F1(...e){let t={};return e.forEach(a=>{a&&ja(a,(r,n)=>{if(!Wa(r)){t[n]=r;return}Wa(t[n])||(t[n]={}),t[n]=F1(t[n],r)})}),t}function Wl(e,t,a,r=!0){let n=h=>Object.defineProperty(e,t,{value:h,enumerable:!0,writable:!0}),i={configurable:!0,enumerable:!0,get(){let h=a();return n(h),h}};return r&&(i.set=n),Object.defineProperty(e,t,i)}var wy=Object.freeze({__proto__:null,each:ja,reduce:jf,isObject:we,isPlain:Wa,merge:F1,defineLazyProperty:Wl}),H6=!1,Rf=null,Le=!1,Nf,Ff=!1,Ra=!1,Na=!1,ye=!1,x6=null,Gl=null,Uf=null,rl=!1,ql=!1,nl=!1,Kl=!1,Qn=!!(er()&&("ontouchstart"in P.default||P.default.navigator.maxTouchPoints||P.default.DocumentTouch&&P.default.document instanceof P.default.DocumentTouch)),ka=P.default.navigator&&P.default.navigator.userAgentData;ka&&(Le=ka.platform==="Android",Ra=!!ka.brands.find(e=>e.brand==="Microsoft Edge"),Na=!!ka.brands.find(e=>e.brand==="Chromium"),ye=!Ra&&Na,x6=Gl=(ka.brands.find(e=>e.brand==="Chromium")||{}).version||null,ql=ka.platform==="Windows");if(!Na){let e=P.default.navigator&&P.default.navigator.userAgent||"";H6=/iPod/i.test(e),Rf=function(){let t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Le=/Android/i.test(e),Nf=function(){let t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;let a=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return a&&r?parseFloat(t[1]+"."+t[2]):a||null}(),Ff=/Firefox/i.test(e),Ra=/Edg/i.test(e),Na=/Chrome/i.test(e)||/CriOS/i.test(e),ye=!Ra&&Na,x6=Gl=function(){let t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Uf=function(){let t=/MSIE\s(\d+)\.\d/.exec(e),a=t&&parseFloat(t[1]);return!a&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(a=11),a}(),rl=/Safari/i.test(e)&&!ye&&!Le&&!Ra,ql=/Windows/i.test(e),nl=/iPad/i.test(e)||rl&&Qn&&!/iPhone/i.test(e),Kl=/iPhone/i.test(e)&&!nl}var Xt=Kl||nl||H6,Xl=(rl||Xt)&&!ye,Ly=Object.freeze({__proto__:null,get IS_IPOD(){return H6},get IOS_VERSION(){return Rf},get IS_ANDROID(){return Le},get ANDROID_VERSION(){return Nf},get IS_FIREFOX(){return Ff},get IS_EDGE(){return Ra},get IS_CHROMIUM(){return Na},get IS_CHROME(){return ye},get CHROMIUM_VERSION(){return x6},get CHROME_VERSION(){return Gl},get IE_VERSION(){return Uf},get IS_SAFARI(){return rl},get IS_WINDOWS(){return ql},get IS_IPAD(){return nl},get IS_IPHONE(){return Kl},TOUCH_ENABLED:Qn,IS_IOS:Xt,IS_ANY_SAFARI:Xl});function Up(e){return typeof e=="string"&&!!e.trim()}function yy(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function er(){return a1.default===P.default.document}function ar(e){return we(e)&&e.nodeType===1}function $f(){try{return P.default.parent!==P.default.self}catch{return!0}}function Wf(e){return function(t,a){if(!Up(t))return a1.default[e](null);Up(a)&&(a=a1.default.querySelector(a));let r=ar(a)?a:a1.default;return r[e]&&r[e](t)}}function m1(e="div",t={},a={},r){let n=a1.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(i){let h=t[i];i==="textContent"?k0(n,h):(n[i]!==h||i==="tabIndex")&&(n[i]=h)}),Object.getOwnPropertyNames(a).forEach(function(i){n.setAttribute(i,a[i])}),r&&V6(n,r),n}function k0(e,t){return typeof e.textContent>"u"?e.innerText=t:e.textContent=t,e}function S9(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Wn(e,t){return yy(t),e.classList.contains(t)}function V4(e,...t){return e.classList.add(...t.reduce((a,r)=>a.concat(r.split(/\s+/)),[])),e}function Yl(e,...t){return e?(e.classList.remove(...t.reduce((a,r)=>a.concat(r.split(/\s+/)),[])),e):(w1.warn("removeClass was called with an element that doesn't exist"),null)}function Gf(e,t,a){return typeof a=="function"&&(a=a(e,t)),typeof a!="boolean"&&(a=void 0),t.split(/\s+/).forEach(r=>e.classList.toggle(r,a)),e}function qf(e,t){Object.getOwnPropertyNames(t).forEach(function(a){let r=t[a];r===null||typeof r>"u"||r===!1?e.removeAttribute(a):e.setAttribute(a,r===!0?"":r)})}function C0(e){let t={},a=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0){let r=e.attributes;for(let n=r.length-1;n>=0;n--){let i=r[n].name,h=r[n].value;(typeof e[i]=="boolean"||a.indexOf(","+i+",")!==-1)&&(h=h!==null),t[i]=h}}return t}function Kf(e,t){return e.getAttribute(t)}function Ga(e,t,a){e.setAttribute(t,a)}function Ql(e,t){e.removeAttribute(t)}function Xf(){a1.default.body.focus(),a1.default.onselectstart=function(){return!1}}function Yf(){a1.default.onselectstart=function(){return!0}}function qa(e){if(e&&e.getBoundingClientRect&&e.parentNode){let t=e.getBoundingClientRect(),a={};return["bottom","height","left","right","top","width"].forEach(r=>{t[r]!==void 0&&(a[r]=t[r])}),a.height||(a.height=parseFloat(Ka(e,"height"))),a.width||(a.width=parseFloat(Ka(e,"width"))),a}}function Jn(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};let t=e.offsetWidth,a=e.offsetHeight,r=0,n=0;for(;e.offsetParent&&e!==a1.default[al.fullscreenElement];)r+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:r,top:n,width:t,height:a}}function Jl(e,t){let a={x:0,y:0};if(Xt){let d=e;for(;d&&d.nodeName.toLowerCase()!=="html";){let z=Ka(d,"transform");if(/^matrix/.test(z)){let L=z.slice(7,-1).split(/,\s/).map(Number);a.x+=L[4],a.y+=L[5]}else if(/^matrix3d/.test(z)){let L=z.slice(9,-1).split(/,\s/).map(Number);a.x+=L[12],a.y+=L[13]}d=d.parentNode}}let r={},n=Jn(t.target),i=Jn(e),h=i.width,l=i.height,c=t.offsetY-(i.top-n.top),v=t.offsetX-(i.left-n.left);return t.changedTouches&&(v=t.changedTouches[0].pageX-i.left,c=t.changedTouches[0].pageY+i.top,Xt&&(v-=a.x,c-=a.y)),r.y=1-Math.max(0,Math.min(1,c/l)),r.x=Math.max(0,Math.min(1,v/h)),r}function Qf(e){return we(e)&&e.nodeType===3}function Zl(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Jf(e){return typeof e=="function"&&(e=e()),(Array.isArray(e)?e:[e]).map(t=>{if(typeof t=="function"&&(t=t()),ar(t)||Qf(t))return t;if(typeof t=="string"&&/\S/.test(t))return a1.default.createTextNode(t)}).filter(t=>t)}function V6(e,t){return Jf(t).forEach(a=>e.appendChild(a)),e}function Zf(e,t){return V6(Zl(e),t)}function Zn(e){return e.button===void 0&&e.buttons===void 0||e.button===0&&e.buttons===void 0||e.type==="mouseup"&&e.button===0&&e.buttons===0?!0:!(e.button!==0||e.buttons!==1)}var _0=Wf("querySelector"),tz=Wf("querySelectorAll");function Ka(e,t){if(!e||!t)return"";if(typeof P.default.getComputedStyle=="function"){let a;try{a=P.default.getComputedStyle(e)}catch{return""}return a?a.getPropertyValue(t)||a[t]:""}return""}var ez=Object.freeze({__proto__:null,isReal:er,isEl:ar,isInFrame:$f,createEl:m1,textContent:k0,prependTo:S9,hasClass:Wn,addClass:V4,removeClass:Yl,toggleClass:Gf,setAttributes:qf,getAttributes:C0,getAttribute:Kf,setAttribute:Ga,removeAttribute:Ql,blockTextSelection:Xf,unblockTextSelection:Yf,getBoundingClientRect:qa,findPosition:Jn,getPointerPosition:Jl,isTextNode:Qf,emptyEl:Zl,normalizeContent:Jf,appendContent:V6,insertContent:Zf,isSingleLeftClick:Zn,$:_0,$$:tz,computedStyle:Ka}),az=!1,_9,Cy=function(){if(_9.options.autoSetup===!1)return;let e=Array.prototype.slice.call(a1.default.getElementsByTagName("video")),t=Array.prototype.slice.call(a1.default.getElementsByTagName("audio")),a=Array.prototype.slice.call(a1.default.getElementsByTagName("video-js")),r=e.concat(t,a);if(r&&r.length>0)for(let n=0,i=r.length;n<i;n++){let h=r[n];if(h&&h.getAttribute)h.player===void 0&&h.getAttribute("data-setup")!==null&&_9(h);else{T9(1);break}}else az||T9(1)};function T9(e,t){er()&&(t&&(_9=t),P.default.setTimeout(Cy,e))}function O9(){az=!0,P.default.removeEventListener("load",O9)}er()&&(a1.default.readyState==="complete"?O9():P.default.addEventListener("load",O9));var rz=function(e){let t=a1.default.createElement("style");return t.className=e,t},nz=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Gt=new WeakMap,By=3,Sy=By;function Ce(){return Sy++}function $p(e,t){if(!Gt.has(e))return;let a=Gt.get(e);a.handlers[t].length===0&&(delete a.handlers[t],e.removeEventListener?e.removeEventListener(t,a.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,a.dispatcher)),Object.getOwnPropertyNames(a.handlers).length<=0&&(delete a.handlers,delete a.dispatcher,delete a.disabled),Object.getOwnPropertyNames(a).length===0&&Gt.delete(e)}function w6(e,t,a,r){a.forEach(function(n){e(t,n,r)})}function to(e){if(e.fixed_)return e;function t(){return!0}function a(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){let r=e||P.default.event;e={};for(let n in r)n!=="layerX"&&n!=="layerY"&&n!=="keyLocation"&&n!=="webkitMovementX"&&n!=="webkitMovementY"&&n!=="path"&&(n==="returnValue"&&r.preventDefault||(e[n]=r[n]));if(e.target||(e.target=e.srcElement||a1.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=a,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=a,e.clientX!==null&&e.clientX!==void 0){let n=a1.default.documentElement,i=a1.default.body;e.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)}e.which=e.charCode||e.keyCode,e.button!==null&&e.button!==void 0&&(e.button=e.button&1?0:e.button&4?1:e.button&2?2:0)}return e.fixed_=!0,e}var Kh,_y=function(){if(typeof Kh!="boolean"){Kh=!1;try{let e=Object.defineProperty({},"passive",{get(){Kh=!0}});P.default.addEventListener("test",null,e),P.default.removeEventListener("test",null,e)}catch{}}return Kh},Ty=["touchstart","touchmove"];function H2(e,t,a){if(Array.isArray(t))return w6(H2,e,t,a);Gt.has(e)||Gt.set(e,{});let r=Gt.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),a.guid||(a.guid=Ce()),r.handlers[t].push(a),r.dispatcher||(r.disabled=!1,r.dispatcher=function(n,i){if(r.disabled)return;n=to(n);let h=r.handlers[n.type];if(h){let l=h.slice(0);for(let c=0,v=l.length;c<v&&!n.isImmediatePropagationStopped();c++)try{l[c].call(e,n,i)}catch(d){w1.error(d)}}}),r.handlers[t].length===1)if(e.addEventListener){let n=!1;_y()&&Ty.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function kt(e,t,a){if(!Gt.has(e))return;let r=Gt.get(e);if(!r.handlers)return;if(Array.isArray(t))return w6(kt,e,t,a);let n=function(h,l){r.handlers[l]=[],$p(h,l)};if(t===void 0){for(let h in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},h)&&n(e,h);return}let i=r.handlers[t];if(i){if(!a){n(e,t);return}if(a.guid)for(let h=0;h<i.length;h++)i[h].guid===a.guid&&i.splice(h--,1);$p(e,t)}}function rr(e,t,a){let r=Gt.has(e)?Gt.get(e):{},n=e.parentNode||e.ownerDocument;if(typeof t=="string"?t={type:t,target:e}:t.target||(t.target=e),t=to(t),r.dispatcher&&r.dispatcher.call(e,t,a),n&&!t.isPropagationStopped()&&t.bubbles===!0)rr.call(null,n,t,a);else if(!n&&!t.defaultPrevented&&t.target&&t.target[t.type]){Gt.has(t.target)||Gt.set(t.target,{});let i=Gt.get(t.target);t.target[t.type]&&(i.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),i.disabled=!1)}return!t.defaultPrevented}function eo(e,t,a){if(Array.isArray(t))return w6(eo,e,t,a);let r=function(){kt(e,t,r),a.apply(this,arguments)};r.guid=a.guid=a.guid||Ce(),H2(e,t,r)}function L6(e,t,a){let r=function(){kt(e,t,r),a.apply(this,arguments)};r.guid=a.guid=a.guid||Ce(),H2(e,t,r)}var Oy=Object.freeze({__proto__:null,fixEvent:to,on:H2,off:kt,trigger:rr,one:eo,any:L6}),D2=30,U1=function(e,t,a){t.guid||(t.guid=Ce());let r=t.bind(e);return r.guid=a?a+"_"+t.guid:t.guid,r},Be=function(e,t){let a=P.default.performance.now();return function(...n){let i=P.default.performance.now();i-a>=t&&(e(...n),a=i)}},iz=function(e,t,a,r=P.default){let n,i=()=>{r.clearTimeout(n),n=null},h=function(){let l=this,c=arguments,v=function(){n=null,v=null,a||e.apply(l,c)};!n&&a&&e.apply(l,c),r.clearTimeout(n),n=r.setTimeout(v,t)};return h.cancel=i,h},by=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:D2,bind_:U1,throttle:Be,debounce:iz}),Rn,c2=class{on(t,a){let r=this.addEventListener;this.addEventListener=()=>{},H2(this,t,a),this.addEventListener=r}off(t,a){kt(this,t,a)}one(t,a){let r=this.addEventListener;this.addEventListener=()=>{},eo(this,t,a),this.addEventListener=r}any(t,a){let r=this.addEventListener;this.addEventListener=()=>{},L6(this,t,a),this.addEventListener=r}trigger(t){let a=t.type||t;typeof t=="string"&&(t={type:a}),t=to(t),this.allowedEvents_[a]&&this["on"+a]&&this["on"+a](t),rr(this,t)}queueTrigger(t){Rn||(Rn=new Map);let a=t.type||t,r=Rn.get(this);r||(r=new Map,Rn.set(this,r));let n=r.get(a);r.delete(a),P.default.clearTimeout(n);let i=P.default.setTimeout(()=>{r.delete(a),r.size===0&&(r=null,Rn.delete(this)),this.trigger(t)},0);r.set(a,i)}};c2.prototype.allowedEvents_={};c2.prototype.addEventListener=c2.prototype.on;c2.prototype.removeEventListener=c2.prototype.off;c2.prototype.dispatchEvent=c2.prototype.trigger;var ao=e=>typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,Ze=e=>e instanceof c2||!!e.eventBusEl_&&["on","one","off","trigger"].every(t=>typeof e[t]=="function"),Ay=(e,t)=>{Ze(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},b9=e=>typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length,il=(e,t,a)=>{if(!e||!e.nodeName&&!Ze(e))throw new Error(`Invalid target for ${ao(t)}#${a}; must be a DOM node or evented object.`)},hz=(e,t,a)=>{if(!b9(e))throw new Error(`Invalid event type for ${ao(t)}#${a}; must be a non-empty string or array.`)},lz=(e,t,a)=>{if(typeof e!="function")throw new Error(`Invalid listener for ${ao(t)}#${a}; must be a function.`)},u9=(e,t,a)=>{let r=t.length<3||t[0]===e||t[0]===e.eventBusEl_,n,i,h;return r?(n=e.eventBusEl_,t.length>=3&&t.shift(),[i,h]=t):[n,i,h]=t,il(n,e,a),hz(i,e,a),lz(h,e,a),h=U1(e,h),{isTargetingSelf:r,target:n,type:i,listener:h}},M4=(e,t,a,r)=>{il(e,e,t),e.nodeName?Oy[t](e,a,r):e[t](a,r)},Ey={on(...e){let{isTargetingSelf:t,target:a,type:r,listener:n}=u9(this,e,"on");if(M4(a,"on",r,n),!t){let i=()=>this.off(a,r,n);i.guid=n.guid;let h=()=>this.off("dispose",i);h.guid=n.guid,M4(this,"on","dispose",i),M4(a,"on","dispose",h)}},one(...e){let{isTargetingSelf:t,target:a,type:r,listener:n}=u9(this,e,"one");if(t)M4(a,"one",r,n);else{let i=(...h)=>{this.off(a,r,i),n.apply(null,h)};i.guid=n.guid,M4(a,"one",r,i)}},any(...e){let{isTargetingSelf:t,target:a,type:r,listener:n}=u9(this,e,"any");if(t)M4(a,"any",r,n);else{let i=(...h)=>{this.off(a,r,i),n.apply(null,h)};i.guid=n.guid,M4(a,"any",r,i)}},off(e,t,a){if(!e||b9(e))kt(this.eventBusEl_,e,t);else{let r=e,n=t;il(r,this,"off"),hz(n,this,"off"),lz(a,this,"off"),a=U1(this,a),this.off("dispose",a),r.nodeName?(kt(r,n,a),kt(r,"dispose",a)):Ze(r)&&(r.off(n,a),r.off("dispose",a))}},trigger(e,t){il(this.eventBusEl_,this,"trigger");let a=e&&typeof e!="string"?e.type:e;if(!b9(a))throw new Error(`Invalid event type for ${ao(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return rr(this.eventBusEl_,e,t)}};function y6(e,t={}){let{eventBusKey:a}=t;if(a){if(!e[a].nodeName)throw new Error(`The eventBusKey "${a}" does not refer to an element.`);e.eventBusEl_=e[a]}else e.eventBusEl_=m1("span",{className:"vjs-event-bus"});return Object.assign(e,Ey),e.eventedCallbacks&&e.eventedCallbacks.forEach(r=>{r()}),e.on("dispose",()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach(function(r){r&&Gt.has(r)&&Gt.delete(r)}),P.default.setTimeout(()=>{e.eventBusEl_=null},0)}),e}var ky={state:{},setState(e){typeof e=="function"&&(e=e());let t;return ja(e,(a,r)=>{this.state[r]!==a&&(t=t||{},t[r]={from:this.state[r],to:a}),this.state[r]=a}),t&&Ze(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function oz(e,t){return Object.assign(e,ky),e.state=Object.assign({},e.state,t),typeof e.handleStateChanged=="function"&&Ze(e)&&e.on("statechanged",e.handleStateChanged),e}var Gn=function(e){return typeof e!="string"?e:e.replace(/./,t=>t.toLowerCase())},rt=function(e){return typeof e!="string"?e:e.replace(/./,t=>t.toUpperCase())},cz=function(e,t){return rt(e)===rt(t)},Py=Object.freeze({__proto__:null,toLowerCase:Gn,toTitleCase:rt,titleCaseEquals:cz}),G=class{constructor(t,a,r){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=F1({},this.options_),a=this.options_=F1(this.options_,a),this.id_=a.id||a.el&&a.el.id,!this.id_){let n=t&&t.id&&t.id()||"no_player";this.id_=`${n}_component_${Ce()}`}this.name_=a.name||null,a.el?this.el_=a.el:a.createEl!==!1&&(this.el_=this.createEl()),a.className&&this.el_&&a.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),a.evented!==!1&&(y6(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),oz(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,a.initChildren!==!1&&this.initChildren(),this.ready(r),a.reportTouchActivity!==!1&&this.enableTouchActivity()}on(t,a){}off(t,a){}one(t,a){}any(t,a){}trigger(t){}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t?(this.options_=F1(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,a,r){return m1(t,a,r)}localize(t,a,r=t){let n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),h=i&&i[n],l=n&&n.split("-")[0],c=i&&i[l],v=r;return h&&h[t]?v=h[t]:c&&c[t]&&(v=c[t]),a&&(v=v.replace(/\{(\d+)\}/g,function(d,z){let L=a[z-1],y=L;return typeof L>"u"&&(y=d),y})),v}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((r,n)=>r.concat(n),[]);let a=this;for(let r=0;r<t.length;r++)if(a=a.getChild(t[r]),!a||!a.getChild)return;return a}addChild(t,a={},r=this.children_.length){let n,i;if(typeof t=="string"){i=rt(t);let h=a.componentClass||i;a.name=i;let l=G.getComponent(h);if(!l)throw new Error(`Component ${h} does not exist`);if(typeof l!="function")return null;n=new l(this.player_||this,a)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(r,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),i=i||n.name&&rt(n.name()),i&&(this.childNameIndex_[i]=n,this.childNameIndex_[Gn(i)]=n),typeof n.el=="function"&&n.el()){let h=null;this.children_[r+1]&&(this.children_[r+1].el_?h=this.children_[r+1].el_:ar(this.children_[r+1])&&(h=this.children_[r+1])),this.contentEl().insertBefore(n.el(),h)}return n}removeChild(t){if(typeof t=="string"&&(t=this.getChild(t)),!t||!this.children_)return;let a=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){a=!0,this.children_.splice(n,1);break}if(!a)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[rt(t.name())]=null,this.childNameIndex_[Gn(t.name())]=null;let r=t.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){let t=this.options_.children;if(t){let a=this.options_,r=h=>{let l=h.name,c=h.opts;if(a[l]!==void 0&&(c=a[l]),c===!1)return;c===!0&&(c={}),c.playerOptions=this.options_.playerOptions;let v=this.addChild(l,c);v&&(this[l]=v)},n,i=G.getComponent("Tech");Array.isArray(t)?n=t:n=Object.keys(t),n.concat(Object.keys(this.options_).filter(function(h){return!n.some(function(l){return typeof l=="string"?h===l:h===l.name})})).map(h=>{let l,c;return typeof h=="string"?(l=h,c=t[l]||this.options_[l]||{}):(l=h.name,c=h),{name:l,opts:c}}).filter(h=>{let l=G.getComponent(h.opts.componentClass||rt(h.name));return l&&!i.isTech(l)}).forEach(r)}}buildCSSClass(){return""}ready(t,a=!1){if(t){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t);return}a?t.call(this):this.setTimeout(t,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){let t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)}$(t,a){return _0(t,a||this.contentEl())}$$(t,a){return tz(t,a||this.contentEl())}hasClass(t){return Wn(this.el_,t)}addClass(...t){V4(this.el_,...t)}removeClass(...t){Yl(this.el_,...t)}toggleClass(t,a){Gf(this.el_,t,a)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return Kf(this.el_,t)}setAttribute(t,a){Ga(this.el_,t,a)}removeAttribute(t){Ql(this.el_,t)}width(t,a){return this.dimension("width",t,a)}height(t,a){return this.dimension("height",t,a)}dimensions(t,a){this.width(t,!0),this.height(a)}dimension(t,a,r){if(a!==void 0){(a===null||a!==a)&&(a=0),(""+a).indexOf("%")!==-1||(""+a).indexOf("px")!==-1?this.el_.style[t]=a:a==="auto"?this.el_.style[t]="":this.el_.style[t]=a+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;let n=this.el_.style[t],i=n.indexOf("px");return parseInt(i!==-1?n.slice(0,i):this.el_["offset"+rt(t)],10)}currentDimension(t){let a=0;if(t!=="width"&&t!=="height")throw new Error("currentDimension only accepts width or height value");if(a=Ka(this.el_,t),a=parseFloat(a),a===0||isNaN(a)){let r=`offset${rt(t)}`;a=this.el_[r]}return a}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(z1.default.isEventKey(t,"Tab")||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t=0,a=null,r=10,n=200,i;this.on("touchstart",function(l){l.touches.length===1&&(a={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},t=P.default.performance.now(),i=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)i=!1;else if(a){let c=l.touches[0].pageX-a.pageX,v=l.touches[0].pageY-a.pageY;Math.sqrt(c*c+v*v)>r&&(i=!1)}});let h=function(){i=!1};this.on("touchleave",h),this.on("touchcancel",h),this.on("touchend",function(l){a=null,i===!0&&P.default.performance.now()-t<n&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;let t=U1(this.player(),this.player().reportUserActivity),a;this.on("touchstart",function(){t(),this.clearInterval(a),a=this.setInterval(t,250)});let r=function(n){t(),this.clearInterval(a)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(t,a){var r;return t=U1(this,t),this.clearTimersOnDispose_(),r=P.default.setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),t()},a),this.setTimeoutIds_.add(r),r}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),P.default.clearTimeout(t)),t}setInterval(t,a){t=U1(this,t),this.clearTimersOnDispose_();let r=P.default.setInterval(t,a);return this.setIntervalIds_.add(r),r}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),P.default.clearInterval(t)),t}requestAnimationFrame(t){this.clearTimersOnDispose_();var a;return t=U1(this,t),a=P.default.requestAnimationFrame(()=>{this.rafIds_.has(a)&&this.rafIds_.delete(a),t()}),this.rafIds_.add(a),a}requestNamedAnimationFrame(t,a){if(this.namedRafs_.has(t))return;this.clearTimersOnDispose_(),a=U1(this,a);let r=this.requestAnimationFrame(()=>{a(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,r),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),P.default.cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,a])=>{this[t].forEach((r,n)=>this[a](n))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(t,a){if(typeof t!="string"||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);let r=G.getComponent("Tech"),n=r&&r.isTech(a),i=G===a||G.prototype.isPrototypeOf(a.prototype);if(n||!i){let l;throw n?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error(`Illegal component, "${t}"; ${l}.`)}t=rt(t),G.components_||(G.components_={});let h=G.getComponent("Player");if(t==="Player"&&h&&h.players){let l=h.players,c=Object.keys(l);if(l&&c.length>0&&c.map(v=>l[v]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return G.components_[t]=a,G.components_[Gn(t)]=a,a}static getComponent(t){if(!(!t||!G.components_))return G.components_[t]}};G.registerComponent("Component",G);function Dy(e,t,a){if(typeof t!="number"||t<0||t>a)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${a}).`)}function Wp(e,t,a,r){return Dy(e,r,a.length-1),a[r][t]}function g9(e){let t;return e===void 0||e.length===0?t={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:t={length:e.length,start:Wp.bind(null,"start",0,e),end:Wp.bind(null,"end",1,e)},P.default.Symbol&&P.default.Symbol.iterator&&(t[P.default.Symbol.iterator]=()=>(e||[]).values()),t}function Ve(e,t){return Array.isArray(e)?g9(e):e===void 0||t===void 0?g9():g9([[e,t]])}var sz=function(e,t){e=e<0?0:e;let a=Math.floor(e%60),r=Math.floor(e/60%60),n=Math.floor(e/3600),i=Math.floor(t/60%60),h=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(n=r=a="-"),n=n>0||h>0?n+":":"",r=((n||i>=10)&&r<10?"0"+r:r)+":",a=a<10?"0"+a:a,n+r+a},C6=sz;function vz(e){C6=e}function dz(){C6=sz}function L4(e,t=e){return C6(e,t)}var Iy=Object.freeze({__proto__:null,createTimeRanges:Ve,createTimeRange:Ve,setFormatTime:vz,resetFormatTime:dz,formatTime:L4});function uz(e,t){let a=0,r,n;if(!t)return 0;(!e||!e.length)&&(e=Ve(0,0));for(let i=0;i<e.length;i++)r=e.start(i),n=e.end(i),n>t&&(n=t),a+=n-r;return a/t}function qt(e){if(e instanceof qt)return e;typeof e=="number"?this.code=e:typeof e=="string"?this.message=e:we(e)&&(typeof e.code=="number"&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=qt.defaultMessages[this.code]||"")}qt.prototype.code=0;qt.prototype.message="";qt.prototype.status=null;qt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];qt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let e=0;e<qt.errorTypes.length;e++)qt[qt.errorTypes[e]]=e,qt.prototype[qt.errorTypes[e]]=e;function qn(e){return e!=null&&typeof e.then=="function"}function me(e){qn(e)&&e.then(null,t=>{})}var A9=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((a,r,n)=>(e[r]&&(a[r]=e[r]),a),{cues:e.cues&&Array.prototype.map.call(e.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})})},jy=function(e){let t=e.$$("track"),a=Array.prototype.map.call(t,n=>n.track);return Array.prototype.map.call(t,function(n){let i=A9(n.track);return n.src&&(i.src=n.src),i}).concat(Array.prototype.filter.call(e.textTracks(),function(n){return a.indexOf(n)===-1}).map(A9))},Ry=function(e,t){return e.forEach(function(a){let r=t.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(n=>r.addCue(n))}),t.textTracks()},Gp={textTracksToJson:jy,jsonToTextTracks:Ry,trackToJson_:A9},p9="vjs-modal-dialog",T0=class extends G{constructor(t,a){super(t,a),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=m1("div",{className:`${p9}-content`},{role:"document"}),this.descEl_=m1("p",{className:`${p9}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),k0(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${p9} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(!this.opened_){let t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;let t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if(typeof t=="boolean"){let a=this.closeable_=!!t,r=this.getChild("closeButton");if(a&&!r){let n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close_)}!a&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){let a=this.contentEl(),r=a.parentNode,n=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(a),this.empty(),Zf(a,t),this.trigger("modalfill"),n?r.insertBefore(a,n):r.appendChild(a);let i=this.getChild("closeButton");i&&r.appendChild(i.el_)}empty(){this.trigger("beforemodalempty"),Zl(this.contentEl()),this.trigger("modalempty")}content(t){return typeof t<"u"&&(this.content_=t),this.content_}conditionalFocus_(){let t=a1.default.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(t)||a===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(t.stopPropagation(),z1.default.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault(),this.close();return}if(!z1.default.isEventKey(t,"Tab"))return;let a=this.focusableEls_(),r=this.el_.querySelector(":focus"),n;for(let i=0;i<a.length;i++)if(r===a[i]){n=i;break}a1.default.activeElement===this.el_&&(n=0),t.shiftKey&&n===0?(a[a.length-1].focus(),t.preventDefault()):!t.shiftKey&&n===a.length-1&&(a[0].focus(),t.preventDefault())}focusableEls_(){let t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,a=>(a instanceof P.default.HTMLAnchorElement||a instanceof P.default.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof P.default.HTMLInputElement||a instanceof P.default.HTMLSelectElement||a instanceof P.default.HTMLTextAreaElement||a instanceof P.default.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof P.default.HTMLIFrameElement||a instanceof P.default.HTMLObjectElement||a instanceof P.default.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable"))}};T0.prototype.options_={pauseOnOpen:!0,temporary:!0};G.registerComponent("ModalDialog",T0);var O0=class extends c2{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let a=0;a<t.length;a++)this.addTrack(t[a])}addTrack(t){let a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get(){return this.tracks_[a]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},Ze(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let a;for(let r=0,n=this.length;r<n;r++)if(this[r]===t){a=this[r],a.off&&a.off(),this.tracks_.splice(r,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})}getTrackById(t){let a=null;for(let r=0,n=this.length;r<n;r++){let i=this[r];if(i.id===t){a=i;break}}return a}};O0.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(let e in O0.prototype.allowedEvents_)O0.prototype["on"+e]=null;var f9=function(e,t){for(let a=0;a<e.length;a++)!Object.keys(e[a]).length||t.id===e[a].id||(e[a].enabled=!1)},E9=class extends O0{constructor(t=[]){for(let a=t.length-1;a>=0;a--)if(t[a].enabled){f9(t,t[a]);break}super(t),this.changing_=!1}addTrack(t){t.enabled&&f9(this,t),super.addTrack(t),t.addEventListener&&(t.enabledChange_=()=>{this.changing_||(this.changing_=!0,f9(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}},z9=function(e,t){for(let a=0;a<e.length;a++)!Object.keys(e[a]).length||t.id===e[a].id||(e[a].selected=!1)},k9=class extends O0{constructor(t=[]){for(let a=t.length-1;a>=0;a--)if(t[a].selected){z9(t,t[a]);break}super(t),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set(){}})}addTrack(t){t.selected&&z9(this,t),super.addTrack(t),t.addEventListener&&(t.selectedChange_=()=>{this.changing_||(this.changing_=!0,z9(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)}},hl=class extends O0{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}},P9=class{constructor(t=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let a=0,r=t.length;a<r;a++)this.addTrackElement_(t[a])}addTrackElement_(t){let a=this.trackElements_.length;""+a in this||Object.defineProperty(this,a,{get(){return this.trackElements_[a]}}),this.trackElements_.indexOf(t)===-1&&this.trackElements_.push(t)}getTrackElementByTrack_(t){let a;for(let r=0,n=this.trackElements_.length;r<n;r++)if(t===this.trackElements_[r].track){a=this.trackElements_[r];break}return a}removeTrackElement_(t){for(let a=0,r=this.trackElements_.length;a<r;a++)if(t===this.trackElements_[a]){this.trackElements_[a].track&&typeof this.trackElements_[a].track.off=="function"&&this.trackElements_[a].track.off(),typeof this.trackElements_[a].off=="function"&&this.trackElements_[a].off(),this.trackElements_.splice(a,1);break}}},Xa=class{constructor(t){Xa.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){let a=this.length||0,r=0,n=t.length;this.cues_=t,this.length_=t.length;let i=function(h){""+h in this||Object.defineProperty(this,""+h,{get(){return this.cues_[h]}})};if(a<n)for(r=a;r<n;r++)i.call(this,r)}getCueById(t){let a=null;for(let r=0,n=this.length;r<n;r++){let i=this[r];if(i.id===t){a=i;break}}return a}},Ny={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Fy={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Uy={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},qp={disabled:"disabled",hidden:"hidden",showing:"showing"},t5=class extends c2{constructor(t={}){super();let a={id:t.id||"vjs_track_"+Ce(),kind:t.kind||"",language:t.language||""},r=t.label||"";for(let n in a)Object.defineProperty(this,n,{get(){return a[n]},set(){}});Object.defineProperty(this,"label",{get(){return r},set(n){n!==r&&(r=n,this.trigger("labelchange"))}})}},B6=function(e){let t=["protocol","hostname","port","pathname","search","hash","host"],a=a1.default.createElement("a");a.href=e;let r={};for(let n=0;n<t.length;n++)r[t[n]]=a[t[n]];return r.protocol==="http:"&&(r.host=r.host.replace(/:80$/,"")),r.protocol==="https:"&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=P.default.location.protocol),r.host||(r.host=P.default.location.host),r},gz=function(e){if(!e.match(/^https?:\/\//)){let t=a1.default.createElement("a");t.href=e,e=t.href}return e},S6=function(e){if(typeof e=="string"){let a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(a)return a.pop().toLowerCase()}return""},ro=function(e,t=P.default.location){let a=B6(e);return(a.protocol===":"?t.protocol:a.protocol)+a.host!==t.protocol+t.host},$y=Object.freeze({__proto__:null,parseUrl:B6,getAbsoluteURL:gz,getFileExtension:S6,isCrossOrigin:ro}),Kp=function(e,t){let a=new P.default.WebVTT.Parser(P.default,P.default.vttjs,P.default.WebVTT.StringDecoder()),r=[];a.oncue=function(n){t.addCue(n)},a.onparsingerror=function(n){r.push(n)},a.onflush=function(){t.trigger({type:"loadeddata",target:t})},a.parse(e),r.length>0&&(P.default.console&&P.default.console.groupCollapsed&&P.default.console.groupCollapsed(`Text Track parsing errors for ${t.src}`),r.forEach(n=>w1.error(n)),P.default.console&&P.default.console.groupEnd&&P.default.console.groupEnd()),a.flush()},Xp=function(e,t){let a={uri:e},r=ro(e);r&&(a.cors=r);let n=t.tech_.crossOrigin()==="use-credentials";n&&(a.withCredentials=n),(0,m6.default)(a,U1(this,function(i,h,l){if(i)return w1.error(i,h);t.loaded_=!0,typeof P.default.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],c=>{if(c.type==="vttjserror"){w1.error(`vttjs failed to load, stopping trying to process ${t.src}`);return}return Kp(l,t)}):Kp(l,t)}))},y4=class extends t5{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");let a=F1(t,{kind:Uy[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=qp[a.mode]||"disabled",n=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(r="hidden"),super(a),this.tech_=a.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;let i=new Xa(this.cues_),h=new Xa(this.activeCues_),l=!1;this.timeupdateHandler=U1(this,function(v={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){v.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),v.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});let c=()=>{this.stopTracking()};this.tech_.one("dispose",c),r!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return r},set(v){qp[v]&&r!==v&&(r=v,!this.preload_&&r!=="disabled"&&this.cues.length===0&&Xp(this.src,this),this.stopTracking(),r!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?i:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return h;let v=this.tech_.currentTime(),d=[];for(let z=0,L=this.cues.length;z<L;z++){let y=this.cues[z];y.startTime<=v&&y.endTime>=v&&d.push(y)}if(l=!1,d.length!==this.activeCues_.length)l=!0;else for(let z=0;z<d.length;z++)this.activeCues_.indexOf(d[z])===-1&&(l=!0);return this.activeCues_=d,h.setCues_(this.activeCues_),h},set(){}}}),a.src?(this.src=a.src,this.preload_||(this.loaded_=!0),(this.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&Xp(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let a=t;if(P.default.vttjs&&!(t instanceof P.default.vttjs.VTTCue)){a=new P.default.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(let n in t)n in a||(a[n]=t[n]);a.id=t.id,a.originalCue_=t}let r=this.tech_.textTracks();for(let n=0;n<r.length;n++)r[n]!==this&&r[n].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)}removeCue(t){let a=this.cues_.length;for(;a--;){let r=this.cues_[a];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}}};y4.prototype.allowedEvents_={cuechange:"cuechange"};var ll=class extends t5{constructor(t={}){let a=F1(t,{kind:Fy[t.kind]||""});super(a);let r=!1;Object.defineProperty(this,"enabled",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("enabledchange"))}}),a.enabled&&(this.enabled=a.enabled),this.loaded_=!0}},ol=class extends t5{constructor(t={}){let a=F1(t,{kind:Ny[t.kind]||""});super(a);let r=!1;Object.defineProperty(this,"selected",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("selectedchange"))}}),a.selected&&(this.selected=a.selected)}},ee=class extends c2{constructor(t={}){super();let a,r=new y4(t);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get(){return a}},track:{get(){return r}}}),a=ee.NONE,r.addEventListener("loadeddata",()=>{a=ee.LOADED,this.trigger({type:"load",target:this})})}};ee.prototype.allowedEvents_={load:"load"};ee.NONE=0;ee.LOADING=1;ee.LOADED=2;ee.ERROR=3;var P2={audio:{ListClass:E9,TrackClass:ll,capitalName:"Audio"},video:{ListClass:k9,TrackClass:ol,capitalName:"Video"},text:{ListClass:hl,TrackClass:y4,capitalName:"Text"}};Object.keys(P2).forEach(function(e){P2[e].getterName=`${e}Tracks`,P2[e].privateName=`${e}Tracks_`});var Ya={remoteText:{ListClass:hl,TrackClass:y4,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:P9,TrackClass:ee,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Wt=Object.assign({},P2,Ya);Ya.names=Object.keys(Ya);P2.names=Object.keys(P2);Wt.names=[].concat(Ya.names).concat(P2.names);function Wy(e,t,a,r,n={}){let i=e.textTracks();n.kind=t,a&&(n.label=a),r&&(n.language=r),n.tech=e;let h=new Wt.text.TrackClass(n);return i.addTrack(h),h}var f1=class extends G{constructor(t={},a=function(){}){t.reportTouchActivity=!1,super(null,t,a),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Wt.names.forEach(r=>{let n=Wt[r];t&&t[n.getterName]&&(this[n.privateName]=t[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{t[`native${r}Tracks`]===!1&&(this[`featuresNative${r}Tracks`]=!1)}),t.nativeCaptions===!1||t.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(t.nativeCaptions===!0||t.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=t.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Wt.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(U1(this,function(){let a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return Ve(0,0)}bufferedPercent(){return uz(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(P2.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){t=[].concat(t),t.forEach(a=>{let r=this[`${a}Tracks`]()||[],n=r.length;for(;n--;){let i=r[n];a==="text"&&this.removeRemoteTextTrack(i),r.removeTrack(i)}})}cleanupAutoTextTracks(){let t=this.autoRemoteTextTracks_||[],a=t.length;for(;a--;){let r=t[a];this.removeRemoteTextTrack(r)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return t!==void 0&&(this.error_=new qt(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?Ve(0,0):Ve()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){P2.names.forEach(t=>{let a=P2[t],r=()=>{this.trigger(`${t}trackchange`)},n=this[a.getterName]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),this.on("dispose",()=>{n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!P.default.WebVTT)if(a1.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&Wa(B9.default)&&Object.keys(B9.default).length>0){this.trigger("vttjsloaded");return}let t=a1.default.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),P.default.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let t=this.textTracks(),a=this.remoteTextTracks(),r=l=>t.addTrack(l.track),n=l=>t.removeTrack(l.track);a.on("addtrack",r),a.on("removetrack",n),this.addWebVttScript_();let i=()=>this.trigger("texttrackchange"),h=()=>{i();for(let l=0;l<t.length;l++){let c=t[l];c.removeEventListener("cuechange",i),c.mode==="showing"&&c.addEventListener("cuechange",i)}};h(),t.addEventListener("change",h),t.addEventListener("addtrack",h),t.addEventListener("removetrack",h),this.on("dispose",function(){a.off("addtrack",r),a.off("removetrack",n),t.removeEventListener("change",h),t.removeEventListener("addtrack",h),t.removeEventListener("removetrack",h);for(let l=0;l<t.length;l++)t[l].removeEventListener("cuechange",i)})}addTextTrack(t,a,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return Wy(this,t,a,r)}createRemoteTextTrack(t){let a=F1(t,{tech:this});return new Ya.remoteTextEl.TrackClass(a)}addRemoteTextTrack(t={},a){let r=this.createRemoteTextTrack(t);return typeof a!="boolean"&&(a=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),a===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(t){let a=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){let a=Ce();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",()=>{this.queuedHanders_.has(a)&&(this.queuedHanders_.delete(a),t())})):this.requestNamedAnimationFrame(a,t),a}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,a){return f1.canPlayType(t.type)}static isTech(t){return t.prototype instanceof f1||t instanceof f1||t===f1}static registerTech(t,a){if(f1.techs_||(f1.techs_={}),!f1.isTech(a))throw new Error(`Tech ${t} must be a Tech`);if(!f1.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!f1.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=rt(t),f1.techs_[t]=a,f1.techs_[Gn(t)]=a,t!=="Tech"&&f1.defaultTechOrder_.push(t),a}static getTech(t){if(t){if(f1.techs_&&f1.techs_[t])return f1.techs_[t];if(t=rt(t),P.default&&P.default.videojs&&P.default.videojs[t])return w1.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),P.default.videojs[t]}}};Wt.names.forEach(function(e){let t=Wt[e];f1.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}});f1.prototype.featuresVolumeControl=!0;f1.prototype.featuresMuteControl=!0;f1.prototype.featuresFullscreenResize=!1;f1.prototype.featuresPlaybackRate=!1;f1.prototype.featuresProgressEvents=!1;f1.prototype.featuresSourceset=!1;f1.prototype.featuresTimeupdateEvents=!1;f1.prototype.featuresNativeTextTracks=!1;f1.prototype.featuresVideoFrameCallback=!1;f1.withSourceHandlers=function(e){e.registerSourceHandler=function(a,r){let n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),r===void 0&&(r=n.length),n.splice(r,0,a)},e.canPlayType=function(a){let r=e.sourceHandlers||[],n;for(let i=0;i<r.length;i++)if(n=r[i].canPlayType(a),n)return n;return""},e.selectSourceHandler=function(a,r){let n=e.sourceHandlers||[],i;for(let h=0;h<n.length;h++)if(i=n[h].canHandleSource(a,r),i)return n[h];return null},e.canPlaySource=function(a,r){let n=e.selectSourceHandler(a,r);return n?n.canHandleSource(a,r):""},["seekable","seeking","duration"].forEach(function(a){let r=this[a];typeof r=="function"&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(a){let r=e.selectSourceHandler(a,this.options_);r||(e.nativeSourceHandler?r=e.nativeSourceHandler:w1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==e.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=r.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};G.registerComponent("Tech",f1);f1.registerTech("Tech",f1);f1.defaultTechOrder_=[];var w4={},D9={},cl={};function Gy(e,t){w4[e]=w4[e]||[],w4[e].push(t)}function qy(e,t,a){e.setTimeout(()=>m4(t,w4[t.type],a,e),1)}function Ky(e,t){e.forEach(a=>a.setTech&&a.setTech(t))}function Xy(e,t,a){return e.reduceRight(_6(a),t[a]())}function Yy(e,t,a,r){return t[a](e.reduce(_6(a),r))}function Yp(e,t,a,r=null){let n="call"+rt(a),i=e.reduce(_6(n),r),h=i===cl,l=h?null:t[a](i);return Zy(e,a,l,h),l}var Qy={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Jy={setCurrentTime:1,setMuted:1,setVolume:1},Qp={play:1,pause:1};function _6(e){return(t,a)=>t===cl?cl:a[e]?a[e](t):t}function Zy(e,t,a,r){for(let n=e.length-1;n>=0;n--){let i=e[n];i[t]&&i[t](r,a)}}function tC(e){D9[e.id()]=null}function eC(e,t){let a=D9[e.id()],r=null;if(a==null)return r=t(e),D9[e.id()]=[[t,r]],r;for(let n=0;n<a.length;n++){let[i,h]=a[n];i===t&&(r=h)}return r===null&&(r=t(e),a.push([t,r])),r}function m4(e={},t=[],a,r,n=[],i=!1){let[h,...l]=t;if(typeof h=="string")m4(e,w4[h],a,r,n,i);else if(h){let c=eC(r,h);if(!c.setSource)return n.push(c),m4(e,l,a,r,n,i);c.setSource(Object.assign({},e),function(v,d){if(v)return m4(e,l,a,r,n,i);n.push(c),m4(d,e.type===d.type?l:w4[d.type],a,r,n,i)})}else l.length?m4(e,l,a,r,n,i):i?a(e,n):m4(e,w4["*"],a,r,n,!0)}var aC={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},sl=function(e=""){let t=S6(e);return aC[t.toLowerCase()]||""},rC=(e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;let a=e.cache_.sources.filter(n=>n.src===t);if(a.length)return a[0].type;let r=e.$$("source");for(let n=0;n<r.length;n++){let i=r[n];if(i.type&&i.src&&i.src===t)return i.type}return sl(t)},pz=function(e){if(Array.isArray(e)){let t=[];e.forEach(function(a){a=pz(a),Array.isArray(a)?t=t.concat(a):we(a)&&t.push(a)}),e=t}else typeof e=="string"&&e.trim()?e=[Jp({src:e})]:we(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[Jp(e)]:e=[];return e};function Jp(e){if(!e.type){let t=sl(e.src);t&&(e.type=t)}return e}var I9=class extends G{constructor(t,a,r){let n=F1({createEl:!1},a);if(super(t,n,r),!a.playerOptions.sources||a.playerOptions.sources.length===0)for(let i=0,h=a.playerOptions.techOrder;i<h.length;i++){let l=rt(h[i]),c=f1.getTech(l);if(l||(c=G.getComponent(l)),c&&c.isSupported()){t.loadTech_(l);break}}else t.src(a.playerOptions.sources)}};G.registerComponent("MediaLoader",I9);var Qa=class extends G{constructor(t,a){super(t,a),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(t="div",a={},r={}){a=Object.assign({className:this.buildCSSClass(),tabIndex:0},a),t==="button"&&w1.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=a.tabIndex;let n=m1(t,a,r);return n.appendChild(m1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=m1("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,a=this.el()){if(t===void 0)return this.controlText_||"Need Text";let r=this.localize(t);this.controlText_=t,k0(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){z1.default.isEventKey(t,"Space")||z1.default.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}};G.registerComponent("ClickableComponent",Qa);var e5=class extends Qa{constructor(t,a){super(t,a),this.update(),this.update_=r=>this.update(r),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return m1("div",{className:"vjs-poster"})}crossOrigin(t){if(typeof t>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(t!==null&&t!=="anonymous"&&t!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`);return}this.$("img")&&(this.$("img").crossOrigin=t)}update(t){let a=this.player().poster();this.setSrc(a),a?this.show():this.hide()}setSrc(t){if(!t){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(m1("picture",{className:"vjs-poster",tabIndex:-1},{},m1("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?me(this.player_.play()):this.player_.pause())}};e5.prototype.crossorigin=e5.prototype.crossOrigin;G.registerComponent("PosterImage",e5);var k2="#222",Zp="#ccc",nC={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function M9(e,t){let a;if(e.length===4)a=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else if(e.length===7)a=e.slice(1);else throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+t+")"}function m9(e,t,a){try{e.style[t]=a}catch{return}}var j9=class extends G{constructor(t,a,r){super(t,a,r);let n=i=>this.updateDisplay(i);t.on("loadstart",i=>this.toggleDisplay(i)),t.on("texttrackchange",n),t.on("loadedmetadata",i=>this.preselectTrack(i)),t.ready(U1(this,function(){if(t.tech_&&t.tech_.featuresNativeTextTracks){this.hide();return}t.on("fullscreenchange",n),t.on("playerresize",n);let i=P.default.screen.orientation||P.default,h=P.default.screen.orientation?"change":"orientationchange";i.addEventListener(h,n),t.on("dispose",()=>i.removeEventListener(h,n));let l=this.options_.playerOptions.tracks||[];for(let c=0;c<l.length;c++)this.player_.addRemoteTextTrack(l[c],!0);this.preselectTrack()}))}preselectTrack(){let t={captions:1,subtitles:1},a=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,n,i,h;for(let l=0;l<a.length;l++){let c=a[l];r&&r.enabled&&r.language&&r.language===c.language&&c.kind in t?c.kind===r.kind?h=c:h||(h=c):r&&!r.enabled?(h=null,n=null,i=null):c.default&&(c.kind==="descriptions"&&!n?n=c:c.kind in t&&!i&&(i=c))}h?h.mode="showing":i?i.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof P.default.WebVTT=="function"&&P.default.WebVTT.processCues(P.default,[],this.el_)}updateDisplay(){let t=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){let h=[];for(let l=0;l<t.length;++l){let c=t[l];c.mode==="showing"&&h.push(c)}this.updateForTrack(h);return}let r=null,n=null,i=t.length;for(;i--;){let h=t[i];h.mode==="showing"&&(h.kind==="descriptions"?r=h:n=h)}n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):r&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayState(t){let a=this.player_.textTrackSettings.getValues(),r=t.activeCues,n=r.length;for(;n--;){let i=r[n];if(!i)continue;let h=i.displayState;if(a.color&&(h.firstChild.style.color=a.color),a.textOpacity&&m9(h.firstChild,"color",M9(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(h.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&m9(h.firstChild,"backgroundColor",M9(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?m9(h,"backgroundColor",M9(a.windowColor,a.windowOpacity)):h.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?h.firstChild.style.textShadow=`2px 2px 3px ${k2}, 2px 2px 4px ${k2}, 2px 2px 5px ${k2}`:a.edgeStyle==="raised"?h.firstChild.style.textShadow=`1px 1px ${k2}, 2px 2px ${k2}, 3px 3px ${k2}`:a.edgeStyle==="depressed"?h.firstChild.style.textShadow=`1px 1px ${Zp}, 0 1px ${Zp}, -1px -1px ${k2}, 0 -1px ${k2}`:a.edgeStyle==="uniform"&&(h.firstChild.style.textShadow=`0 0 4px ${k2}, 0 0 4px ${k2}, 0 0 4px ${k2}, 0 0 4px ${k2}`)),a.fontPercent&&a.fontPercent!==1){let l=P.default.parseFloat(h.style.fontSize);h.style.fontSize=l*a.fontPercent+"px",h.style.height="auto",h.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?h.firstChild.style.fontVariant="small-caps":h.firstChild.style.fontFamily=nC[a.fontFamily])}}updateForTrack(t){if(Array.isArray(t)||(t=[t]),typeof P.default.WebVTT!="function"||t.every(r=>!r.activeCues))return;let a=[];for(let r=0;r<t.length;++r){let n=t[r];for(let i=0;i<n.activeCues.length;++i)a.push(n.activeCues[i])}P.default.WebVTT.processCues(P.default,a,this.el_);for(let r=0;r<t.length;++r){let n=t[r];for(let i=0;i<n.activeCues.length;++i){let h=n.activeCues[i].displayState;V4(h,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:r)),n.language&&Ga(h,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}};G.registerComponent("TextTrackDisplay",j9);var R9=class extends G{createEl(){let t=this.player_.isAudio(),a=this.localize(t?"Audio Player":"Video Player"),r=m1("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(r),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};G.registerComponent("LoadingSpinner",R9);var Yt=class extends Qa{createEl(t,a={},r={}){t="button",a=Object.assign({className:this.buildCSSClass()},a),r=Object.assign({type:"button"},r);let n=m1(t,a,r);return n.appendChild(m1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(t,a={}){let r=this.constructor.name;return w1.warn(`Adding an actionable (user controllable) child to a Button (${r}) is not supported; use a ClickableComponent instead.`),G.prototype.addChild.call(this,t,a)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){if(z1.default.isEventKey(t,"Space")||z1.default.isEventKey(t,"Enter")){t.stopPropagation();return}super.handleKeyDown(t)}};G.registerComponent("Button",Yt);var vl=class extends Yt{constructor(t,a){super(t,a),this.mouseused_=!1,this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){let a=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){me(a),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}let r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}let i=()=>n.focus();qn(a)?a.then(i,()=>{}):this.setTimeout(i,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}};vl.prototype.controlText_="Play Video";G.registerComponent("BigPlayButton",vl);var N9=class extends Yt{constructor(t,a){super(t,a),this.controlText(a&&a.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(t){this.trigger({type:"close",bubbles:!1})}handleKeyDown(t){z1.default.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}};G.registerComponent("CloseButton",N9);var dl=class extends Yt{constructor(t,a={}){super(t,a),a.replay=a.replay===void 0||a.replay,this.on(t,"play",r=>this.handlePlay(r)),this.on(t,"pause",r=>this.handlePause(r)),a.replay&&this.on(t,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?me(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",a=>this.handleSeeked(a))}};dl.prototype.controlText_="Play";G.registerComponent("PlayToggle",dl);var b0=class extends G{constructor(t,a){super(t,a),this.on(t,["timeupdate","ended"],r=>this.updateContent(r)),this.updateTextNode_()}createEl(){let t=this.buildCSSClass(),a=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),r=m1("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xA0`},{role:"presentation"});return a.appendChild(r),this.contentEl_=m1("span",{className:`${t}-display`},{role:"presentation"}),a.appendChild(this.contentEl_),a}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(t=0){t=L4(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let a=this.textNode_;a&&this.contentEl_.firstChild!==a&&(a=null,w1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=a1.default.createTextNode(this.formattedTime_),this.textNode_&&(a?this.contentEl_.replaceChild(this.textNode_,a):this.contentEl_.appendChild(this.textNode_))}))}updateContent(t){}};b0.prototype.labelText_="Time";b0.prototype.controlText_="Time";G.registerComponent("TimeDisplay",b0);var a5=class extends b0{buildCSSClass(){return"vjs-current-time"}updateContent(t){let a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)}};a5.prototype.labelText_="Current Time";a5.prototype.controlText_="Current Time";G.registerComponent("CurrentTimeDisplay",a5);var r5=class extends b0{constructor(t,a){super(t,a);let r=n=>this.updateContent(n);this.on(t,"durationchange",r),this.on(t,"loadstart",r),this.on(t,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(t){let a=this.player_.duration();this.updateTextNode_(a)}};r5.prototype.labelText_="Duration";r5.prototype.controlText_="Duration";G.registerComponent("DurationDisplay",r5);var F9=class extends G{createEl(){let t=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return a.appendChild(r),t.appendChild(a),t}};G.registerComponent("TimeDivider",F9);var n5=class extends b0{constructor(t,a){super(t,a),this.on(t,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){let t=super.createEl();return this.options_.displayNegative!==!1&&t.insertBefore(m1("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if(typeof this.player_.duration()!="number")return;let a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}};n5.prototype.labelText_="Remaining Time";n5.prototype.controlText_="Remaining Time";G.registerComponent("RemainingTimeDisplay",n5);var U9=class extends G{constructor(t,a){super(t,a),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){let t=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=m1("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(m1("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xA0`})),this.contentEl_.appendChild(a1.default.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,super.dispose()}updateShowing(t){this.player().duration()===1/0?this.show():this.hide()}};G.registerComponent("LiveDisplay",U9);var ul=class extends Yt{constructor(t,a){super(t,a),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){let t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=m1("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};ul.prototype.controlText_="Seek to live, currently playing live";G.registerComponent("SeekToLive",ul);function m5(e,t,a){return e=Number(e),Math.min(a,Math.max(t,isNaN(e)?t:e))}var iC=Object.freeze({__proto__:null,clamp:m5}),i5=class extends G{constructor(t,a){super(t,a),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;let t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,a={},r={}){return a.className=a.className+" vjs-slider",a=Object.assign({tabIndex:0},a),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(t,a,r)}handleMouseDown(t){let a=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type==="touchstart"&&!ye&&t.preventDefault(),Xf(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){let a=this.bar.el_.ownerDocument;Yf(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;let t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{let a=this.vertical()?"height":"width";this.bar.el().style[a]=(t*100).toFixed(2)+"%"})),t}getProgress(){return Number(m5(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){let a=Jl(this.el_,t);return this.vertical()?a.y:a.x}handleKeyDown(t){z1.default.isEventKey(t,"Left")||z1.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):z1.default.isEventKey(t,"Right")||z1.default.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};G.registerComponent("Slider",i5);var H9=(e,t)=>m5(e/t*100,0,100).toFixed(2)+"%",$9=class extends G{constructor(t,a){super(t,a),this.partEls_=[],this.on(t,"progress",r=>this.update(r))}createEl(){let t=super.createEl("div",{className:"vjs-load-progress"}),a=m1("span",{className:"vjs-control-text"}),r=m1("span",{textContent:this.localize("Loaded")}),n=a1.default.createTextNode(": ");return this.percentageEl_=m1("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(a),a.appendChild(r),a.appendChild(n),a.appendChild(this.percentageEl_),t}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(t){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{let a=this.player_.liveTracker,r=this.player_.buffered(),n=a&&a.isLive()?a.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),h=this.partEls_,l=H9(i,n);this.percent_!==l&&(this.el_.style.width=l,k0(this.percentageEl_,l),this.percent_=l);for(let c=0;c<r.length;c++){let v=r.start(c),d=r.end(c),z=h[c];z||(z=this.el_.appendChild(m1()),h[c]=z),!(z.dataset.start===v&&z.dataset.end===d)&&(z.dataset.start=v,z.dataset.end=d,z.style.left=H9(v,i),z.style.width=H9(d-v,i))}for(let c=h.length;c>r.length;c--)this.el_.removeChild(h[c-1]);h.length=r.length})}};G.registerComponent("LoadProgressBar",$9);var W9=class extends G{constructor(t,a){super(t,a),this.update=Be(U1(this,this.update),D2)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(t,a,r){let n=Jn(this.el_),i=qa(this.player_.el()),h=t.width*a;if(!i||!n)return;let l=t.left-i.left+h,c=t.width-h+(i.right-t.right),v=n.width/2;l<v?v+=v-l:c<v&&(v=c),v<0?v=0:v>n.width&&(v=n.width),v=Math.round(v),this.el_.style.right=`-${v}px`,this.write(r)}write(t){k0(this.el_,t)}updateTime(t,a,r,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let i,h=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){let l=this.player_.liveTracker.liveWindow(),c=l-a*l;i=(c<1?"":"-")+L4(c,l)}else i=L4(r,h);this.update(t,a,i),n&&n()})}};G.registerComponent("TimeTooltip",W9);var h5=class extends G{constructor(t,a){super(t,a),this.update=Be(U1(this,this.update),D2)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,a){let r=this.getChild("timeTooltip");if(!r)return;let n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(t,a,n)}};h5.prototype.options_={children:[]};!Xt&&!Le&&h5.prototype.options_.children.push("timeTooltip");G.registerComponent("PlayProgressBar",h5);var gl=class extends G{constructor(t,a){super(t,a),this.update=Be(U1(this,this.update),D2)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,a){let r=a*this.player_.duration();this.getChild("timeTooltip").updateTime(t,a,r,()=>{this.el_.style.left=`${t.width*a}px`})}};gl.prototype.options_={children:["timeTooltip"]};G.registerComponent("MouseTimeDisplay",gl);var Xh=5,tf=12,l5=class extends i5{constructor(t,a){super(t,a),this.setEventHandlers_()}setEventHandlers_(){this.update_=U1(this,this.update),this.update=Be(this.update_,D2),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a1.default&&"visibilityState"in a1.default&&this.on(a1.default,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){a1.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,D2))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if(a1.default.visibilityState==="hidden")return;let a=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{let r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker,i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==a&&(this.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),this.percent_=a),(this.currentTime_!==r||this.duration_!==i)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[L4(r,i),L4(i,i)],"{1} of {2}")),this.currentTime_=r,this.duration_=i),this.bar&&this.bar.update(qa(this.el()),this.getProgress())}),a}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){let t=this.getCurrentTime_(),a,r=this.player_.liveTracker;return r&&r.isLive()?(a=(t-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(a=1)):a=t/this.player_.duration(),a}handleMouseDown(t){Zn(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,a=!1){if(!Zn(t))return;!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let r,n=this.calculateDistance(t),i=this.player_.liveTracker;if(!i||!i.isLive())r=n*this.player_.duration(),r===this.player_.duration()&&(r=r-.1);else{if(n>=.99){i.seekToLiveEdge();return}let h=i.seekableStart(),l=i.liveCurrentTime();if(r=h+n*i.liveWindow(),r>=l&&(r=l),r<=h&&(r=h+.1),r===1/0)return}this.userSeek_(r)}enable(){super.enable();let t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();let t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?me(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+Xh)}stepBack(){this.userSeek_(this.player_.currentTime()-Xh)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){let a=this.player_.liveTracker;if(z1.default.isEventKey(t,"Space")||z1.default.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(z1.default.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(z1.default.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test((0,z1.default)(t))){t.preventDefault(),t.stopPropagation();let r=(z1.default.codes[(0,z1.default)(t)]-z1.default.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else z1.default.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-Xh*tf)):z1.default.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+Xh*tf)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in a1.default&&"visibilityState"in a1.default&&this.off(a1.default,"visibilitychange",this.toggleVisibility_),super.dispose()}};l5.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!Xt&&!Le&&l5.prototype.options_.children.splice(1,0,"mouseTimeDisplay");G.registerComponent("SeekBar",l5);var pl=class extends G{constructor(t,a){super(t,a),this.handleMouseMove=Be(U1(this,this.handleMouseMove),D2),this.throttledHandleMouseSeek=Be(U1(this,this.handleMouseSeek),D2),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){let a=this.getChild("seekBar");if(!a)return;let r=a.getChild("playProgressBar"),n=a.getChild("mouseTimeDisplay");if(!r&&!n)return;let i=a.el(),h=Jn(i),l=Jl(i,t).x;l=m5(l,0,1),n&&n.update(h,l),r&&r.update(h,a.getProgress())}handleMouseSeek(t){let a=this.getChild("seekBar");a&&a.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach(t=>t.disable&&t.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){let t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&me(this.player_.play())}}enable(){this.children().forEach(t=>t.enable&&t.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){let t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){let a=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(t),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){let a=this.getChild("seekBar");a&&a.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}};pl.prototype.options_={children:["seekBar"]};G.registerComponent("ProgressControl",pl);var fl=class extends Yt{constructor(t,a){super(t,a),this.on(t,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{t.currentType().substring(0,5)==="audio"||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){a1.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in P.default?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}};fl.prototype.controlText_="Picture-in-Picture";G.registerComponent("PictureInPictureToggle",fl);var zl=class extends Yt{constructor(t,a){super(t,a),this.on(t,"fullscreenchange",r=>this.handleFullscreenChange(r)),a1.default[t.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};zl.prototype.controlText_="Fullscreen";G.registerComponent("FullscreenToggle",zl);var hC=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},G9=class extends G{createEl(){let t=super.createEl("div",{className:"vjs-volume-level"});return t.appendChild(super.createEl("span",{className:"vjs-control-text"})),t}};G.registerComponent("VolumeLevel",G9);var q9=class extends G{constructor(t,a){super(t,a),this.update=Be(U1(this,this.update),D2)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t,a,r,n){if(!r){let i=qa(this.el_),h=qa(this.player_.el()),l=t.width*a;if(!h||!i)return;let c=t.left-h.left+l,v=t.width-l+(h.right-t.right),d=i.width/2;c<d?d+=d-c:v<d&&(d=v),d<0?d=0:d>i.width&&(d=i.width),this.el_.style.right=`-${d}px`}this.write(`${n}%`)}write(t){k0(this.el_,t)}updateVolume(t,a,r,n,i){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(t,a,r,n.toFixed(0)),i&&i()})}};G.registerComponent("VolumeLevelTooltip",q9);var Ml=class extends G{constructor(t,a){super(t,a),this.update=Be(U1(this,this.update),D2)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,a,r){let n=100*a;this.getChild("volumeLevelTooltip").updateVolume(t,a,r,n,()=>{r?this.el_.style.bottom=`${t.height*a}px`:this.el_.style.left=`${t.width*a}px`})}};Ml.prototype.options_={children:["volumeLevelTooltip"]};G.registerComponent("MouseVolumeLevelDisplay",Ml);var Ja=class extends i5{constructor(t,a){super(t,a),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(t,"volumechange",r=>this.updateARIAAttributes(r)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){Zn(t)&&super.handleMouseDown(t)}handleMouseMove(t){let a=this.getChild("mouseVolumeLevelDisplay");if(a){let r=this.el(),n=qa(r),i=this.vertical(),h=Jl(r,t);h=i?h.y:h.x,h=m5(h,0,1),a.update(n,h,i)}Zn(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){let a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){let t=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(t)})}};Ja.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Xt&&!Le&&Ja.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Ja.prototype.playerEvent="volumechange";G.registerComponent("VolumeBar",Ja);var ml=class extends G{constructor(t,a={}){a.vertical=a.vertical||!1,(typeof a.volumeBar>"u"||Wa(a.volumeBar))&&(a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=a.vertical),super(t,a),hC(this,t),this.throttledHandleMouseMove=Be(U1(this,this.handleMouseMove),D2),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){let a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){let a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}};ml.prototype.options_={children:["volumeBar"]};G.registerComponent("VolumeControl",ml);var lC=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Hl=class extends Yt{constructor(t,a){super(t,a),lC(this,t),this.on(t,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){let a=this.player_.volume(),r=this.player_.lastVolume_();if(a===0){let n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){let t=this.player_.volume(),a=3;Xt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?a=0:t<.33?a=1:t<.67&&(a=2),Yl(this.el_,[0,1,2,3].reduce((r,n)=>r+`${n?" ":""}vjs-vol-${n}`,"")),V4(this.el_,`vjs-vol-${a}`)}updateControlText_(){let a=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)}};Hl.prototype.controlText_="Mute";G.registerComponent("MuteToggle",Hl);var xl=class extends G{constructor(t,a={}){typeof a.inline<"u"?a.inline=a.inline:a.inline=!0,(typeof a.volumeControl>"u"||Wa(a.volumeControl))&&(a.volumeControl=a.volumeControl||{},a.volumeControl.vertical=!a.inline),super(t,a),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(t,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){z1.default.isEventKey(t,"Esc")&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),H2(a1.default,"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),kt(a1.default,"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){z1.default.isEventKey(t,"Esc")&&this.handleMouseOut()}};xl.prototype.options_={children:["muteToggle","volumeControl"]};G.registerComponent("VolumePanel",xl);var K9=class extends Yt{constructor(t,a){super(t,a),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){let t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(t){let a=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()?r.seekableEnd():this.player_.duration(),i;a+this.skipTime<=n?i=a+this.skipTime:i=n,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}};G.registerComponent("SkipForward",K9);var Vl=class extends Yt{constructor(t,a){super(t,a),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){let t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(t){let a=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()&&r.seekableStart(),i;n&&a-this.skipTime<=n?i=n:a>=this.skipTime?i=a-this.skipTime:i=0,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}};Vl.prototype.controlText_="Skip Backward";G.registerComponent("SkipBackward",Vl);var wl=class extends G{constructor(t,a){super(t,a),a&&(this.menuButton_=a.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(t){t instanceof G&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof G&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){let a=this.addChild(t);a&&this.addEventListenerForItem(a)}createEl(){let t=this.options_.contentElType||"ul";this.contentEl_=m1(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");let a=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),H2(a,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),a}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){let a=t.relatedTarget||a1.default.activeElement;if(!this.children().some(r=>r.el()===a)){let r=this.menuButton_;r&&r.buttonPressed_&&a!==r.el().firstChild&&r.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();let a=this.children();if(!Array.isArray(a))return;let r=a.filter(n=>n.el()===t.target)[0];if(!r)return;r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(t){z1.default.isEventKey(t,"Left")||z1.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(z1.default.isEventKey(t,"Right")||z1.default.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){let a=this.children().slice();a.length&&a[0].hasClass("vjs-menu-title")&&a.shift(),a.length>0&&(t<0?t=0:t>=a.length&&(t=a.length-1),this.focusedChild_=t,a[t].el_.focus())}};G.registerComponent("Menu",wl);var o5=class extends G{constructor(t,a={}){super(t,a),this.menuButton_=new Yt(t,a),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");let r=Yt.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;let n=i=>this.handleClick(i);this.handleMenuKeyUp_=i=>this.handleMenuKeyUp(i),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",i=>this.handleKeyDown(i)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),H2(a1.default,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",i=>this.handleMouseLeave(i)),this.on("keydown",i=>this.handleSubmenuKeyDown(i))}update(){let t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){let t=new wl(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){let a=m1("li",{className:"vjs-menu-title",textContent:rt(this.options_.title),tabIndex:-1}),r=new G(this.player_,{el:a});t.addItem(r)}if(this.items=this.createItems(),this.items)for(let a=0;a<this.items.length;a++)t.addItem(this.items[a]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let t="vjs-menu-button";this.options_.inline===!0?t+="-inline":t+="-popup";let a=Yt.prototype.buildCSSClass();return`vjs-menu-button ${t} ${a} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,a=this.menuButton_.el()){return this.menuButton_.controlText(t,a)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),kt(a1.default,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){z1.default.isEventKey(t,"Esc")||z1.default.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),z1.default.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(z1.default.isEventKey(t,"Up")||z1.default.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))}handleMenuKeyUp(t){(z1.default.isEventKey(t,"Esc")||z1.default.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){(z1.default.isEventKey(t,"Esc")||z1.default.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),z1.default.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Xt&&$f())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};G.registerComponent("MenuButton",o5);var c5=class extends o5{constructor(t,a){let r=a.tracks;if(super(t,a),this.items.length<=1&&this.hide(),!r)return;let n=U1(this,this.update);r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),r.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n),r.removeEventListener("labelchange",n)})}};G.registerComponent("TrackButton",c5);var oC=["Tab","Esc","Up","Down","Right","Left"],C4=class extends Qa{constructor(t,a){super(t,a),this.selectable=a.selectable,this.isSelected_=a.selected||!1,this.multiSelectable=a.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,a,r){this.nonIconControl=!0;let n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},a),r);return n.replaceChild(m1("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(t){oC.some(a=>z1.default.isEventKey(t,a))||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};G.registerComponent("MenuItem",C4);var B4=class extends C4{constructor(t,a){let r=a.track,n=t.textTracks();a.label=r.label||r.language||"Unknown",a.selected=r.mode==="showing",super(t,a),this.track=r,this.kinds=(a.kinds||[a.kind||this.track.kind]).filter(Boolean);let i=(...l)=>{this.handleTracksChange.apply(this,l)},h=(...l)=>{this.handleSelectedLanguageChange.apply(this,l)};if(t.on(["loadstart","texttrackchange"],i),n.addEventListener("change",i),n.addEventListener("selectedlanguagechange",h),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],i),n.removeEventListener("change",i),n.removeEventListener("selectedlanguagechange",h)}),n.onchange===void 0){let l;this.on(["tap","click"],function(){if(typeof P.default.Event!="object")try{l=new P.default.Event("change")}catch{}l||(l=a1.default.createEvent("Event"),l.initEvent("change",!0,!0)),n.dispatchEvent(l)})}this.handleTracksChange()}handleClick(t){let a=this.track,r=this.player_.textTracks();if(super.handleClick(t),!!r)for(let n=0;n<r.length;n++){let i=r[n];this.kinds.indexOf(i.kind)!==-1&&(i===a?i.mode!=="showing"&&(i.mode="showing"):i.mode!=="disabled"&&(i.mode="disabled"))}}handleTracksChange(t){let a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(t){if(this.track.mode==="showing"){let a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};G.registerComponent("TextTrackMenuItem",B4);var Ll=class extends B4{constructor(t,a){a.track={player:t,kind:a.kind,kinds:a.kinds,default:!1,mode:"disabled"},a.kinds||(a.kinds=[a.kind]),a.label?a.track.label=a.label:a.track.label=a.kinds.join(" and ")+" off",a.selectable=!0,a.multiSelectable=!1,super(t,a)}handleTracksChange(t){let a=this.player().textTracks(),r=!0;for(let n=0,i=a.length;n<i;n++){let h=a[n];if(this.options_.kinds.indexOf(h.kind)>-1&&h.mode==="showing"){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(t){let a=this.player().textTracks(),r=!0;for(let n=0,i=a.length;n<i;n++){let h=a[n];if(["captions","descriptions","subtitles"].indexOf(h.kind)>-1&&h.mode==="showing"){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}};G.registerComponent("OffTextTrackMenuItem",Ll);var A0=class extends c5{constructor(t,a={}){a.tracks=t.textTracks(),super(t,a)}createItems(t=[],a=B4){let r;this.label_&&(r=`${this.label_} off`),t.push(new Ll(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;let n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let i=0;i<n.length;i++){let h=n[i];if(this.kinds_.indexOf(h.kind)>-1){let l=new a(this.player_,{track:h,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass(`vjs-${h.kind}-menu-item`),t.push(l)}}return t}};G.registerComponent("TextTrackButton",A0);var yl=class extends C4{constructor(t,a){let r=a.track,n=a.cue,i=t.currentTime();a.selectable=!0,a.multiSelectable=!1,a.label=n.text,a.selected=n.startTime<=i&&i<n.endTime,super(t,a),this.track=r,this.cue=n}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};G.registerComponent("ChaptersTrackMenuItem",yl);var s5=class extends A0{constructor(t,a,r){super(t,a,r),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&t.track.kind!=="chapters")return;let a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),super.update()):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){let a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";let a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){let t=this.player_.textTracks()||[];for(let a=t.length-1;a>=0;a--){let r=t[a];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(rt(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){let t=[];if(!this.track_)return t;let a=this.track_.cues;if(!a)return t;for(let r=0,n=a.length;r<n;r++){let i=a[r],h=new yl(this.player_,{track:this.track_,cue:i});t.push(h)}return t}};s5.prototype.kind_="chapters";s5.prototype.controlText_="Chapters";G.registerComponent("ChaptersButton",s5);var v5=class extends A0{constructor(t,a,r){super(t,a,r);let n=t.textTracks(),i=U1(this,this.handleTracksChange);n.addEventListener("change",i),this.on("dispose",function(){n.removeEventListener("change",i)})}handleTracksChange(t){let a=this.player().textTracks(),r=!1;for(let n=0,i=a.length;n<i;n++){let h=a[n];if(h.kind!==this.kind_&&h.mode==="showing"){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};v5.prototype.kind_="descriptions";v5.prototype.controlText_="Descriptions";G.registerComponent("DescriptionsButton",v5);var d5=class extends A0{constructor(t,a,r){super(t,a,r)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};d5.prototype.kind_="subtitles";d5.prototype.controlText_="Subtitles";G.registerComponent("SubtitlesButton",d5);var u5=class extends B4{constructor(t,a){a.track={player:t,kind:a.kind,label:a.kind+" settings",selectable:!1,default:!1,mode:"disabled"},a.selectable=!1,a.name="CaptionSettingsMenuItem",super(t,a),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+a.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}};G.registerComponent("CaptionSettingsMenuItem",u5);var g5=class extends A0{constructor(t,a,r){super(t,a,r)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new u5(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}};g5.prototype.kind_="captions";g5.prototype.controlText_="Captions";G.registerComponent("CaptionsButton",g5);var Cl=class extends B4{createEl(t,a,r){let n=super.createEl(t,a,r),i=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(i.appendChild(m1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(m1("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}};G.registerComponent("SubsCapsMenuItem",Cl);var p5=class extends A0{constructor(t,a={}){super(t,a),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(rt(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new u5(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,Cl),t}};p5.prototype.kinds_=["captions","subtitles"];p5.prototype.controlText_="Subtitles";G.registerComponent("SubsCapsButton",p5);var Bl=class extends C4{constructor(t,a){let r=a.track,n=t.audioTracks();a.label=r.label||r.language||"Unknown",a.selected=r.enabled,super(t,a),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);let i=(...h)=>{this.handleTracksChange.apply(this,h)};n.addEventListener("change",i),this.on("dispose",()=>{n.removeEventListener("change",i)})}createEl(t,a,r){let n=super.createEl(t,a,r),i=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(i.appendChild(m1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(m1("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){let a=this.player_.audioTracks();for(let r=0;r<a.length;r++){let n=a[r];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}};G.registerComponent("AudioTrackMenuItem",Bl);var Sl=class extends c5{constructor(t,a={}){a.tracks=t.audioTracks(),super(t,a)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;let a=this.player_.audioTracks();for(let r=0;r<a.length;r++){let n=a[r];t.push(new Bl(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t}};Sl.prototype.controlText_="Audio Track";G.registerComponent("AudioTrackButton",Sl);var f5=class extends C4{constructor(t,a){let r=a.rate,n=parseFloat(r,10);a.label=r,a.selected=n===t.playbackRate(),a.selectable=!0,a.multiSelectable=!1,super(t,a),this.label=r,this.rate=n,this.on(t,"ratechange",i=>this.update(i))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}};f5.prototype.contentElType="button";G.registerComponent("PlaybackRateMenuItem",f5);var _l=class extends o5{constructor(t,a){super(t,a),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",r=>this.updateVisibility(r)),this.on(t,"ratechange",r=>this.updateLabel(r)),this.on(t,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){let t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=m1("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){let t=this.playbackRates(),a=[];for(let r=t.length-1;r>=0;r--)a.push(new f5(this.player(),{rate:t[r]+"x"}));return a}handlePlaybackRateschange(t){this.update()}playbackRates(){let t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};_l.prototype.controlText_="Playback Rate";G.registerComponent("PlaybackRateMenuButton",_l);var Tl=class extends G{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",a={},r={}){return a.className||(a.className=this.buildCSSClass()),super.createEl(t,a,r)}};G.registerComponent("Spacer",Tl);var X9=class extends Tl{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xA0"})}};G.registerComponent("CustomControlSpacer",X9);var Za=class extends G{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};Za.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in a1.default&&Za.prototype.options_.children.splice(Za.prototype.options_.children.length-1,0,"pictureInPictureToggle");G.registerComponent("ControlBar",Za);var Ol=class extends T0{constructor(t,a){super(t,a),this.on(t,"error",r=>this.open(r))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){let t=this.player().error();return t?this.localize(t.message):""}};Ol.prototype.options_=Object.assign({},T0.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});G.registerComponent("ErrorDisplay",Ol);var x9="vjs-text-track-settings",ef=["#000","Black"],af=["#00F","Blue"],rf=["#0FF","Cyan"],nf=["#0F0","Green"],hf=["#F0F","Magenta"],lf=["#F00","Red"],of=["#FFF","White"],cf=["#FF0","Yellow"],V9=["1","Opaque"],w9=["0.5","Semi-Transparent"],sf=["0","Transparent"],H4={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ef,of,lf,nf,af,cf,hf,rf]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[V9,w9,sf]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[of,ef,lf,nf,af,cf,hf,rf]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>e==="1.00"?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[V9,w9]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[sf,w9,V9]}};H4.windowColor.options=H4.backgroundColor.options;function fz(e,t){if(t&&(e=t(e)),e&&e!=="none")return e}function cC(e,t){let a=e.options[e.options.selectedIndex].value;return fz(a,t)}function sC(e,t,a){if(t){for(let r=0;r<e.options.length;r++)if(fz(e.options[r].value,a)===t){e.selectedIndex=r;break}}}var Y9=class extends T0{constructor(t,a){a.temporary=!1,super(t,a),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=m1("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),a.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),ja(H4,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(t,a="",r="label"){let n=H4[t],i=n.id.replace("%s",this.id_),h=[a,i].join(" ").trim();return[`<${r} id="${i}" class="${r==="label"?"vjs-label":""}">`,this.localize(n.label),`</${r}>`,`<select aria-labelledby="${h}">`].concat(n.options.map(l=>{let c=i+"-"+l[1].replace(/\W+/g,"");return[`<option id="${c}" value="${l[0]}" `,`aria-labelledby="${h} ${c}">`,this.localize(l[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){let t=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${t}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",t),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")}createElBgColor_(){let t=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${t}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",t),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")}createElWinColor_(){let t=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${t}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",t),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")}createElColors_(){return m1("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return m1("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){let t=this.localize("restore all settings to the default values");return m1("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${t}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${t}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return jf(H4,(t,a,r)=>{let n=cC(this.$(a.selector),a.parser);return n!==void 0&&(t[r]=n),t},{})}setValues(t){ja(H4,(a,r)=>{sC(this.$(a.selector),t[r],a.parser)})}setDefaults(){ja(H4,t=>{let a=t.hasOwnProperty("default")?t.default:0;this.$(t.selector).selectedIndex=a})}restoreSettings(){let t;try{t=JSON.parse(P.default.localStorage.getItem(x9))}catch(a){w1.warn(a)}t&&this.setValues(t)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;let t=this.getValues();try{Object.keys(t).length?P.default.localStorage.setItem(x9,JSON.stringify(t)):P.default.localStorage.removeItem(x9)}catch(a){w1.warn(a)}}updateDisplay(){let t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;let t=this.player_.controlBar,a=t&&t.subsCapsButton,r=t&&t.captionsButton;a?a.focus():r&&r.focus()}handleLanguagechange(){this.fill()}};G.registerComponent("TextTrackSettings",Y9);var Q9=class extends G{constructor(t,a){let r=a.ResizeObserver||P.default.ResizeObserver;a.ResizeObserver===null&&(r=!1);let n=F1({createEl:!r,reportTouchActivity:!1},a);super(t,n),this.ResizeObserver=a.ResizeObserver||P.default.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=iz(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(t.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;let i=this.debouncedHandler_,h=this.unloadListener_=function(){kt(this,"resize",i),kt(this,"unload",h),h=null};H2(this.el_.contentWindow,"unload",h),H2(this.el_.contentWindow,"resize",i)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};G.registerComponent("ResizeManager",Q9);var vC={trackingThreshold:20,liveTolerance:15},J9=class extends G{constructor(t,a){let r=F1(vC,a,{createEl:!1});super(t,r),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){let t=this.player_.seekable();if(!t||!t.length)return;let a=Number(P.default.performance.now().toFixed(4)),r=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+r;let n=this.liveCurrentTime(),i=this.player_.currentTime(),h=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-i)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(h=!1),h!==this.behindLiveEdge_&&(this.behindLiveEdge_=h,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,D2),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){let t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){let t=this.player_.seekable(),a=[],r=t?t.length:0;for(;r--;)a.push(t.end(r));return a.length?a.sort()[a.length-1]:1/0}seekableStart(){let t=this.player_.seekable(),a=[],r=t?t.length:0;for(;r--;)a.push(t.start(r));return a.length?a.sort()[0]:0}liveWindow(){let t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){let t=this.seekableEnd();return this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};G.registerComponent("LiveTracker",J9);var Z9=class extends G{constructor(t,a){super(t,a),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:m1("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Ce()}`}),description:m1("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Ce()}`})},m1("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){let t=this.player_.tech_,a=t&&t.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{let i=this.state[n],h=this.els[n],l=r[n];Zl(h),i&&k0(h,i),a&&(a.removeAttribute(l),i&&a.setAttribute(l,h.id))}),this.state.title||this.state.description?this.show():this.hide()}update(t){this.setState(t)}dispose(){let t=this.player_.tech_,a=t&&t.el_;a&&(a.removeAttribute("aria-labelledby"),a.removeAttribute("aria-describedby")),super.dispose(),this.els=null}};G.registerComponent("TitleBar",Z9);var t6=e=>{let t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;let a=e.$$("source"),r=[],n="";if(!a.length)return!1;for(let i=0;i<a.length;i++){let h=a[i].src;h&&r.indexOf(h)===-1&&r.push(h)}return r.length?(r.length===1&&(n=r[0]),e.triggerSourceset(n),!0):!1},dC=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){let t=a1.default.createElement(this.nodeName.toLowerCase());t.innerHTML=e;let a=a1.default.createDocumentFragment();for(;t.childNodes.length;)a.appendChild(t.childNodes[0]);return this.innerText="",P.default.Element.prototype.appendChild.call(this,a),this.innerHTML}}),zz=(e,t)=>{let a={};for(let r=0;r<e.length&&(a=Object.getOwnPropertyDescriptor(e[r],t),!(a&&a.set&&a.get));r++);return a.enumerable=!0,a.configurable=!0,a},uC=e=>zz([e.el(),P.default.HTMLMediaElement.prototype,P.default.Element.prototype,dC],"innerHTML"),vf=function(e){let t=e.el();if(t.resetSourceWatch_)return;let a={},r=uC(e),n=i=>(...h)=>{let l=i.apply(t,h);return t6(e),l};["append","appendChild","insertAdjacentHTML"].forEach(i=>{t[i]&&(a[i]=t[i],t[i]=n(a[i]))}),Object.defineProperty(t,"innerHTML",F1(r,{set:n(r.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(a).forEach(i=>{t[i]=a[i]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)},gC=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?gz(P.default.Element.prototype.getAttribute.call(this,"src")):""},set(e){return P.default.Element.prototype.setAttribute.call(this,"src",e),e}}),pC=e=>zz([e.el(),P.default.HTMLMediaElement.prototype,gC],"src"),fC=function(e){if(!e.featuresSourceset)return;let t=e.el();if(t.resetSourceset_)return;let a=pC(e),r=t.setAttribute,n=t.load;Object.defineProperty(t,"src",F1(a,{set:i=>{let h=a.set.call(t,i);return e.triggerSourceset(t.src),h}})),t.setAttribute=(i,h)=>{let l=r.call(t,i,h);return/src/i.test(i)&&e.triggerSourceset(t.src),l},t.load=()=>{let i=n.call(t);return t6(e)||(e.triggerSourceset(""),vf(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):t6(e)||vf(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=n,t.setAttribute=r,Object.defineProperty(t,"src",a),t.resetSourceWatch_&&t.resetSourceWatch_()}},h1=class extends f1{constructor(t,a){super(t,a);let r=t.source,n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",r&&(this.el_.currentSrc!==r.src||t.tag&&t.tag.initNetworkState_===3)?this.setSource(r):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){let i=this.el_.childNodes,h=i.length,l=[];for(;h--;){let c=i[h];c.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),this.textTracks().addTrack(c.track),!n&&!this.el_.hasAttribute("crossorigin")&&ro(c.src)&&(n=!0)):l.push(c))}for(let c=0;c<l.length;c++)this.el_.removeChild(l[c])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&w1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Qn||Kl)&&t.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),h1.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){fC(this)}restoreMetadataTracksInIOSNativePlayer_(){let t=this.textTracks(),a,r=()=>{a=[];for(let i=0;i<t.length;i++){let h=t[i];h.kind==="metadata"&&a.push({track:h,storedMode:h.mode})}};r(),t.addEventListener("change",r),this.on("dispose",()=>t.removeEventListener("change",r));let n=()=>{for(let i=0;i<a.length;i++){let h=a[i];h.track.mode==="disabled"&&h.track.mode!==h.storedMode&&(h.track.mode=h.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",r),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",r),t.addEventListener("change",r),t.removeEventListener("change",n)})}overrideNative_(t,a){if(a!==this[`featuresNative${t}Tracks`])return;let r=t.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(n=>{this.el()[`${r}Tracks`].removeEventListener(n,this[`${r}TracksListeners_`][n])}),this[`featuresNative${t}Tracks`]=!a,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){let a=P2[t],r=this.el()[a.getterName],n=this[a.getterName]();if(!this[`featuresNative${a.capitalName}Tracks`]||!r||!r.addEventListener)return;let i={change:l=>{let c={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(c),t==="text"&&this[Ya.remoteText.getterName]().trigger(c)},addtrack(l){n.addTrack(l.track)},removetrack(l){n.removeTrack(l.track)}},h=function(){let l=[];for(let c=0;c<n.length;c++){let v=!1;for(let d=0;d<r.length;d++)if(r[d]===n[c]){v=!0;break}v||l.push(n[c])}for(;l.length;)n.removeTrack(l.shift())};this[a.getterName+"Listeners_"]=i,Object.keys(i).forEach(l=>{let c=i[l];r.addEventListener(l,c),this.on("dispose",v=>r.removeEventListener(l,c))}),this.on("loadstart",h),this.on("dispose",l=>this.off("loadstart",h))}proxyNativeTracks_(){P2.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){let r=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(r,t),h1.disposeMediaElement(t),t=r}else{t=a1.default.createElement("video");let r=this.options_.tag&&C0(this.options_.tag),n=F1({},r);(!Qn||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,qf(t,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Ga(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);let a=["loop","muted","playsinline","autoplay"];for(let r=0;r<a.length;r++){let n=a[r],i=this.options_[n];typeof i<"u"&&(i?Ga(t,n,n):Ql(t,n),t[n]=i)}return t}handleLateInit_(t){if(t.networkState===0||t.networkState===3)return;if(t.readyState===0){let r=!1,n=function(){r=!0};this.on("loadstart",n);let i=function(){r||this.trigger("loadstart")};this.on("loadedmetadata",i),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),r||this.trigger("loadstart")});return}let a=["loadstart"];a.push("loadedmetadata"),t.readyState>=2&&a.push("loadeddata"),t.readyState>=3&&a.push("canplay"),t.readyState>=4&&a.push("canplaythrough"),this.ready(function(){a.forEach(function(r){this.trigger(r)},this)})}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&Xl?this.el_.fastSeek(t):this.el_.currentTime=t}catch(a){w1(a,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Le&&ye&&this.el_.currentTime===0){let t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;let t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",()=>{this.off("webkitbeginfullscreen",a),this.off("webkitendfullscreen",t)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){let t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)me(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(t===void 0)return this.el_.src;this.setSrc(t)}reset(){h1.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,a,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,a,r):super.addTextTrack(t,a,r)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);let a=a1.default.createElement("track");return t.kind&&(a.kind=t.kind),t.label&&(a.label=t.label),(t.language||t.srclang)&&(a.srclang=t.language||t.srclang),t.default&&(a.default=t.default),t.id&&(a.id=t.id),t.src&&(a.src=t.src),a}addRemoteTextTrack(t,a){let r=super.addRemoteTextTrack(t,a);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){let a=this.$$("track"),r=a.length;for(;r--;)(t===a[r]||t===a[r].track)&&this.el().removeChild(a[r])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();let t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),P.default.performance&&(t.creationTime=P.default.performance.now()),t}};Wl(h1,"TEST_VID",function(){if(!er())return;let e=a1.default.createElement("video"),t=a1.default.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e});h1.isSupported=function(){try{h1.TEST_VID.volume=.5}catch{return!1}return!!(h1.TEST_VID&&h1.TEST_VID.canPlayType)};h1.canPlayType=function(e){return h1.TEST_VID.canPlayType(e)};h1.canPlaySource=function(e,t){return h1.canPlayType(e.type)};h1.canControlVolume=function(){try{let e=h1.TEST_VID.volume;h1.TEST_VID.volume=e/2+.1;let t=e!==h1.TEST_VID.volume;return t&&Xt?(P.default.setTimeout(()=>{h1&&h1.prototype&&(h1.prototype.featuresVolumeControl=e!==h1.TEST_VID.volume)}),!1):t}catch{return!1}};h1.canMuteVolume=function(){try{let e=h1.TEST_VID.muted;return h1.TEST_VID.muted=!e,h1.TEST_VID.muted?Ga(h1.TEST_VID,"muted","muted"):Ql(h1.TEST_VID,"muted","muted"),e!==h1.TEST_VID.muted}catch{return!1}};h1.canControlPlaybackRate=function(){if(Le&&ye&&Gl<58)return!1;try{let e=h1.TEST_VID.playbackRate;return h1.TEST_VID.playbackRate=e/2+.1,e!==h1.TEST_VID.playbackRate}catch{return!1}};h1.canOverrideAttributes=function(){try{let e=()=>{};Object.defineProperty(a1.default.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(a1.default.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(a1.default.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(a1.default.createElement("audio"),"innerHTML",{get:e,set:e})}catch{return!1}return!0};h1.supportsNativeTextTracks=function(){return Xl||Xt&&ye};h1.supportsNativeVideoTracks=function(){return!!(h1.TEST_VID&&h1.TEST_VID.videoTracks)};h1.supportsNativeAudioTracks=function(){return!!(h1.TEST_VID&&h1.TEST_VID.audioTracks)};h1.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([e,t]){Wl(h1.prototype,e,()=>h1[t](),!0)});h1.prototype.featuresVolumeControl=h1.canControlVolume();h1.prototype.movingMediaElementInDOM=!Xt;h1.prototype.featuresFullscreenResize=!0;h1.prototype.featuresProgressEvents=!0;h1.prototype.featuresTimeupdateEvents=!0;h1.prototype.featuresVideoFrameCallback=!!(h1.TEST_VID&&h1.TEST_VID.requestVideoFrameCallback);h1.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),typeof e.load=="function"&&function(){try{e.load()}catch{}}()}};h1.resetMediaElement=function(e){if(!e)return;let t=e.querySelectorAll("source"),a=t.length;for(;a--;)e.removeChild(t[a]);e.removeAttribute("src"),typeof e.load=="function"&&function(){try{e.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){h1.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){h1.prototype["set"+rt(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){h1.prototype[e]=function(){return this.el_[e]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){h1.prototype["set"+rt(e)]=function(t){this.el_[e]=t}});["pause","load","play"].forEach(function(e){h1.prototype[e]=function(){return this.el_[e]()}});f1.withSourceHandlers(h1);h1.nativeSourceHandler={};h1.nativeSourceHandler.canPlayType=function(e){try{return h1.TEST_VID.canPlayType(e)}catch{return""}};h1.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return h1.nativeSourceHandler.canPlayType(e.type);if(e.src){let a=S6(e.src);return h1.nativeSourceHandler.canPlayType(`video/${a}`)}return""};h1.nativeSourceHandler.handleSource=function(e,t,a){t.setSrc(e.src)};h1.nativeSourceHandler.dispose=function(){};h1.registerSourceHandler(h1.nativeSourceHandler);f1.registerTech("Html5",h1);var Mz=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],L9={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},e6=["tiny","xsmall","small","medium","large","xlarge","huge"],tl={};e6.forEach(e=>{let t=e.charAt(0)==="x"?`x-${e.substring(1)}`:e;tl[e]=`vjs-layout-${t}`});var zC={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},P1=class extends G{constructor(t,a,r){if(t.id=t.id||a.id||`vjs_video_${Ce()}`,a=Object.assign(P1.getTagSettings(t),a),a.initChildren=!1,a.createEl=!1,a.evented=!1,a.reportTouchActivity=!1,!a.language){let h=t.closest("[lang]");h&&(a.language=h.getAttribute("lang"))}if(super(null,a,r),this.boundDocumentFullscreenChange_=h=>this.documentFullscreenChange_(h),this.boundFullWindowOnEscKey_=h=>this.fullWindowOnEscKey(h),this.boundUpdateStyleEl_=h=>this.updateStyleEl_(h),this.boundApplyInitTime_=h=>this.applyInitTime_(h),this.boundUpdateCurrentBreakpoint_=h=>this.updateCurrentBreakpoint_(h),this.boundHandleTechClick_=h=>this.handleTechClick_(h),this.boundHandleTechDoubleClick_=h=>this.handleTechDoubleClick_(h),this.boundHandleTechTouchStart_=h=>this.handleTechTouchStart_(h),this.boundHandleTechTouchMove_=h=>this.handleTechTouchMove_(h),this.boundHandleTechTouchEnd_=h=>this.handleTechTouchEnd_(h),this.boundHandleTechTap_=h=>this.handleTechTap_(h),this.isFullscreen_=!1,this.log=Df(this.id_),this.fsApi_=al,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&C0(t),this.language(this.options_.language),a.languages){let h={};Object.getOwnPropertyNames(a.languages).forEach(function(l){h[l.toLowerCase()]=a.languages[l]}),this.languages_=h}else this.languages_=P1.prototype.options_.languages;this.resetCache_(),this.poster_=a.poster||"",this.controls_=!!a.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),a.plugins&&Object.keys(a.plugins).forEach(h=>{if(typeof this[h]!="function")throw new Error(`plugin "${h}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),y6(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(H2(a1.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);let n=F1(this.options_);a.plugins&&Object.keys(a.plugins).forEach(h=>{this[h](a.plugins[h])}),a.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(a.playbackRates),this.initChildren(),this.isAudio(t.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Qn&&this.addClass("vjs-touch-enabled"),Xt||this.addClass("vjs-workinghover"),P1.players[this.id_]=this;let i=Ef.split(".")[0];this.addClass(`vjs-v${i}`),this.userActive(!0),this.reportUserActivity(),this.one("play",h=>this.listenForUserActivity_(h)),this.on("keydown",h=>this.handleKeyDown(h)),this.on("languagechange",h=>this.handleLanguagechange(h)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),kt(a1.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),kt(a1.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),P1.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),tC(this),Wt.names.forEach(t=>{let a=Wt[t],r=this[a.getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t=this.tag,a,r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),n=this.tag.tagName.toLowerCase()==="video-js";r?a=this.el_=t.parentNode:n||(a=this.el_=super.createEl("div"));let i=C0(t);if(n){for(a=this.el_=t,t=this.tag=a1.default.createElement("video");a.children.length;)t.appendChild(a.firstChild);Wn(a,"video-js")||V4(a,"video-js"),a.appendChild(t),r=this.playerElIngest_=a,Object.keys(a).forEach(l=>{try{t[l]=a[l]}catch{}})}if(t.setAttribute("tabindex","-1"),i.tabindex="-1",ye&&ql&&(t.setAttribute("role","application"),i.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in i&&delete i.width,"height"in i&&delete i.height,Object.getOwnPropertyNames(i).forEach(function(l){n&&l==="class"||a.setAttribute(l,i[l]),n&&t.setAttribute(l,i[l])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=a.player=this,this.addClass("vjs-paused"),P.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=rz("vjs-styles-dimensions");let l=_0(".vjs-styles-defaults"),c=_0("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);let h=t.getElementsByTagName("a");for(let l=0;l<h.length;l++){let c=h.item(l);V4(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!r&&t.parentNode.insertBefore(a,t),S9(t,a),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a}crossOrigin(t){if(typeof t>"u")return this.techGet_("crossOrigin");if(t!==null&&t!=="anonymous"&&t!=="use-credentials"){w1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`);return}this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,a){let r=t+"_";if(a===void 0)return this[r]||0;if(a===""||a==="auto"){this[r]=void 0,this.updateStyleEl_();return}let n=parseFloat(a);if(isNaN(n)){w1.error(`Improper value "${a}" supplied for for ${t}`);return}this[r]=n,this.updateStyleEl_()}fluid(t){if(t===void 0)return!!this.fluid_;this.fluid_=!!t,Ze(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),Ay(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(P.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){let l=typeof this.width_=="number"?this.width_:this.options_.width,c=typeof this.height_=="number"?this.height_:this.options_.height,v=this.tech_&&this.tech_.el();v&&(l>=0&&(v.width=l),c>=0&&(v.height=c));return}let t,a,r,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?r=this.aspectRatio_:this.videoWidth()>0?r=this.videoWidth()+":"+this.videoHeight():r="16:9";let i=r.split(":"),h=i[1]/i[0];this.width_!==void 0?t=this.width_:this.height_!==void 0?t=this.height_/h:t=this.videoWidth()||300,this.height_!==void 0?a=this.height_:a=t*h,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),nz(this.styleEl_,`
      .${n} {
        width: ${t}px;
        height: ${a}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${h*100}%;
      }
    `)}loadTech_(t,a){this.tech_&&this.unloadTech_();let r=rt(t),n=t.charAt(0).toLowerCase()+t.slice(1);r!=="Html5"&&this.tag&&(f1.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let i=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(i=!1);let h={source:a,autoplay:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Wt.names.forEach(c=>{let v=Wt[c];h[v.getterName]=this[v.privateName]}),Object.assign(h,this.options_[r]),Object.assign(h,this.options_[n]),Object.assign(h,this.options_[t.toLowerCase()]),this.tag&&(h.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);let l=f1.getTech(t);if(!l)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new l(h),this.tech_.ready(U1(this,this.handleTechReady_),!0),Gp.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Mz.forEach(c=>{this.on(this.tech_,c,v=>this[`handleTech${rt(c)}_`](v))}),Object.keys(L9).forEach(c=>{this.on(this.tech_,c,v=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${L9[c]}_`].bind(this),event:v});return}this[`handleTech${L9[c]}_`](v)})}),this.on(this.tech_,"loadstart",c=>this.handleTechLoadStart_(c)),this.on(this.tech_,"sourceset",c=>this.handleTechSourceset_(c)),this.on(this.tech_,"waiting",c=>this.handleTechWaiting_(c)),this.on(this.tech_,"ended",c=>this.handleTechEnded_(c)),this.on(this.tech_,"seeking",c=>this.handleTechSeeking_(c)),this.on(this.tech_,"play",c=>this.handleTechPlay_(c)),this.on(this.tech_,"pause",c=>this.handleTechPause_(c)),this.on(this.tech_,"durationchange",c=>this.handleTechDurationChange_(c)),this.on(this.tech_,"fullscreenchange",(c,v)=>this.handleTechFullscreenChange_(c,v)),this.on(this.tech_,"fullscreenerror",(c,v)=>this.handleTechFullscreenError_(c,v)),this.on(this.tech_,"enterpictureinpicture",c=>this.handleTechEnterPictureInPicture_(c)),this.on(this.tech_,"leavepictureinpicture",c=>this.handleTechLeavePictureInPicture_(c)),this.on(this.tech_,"error",c=>this.handleTechError_(c)),this.on(this.tech_,"posterchange",c=>this.handleTechPosterChange_(c)),this.on(this.tech_,"textdata",c=>this.handleTechTextData_(c)),this.on(this.tech_,"ratechange",c=>this.handleTechRateChange_(c)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(r!=="Html5"||!this.tag)&&S9(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Wt.names.forEach(t=>{let a=Wt[t];this[a.privateName]=this[a.getterName]()}),this.textTracksJson_=Gp.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return t===void 0&&w1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||typeof t!="string")return;let a=()=>{let n=this.muted();this.muted(!0);let i=()=>{this.muted(n)};this.playTerminatedQueue_.push(i);let h=this.play();if(qn(h))return h.catch(l=>{throw i(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${l||""}`)})},r;if(t==="any"&&!this.muted()?(r=this.play(),qn(r)&&(r=r.catch(a))):t==="muted"&&!this.muted()?r=a():r=this.play(),!!qn(r))return r.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})})}updateSourceCaches_(t=""){let a=t,r="";typeof a!="string"&&(a=t.src,r=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!r&&(r=rC(this,a)),this.cache_.source=F1({},t,{src:a,type:r});let n=this.cache_.sources.filter(c=>c.src&&c.src===a),i=[],h=this.$$("source"),l=[];for(let c=0;c<h.length;c++){let v=C0(h[c]);i.push(v),v.src&&v.src===a&&l.push(v.src)}l.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a}handleTechSourceset_(t){if(!this.changingSrc_){let a=i=>this.updateSourceCaches_(i),r=this.currentSource().src,n=t.src;r&&!/^blob:/.test(r)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==r)&&(a=()=>{}),a(n),t.src||this.tech_.any(["sourceset","loadstart"],i=>{if(i.type==="sourceset")return;let h=this.techGet("currentSrc");this.lastSource_.tech=h,this.updateSourceCaches_(h)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let t=this.currentTime(),a=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",a))};this.on("timeupdate",a)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?me(this.play()):this.pause())}handleTechDoubleClick_(t){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(t.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){let a=t.target.player;if(a&&a!==this)return;let r=this.el(),n=a1.default[this.fsApi_.fullscreenElement]===r;!n&&r.matches?n=r.matches(":"+this.fsApi_.fullscreen):!n&&r.msMatchesSelector&&(n=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(t,a){a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))}handleTechFullscreenError_(t,a){this.trigger("fullscreenerror",a)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){let t=this.tech_.error();this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,a){this.ready(function(){if(t in Jy)return Yy(this.middleware_,this.tech_,t,a);if(t in Qp)return Yp(this.middleware_,this.tech_,t,a);try{this.tech_&&this.tech_[t](a)}catch(r){throw w1(r),r}},!0)}techGet_(t){if(!(!this.tech_||!this.tech_.isReady_)){if(t in Qy)return Xy(this.middleware_,this.tech_,t);if(t in Qp)return Yp(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(a){throw this.tech_[t]===void 0?(w1(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,a),a):a.name==="TypeError"?(w1(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,a),this.tech_.isReady_=!1,a):(w1(a),a)}}}play(){return new Promise(t=>{this.play_(t)})}play_(t=me){this.playCallbacks_.push(t);let a=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),r=!!(Xl||Xt);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=h=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&r&&this.load();return}let n=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){let t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(a){a()})}runPlayCallbacks_(t){let a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(r){r(t)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Ve(0,0)}scrubbing(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){if(typeof t<"u"){if(t<0&&(t=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",t),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return(!t||!t.length)&&(t=Ve(0,0)),t}bufferedPercent(){return uz(this.buffered(),this.duration())}bufferedEnd(){let t=this.buffered(),a=this.duration(),r=t.end(t.length-1);return r>a&&(r=a),r}volume(t){let a;if(t!==void 0){a=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a}muted(t){if(t!==void 0){this.techCall_("setMuted",t);return}return this.techGet_("muted")||!1}defaultMuted(t){return t!==void 0?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1}lastVolume_(t){if(t!==void 0&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(t!==void 0){let a=this.isFullscreen_;this.isFullscreen_=!!t,this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();let a=this;return new Promise((r,n)=>{function i(){a.off("fullscreenerror",l),a.off("fullscreenchange",h)}function h(){i(),r()}function l(v,d){i(),n(d)}a.one("fullscreenchange",h),a.one("fullscreenerror",l);let c=a.requestFullscreenHelper_(t);c&&(c.then(i,i),c.then(r,n))})}requestFullscreenHelper_(t){let a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(a=t)),this.fsApi_.requestFullscreen){let r=this.el_[this.fsApi_.requestFullscreen](a);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let t=this;return new Promise((a,r)=>{function n(){t.off("fullscreenerror",h),t.off("fullscreenchange",i)}function i(){n(),a()}function h(c,v){n(),r(v)}t.one("fullscreenchange",i),t.one("fullscreenerror",h);let l=t.exitFullscreenHelper_();l&&(l.then(n,n),l.then(a,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){let t=a1.default[this.fsApi_.exitFullscreen]();return t&&me(t.then(()=>this.isFullscreen(!1))),t}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=a1.default.documentElement.style.overflow,H2(a1.default,"keydown",this.boundFullWindowOnEscKey_),a1.default.documentElement.style.overflow="hidden",V4(a1.default.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){z1.default.isEventKey(t,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,kt(a1.default,"keydown",this.boundFullWindowOnEscKey_),a1.default.documentElement.style.overflow=this.docOrigOverflow,Yl(a1.default.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){if(t!==void 0){this.isInPictureInPicture_=!!t,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&P.default.documentPictureInPicture){let t=a1.default.createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(m1("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),P.default.documentPictureInPicture.requestWindow({initialAspectRatio:this.videoWidth()/this.videoHeight(),copyStyleSheets:!0}).then(a=>(this.el_.parentNode.insertBefore(t,this.el_),a.document.body.append(this.el_),a.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),a.addEventListener("unload",r=>{let n=r.target.querySelector(".video-js");t.replaceWith(n),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),a))}return"pictureInPictureEnabled"in a1.default&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(P.default.documentPictureInPicture&&P.default.documentPictureInPicture.window)return P.default.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in a1.default)return a1.default.exitPictureInPicture()}handleKeyDown(t){let{userActions:a}=this.options_;!a||!a.hotkeys||(n=>{let i=n.tagName.toLowerCase();if(n.isContentEditable)return!0;let h=["button","checkbox","hidden","radio","reset","submit"];return i==="input"?h.indexOf(n.type)===-1:["textarea"].indexOf(i)!==-1})(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,t):this.handleHotkeys(t))}handleHotkeys(t){let a=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=h=>z1.default.isEventKey(h,"f"),muteKey:n=h=>z1.default.isEventKey(h,"m"),playPauseKey:i=h=>z1.default.isEventKey(h,"k")||z1.default.isEventKey(h,"Space")}=a;if(r.call(this,t)){t.preventDefault(),t.stopPropagation();let h=G.getComponent("FullscreenToggle");a1.default[this.fsApi_.fullscreenEnabled]!==!1&&h.prototype.handleClick.call(this,t)}else n.call(this,t)?(t.preventDefault(),t.stopPropagation(),G.getComponent("MuteToggle").prototype.handleClick.call(this,t)):i.call(this,t)&&(t.preventDefault(),t.stopPropagation(),G.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let a;for(let r=0,n=this.options_.techOrder;r<n.length;r++){let i=n[r],h=f1.getTech(i);if(h||(h=G.getComponent(i)),!h){w1.error(`The "${i}" tech is undefined. Skipped browser support check for that tech.`);continue}if(h.isSupported()&&(a=h.canPlayType(t),a))return a}return""}selectSource(t){let a=this.options_.techOrder.map(l=>[l,f1.getTech(l)]).filter(([l,c])=>c?c.isSupported():(w1.error(`The "${l}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(l,c,v){let d;return l.some(z=>c.some(L=>{if(d=v(z,L),d)return!0})),d},n,i=l=>(c,v)=>l(v,c),h=([l,c],v)=>{if(c.canPlaySource(v,this.options_[l.toLowerCase()]))return{source:v,tech:l}};return this.options_.sourceOrder?n=r(t,a,i(h)):n=r(a,t,h),n||!1}handleSrc_(t,a){if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let r=pz(t);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),qy(this,r[0],(n,i)=>{if(this.middleware_=i,a||(this.cache_.sources=r),this.updateSourceCaches_(n),this.src_(n)){if(r.length>1)return this.handleSrc_(r.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}Ky(i,this.tech_)}),r.length>1){let n=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},i=()=>{this.off("error",n)};this.one("error",n),this.one("playing",i),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",i)}}}src(t){return this.handleSrc_(t,!1)}src_(t){let a=this.selectSource([t]);return a?cz(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{let t=this.play();me(t.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Ze(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);let{currentTimeDisplay:t,durationDisplay:a,progressControl:r,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:i}=r||{};t&&t.updateContent(),a&&a.updateContent(),n&&n.updateContent(),i&&(i.update(),i.loadProgressBar&&i.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){let t=this.currentSource(),a=[];return Object.keys(t).length!==0&&a.push(t),this.cache_.sources||a}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){if(t!==void 0){this.techCall_("setPreload",t),this.options_.preload=t;return}return this.techGet_("preload")}autoplay(t){if(t===void 0)return this.options_.autoplay||!1;let a;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),a=!1):t?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)}playsinline(t){return t!==void 0?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")}loop(t){if(t!==void 0){this.techCall_("setLoop",t),this.options_.loop=t;return}return this.techGet_("loop")}poster(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){let t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(t===void 0)return this.error_||null;if(S0("beforeerror").forEach(a=>{let r=a(this,t);if(!(we(r)&&!Array.isArray(r)||typeof r=="string"||typeof r=="number"||r===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}t=r}),this.options_.suppressNotSupportedError&&t&&t.code===4){let a=function(){this.error(t)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(t===null){this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new qt(t),this.addClass("vjs-error"),w1.error(`(CODE:${this.error_.code} ${qt.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),S0("error").forEach(a=>a(this,this.error_))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(t===void 0)return this.userActive_;if(t=!!t,t!==this.userActive_){if(this.userActive_=t,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,a,r,n=U1(this,this.reportUserActivity),i=function(d){(d.screenX!==a||d.screenY!==r)&&(a=d.screenX,r=d.screenY,n())},h=function(){n(),this.clearInterval(t),t=this.setInterval(n,250)},l=function(d){n(),this.clearInterval(t)};this.on("mousedown",h),this.on("mousemove",i),this.on("mouseup",l),this.on("mouseleave",l);let c=this.getChild("controlBar");c&&!Xt&&!Le&&(c.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),c.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let v;this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(v);let d=this.options_.inactivityTimeout;d<=0||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))},250)}playbackRate(t){if(t!==void 0){this.techCall_("setPlaybackRate",t);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(t!==void 0){this.isAudio_=!!t;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");let t=this.children(),a=this.getChild("ControlBar"),r=a&&a.currentHeight();t.forEach(n=>{n!==a&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){let a=[];return this.isInPictureInPicture()&&a.push(this.exitPictureInPicture()),this.isFullscreen()&&a.push(this.exitFullscreen()),this.audioPosterMode()&&a.push(this.audioPosterMode(!1)),Promise.all(a).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return typeof t!="boolean"||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(t,a,r){if(this.tech_)return this.tech_.addTextTrack(t,a,r)}addRemoteTextTrack(t,a){if(this.tech_)return this.tech_.addRemoteTextTrack(t,a)}removeRemoteTextTrack(t={}){let{track:a}=t;if(a||(a=t),this.tech_)return this.tech_.removeRemoteTextTrack(a)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Ze(this)&&this.trigger("languagechange"))}languages(){return F1(P1.prototype.options_.languages,this.languages_)}toJSON(){let t=F1(this.options_),a=t.tracks;t.tracks=[];for(let r=0;r<a.length;r++){let n=a[r];n=F1(n),n.player=void 0,t.tracks[r]=n}return t}createModal(t,a){a=a||{},a.content=t||"";let r=new T0(this,a);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;let t=this.currentBreakpoint(),a=this.currentWidth();for(let r=0;r<e6.length;r++){let n=e6[r],i=this.breakpoints_[n];if(a<=i){if(t===n)return;t&&this.removeClass(tl[t]),this.addClass(tl[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){let t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return t===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},zC,t),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(t){if(t===void 0)return this.responsive_;t=!!t;let a=this.responsive_;if(t!==a)return this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return tl[this.breakpoint_]||""}loadMedia(t,a){if(!t||typeof t!="object")return;this.reset(),this.cache_.media=F1(t);let{artist:r,artwork:n,description:i,poster:h,src:l,textTracks:c,title:v}=this.cache_.media;!n&&h&&(this.cache_.media.artwork=[{src:h,type:sl(h)}]),l&&this.src(l),h&&this.poster(h),Array.isArray(c)&&c.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:v,description:i||r||""}),this.ready(a)}getMedia(){if(!this.cache_.media){let t=this.poster(),a=this.currentSources(),r=Array.prototype.map.call(this.remoteTextTracks(),i=>({kind:i.kind,label:i.label,language:i.language,src:i.src})),n={src:a,textTracks:r};return t&&(n.poster=t,n.artwork=[{src:n.poster,type:sl(n.poster)}]),n}return F1(this.cache_.media)}static getTagSettings(t){let a={sources:[],tracks:[]},r=C0(t),n=r["data-setup"];if(Wn(t,"vjs-fill")&&(r.fill=!0),Wn(t,"vjs-fluid")&&(r.fluid=!0),n!==null){let[i,h]=(0,bf.default)(n||"{}");i&&w1.error(i),Object.assign(r,h)}if(Object.assign(a,r),t.hasChildNodes()){let i=t.childNodes;for(let h=0,l=i.length;h<l;h++){let c=i[h],v=c.nodeName.toLowerCase();v==="source"?a.sources.push(C0(c)):v==="track"&&a.tracks.push(C0(c))}}return a}debug(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(t===void 0)return this.cache_.playbackRates;Array.isArray(t)&&t.every(a=>typeof a=="number")&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}};Wt.names.forEach(function(e){let t=Wt[e];P1.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}});P1.prototype.crossorigin=P1.prototype.crossOrigin;P1.players={};var Nn=P.default.navigator;P1.prototype.options_={techOrder:f1.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Nn&&(Nn.languages&&Nn.languages[0]||Nn.userLanguage||Nn.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){P1.prototype[e]=function(){return this.techGet_(e)}});Mz.forEach(function(e){P1.prototype[`handleTech${rt(e)}_`]=function(){return this.trigger(e)}});G.registerComponent("Player",P1);var bl="plugin",Fa="activePlugins_",Da={},Al=e=>Da.hasOwnProperty(e),el=e=>Al(e)?Da[e]:void 0,mz=(e,t)=>{e[Fa]=e[Fa]||{},e[Fa][t]=!0},El=(e,t,a)=>{let r=(a?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},MC=function(e,t){let a=function(){El(this,{name:e,plugin:t,instance:null},!0);let r=t.apply(this,arguments);return mz(this,e),El(this,{name:e,plugin:t,instance:r}),r};return Object.keys(t).forEach(function(r){a[r]=t[r]}),a},df=(e,t)=>(t.prototype.name=e,function(...a){El(this,{name:e,plugin:t,instance:null},!0);let r=new t(this,...a);return this[e]=()=>r,El(this,r.getEventHash()),r}),Pt=class{constructor(t){if(this.constructor===Pt)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),y6(this),delete this.trigger,oz(this,this.constructor.defaultState),mz(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,a={}){return rr(this.eventBusEl_,t,this.getEventHash(a))}handleStateChanged(t){}dispose(){let{name:t,player:a}=this;this.trigger("dispose"),this.off(),a.off("dispose",this.dispose),a[Fa][t]=!1,this.player=this.state=null,a[t]=df(t,Da[t])}static isBasic(t){let a=typeof t=="string"?el(t):t;return typeof a=="function"&&!Pt.prototype.isPrototypeOf(a.prototype)}static registerPlugin(t,a){if(typeof t!="string")throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(Al(t))w1.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(P1.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if(typeof a!="function")throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof a}.`);return Da[t]=a,t!==bl&&(Pt.isBasic(a)?P1.prototype[t]=MC(t,a):P1.prototype[t]=df(t,a)),a}static deregisterPlugin(t){if(t===bl)throw new Error("Cannot de-register base plugin.");Al(t)&&(delete Da[t],delete P1.prototype[t])}static getPlugins(t=Object.keys(Da)){let a;return t.forEach(r=>{let n=el(r);n&&(a=a||{},a[r]=n)}),a}static getPluginVersion(t){let a=el(t);return a&&a.VERSION||""}};Pt.getPlugin=el;Pt.BASE_PLUGIN_NAME=bl;Pt.registerPlugin(bl,Pt);P1.prototype.usingPlugin=function(e){return!!this[Fa]&&this[Fa][e]===!0};P1.prototype.hasPlugin=function(e){return!!Al(e)};function mC(e,t){let a=!1;return function(...r){return a||w1.warn(e),a=!0,t.apply(this,r)}}function ae(e,t,a,r){return mC(`${t} is deprecated and will be removed in ${e}.0; please use ${a} instead.`,r)}var Hz=e=>e.indexOf("#")===0?e.slice(1):e;function F(e,t,a){let r=F.getPlayer(e);if(r)return t&&w1.warn(`Player "${e}" is already initialised. Options will not be applied.`),a&&r.ready(a),r;let n=typeof e=="string"?_0("#"+Hz(e)):e;if(!ar(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n))&&w1.warn("The element supplied is not included in the DOM"),t=t||{},t.restoreEl===!0&&(t.restoreEl=(n.parentNode&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),S0("beforesetup").forEach(h=>{let l=h(n,F1(t));if(!we(l)||Array.isArray(l)){w1.error("please return an object in beforesetup hooks");return}t=F1(t,l)});let i=G.getComponent("Player");return r=new i(n,t,a),S0("setup").forEach(h=>h(r)),r}F.hooks_=Qe;F.hooks=S0;F.hook=my;F.hookOnce=Hy;F.removeHook=kf;if(P.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&er()){let e=_0(".vjs-styles-defaults");if(!e){e=rz("vjs-styles-defaults");let t=_0("head");t&&t.insertBefore(e,t.firstChild),nz(e,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}T9(1,F);F.VERSION=Ef;F.options=P1.prototype.options_;F.getPlayers=()=>P1.players;F.getPlayer=e=>{let t=P1.players,a;if(typeof e=="string"){let r=Hz(e),n=t[r];if(n)return n;a=_0("#"+r)}else a=e;if(ar(a)){let{player:r,playerId:n}=a;if(r||t[n])return r||t[n]}};F.getAllPlayers=()=>Object.keys(P1.players).map(e=>P1.players[e]).filter(Boolean);F.players=P1.players;F.getComponent=G.getComponent;F.registerComponent=(e,t)=>{f1.isTech(t)&&w1.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),G.registerComponent.call(G,e,t)};F.getTech=f1.getTech;F.registerTech=f1.registerTech;F.use=Gy;Object.defineProperty(F,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(F.middleware,"TERMINATOR",{value:cl,writeable:!1,enumerable:!0});F.browser=Ly;F.obj=wy;F.mergeOptions=ae(9,"videojs.mergeOptions","videojs.obj.merge",F1);F.defineLazyProperty=ae(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Wl);F.bind=ae(9,"videojs.bind","native Function.prototype.bind",U1);F.registerPlugin=Pt.registerPlugin;F.deregisterPlugin=Pt.deregisterPlugin;F.plugin=(e,t)=>(w1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Pt.registerPlugin(e,t));F.getPlugins=Pt.getPlugins;F.getPlugin=Pt.getPlugin;F.getPluginVersion=Pt.getPluginVersion;F.addLanguage=function(e,t){return e=(""+e).toLowerCase(),F.options.languages=F1(F.options.languages,{[e]:t}),F.options.languages[e]};F.log=w1;F.createLogger=Df;F.time=Iy;F.createTimeRange=ae(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Ve);F.createTimeRanges=ae(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Ve);F.formatTime=ae(9,"videojs.formatTime","videojs.time.formatTime",L4);F.setFormatTime=ae(9,"videojs.setFormatTime","videojs.time.setFormatTime",vz);F.resetFormatTime=ae(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",dz);F.parseUrl=ae(9,"videojs.parseUrl","videojs.url.parseUrl",B6);F.isCrossOrigin=ae(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",ro);F.EventTarget=c2;F.any=L6;F.on=H2;F.one=eo;F.off=kt;F.trigger=rr;F.xhr=m6.default;F.TextTrack=y4;F.AudioTrack=ll;F.VideoTrack=ol;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(e=>{F[e]=function(){return w1.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),ez[e].apply(null,arguments)}});F.computedStyle=ae(9,"videojs.computedStyle","videojs.dom.computedStyle",Ka);F.dom=ez;F.fn=by;F.num=iC;F.str=Py;F.url=$y;var a6=class{constructor(t){let a=this;return a.id=t.id,a.label=a.id,a.width=t.width,a.height=t.height,a.bitrate=t.bandwidth,a.frameRate=t.frameRate,a.enabled_=t.enabled,Object.defineProperty(a,"enabled",{get(){return a.enabled_()},set(r){a.enabled_(r)}}),a}},tr=class extends F.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get(){return t.selectedIndex_}}),Object.defineProperty(t,"length",{get(){return t.levels_.length}}),t}addQualityLevel(t){let a=this.getQualityLevelById(t.id);if(a)return a;let r=this.levels_.length;return a=new a6(t),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(a),this.trigger({qualityLevel:a,type:"addqualitylevel"}),a}removeQualityLevel(t){let a=null;for(let r=0,n=this.length;r<n;r++)if(this[r]===t){a=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return a&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),a}getQualityLevelById(t){for(let a=0,r=this.length;a<r;a++){let n=this[a];if(n.id===t)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}};tr.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(let e in tr.prototype.allowedEvents_)tr.prototype["on"+e]=null;var xz="3.0.0",HC=F.registerPlugin||F.plugin,xC=function(e,t){let a=e.qualityLevels,r=new tr,n=function(){r.dispose(),e.qualityLevels=a,e.off("dispose",n)};return e.on("dispose",n),e.qualityLevels=()=>r,e.qualityLevels.VERSION=xz,r},Vz=function(e){return xC(this,F.mergeOptions({},e))};HC("qualityLevels",Vz);Vz.VERSION=xz;var te=rg,kl=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,re=e=>F.log.debug?F.log.debug.bind(F,"VHS:",`${e} >`):function(){};function $1(...e){let t=F.obj||F;return(t.merge||t.mergeOptions).apply(t,e)}function Et(...e){let t=F.time||F;return(t.createTimeRanges||t.createTimeRanges).apply(t,e)}var E0=1/30,He=E0*3,wz=function(e,t){let a=[],r;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&a.push([e.start(r),e.end(r)]);return Et(a)},Ia=function(e,t){return wz(e,function(a,r){return a-He<=t&&r+He>=t})},Yh=function(e,t){return wz(e,function(a){return a-E0>=t})},VC=function(e){if(e.length<2)return Et();let t=[];for(let a=1;a<e.length;a++){let r=e.end(a-1),n=e.start(a);t.push([r,n])}return Et(t)},wC=function(e,t){let a=null,r=null,n=0,i=[],h=[];if(!e||!e.length||!t||!t.length)return Et();let l=e.length;for(;l--;)i.push({time:e.start(l),type:"start"}),i.push({time:e.end(l),type:"end"});for(l=t.length;l--;)i.push({time:t.start(l),type:"start"}),i.push({time:t.end(l),type:"end"});for(i.sort(function(c,v){return c.time-v.time}),l=0;l<i.length;l++)i[l].type==="start"?(n++,n===2&&(a=i[l].time)):i[l].type==="end"&&(n--,n===1&&(r=i[l].time)),a!==null&&r!==null&&(h.push([a,r]),a=null,r=null);return Et(h)},Lz=e=>{let t=[];if(!e||!e.length)return"";for(let a=0;a<e.length;a++)t.push(e.start(a)+" => "+e.end(a));return t.join(", ")},LC=function(e,t,a=1){return((e.length?e.end(e.length-1):0)-t)/a},x4=e=>{let t=[];for(let a=0;a<e.length;a++)t.push({start:e.start(a),end:e.end(a)});return t},yC=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(let a=0;a<e.length;a++)if(e.start(a)!==t.start(a)||e.end(a)!==t.end(a))return!0;return!1},uf=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},T6=function(e,t){let a=0;if(!e||!e.length)return a;for(let r=0;r<e.length;r++){let n=e.start(r),i=e.end(r);if(!(t>i)){if(t>n&&t<=i){a+=i-t;continue}a+=i-n}}return a},O6=(e,t)=>{if(!t.preload)return t.duration;let a=0;return(t.parts||[]).forEach(function(r){a+=r.duration}),(t.preloadHints||[]).forEach(function(r){r.type==="PART"&&(a+=e.partTargetDuration)}),a},r6=e=>(e.segments||[]).reduce((t,a,r)=>(a.parts?a.parts.forEach(function(n,i){t.push({duration:n.duration,segmentIndex:r,partIndex:i,part:n,segment:a})}):t.push({duration:a.duration,segmentIndex:r,partIndex:null,segment:a,part:null}),t),[]),yz=e=>{let t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Cz=({preloadSegment:e})=>{if(!e)return;let{parts:t,preloadHints:a}=e,r=(a||[]).reduce((n,i)=>n+(i.type==="PART"?1:0),0);return r+=t&&t.length?t.length:0,r},Bz=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;let a=yz(t).length>0;return a&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:a&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},CC=function(e,t){let a=0,r=t-e.mediaSequence,n=e.segments[r];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;r--;){if(n=e.segments[r],typeof n.end<"u")return{result:a+n.end,precise:!0};if(a+=O6(e,n),typeof n.start<"u")return{result:a+n.start,precise:!0}}return{result:a,precise:!1}},BC=function(e,t){let a=0,r,n=t-e.mediaSequence;for(;n<e.segments.length;n++){if(r=e.segments[n],typeof r.start<"u")return{result:r.start-a,precise:!0};if(a+=O6(e,r),typeof r.end<"u")return{result:r.end-a,precise:!0}}return{result:-1,precise:!1}},Sz=function(e,t,a){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;let r=CC(e,t);if(r.precise)return r.result;let n=BC(e,t);return n.precise?n.result:r.result+a},_z=function(e,t,a){if(!e)return 0;if(typeof a!="number"&&(a=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return P.default.Infinity}return Sz(e,t,a)},Kn=function({defaultDuration:e,durationList:t,startIndex:a,endIndex:r}){let n=0;if(a>r&&([a,r]=[r,a]),a<0){for(let i=a;i<Math.min(0,r);i++)n+=e;a=0}for(let i=a;i<r;i++)n+=t[i].duration;return n},Tz=function(e,t,a,r){if(!e||!e.segments)return null;if(e.endList)return _z(e);if(t===null)return null;t=t||0;let n=Sz(e,e.mediaSequence+e.segments.length,t);return a&&(r=typeof r=="number"?r:Bz(null,e),n-=r),Math.max(0,n)},SC=function(e,t,a){let n=t||0,i=Tz(e,t,!0,a);return i===null?Et():Et(n,i)},_C=function({playlist:e,currentTime:t,startingSegmentIndex:a,startingPartIndex:r,startTime:n,exactManifestTimings:i}){let h=t-n,l=r6(e),c=0;for(let v=0;v<l.length;v++){let d=l[v];if(a===d.segmentIndex&&!(typeof r=="number"&&typeof d.partIndex=="number"&&r!==d.partIndex)){c=v;break}}if(h<0){if(c>0)for(let v=c-1;v>=0;v--){let d=l[v];if(h+=d.duration,i){if(h<0)continue}else if(h+E0<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:n-Kn({defaultDuration:e.targetDuration,durationList:l,startIndex:c,endIndex:v})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:t}}if(c<0){for(let v=c;v<0;v++)if(h-=e.targetDuration,h<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:t};c=0}for(let v=c;v<l.length;v++){let d=l[v];if(h-=d.duration,i){if(h>0)continue}else if(h-E0>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:n+Kn({defaultDuration:e.targetDuration,durationList:l,startIndex:c,endIndex:v})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:t}},Oz=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},b6=function(e){return e.excludeUntil&&e.excludeUntil===1/0},no=function(e){let t=Oz(e);return!e.disabled&&!t},TC=function(e){return e.disabled},OC=function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},bz=function(e,t){return t.attributes&&t.attributes[e]},bC=function(e,t,a,r=0){return bz("BANDWIDTH",a)?(e*a.attributes.BANDWIDTH-r*8)/t:NaN},n6=(e,t)=>{if(e.playlists.length===1)return!0;let a=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(r=>no(r)?(r.attributes.BANDWIDTH||0)<a:!1).length===0},A6=(e,t)=>!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri),gf=function(e,t){let a=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(let n in a){for(let i in a[n])if(r=t(a[n][i]),r)break;if(r)break}return!!r},H5=e=>{if(!e||!e.playlists||!e.playlists.length)return gf(e,a=>a.playlists&&a.playlists.length||a.uri);for(let t=0;t<e.playlists.length;t++){let a=e.playlists[t],r=a.attributes&&a.attributes.CODECS;if(!(r&&r.split(",").every(i=>Ts(i))||gf(e,i=>A6(a,i))))return!1}return!0},o2={liveEdgeDelay:Bz,duration:_z,seekable:SC,getMediaInfoForTime:_C,isEnabled:no,isDisabled:TC,isExcluded:Oz,isIncompatible:b6,playlistEnd:Tz,isAes:OC,hasAttribute:bz,estimateSegmentRequestTime:bC,isLowestEnabledRendition:n6,isAudioOnly:H5,playlistMatch:A6,segmentDurationWithParts:O6},{log:Az}=F,E6=(e,t)=>`${e}-${t}`,AC=(e,t,a)=>`placeholder-uri-${e}-${t}-${a}`,EC=({onwarn:e,oninfo:t,manifestString:a,customTagParsers:r=[],customTagMappers:n=[],llhls:i})=>{let h=new Bh;e&&h.on("warn",e),t&&h.on("info",t),r.forEach(v=>h.addParser(v)),n.forEach(v=>h.addTagMapper(v)),h.push(a),h.end();let l=h.manifest;if(i||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(v){l.hasOwnProperty(v)&&delete l[v]}),l.segments&&l.segments.forEach(function(v){["parts","preloadHints"].forEach(function(d){v.hasOwnProperty(d)&&delete v[d]})})),!l.targetDuration){let v=10;l.segments&&l.segments.length&&(v=l.segments.reduce((d,z)=>Math.max(d,z.duration),0)),e&&e(`manifest has no targetDuration defaulting to ${v}`),l.targetDuration=v}let c=yz(l);if(c.length&&!l.partTargetDuration){let v=c.reduce((d,z)=>Math.max(d,z.duration),0);e&&(e(`manifest has no partTargetDuration defaulting to ${v}`),Az.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=v}return l},nr=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(a=>{if(e.mediaGroups[a])for(let r in e.mediaGroups[a])for(let n in e.mediaGroups[a][r]){let i=e.mediaGroups[a][r][n];t(i,a,r,n)}})},Ez=({playlist:e,uri:t,id:a})=>{e.id=a,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},kC=e=>{let t=e.playlists.length;for(;t--;){let a=e.playlists[t];Ez({playlist:a,id:E6(t,a.uri)}),a.resolvedUri=te(e.uri,a.uri),e.playlists[a.id]=a,e.playlists[a.uri]=a,a.attributes.BANDWIDTH||Az.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},PC=e=>{nr(e,t=>{t.uri&&(t.resolvedUri=te(e.uri,t.uri))})},DC=(e,t)=>{let a=E6(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:P.default.location.href,resolvedUri:P.default.location.href,playlists:[{uri:t,id:a,resolvedUri:t,attributes:{}}]};return r.playlists[a]=r.playlists[0],r.playlists[t]=r.playlists[0],r},kz=(e,t,a=AC)=>{e.uri=t;for(let n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){let i=`placeholder-uri-${n}`;e.playlists[n].uri=i}let r=H5(e);nr(e,(n,i,h,l)=>{if(!n.playlists||!n.playlists.length){if(r&&i==="AUDIO"&&!n.uri)for(let c=0;c<e.playlists.length;c++){let v=e.playlists[c];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===h)return}n.playlists=[Q2({},n)]}n.playlists.forEach(function(c,v){let d=a(i,h,l,c),z=E6(v,d);c.uri?c.resolvedUri=c.resolvedUri||te(e.uri,c.uri):(c.uri=v===0?d:z,c.resolvedUri=c.uri),c.id=c.id||z,c.attributes=c.attributes||{},e.playlists[c.id]=c,e.playlists[c.uri]=c})}),kC(e),PC(e)},{EventTarget:IC}=F,jC=(e,t)=>{if(t.endList||!t.serverControl)return e;let a={};if(t.serverControl.canBlockReload){let{preloadSegment:r}=t,n=t.mediaSequence+t.segments.length;if(r){let i=r.parts||[],h=Cz(t)-1;h>-1&&h!==i.length-1&&(a._HLS_part=h),(h>-1||i.length)&&n--}a._HLS_msn=n}if(t.serverControl&&t.serverControl.canSkipUntil&&(a._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(a).length){let r=new P.default.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){a.hasOwnProperty(n)&&r.searchParams.set(n,a[n])}),e=r.toString()}return e},RC=(e,t)=>{if(!e)return t;let a=$1(e,t);if(e.preloadHints&&!t.preloadHints&&delete a.preloadHints,e.parts&&!t.parts)delete a.parts;else if(e.parts&&t.parts)for(let r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(a.parts[r]=$1(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(a.skipped=!1),e.preload&&!t.preload&&(a.preload=!1),a},NC=(e,t,a)=>{let r=e.slice(),n=t.slice();a=a||0;let i=[],h;for(let l=0;l<n.length;l++){let c=r[l+a],v=n[l];c?(h=c.map||h,i.push(RC(c,v))):(h&&!v.map&&(v.map=h),i.push(v))}return i},Pz=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=te(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=te(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=te(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=te(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(a=>{a.resolvedUri||(a.resolvedUri=te(t,a.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(a=>{a.resolvedUri||(a.resolvedUri=te(t,a.uri))})},Dz=function(e){let t=e.segments||[],a=e.preloadSegment;if(a&&a.parts&&a.parts.length){if(a.preloadHints){for(let r=0;r<a.preloadHints.length;r++)if(a.preloadHints[r].type==="MAP")return t}a.duration=e.targetDuration,a.preload=!0,t.push(a)}return t},Iz=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,i6=(e,t,a=Iz)=>{let r=$1(e,{}),n=r.playlists[t.id];if(!n||a(n,t))return null;t.segments=Dz(t);let i=$1(n,t);if(i.preloadSegment&&!t.preloadSegment&&delete i.preloadSegment,n.segments){if(t.skip){t.segments=t.segments||[];for(let h=0;h<t.skip.skippedSegments;h++)t.segments.unshift({skipped:!0})}i.segments=NC(n.segments,t.segments,t.mediaSequence-n.mediaSequence)}i.segments.forEach(h=>{Pz(h,i.resolvedUri)});for(let h=0;h<r.playlists.length;h++)r.playlists[h].id===t.id&&(r.playlists[h]=i);return r.playlists[t.id]=i,r.playlists[t.uri]=i,nr(e,(h,l,c,v)=>{if(h.playlists)for(let d=0;d<h.playlists.length;d++)t.id===h.playlists[d].id&&(h.playlists[d]=i)}),r},h6=(e,t)=>{let a=e.segments||[],r=a[a.length-1],n=r&&r.parts&&r.parts[r.parts.length-1],i=n&&n.duration||r&&r.duration;return t&&i?i*1e3:(e.partTargetDuration||e.targetDuration||10)*500},B0=class extends IC{constructor(t,a,r={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=re("PlaylistLoader");let{withCredentials:n=!1}=r;this.src=t,this.vhs_=a,this.withCredentials=n;let i=a.options_;this.customTagParsers=i&&i.customTagParsers||[],this.customTagMappers=i&&i.customTagMappers||[],this.llhls=i&&i.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;let t=this.media(),a=te(this.main.uri,t.uri);this.llhls&&(a=jC(a,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},(r,n)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(t,a,r){let{uri:n,id:i}=a;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[i],status:t.status,message:`HLS playlist request error at URL: ${n}.`,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}parseManifest_({url:t,manifestString:a}){return EC({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${t}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${t}: ${r}`),manifestString:a,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:t,playlistObject:a,url:r,id:n}){this.request=null,this.state="HAVE_METADATA";let i=a||this.parseManifest_({url:r,manifestString:t});i.lastRequest=Date.now(),Ez({playlist:i,uri:r,id:n});let h=i6(this.main,i);this.targetDuration=i.partTargetDuration||i.targetDuration,this.pendingMedia_=null,h?(this.main=h,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(h6(this.media(),!!h)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),P.default.clearTimeout(this.mediaUpdateTimeout),P.default.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){let t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,a){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(P.default.clearTimeout(this.finalRenditionTimeout),a){let h=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=P.default.setTimeout(this.media.bind(this,t,!1),h);return}let r=this.state,n=!this.media_||t.id!==this.media_.id,i=this.main.playlists[t.id];if(i&&i.endList||t.endList&&t.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,n&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(h6(t,!0)),!!n){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(h,l)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=kl(t.resolvedUri,l),h)return this.playlistRequestError(this.request,t,r);this.haveMetadata({playlistString:l.responseText,url:t.uri,id:t.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);let a=this.media();if(t){let r=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=P.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=P.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=P.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(t,a)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:a.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:a.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=kl(this.src,a);let r=this.parseManifest_({manifestString:a.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists){this.main=t,kz(this.main,this.srcUri()),t.playlists.forEach(r=>{r.segments=Dz(r),r.segments.forEach(n=>{Pz(n,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}let a=this.srcUri()||P.default.location.href;this.main=DC(t,a),this.haveMetadata({playlistObject:t,url:a,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}},{xhr:FC}=F,l6=function(e,t,a,r){let n=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&n&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=n.byteLength||n.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),a.headers&&(e.responseHeaders=a.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&a.statusCode!==200&&a.statusCode!==206&&a.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(n||e.responseText)))),r(t,e)},jz=function(){let e=function t(a,r){a=$1({timeout:45e3},a);let n=t.beforeRequest||F.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){let c=n(a);c&&(a=c)}let h=(F.Vhs.xhr.original===!0?FC:F.Vhs.xhr)(a,function(c,v){return l6(h,c,v,r)}),l=h.abort;return h.abort=function(){return h.aborted=!0,l.apply(h,arguments)},h.uri=a.uri,h.requestTime=Date.now(),h};return e.original=!0,e},UC=function(e){let t,a=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=P.default.BigInt(e.offset)+P.default.BigInt(e.length)-P.default.BigInt(1):t=e.offset+e.length-1,"bytes="+a+"-"+t},o6=function(e){let t={};return e.byterange&&(t.Range=UC(e.byterange)),t},$C=function(e,t){return e.start(t)+"-"+e.end(t)},WC=function(e,t){let a=e.toString(16);return"00".substring(0,2-a.length)+a+(t%2?" ":"")},GC=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Rz=function(e){let t={};return Object.keys(e).forEach(a=>{let r=e[a];Es(r)?t[a]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[a]=r}),t},Pl=function(e){let t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Nz=function(e){return e.resolvedUri},Fz=e=>{let t=Array.prototype.slice.call(e),a=16,r="",n,i;for(let h=0;h<t.length/a;h++)n=t.slice(h*a,h*a+a).map(WC).join(""),i=t.slice(h*a,h*a+a).map(GC).join(""),r+=n+" "+i+`
`;return r},qC=({bytes:e})=>Fz(e),KC=e=>{let t="",a;for(a=0;a<e.length;a++)t+=$C(e,a)+" ";return t},XC=Object.freeze({__proto__:null,createTransferableMessage:Rz,initSegmentId:Pl,segmentKeyId:Nz,hexDump:Fz,tagDump:qC,textRanges:KC}),Uz=.25,YC=(e,t)=>{if(!t.dateTimeObject)return null;let a=t.videoTimingInfo.transmuxerPrependedSeconds,n=t.videoTimingInfo.transmuxedPresentationStart+a,i=e-n;return new Date(t.dateTimeObject.getTime()+i*1e3)},QC=e=>e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds,JC=(e,t)=>{let a;try{a=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;let r=t.segments[0];if(a<r.dateTimeObject)return null;for(let c=0;c<t.segments.length-1;c++){r=t.segments[c];let v=t.segments[c+1].dateTimeObject;if(a<v)break}let n=t.segments[t.segments.length-1],i=n.dateTimeObject,h=n.videoTimingInfo?QC(n.videoTimingInfo):n.duration+n.duration*Uz,l=new Date(i.getTime()+h*1e3);return a>l?null:(a>i&&(r=n),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:o2.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},ZC=(e,t)=>{if(!t||!t.segments||t.segments.length===0)return null;let a=0,r;for(let i=0;i<t.segments.length&&(r=t.segments[i],a=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:a+r.duration,!(e<=a));i++);let n=t.segments[t.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>a){if(e>a+n.duration*Uz)return null;r=n}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:a-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},tB=(e,t)=>{let a,r;try{a=new Date(e),r=new Date(t)}catch{}let n=a.getTime();return(r.getTime()-n)/1e3},eB=e=>{if(!e.segments||e.segments.length===0)return!1;for(let t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0},aB=({playlist:e,time:t=void 0,callback:a})=>{if(!a)throw new Error("getProgramTime: callback must be provided");if(!e||t===void 0)return a({message:"getProgramTime: playlist and time must be provided"});let r=ZC(t,e);if(!r)return a({message:"valid programTime was not found"});if(r.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});let n={mediaSeconds:t},i=YC(t,r.segment);return i&&(n.programDateTime=i.toISOString()),a(null,n)},$z=({programTime:e,playlist:t,retryCount:a=2,seekTo:r,pauseAfterSeek:n=!0,tech:i,callback:h})=>{if(!h)throw new Error("seekToProgramTime: callback must be provided");if(typeof e>"u"||!t||!r)return h({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!i.hasStarted_)return h({message:"player must be playing a live stream to start buffering"});if(!eB(t))return h({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});let l=JC(e,t);if(!l)return h({message:`${e} was not found in the stream`});let c=l.segment,v=tB(c.dateTimeObject,e);if(l.type==="estimate"){if(a===0)return h({message:`${e} is not buffered yet. Try again`});r(l.estimatedStart+v),i.one("seeked",()=>{$z({programTime:e,playlist:t,retryCount:a-1,seekTo:r,pauseAfterSeek:n,tech:i,callback:h})});return}let d=c.start+v,z=()=>h(null,i.currentTime());i.one("seeked",z),n&&i.pause(),r(d)},y9=(e,t)=>{if(e.readyState===4)return t()},rB=(e,t,a)=>{let r=[],n,i=!1,h=function(d,z,L,y){return z.abort(),i=!0,a(d,z,L,y)},l=function(d,z){if(i)return;if(d)return h(d,z,"",r);let L=z.responseText.substring(r&&r.byteLength||0,z.responseText.length);if(r=cg(r,Th(L,!0)),n=n||z4(r),r.length<10||n&&r.length<n+2)return y9(z,()=>h(d,z,"",r));let y=Gh(r);return y==="ts"&&r.length<188?y9(z,()=>h(d,z,"",r)):!y&&r.length<376?y9(z,()=>h(d,z,"",r)):h(null,z,y,r)},v=t({uri:e,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:z,loaded:L}){return l6(d,null,{statusCode:d.status},l)})}},function(d,z){return l6(v,d,z,l)});return v},{EventTarget:nB}=F,pf=function(e,t){if(!Iz(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let a=0;a<e.segments.length;a++){let r=e.segments[a],n=t.segments[a];if(r.uri!==n.uri)return!1;if(!r.byterange&&!n.byterange)continue;let i=r.byterange,h=n.byterange;if(i&&!h||!i&&h||i.offset!==h.offset||i.length!==h.length)return!1}return!0},iB=(e,t,a,r)=>{let n=r.attributes.NAME||a;return`placeholder-uri-${e}-${t}-${n}`},hB=({mainXml:e,srcUrl:t,clientOffset:a,sidxMapping:r,previousManifest:n})=>{let i=Hp(e,{manifestUri:t,clientOffset:a,sidxMapping:r,previousManifest:n});return kz(i,t,iB),i},lB=(e,t)=>{nr(e,(a,r,n,i)=>{i in t.mediaGroups[r][n]||delete e.mediaGroups[r][n][i]})},oB=(e,t,a)=>{let r=!0,n=$1(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let i=0;i<t.playlists.length;i++){let h=t.playlists[i];if(h.sidx){let c=In(h.sidx);a&&a[c]&&a[c].sidx&&Fh(h,a[c].sidx,h.sidx.resolvedUri)}let l=i6(n,h,pf);l&&(n=l,r=!1)}return nr(t,(i,h,l,c)=>{if(i.playlists&&i.playlists.length){let v=i.playlists[0].id,d=i6(n,i.playlists[0],pf);d&&(n=d,c in n.mediaGroups[h][l]||(n.mediaGroups[h][l][c]=i),n.mediaGroups[h][l][c].playlists[0]=n.playlists[v],r=!1)}}),lB(n,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:n},cB=(e,t)=>(!e.map&&!t.map||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length,ff=(e,t)=>{let a={};for(let r in e){let i=e[r].sidx;if(i){let h=In(i);if(!t[h])break;let l=t[h].sidxInfo;cB(l,i)&&(a[h]=t[h])}}return a},sB=(e,t)=>{let r=ff(e.playlists,t);return nr(e,(n,i,h,l)=>{if(n.playlists&&n.playlists.length){let c=n.playlists;r=$1(r,ff(c,t))}}),r},z5=class extends nB{constructor(t,a,r={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);let{withCredentials:i=!1}=r;if(this.vhs_=a,this.withCredentials=i,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=re("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}requestErrored_(t,a,r){if(!this.request)return!0;if(this.request=null,t)return this.error=typeof t=="object"&&!(t instanceof Error)?t:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(t,a,r){let n=t.sidx&&In(t.sidx);if(!t.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){this.mediaRequest_=P.default.setTimeout(()=>r(!1),0);return}let i=kl(t.sidx.resolvedUri),h=(l,c)=>{if(this.requestErrored_(l,c,a))return;let v=this.mainPlaylistLoader_.sidxMapping_,d;try{d=(0,Af.default)(c1(c.response).subarray(8))}catch(z){this.requestErrored_(z,c,a);return}return v[n]={sidxInfo:t.sidx,sidx:d},Fh(t,d,t.sidx.resolvedUri),r(!0)};this.request=rB(i,this.vhs_.xhr,(l,c,v,d)=>{if(l)return h(l,c);if(!v||v!=="mp4")return h({status:c.status,message:`Unsupported ${v||"unknown"} container type for sidx segment at URL: ${i}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},c);let{offset:z,length:L}=t.sidx.byterange;if(d.length>=L+z)return h(l,{response:d.subarray(z,z+L),status:c.status,uri:c.uri});this.request=this.vhs_.xhr({uri:i,responseType:"arraybuffer",headers:o6({byterange:t.sidx.byterange})},h)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},P.default.clearTimeout(this.minimumUpdatePeriodTimeout_),P.default.clearTimeout(this.mediaRequest_),P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){let t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);let a=this.state;if(typeof t=="string"){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}let r=!this.media_||t.id!==this.media_.id;if(r&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA",this.media_=t,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,a,n=>{this.haveMetadata({startingState:a,playlist:t})}))}haveMetadata({startingState:t,playlist:a}){this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),t==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(P.default.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(t){P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;let a=this.media();if(t){let r=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=P.default.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=P.default.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((t,a)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(t){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(a,r)=>{if(this.requestErrored_(a,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}let n=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=kl(this.mainPlaylistLoader_.srcUrl,r),n){this.handleMain_(),this.syncClientServerClock_(()=>t(r,n));return}return t(r,n)})}syncClientServerClock_(t){let a=xp(this.mainPlaylistLoader_.mainXml_);if(a===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();if(a.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=a.value-Date.now(),t();this.request=this.vhs_.xhr({uri:te(this.mainPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},(r,n)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();let i;a.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?i=this.mainLoaded_:i=Date.parse(n.responseHeaders.date):i=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=i-Date.now(),t()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;let t=this.mainPlaylistLoader_.main,a=hB({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(a=oB(t,a,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=a||t;let r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!t||a&&a.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!a}updateMinimumUpdatePeriodTimeout_(){let t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(P.default.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let a=t.main&&t.main.minimumUpdatePeriod;if(a===0&&(t.media()?a=t.media().targetDuration*1e3:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_(`found invalid minimumUpdatePeriod of ${a}, not setting a timeout`);return}this.createMUPTimeout_(a)}createMUPTimeout_(t){let a=this.mainPlaylistLoader_;a.minimumUpdatePeriodTimeout_=P.default.setTimeout(()=>{a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,a)=>{a&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=sB(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();let a=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==a[t];if(r?this.media_=a[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let n=()=>{this.media().endList||(this.mediaUpdateTimeout=P.default.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},h6(this.media(),!!r)))};n()}this.trigger("loadedplaylist")}},mt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},vB=e=>{let t=new Uint8Array(new ArrayBuffer(e.length));for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t.buffer},Wz=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},dB=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{let a=new BlobBuilder;return a.append(e),URL.createObjectURL(a.getBlob())}},Gz=function(e){return function(){let t=dB(e),a=Wz(new Worker(t));a.objURL=t;let r=a.terminate;return a.on=a.addEventListener,a.off=a.removeEventListener,a.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},a}},qz=function(e){return`var browserWorkerPolyFill = ${Wz.toString()};
browserWorkerPolyFill(self);
`+e},Kz=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},uB=qz(Kz(function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=function(){this.init=function(){var o={};this.on=function(s,g){o[s]||(o[s]=[]),o[s]=o[s].concat(g)},this.off=function(s,g){var u;return o[s]?(u=o[s].indexOf(g),o[s]=o[s].slice(),o[s].splice(u,1),u>-1):!1},this.trigger=function(s){var g,u,p,M;if(g=o[s],!!g)if(arguments.length===2)for(p=g.length,u=0;u<p;++u)g[u].call(this,arguments[1]);else{for(M=[],u=arguments.length,u=1;u<arguments.length;++u)M.push(arguments[u]);for(p=g.length,u=0;u<p;++u)g[u].apply(this,M)}},this.dispose=function(){o={}}}};t.prototype.pipe=function(o){return this.on("data",function(s){o.push(s)}),this.on("done",function(s){o.flush(s)}),this.on("partialdone",function(s){o.partialFlush(s)}),this.on("endedtimeline",function(s){o.endTimeline(s)}),this.on("reset",function(s){o.reset(s)}),o},t.prototype.push=function(o){this.trigger("data",o)},t.prototype.flush=function(o){this.trigger("done",o)},t.prototype.partialFlush=function(o){this.trigger("partialdone",o)},t.prototype.endTimeline=function(o){this.trigger("endedtimeline",o)},t.prototype.reset=function(o){this.trigger("reset",o)};var a=t,r=Math.pow(2,32),n=function(o){var s=new DataView(o.buffer,o.byteOffset,o.byteLength),g;return s.getBigUint64?(g=s.getBigUint64(0),g<Number.MAX_SAFE_INTEGER?Number(g):g):s.getUint32(0)*r+s.getUint32(4)},i={getUint64:n,MAX_UINT32:r},h=i.MAX_UINT32,l,c,v,d,z,L,y,w,O,k,V,x,C,T,S,R,N,$,e1,r1,Y,J,W,K,Z,n1,o1,s1,B1,L1,j1,dt,ut,ie,he,I2;(function(){var o;if(W={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(o in W)W.hasOwnProperty(o)&&(W[o]=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)]);K=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),n1=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Z=new Uint8Array([0,0,0,1]),o1=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s1=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),B1={video:o1,audio:s1},dt=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),j1=new Uint8Array([0,0,0,0,0,0,0,0]),ut=new Uint8Array([0,0,0,0,0,0,0,0]),ie=ut,he=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),I2=ut,L1=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),l=function(o){var s=[],g=0,u,p,M;for(u=1;u<arguments.length;u++)s.push(arguments[u]);for(u=s.length;u--;)g+=s[u].byteLength;for(p=new Uint8Array(g+8),M=new DataView(p.buffer,p.byteOffset,p.byteLength),M.setUint32(0,p.byteLength),p.set(o,4),u=0,g=8;u<s.length;u++)p.set(s[u],g),g+=s[u].byteLength;return p},c=function(){return l(W.dinf,l(W.dref,dt))},v=function(o){return l(W.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,o.audioobjecttype<<3|o.samplingfrequencyindex>>>1,o.samplingfrequencyindex<<7|o.channelcount<<3,6,1,2]))},d=function(){return l(W.ftyp,K,Z,K,n1)},R=function(o){return l(W.hdlr,B1[o])},z=function(o){return l(W.mdat,o)},S=function(o){var s=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,o.duration>>>24&255,o.duration>>>16&255,o.duration>>>8&255,o.duration&255,85,196,0,0]);return o.samplerate&&(s[12]=o.samplerate>>>24&255,s[13]=o.samplerate>>>16&255,s[14]=o.samplerate>>>8&255,s[15]=o.samplerate&255),l(W.mdhd,s)},T=function(o){return l(W.mdia,S(o),R(o.type),y(o))},L=function(o){return l(W.mfhd,new Uint8Array([0,0,0,0,(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255]))},y=function(o){return l(W.minf,o.type==="video"?l(W.vmhd,L1):l(W.smhd,j1),c(),$(o))},w=function(o,s){for(var g=[],u=s.length;u--;)g[u]=r1(s[u]);return l.apply(null,[W.moof,L(o)].concat(g))},O=function(o){for(var s=o.length,g=[];s--;)g[s]=x(o[s]);return l.apply(null,[W.moov,V(4294967295)].concat(g).concat(k(o)))},k=function(o){for(var s=o.length,g=[];s--;)g[s]=Y(o[s]);return l.apply(null,[W.mvex].concat(g))},V=function(o){var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(W.mvhd,s)},N=function(o){var s=o.samples||[],g=new Uint8Array(4+s.length),u,p;for(p=0;p<s.length;p++)u=s[p].flags,g[p+4]=u.dependsOn<<4|u.isDependedOn<<2|u.hasRedundancy;return l(W.sdtp,g)},$=function(o){return l(W.stbl,e1(o),l(W.stts,I2),l(W.stsc,ie),l(W.stsz,he),l(W.stco,ut))},function(){var o,s;e1=function(g){return l(W.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),g.type==="video"?o(g):s(g))},o=function(g){var u=g.sps||[],p=g.pps||[],M=[],B=[],_,b;for(_=0;_<u.length;_++)M.push((u[_].byteLength&65280)>>>8),M.push(u[_].byteLength&255),M=M.concat(Array.prototype.slice.call(u[_]));for(_=0;_<p.length;_++)B.push((p[_].byteLength&65280)>>>8),B.push(p[_].byteLength&255),B=B.concat(Array.prototype.slice.call(p[_]));if(b=[W.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(g.width&65280)>>8,g.width&255,(g.height&65280)>>8,g.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(W.avcC,new Uint8Array([1,g.profileIdc,g.profileCompatibility,g.levelIdc,255].concat([u.length],M,[p.length],B))),l(W.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],g.sarRatio){var E=g.sarRatio[0],I=g.sarRatio[1];b.push(l(W.pasp,new Uint8Array([(E&4278190080)>>24,(E&16711680)>>16,(E&65280)>>8,E&255,(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255])))}return l.apply(null,b)},s=function(g){return l(W.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(g.channelcount&65280)>>8,g.channelcount&255,(g.samplesize&65280)>>8,g.samplesize&255,0,0,0,0,(g.samplerate&65280)>>8,g.samplerate&255,0,0]),v(g))}}(),C=function(o){var s=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(o.id&4278190080)>>24,(o.id&16711680)>>16,(o.id&65280)>>8,o.id&255,0,0,0,0,(o.duration&4278190080)>>24,(o.duration&16711680)>>16,(o.duration&65280)>>8,o.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(o.width&65280)>>8,o.width&255,0,0,(o.height&65280)>>8,o.height&255,0,0]);return l(W.tkhd,s)},r1=function(o){var s,g,u,p,M,B,_;return s=l(W.tfhd,new Uint8Array([0,0,0,58,(o.id&4278190080)>>24,(o.id&16711680)>>16,(o.id&65280)>>8,o.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),B=Math.floor(o.baseMediaDecodeTime/h),_=Math.floor(o.baseMediaDecodeTime%h),g=l(W.tfdt,new Uint8Array([1,0,0,0,B>>>24&255,B>>>16&255,B>>>8&255,B&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255])),M=32+20+8+16+8+8,o.type==="audio"?(u=J(o,M),l(W.traf,s,g,u)):(p=N(o),u=J(o,p.length+M),l(W.traf,s,g,u,p))},x=function(o){return o.duration=o.duration||4294967295,l(W.trak,C(o),T(o))},Y=function(o){var s=new Uint8Array([0,0,0,0,(o.id&4278190080)>>24,(o.id&16711680)>>16,(o.id&65280)>>8,o.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return o.type!=="video"&&(s[s.length-1]=0),l(W.trex,s)},function(){var o,s,g;g=function(u,p){var M=0,B=0,_=0,b=0;return u.length&&(u[0].duration!==void 0&&(M=1),u[0].size!==void 0&&(B=2),u[0].flags!==void 0&&(_=4),u[0].compositionTimeOffset!==void 0&&(b=8)),[0,0,M|B|_|b,1,(u.length&4278190080)>>>24,(u.length&16711680)>>>16,(u.length&65280)>>>8,u.length&255,(p&4278190080)>>>24,(p&16711680)>>>16,(p&65280)>>>8,p&255]},s=function(u,p){var M,B,_,b,E,I;for(b=u.samples||[],p+=8+12+16*b.length,_=g(b,p),B=new Uint8Array(_.length+b.length*16),B.set(_),M=_.length,I=0;I<b.length;I++)E=b[I],B[M++]=(E.duration&4278190080)>>>24,B[M++]=(E.duration&16711680)>>>16,B[M++]=(E.duration&65280)>>>8,B[M++]=E.duration&255,B[M++]=(E.size&4278190080)>>>24,B[M++]=(E.size&16711680)>>>16,B[M++]=(E.size&65280)>>>8,B[M++]=E.size&255,B[M++]=E.flags.isLeading<<2|E.flags.dependsOn,B[M++]=E.flags.isDependedOn<<6|E.flags.hasRedundancy<<4|E.flags.paddingValue<<1|E.flags.isNonSyncSample,B[M++]=E.flags.degradationPriority&61440,B[M++]=E.flags.degradationPriority&15,B[M++]=(E.compositionTimeOffset&4278190080)>>>24,B[M++]=(E.compositionTimeOffset&16711680)>>>16,B[M++]=(E.compositionTimeOffset&65280)>>>8,B[M++]=E.compositionTimeOffset&255;return l(W.trun,B)},o=function(u,p){var M,B,_,b,E,I;for(b=u.samples||[],p+=8+12+8*b.length,_=g(b,p),M=new Uint8Array(_.length+b.length*8),M.set(_),B=_.length,I=0;I<b.length;I++)E=b[I],M[B++]=(E.duration&4278190080)>>>24,M[B++]=(E.duration&16711680)>>>16,M[B++]=(E.duration&65280)>>>8,M[B++]=E.duration&255,M[B++]=(E.size&4278190080)>>>24,M[B++]=(E.size&16711680)>>>16,M[B++]=(E.size&65280)>>>8,M[B++]=E.size&255;return l(W.trun,M)},J=function(u,p){return u.type==="audio"?o(u,p):s(u,p)}}();var gt={ftyp:d,mdat:z,moof:w,moov:O,initSegment:function(o){var s=d(),g=O(o),u;return u=new Uint8Array(s.byteLength+g.byteLength),u.set(s),u.set(g,s.byteLength),u}},V2=function(o){var s,g,u=[],p=[];for(p.byteLength=0,p.nalCount=0,p.duration=0,u.byteLength=0,s=0;s<o.length;s++)g=o[s],g.nalUnitType==="access_unit_delimiter_rbsp"?(u.length&&(u.duration=g.dts-u.dts,p.byteLength+=u.byteLength,p.nalCount+=u.length,p.duration+=u.duration,p.push(u)),u=[g],u.byteLength=g.data.byteLength,u.pts=g.pts,u.dts=g.dts):(g.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(u.keyFrame=!0),u.duration=g.dts-u.dts,u.byteLength+=g.data.byteLength,u.push(g));return p.length&&(!u.duration||u.duration<=0)&&(u.duration=p[p.length-1].duration),p.byteLength+=u.byteLength,p.nalCount+=u.length,p.duration+=u.duration,p.push(u),p},I0=function(o){var s,g,u=[],p=[];for(u.byteLength=0,u.nalCount=0,u.duration=0,u.pts=o[0].pts,u.dts=o[0].dts,p.byteLength=0,p.nalCount=0,p.duration=0,p.pts=o[0].pts,p.dts=o[0].dts,s=0;s<o.length;s++)g=o[s],g.keyFrame?(u.length&&(p.push(u),p.byteLength+=u.byteLength,p.nalCount+=u.nalCount,p.duration+=u.duration),u=[g],u.nalCount=g.length,u.byteLength=g.byteLength,u.pts=g.pts,u.dts=g.dts,u.duration=g.duration):(u.duration+=g.duration,u.nalCount+=g.length,u.byteLength+=g.byteLength,u.push(g));return p.length&&u.duration<=0&&(u.duration=p[p.length-1].duration),p.byteLength+=u.byteLength,p.nalCount+=u.nalCount,p.duration+=u.duration,p.push(u),p},t0=function(o){var s;return!o[0][0].keyFrame&&o.length>1&&(s=o.shift(),o.byteLength-=s.byteLength,o.nalCount-=s.nalCount,o[0][0].dts=s.dts,o[0][0].pts=s.pts,o[0][0].duration+=s.duration),o},go=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},B5=function(o,s){var g=go();return g.dataOffset=s,g.compositionTimeOffset=o.pts-o.dts,g.duration=o.duration,g.size=4*o.length,g.size+=o.byteLength,o.keyFrame&&(g.flags.dependsOn=2,g.flags.isNonSyncSample=0),g},po=function(o,s){var g,u,p,M,B,_=s||0,b=[];for(g=0;g<o.length;g++)for(M=o[g],u=0;u<M.length;u++)B=M[u],p=B5(B,_),_+=p.size,b.push(p);return b},fo=function(o){var s,g,u,p,M,B,_=0,b=o.byteLength,E=o.nalCount,I=b+4*E,U=new Uint8Array(I),i1=new DataView(U.buffer);for(s=0;s<o.length;s++)for(p=o[s],g=0;g<p.length;g++)for(M=p[g],u=0;u<M.length;u++)B=M[u],i1.setUint32(_,B.data.byteLength),_+=4,U.set(B.data,_),_+=B.data.byteLength;return U},S5=function(o,s){var g,u=s||0,p=[];return g=B5(o,u),p.push(g),p},j0=function(o){var s,g,u=0,p=o.byteLength,M=o.length,B=p+4*M,_=new Uint8Array(B),b=new DataView(_.buffer);for(s=0;s<o.length;s++)g=o[s],b.setUint32(u,g.data.byteLength),u+=4,_.set(g.data,u),u+=g.data.byteLength;return _},_5={groupNalsIntoFrames:V2,groupFramesIntoGops:I0,extendFirstKeyFrame:t0,generateSampleTable:po,concatenateNalData:fo,generateSampleTableForFrame:S5,concatenateNalDataForFrame:j0},j2=[33,16,5,32,164,27],R0=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],y1=function(o){for(var s=[];o--;)s.push(0);return s},b4=function(o){return Object.keys(o).reduce(function(s,g){return s[g]=new Uint8Array(o[g].reduce(function(u,p){return u.concat(p)},[])),s},{})},e0,yt=function(){if(!e0){var o={96e3:[j2,[227,64],y1(154),[56]],88200:[j2,[231],y1(170),[56]],64e3:[j2,[248,192],y1(240),[56]],48e3:[j2,[255,192],y1(268),[55,148,128],y1(54),[112]],44100:[j2,[255,192],y1(268),[55,163,128],y1(84),[112]],32e3:[j2,[255,192],y1(268),[55,234],y1(226),[112]],24e3:[j2,[255,192],y1(268),[55,255,128],y1(268),[111,112],y1(126),[224]],16e3:[j2,[255,192],y1(268),[55,255,128],y1(268),[111,255],y1(269),[223,108],y1(195),[1,192]],12e3:[R0,y1(268),[3,127,248],y1(268),[6,255,240],y1(268),[13,255,224],y1(268),[27,253,128],y1(259),[56]],11025:[R0,y1(268),[3,127,248],y1(268),[6,255,240],y1(268),[13,255,224],y1(268),[27,255,192],y1(268),[55,175,128],y1(108),[112]],8e3:[R0,y1(268),[3,121,16],y1(47),[7]]};e0=b4(o)}return e0},A4=9e4,lr,or,E4,cr,T5,O5,b5;lr=function(o){return o*A4},or=function(o,s){return o*s},E4=function(o){return o/A4},cr=function(o,s){return o/s},T5=function(o,s){return lr(cr(o,s))},O5=function(o,s){return or(E4(o),s)},b5=function(o,s,g){return E4(g?o:o-s)};var k1={ONE_SECOND_IN_TS:A4,secondsToVideoTs:lr,secondsToAudioTs:or,videoTsToSeconds:E4,audioTsToSeconds:cr,audioTsToVideoTs:T5,videoTsToAudioTs:O5,metadataTsToSeconds:b5},A5=yt,w2=k1,E5=function(o){var s,g,u=0;for(s=0;s<o.length;s++)g=o[s],u+=g.data.byteLength;return u},zo=function(o,s,g,u){var p,M=0,B=0,_=0,b=0,E,I,U;if(s.length&&(p=w2.audioTsToVideoTs(o.baseMediaDecodeTime,o.samplerate),M=Math.ceil(w2.ONE_SECOND_IN_TS/(o.samplerate/1024)),g&&u&&(B=p-Math.max(g,u),_=Math.floor(B/M),b=_*M),!(_<1||b>w2.ONE_SECOND_IN_TS/2))){for(E=A5()[o.samplerate],E||(E=s[0].data),I=0;I<_;I++)U=s[0],s.splice(0,0,{data:E,dts:U.dts-M,pts:U.pts-M});return o.baseMediaDecodeTime-=Math.floor(w2.videoTsToAudioTs(b,o.samplerate)),b}},Mo=function(o,s,g){return s.minSegmentDts>=g?o:(s.minSegmentDts=1/0,o.filter(function(u){return u.dts>=g?(s.minSegmentDts=Math.min(s.minSegmentDts,u.dts),s.minSegmentPts=s.minSegmentDts,!0):!1}))},mo=function(o){var s,g,u=[];for(s=0;s<o.length;s++)g=o[s],u.push({size:g.data.byteLength,duration:1024});return u},k4=function(o){var s,g,u=0,p=new Uint8Array(E5(o));for(s=0;s<o.length;s++)g=o[s],p.set(g.data,u),u+=g.data.byteLength;return p},sr={prefixWithSilence:zo,trimAdtsFramesByEarliestDts:Mo,generateSampleTable:mo,concatenateFrameData:k4},a0=k1.ONE_SECOND_IN_TS,Ho=function(o,s){typeof s.pts=="number"&&(o.timelineStartInfo.pts===void 0&&(o.timelineStartInfo.pts=s.pts),o.minSegmentPts===void 0?o.minSegmentPts=s.pts:o.minSegmentPts=Math.min(o.minSegmentPts,s.pts),o.maxSegmentPts===void 0?o.maxSegmentPts=s.pts:o.maxSegmentPts=Math.max(o.maxSegmentPts,s.pts)),typeof s.dts=="number"&&(o.timelineStartInfo.dts===void 0&&(o.timelineStartInfo.dts=s.dts),o.minSegmentDts===void 0?o.minSegmentDts=s.dts:o.minSegmentDts=Math.min(o.minSegmentDts,s.dts),o.maxSegmentDts===void 0?o.maxSegmentDts=s.dts:o.maxSegmentDts=Math.max(o.maxSegmentDts,s.dts))},vr=function(o){delete o.minSegmentDts,delete o.maxSegmentDts,delete o.minSegmentPts,delete o.maxSegmentPts},xo=function(o,s){var g,u,p=o.minSegmentDts;return s||(p-=o.timelineStartInfo.dts),g=o.timelineStartInfo.baseMediaDecodeTime,g+=p,g=Math.max(0,g),o.type==="audio"&&(u=o.samplerate/a0,g*=u,g=Math.floor(g)),g},Vo={clearDtsInfo:vr,calculateTrackBaseMediaDecodeTime:xo,collectDtsInfo:Ho},dr=4,wo=128,ur=function(o){for(var s=0,g={payloadType:-1,payloadSize:0},u=0,p=0;s<o.byteLength&&o[s]!==wo;){for(;o[s]===255;)u+=255,s++;for(u+=o[s++];o[s]===255;)p+=255,s++;if(p+=o[s++],!g.payload&&u===dr){var M=String.fromCharCode(o[s+3],o[s+4],o[s+5],o[s+6]);if(M==="GA94"){g.payloadType=u,g.payloadSize=p,g.payload=o.subarray(s,s+p);break}else g.payload=void 0}s+=p,u=0,p=0}return g},gr=function(o){return o.payload[0]!==181||(o.payload[1]<<8|o.payload[2])!==49||String.fromCharCode(o.payload[3],o.payload[4],o.payload[5],o.payload[6])!=="GA94"||o.payload[7]!==3?null:o.payload.subarray(8,o.payload.length-1)},k5=function(o,s){var g=[],u,p,M,B;if(!(s[0]&64))return g;for(p=s[0]&31,u=0;u<p;u++)M=u*3,B={type:s[M+2]&3,pts:o},s[M+2]&4&&(B.ccData=s[M+3]<<8|s[M+4],g.push(B));return g},Lo=function(o){for(var s=o.byteLength,g=[],u=1,p,M;u<s-2;)o[u]===0&&o[u+1]===0&&o[u+2]===3?(g.push(u+2),u+=2):u++;if(g.length===0)return o;p=s-g.length,M=new Uint8Array(p);var B=0;for(u=0;u<p;B++,u++)B===g[0]&&(B++,g.shift()),M[u]=o[B];return M},q1={parseSei:ur,parseUserData:gr,parseCaptionPackets:k5,discardEmulationPreventionBytes:Lo,USER_DATA_REGISTERED_ITU_T_T35:dr},M1=a,N0=q1,Ct=function(o){o=o||{},Ct.prototype.init.call(this),this.parse708captions_=typeof o.parse708captions=="boolean"?o.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new _1(0,0),new _1(0,1),new _1(1,0),new _1(1,1)],this.parse708captions_&&(this.cc708Stream_=new S1({captionServices:o.captionServices})),this.reset(),this.ccStreams_.forEach(function(s){s.on("data",this.trigger.bind(this,"data")),s.on("partialdone",this.trigger.bind(this,"partialdone")),s.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ct.prototype=new M1,Ct.prototype.push=function(o){var s,g,u;if(o.nalUnitType==="sei_rbsp"&&(s=N0.parseSei(o.escapedRBSP),!!s.payload&&s.payloadType===N0.USER_DATA_REGISTERED_ITU_T_T35&&(g=N0.parseUserData(s),!!g))){if(o.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(o.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}u=N0.parseCaptionPackets(o.pts,g),this.captionPackets_=this.captionPackets_.concat(u),this.latestDts_!==o.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=o.dts}},Ct.prototype.flushCCStreams=function(o){this.ccStreams_.forEach(function(s){return o==="flush"?s.flush():s.partialFlush()},this)},Ct.prototype.flushStream=function(o){if(!this.captionPackets_.length){this.flushCCStreams(o);return}this.captionPackets_.forEach(function(s,g){s.presortIndex=g}),this.captionPackets_.sort(function(s,g){return s.pts===g.pts?s.presortIndex-g.presortIndex:s.pts-g.pts}),this.captionPackets_.forEach(function(s){s.type<2?this.dispatchCea608Packet(s):this.dispatchCea708Packet(s)},this),this.captionPackets_.length=0,this.flushCCStreams(o)},Ct.prototype.flush=function(){return this.flushStream("flush")},Ct.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ct.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(o){o.reset()})},Ct.prototype.dispatchCea608Packet=function(o){this.setsTextOrXDSActive(o)?this.activeCea608Channel_[o.type]=null:this.setsChannel1Active(o)?this.activeCea608Channel_[o.type]=0:this.setsChannel2Active(o)&&(this.activeCea608Channel_[o.type]=1),this.activeCea608Channel_[o.type]!==null&&this.ccStreams_[(o.type<<1)+this.activeCea608Channel_[o.type]].push(o)},Ct.prototype.setsChannel1Active=function(o){return(o.ccData&30720)===4096},Ct.prototype.setsChannel2Active=function(o){return(o.ccData&30720)===6144},Ct.prototype.setsTextOrXDSActive=function(o){return(o.ccData&28928)===256||(o.ccData&30974)===4138||(o.ccData&30974)===6186},Ct.prototype.dispatchCea708Packet=function(o){this.parse708captions_&&this.cc708Stream_.push(o)};var P5={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},yo=function(o){var s=P5[o]||o;return o&4096&&o===s?"":String.fromCharCode(s)},le=function(o){return 32<=o&&o<=127||160<=o&&o<=255},Ht=function(o){this.windowNum=o,this.reset()};Ht.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ht.prototype.getText=function(){return this.rows.join(`
`)},Ht.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ht.prototype.newLine=function(o){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(o),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ht.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ht.prototype.addText=function(o){this.rows[this.rowIdx]+=o},Ht.prototype.backspace=function(){if(!this.isEmpty()){var o=this.rows[this.rowIdx];this.rows[this.rowIdx]=o.substr(0,o.length-1)}};var F0=function(o,s,g){this.serviceNum=o,this.text="",this.currentWindow=new Ht(-1),this.windows=[],this.stream=g,typeof s=="string"&&this.createTextDecoder(s)};F0.prototype.init=function(o,s){this.startPts=o;for(var g=0;g<8;g++)this.windows[g]=new Ht(g),typeof s=="function"&&(this.windows[g].beforeRowOverflow=s)},F0.prototype.setCurrentWindow=function(o){this.currentWindow=this.windows[o]},F0.prototype.createTextDecoder=function(o){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(o)}catch(s){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+o+" encoding. "+s})}};var S1=function(o){o=o||{},S1.prototype.init.call(this);var s=this,g=o.captionServices||{},u={},p;Object.keys(g).forEach(M=>{p=g[M],/^SERVICE/.test(M)&&(u[M]=p.encoding)}),this.serviceEncodings=u,this.current708Packet=null,this.services={},this.push=function(M){M.type===3?(s.new708Packet(),s.add708Bytes(M)):(s.current708Packet===null&&s.new708Packet(),s.add708Bytes(M))}};S1.prototype=new M1,S1.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},S1.prototype.add708Bytes=function(o){var s=o.ccData,g=s>>>8,u=s&255;this.current708Packet.ptsVals.push(o.pts),this.current708Packet.data.push(g),this.current708Packet.data.push(u)},S1.prototype.push708Packet=function(){var o=this.current708Packet,s=o.data,g=null,u=null,p=0,M=s[p++];for(o.seq=M>>6,o.sizeCode=M&63;p<s.length;p++)M=s[p++],g=M>>5,u=M&31,g===7&&u>0&&(M=s[p++],g=M),this.pushServiceBlock(g,p,u),u>0&&(p+=u-1)},S1.prototype.pushServiceBlock=function(o,s,g){var u,p=s,M=this.current708Packet.data,B=this.services[o];for(B||(B=this.initService(o,p));p<s+g&&p<M.length;p++)u=M[p],le(u)?p=this.handleText(p,B):u===24?p=this.multiByteCharacter(p,B):u===16?p=this.extendedCommands(p,B):128<=u&&u<=135?p=this.setCurrentWindow(p,B):152<=u&&u<=159?p=this.defineWindow(p,B):u===136?p=this.clearWindows(p,B):u===140?p=this.deleteWindows(p,B):u===137?p=this.displayWindows(p,B):u===138?p=this.hideWindows(p,B):u===139?p=this.toggleWindows(p,B):u===151?p=this.setWindowAttributes(p,B):u===144?p=this.setPenAttributes(p,B):u===145?p=this.setPenColor(p,B):u===146?p=this.setPenLocation(p,B):u===143?B=this.reset(p,B):u===8?B.currentWindow.backspace():u===12?B.currentWindow.clearText():u===13?B.currentWindow.pendingNewLine=!0:u===14?B.currentWindow.clearText():u===141&&p++},S1.prototype.extendedCommands=function(o,s){var g=this.current708Packet.data,u=g[++o];return le(u)&&(o=this.handleText(o,s,{isExtended:!0})),o},S1.prototype.getPts=function(o){return this.current708Packet.ptsVals[Math.floor(o/2)]},S1.prototype.initService=function(o,s){var u="SERVICE"+o,g=this,u,p;return u in this.serviceEncodings&&(p=this.serviceEncodings[u]),this.services[o]=new F0(o,p,g),this.services[o].init(this.getPts(s),function(M){g.flushDisplayed(M,g.services[o])}),this.services[o]},S1.prototype.handleText=function(o,s,g){var u=g&&g.isExtended,p=g&&g.isMultiByte,M=this.current708Packet.data,B=u?4096:0,_=M[o],b=M[o+1],E=s.currentWindow,I,U;return s.textDecoder_&&!u?(p?(U=[_,b],o++):U=[_],I=s.textDecoder_.decode(new Uint8Array(U))):I=yo(B|_),E.pendingNewLine&&!E.isEmpty()&&E.newLine(this.getPts(o)),E.pendingNewLine=!1,E.addText(I),o},S1.prototype.multiByteCharacter=function(o,s){var g=this.current708Packet.data,u=g[o+1],p=g[o+2];return le(u)&&le(p)&&(o=this.handleText(++o,s,{isMultiByte:!0})),o},S1.prototype.setCurrentWindow=function(o,s){var g=this.current708Packet.data,u=g[o],p=u&7;return s.setCurrentWindow(p),o},S1.prototype.defineWindow=function(o,s){var g=this.current708Packet.data,u=g[o],p=u&7;s.setCurrentWindow(p);var M=s.currentWindow;return u=g[++o],M.visible=(u&32)>>5,M.rowLock=(u&16)>>4,M.columnLock=(u&8)>>3,M.priority=u&7,u=g[++o],M.relativePositioning=(u&128)>>7,M.anchorVertical=u&127,u=g[++o],M.anchorHorizontal=u,u=g[++o],M.anchorPoint=(u&240)>>4,M.rowCount=u&15,u=g[++o],M.columnCount=u&63,u=g[++o],M.windowStyle=(u&56)>>3,M.penStyle=u&7,M.virtualRowCount=M.rowCount+1,o},S1.prototype.setWindowAttributes=function(o,s){var g=this.current708Packet.data,u=g[o],p=s.currentWindow.winAttr;return u=g[++o],p.fillOpacity=(u&192)>>6,p.fillRed=(u&48)>>4,p.fillGreen=(u&12)>>2,p.fillBlue=u&3,u=g[++o],p.borderType=(u&192)>>6,p.borderRed=(u&48)>>4,p.borderGreen=(u&12)>>2,p.borderBlue=u&3,u=g[++o],p.borderType+=(u&128)>>5,p.wordWrap=(u&64)>>6,p.printDirection=(u&48)>>4,p.scrollDirection=(u&12)>>2,p.justify=u&3,u=g[++o],p.effectSpeed=(u&240)>>4,p.effectDirection=(u&12)>>2,p.displayEffect=u&3,o},S1.prototype.flushDisplayed=function(o,s){for(var g=[],u=0;u<8;u++)s.windows[u].visible&&!s.windows[u].isEmpty()&&g.push(s.windows[u].getText());s.endPts=o,s.text=g.join(`

`),this.pushCaption(s),s.startPts=o},S1.prototype.pushCaption=function(o){o.text!==""&&(this.trigger("data",{startPts:o.startPts,endPts:o.endPts,text:o.text,stream:"cc708_"+o.serviceNum}),o.text="",o.startPts=o.endPts)},S1.prototype.displayWindows=function(o,s){var g=this.current708Packet.data,u=g[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var M=0;M<8;M++)u&1<<M&&(s.windows[M].visible=1);return o},S1.prototype.hideWindows=function(o,s){var g=this.current708Packet.data,u=g[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var M=0;M<8;M++)u&1<<M&&(s.windows[M].visible=0);return o},S1.prototype.toggleWindows=function(o,s){var g=this.current708Packet.data,u=g[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var M=0;M<8;M++)u&1<<M&&(s.windows[M].visible^=1);return o},S1.prototype.clearWindows=function(o,s){var g=this.current708Packet.data,u=g[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var M=0;M<8;M++)u&1<<M&&s.windows[M].clearText();return o},S1.prototype.deleteWindows=function(o,s){var g=this.current708Packet.data,u=g[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var M=0;M<8;M++)u&1<<M&&s.windows[M].reset();return o},S1.prototype.setPenAttributes=function(o,s){var g=this.current708Packet.data,u=g[o],p=s.currentWindow.penAttr;return u=g[++o],p.textTag=(u&240)>>4,p.offset=(u&12)>>2,p.penSize=u&3,u=g[++o],p.italics=(u&128)>>7,p.underline=(u&64)>>6,p.edgeType=(u&56)>>3,p.fontStyle=u&7,o},S1.prototype.setPenColor=function(o,s){var g=this.current708Packet.data,u=g[o],p=s.currentWindow.penColor;return u=g[++o],p.fgOpacity=(u&192)>>6,p.fgRed=(u&48)>>4,p.fgGreen=(u&12)>>2,p.fgBlue=u&3,u=g[++o],p.bgOpacity=(u&192)>>6,p.bgRed=(u&48)>>4,p.bgGreen=(u&12)>>2,p.bgBlue=u&3,u=g[++o],p.edgeRed=(u&48)>>4,p.edgeGreen=(u&12)>>2,p.edgeBlue=u&3,o},S1.prototype.setPenLocation=function(o,s){var g=this.current708Packet.data,u=g[o],p=s.currentWindow.penLoc;return s.currentWindow.pendingNewLine=!0,u=g[++o],p.row=u&15,u=g[++o],p.column=u&63,o},S1.prototype.reset=function(o,s){var g=this.getPts(o);return this.flushDisplayed(g,s),this.initService(s.serviceNum,o)};var D5={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},U0=function(o){return o===null?"":(o=D5[o]||o,String.fromCharCode(o))},P4=14,Co=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Se=function(){for(var o=[],s=P4+1;s--;)o.push("");return o},_1=function(o,s){_1.prototype.init.call(this),this.field_=o||0,this.dataChannel_=s||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(g){var u,p,M,B,_;if(u=g.ccData&32639,u===this.lastControlCode_){this.lastControlCode_=null;return}if((u&61440)===4096?this.lastControlCode_=u:u!==this.PADDING_&&(this.lastControlCode_=null),M=u>>>8,B=u&255,u!==this.PADDING_)if(u===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(u===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(g.pts),this.flushDisplayed(g.pts),p=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=p,this.startPts_=g.pts;else if(u===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(g.pts);else if(u===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(g.pts);else if(u===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(g.pts);else if(u===this.CARRIAGE_RETURN_)this.clearFormatting(g.pts),this.flushDisplayed(g.pts),this.shiftRowsUp_(),this.startPts_=g.pts;else if(u===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(u===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(g.pts),this.displayed_=Se();else if(u===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Se();else if(u===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(g.pts),this.displayed_=Se()),this.mode_="paintOn",this.startPts_=g.pts;else if(this.isSpecialCharacter(M,B))M=(M&3)<<8,_=U0(M|B),this[this.mode_](g.pts,_),this.column_++;else if(this.isExtCharacter(M,B))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),M=(M&3)<<8,_=U0(M|B),this[this.mode_](g.pts,_),this.column_++;else if(this.isMidRowCode(M,B))this.clearFormatting(g.pts),this[this.mode_](g.pts," "),this.column_++,(B&14)===14&&this.addFormatting(g.pts,["i"]),(B&1)===1&&this.addFormatting(g.pts,["u"]);else if(this.isOffsetControlCode(M,B))this.column_+=B&3;else if(this.isPAC(M,B)){var b=Co.indexOf(u&7968);this.mode_==="rollUp"&&(b-this.rollUpRows_+1<0&&(b=this.rollUpRows_-1),this.setRollUp(g.pts,b)),b!==this.row_&&(this.clearFormatting(g.pts),this.row_=b),B&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(g.pts,["u"]),(u&16)===16&&(this.column_=((u&14)>>1)*4),this.isColorPAC(B)&&(B&14)===14&&this.addFormatting(g.pts,["i"])}else this.isNormalChar(M)&&(B===0&&(B=null),_=U0(M),_+=U0(B),this[this.mode_](g.pts,_),this.column_+=_.length)}};_1.prototype=new M1,_1.prototype.flushDisplayed=function(o){var s=this.displayed_.map(function(g,u){try{return g.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+u+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");s.length&&this.trigger("data",{startPts:this.startPts_,endPts:o,text:s,stream:this.name_})},_1.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Se(),this.nonDisplayed_=Se(),this.lastControlCode_=null,this.column_=0,this.row_=P4,this.rollUpRows_=2,this.formatting_=[]},_1.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},_1.prototype.isSpecialCharacter=function(o,s){return o===this.EXT_&&s>=48&&s<=63},_1.prototype.isExtCharacter=function(o,s){return(o===this.EXT_+1||o===this.EXT_+2)&&s>=32&&s<=63},_1.prototype.isMidRowCode=function(o,s){return o===this.EXT_&&s>=32&&s<=47},_1.prototype.isOffsetControlCode=function(o,s){return o===this.OFFSET_&&s>=33&&s<=35},_1.prototype.isPAC=function(o,s){return o>=this.BASE_&&o<this.BASE_+8&&s>=64&&s<=127},_1.prototype.isColorPAC=function(o){return o>=64&&o<=79||o>=96&&o<=127},_1.prototype.isNormalChar=function(o){return o>=32&&o<=127},_1.prototype.setRollUp=function(o,s){if(this.mode_!=="rollUp"&&(this.row_=P4,this.mode_="rollUp",this.flushDisplayed(o),this.nonDisplayed_=Se(),this.displayed_=Se()),s!==void 0&&s!==this.row_)for(var g=0;g<this.rollUpRows_;g++)this.displayed_[s-g]=this.displayed_[this.row_-g],this.displayed_[this.row_-g]="";s===void 0&&(s=this.row_),this.topRow_=s-this.rollUpRows_+1},_1.prototype.addFormatting=function(o,s){this.formatting_=this.formatting_.concat(s);var g=s.reduce(function(u,p){return u+"<"+p+">"},"");this[this.mode_](o,g)},_1.prototype.clearFormatting=function(o){if(this.formatting_.length){var s=this.formatting_.reverse().reduce(function(g,u){return g+"</"+u+">"},"");this.formatting_=[],this[this.mode_](o,s)}},_1.prototype.popOn=function(o,s){var g=this.nonDisplayed_[this.row_];g+=s,this.nonDisplayed_[this.row_]=g},_1.prototype.rollUp=function(o,s){var g=this.displayed_[this.row_];g+=s,this.displayed_[this.row_]=g},_1.prototype.shiftRowsUp_=function(){var o;for(o=0;o<this.topRow_;o++)this.displayed_[o]="";for(o=this.row_+1;o<P4+1;o++)this.displayed_[o]="";for(o=this.topRow_;o<this.row_;o++)this.displayed_[o]=this.displayed_[o+1];this.displayed_[this.row_]=""},_1.prototype.paintOn=function(o,s){var g=this.displayed_[this.row_];g+=s,this.displayed_[this.row_]=g};var I5={CaptionStream:Ct,Cea608Stream:_1,Cea708Stream:S1},$0={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Bo=a,So=8589934592,_o=4294967296,j5="shared",pr=function(o,s){var g=1;for(o>s&&(g=-1);Math.abs(s-o)>_o;)o+=g*So;return o},fr=function(o){var s,g;fr.prototype.init.call(this),this.type_=o||j5,this.push=function(u){this.type_!==j5&&u.type!==this.type_||(g===void 0&&(g=u.dts),u.dts=pr(u.dts,g),u.pts=pr(u.pts,g),s=u.dts,this.trigger("data",u))},this.flush=function(){g=s,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){g=void 0,s=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};fr.prototype=new Bo;var R5={TimestampRolloverStream:fr,handleRollover:pr},To=(o,s,g)=>{if(!o)return-1;for(var u=g;u<o.length;u++)if(o[u]===s)return u;return-1},Oo={typedArrayIndexOf:To},D4=Oo.typedArrayIndexOf,W0={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},bo=function(o,s,g){var u,p="";for(u=s;u<g;u++)p+="%"+("00"+o[u].toString(16)).slice(-2);return p},G0=function(o,s,g){return decodeURIComponent(bo(o,s,g))},_e=function(o,s,g){return unescape(bo(o,s,g))},Te=function(o){return o[0]<<21|o[1]<<14|o[2]<<7|o[3]},R2={APIC:function(o){var s=1,g,u,p="-->";o.data[0]===W0.Utf8&&(g=D4(o.data,0,s),!(g<0)&&(o.mimeType=_e(o.data,s,g),s=g+1,o.pictureType=o.data[s],s++,u=D4(o.data,0,s),!(u<0)&&(o.description=G0(o.data,s,u),s=u+1,o.mimeType===p?o.url=_e(o.data,s,o.data.length):o.pictureData=o.data.subarray(s,o.data.length))))},"T*":function(o){o.data[0]===W0.Utf8&&(o.value=G0(o.data,1,o.data.length).replace(/\0*$/,""),o.values=o.value.split("\0"))},TXXX:function(o){var s;o.data[0]===W0.Utf8&&(s=D4(o.data,0,1),s!==-1&&(o.description=G0(o.data,1,s),o.value=G0(o.data,s+1,o.data.length).replace(/\0*$/,""),o.data=o.value))},"W*":function(o){o.url=_e(o.data,0,o.data.length).replace(/\0.*$/,"")},WXXX:function(o){var s;o.data[0]===W0.Utf8&&(s=D4(o.data,0,1),s!==-1&&(o.description=G0(o.data,1,s),o.url=_e(o.data,s+1,o.data.length).replace(/\0.*$/,"")))},PRIV:function(o){var s;for(s=0;s<o.data.length;s++)if(o.data[s]===0){o.owner=_e(o.data,0,s);break}o.privateData=o.data.subarray(s+1),o.data=o.privateData}},m=function(o){var s,g,u=10,p=0,M=[];if(!(o.length<10||o[0]!=="I".charCodeAt(0)||o[1]!=="D".charCodeAt(0)||o[2]!=="3".charCodeAt(0))){p=Te(o.subarray(6,10)),p+=10;var B=o[5]&64;B&&(u+=4,u+=Te(o.subarray(10,14)),p-=Te(o.subarray(16,20)));do{if(s=Te(o.subarray(u+4,u+8)),s<1)break;g=String.fromCharCode(o[u],o[u+1],o[u+2],o[u+3]);var _={id:g,data:o.subarray(u+10,u+s+10)};_.key=_.id,R2[_.id]?R2[_.id](_):_.id[0]==="T"?R2["T*"](_):_.id[0]==="W"&&R2["W*"](_),M.push(_),u+=10,u+=s}while(u<p);return M}},f={parseId3Frames:m,parseSyncSafeInteger:Te,frameParsers:R2},H=a,A=$0,D=f,j;j=function(o){var s={descriptor:o&&o.descriptor},g=0,u=[],p=0,M;if(j.prototype.init.call(this),this.dispatchType=A.METADATA_STREAM_TYPE.toString(16),s.descriptor)for(M=0;M<s.descriptor.length;M++)this.dispatchType+=("00"+s.descriptor[M].toString(16)).slice(-2);this.push=function(B){var _,b,E,I,U,i1;if(B.type==="timed-metadata"){if(B.dataAlignmentIndicator&&(p=0,u.length=0),u.length===0&&(B.data.length<10||B.data[0]!=="I".charCodeAt(0)||B.data[1]!=="D".charCodeAt(0)||B.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(u.push(B),p+=B.data.byteLength,u.length===1&&(g=D.parseSyncSafeInteger(B.data.subarray(6,10)),g+=10),!(p<g)){for(_={data:new Uint8Array(g),frames:[],pts:u[0].pts,dts:u[0].dts},U=0;U<g;)_.data.set(u[0].data.subarray(0,g-U),U),U+=u[0].data.byteLength,p-=u[0].data.byteLength,u.shift();b=10,_.data[5]&64&&(b+=4,b+=D.parseSyncSafeInteger(_.data.subarray(10,14)),g-=D.parseSyncSafeInteger(_.data.subarray(16,20)));do{if(E=D.parseSyncSafeInteger(_.data.subarray(b+4,b+8)),E<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(i1=String.fromCharCode(_.data[b],_.data[b+1],_.data[b+2],_.data[b+3]),I={id:i1,data:_.data.subarray(b+10,b+E+10)},I.key=I.id,D.frameParsers[I.id]?D.frameParsers[I.id](I):I.id[0]==="T"?D.frameParsers["T*"](I):I.id[0]==="W"&&D.frameParsers["W*"](I),I.owner==="com.apple.streaming.transportStreamTimestamp"){var X=I.data,g1=(X[3]&1)<<30|X[4]<<22|X[5]<<14|X[6]<<6|X[7]>>>2;g1*=4,g1+=X[7]&3,I.timeStamp=g1,_.pts===void 0&&_.dts===void 0&&(_.pts=I.timeStamp,_.dts=I.timeStamp),this.trigger("timestamp",I)}_.frames.push(I),b+=10,b+=E}while(b<g);this.trigger("data",_)}}}},j.prototype=new H;var q=j,Q=a,u1=I5,v1=$0,D1=R5.TimestampRolloverStream,H1,I1,T1,Qt=188,N2=71;H1=function(){var o=new Uint8Array(Qt),s=0;H1.prototype.init.call(this),this.push=function(g){var u=0,p=Qt,M;for(s?(M=new Uint8Array(g.byteLength+s),M.set(o.subarray(0,s)),M.set(g,s),s=0):M=g;p<M.byteLength;){if(M[u]===N2&&M[p]===N2){this.trigger("data",M.subarray(u,p)),u+=Qt,p+=Qt;continue}u++,p++}u<M.byteLength&&(o.set(M.subarray(u),0),s=M.byteLength-u)},this.flush=function(){s===Qt&&o[0]===N2&&(this.trigger("data",o),s=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){s=0,this.trigger("reset")}},H1.prototype=new Q,I1=function(){var o,s,g,u;I1.prototype.init.call(this),u=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,o=function(p,M){var B=0;M.payloadUnitStartIndicator&&(B+=p[B]+1),M.type==="pat"?s(p.subarray(B),M):g(p.subarray(B),M)},s=function(p,M){M.section_number=p[7],M.last_section_number=p[8],u.pmtPid=(p[10]&31)<<8|p[11],M.pmtPid=u.pmtPid},g=function(p,M){var B,_,b,E;if(p[5]&1){for(u.programMapTable={video:null,audio:null,"timed-metadata":{}},B=(p[1]&15)<<8|p[2],_=3+B-4,b=(p[10]&15)<<8|p[11],E=12+b;E<_;){var I=p[E],U=(p[E+1]&31)<<8|p[E+2];I===v1.H264_STREAM_TYPE&&u.programMapTable.video===null?u.programMapTable.video=U:I===v1.ADTS_STREAM_TYPE&&u.programMapTable.audio===null?u.programMapTable.audio=U:I===v1.METADATA_STREAM_TYPE&&(u.programMapTable["timed-metadata"][U]=I),E+=((p[E+3]&15)<<8|p[E+4])+5}M.programMapTable=u.programMapTable}},this.push=function(p){var M={},B=4;if(M.payloadUnitStartIndicator=!!(p[1]&64),M.pid=p[1]&31,M.pid<<=8,M.pid|=p[2],(p[3]&48)>>>4>1&&(B+=p[B]+1),M.pid===0)M.type="pat",o(p.subarray(B),M),this.trigger("data",M);else if(M.pid===this.pmtPid)for(M.type="pmt",o(p.subarray(B),M),this.trigger("data",M);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([p,B,M]):this.processPes_(p,B,M)},this.processPes_=function(p,M,B){B.pid===this.programMapTable.video?B.streamType=v1.H264_STREAM_TYPE:B.pid===this.programMapTable.audio?B.streamType=v1.ADTS_STREAM_TYPE:B.streamType=this.programMapTable["timed-metadata"][B.pid],B.type="pes",B.data=p.subarray(M),this.trigger("data",B)}},I1.prototype=new Q,I1.STREAM_TYPES={h264:27,adts:15},T1=function(){var o=this,s=!1,g={data:[],size:0},u={data:[],size:0},p={data:[],size:0},M,B=function(b,E){var I;let U=b[0]<<16|b[1]<<8|b[2];E.data=new Uint8Array,U===1&&(E.packetLength=6+(b[4]<<8|b[5]),E.dataAlignmentIndicator=(b[6]&4)!==0,I=b[7],I&192&&(E.pts=(b[9]&14)<<27|(b[10]&255)<<20|(b[11]&254)<<12|(b[12]&255)<<5|(b[13]&254)>>>3,E.pts*=4,E.pts+=(b[13]&6)>>>1,E.dts=E.pts,I&64&&(E.dts=(b[14]&14)<<27|(b[15]&255)<<20|(b[16]&254)<<12|(b[17]&255)<<5|(b[18]&254)>>>3,E.dts*=4,E.dts+=(b[18]&6)>>>1)),E.data=b.subarray(9+b[8]))},_=function(b,E,I){var U=new Uint8Array(b.size),i1={type:E},X=0,g1=0,p1=!1,ct;if(!(!b.data.length||b.size<9)){for(i1.trackId=b.data[0].pid,X=0;X<b.data.length;X++)ct=b.data[X],U.set(ct.data,g1),g1+=ct.data.byteLength;B(U,i1),p1=E==="video"||i1.packetLength<=b.size,(I||p1)&&(b.size=0,b.data.length=0),p1&&o.trigger("data",i1)}};T1.prototype.init.call(this),this.push=function(b){({pat:function(){},pes:function(){var E,I;switch(b.streamType){case v1.H264_STREAM_TYPE:E=g,I="video";break;case v1.ADTS_STREAM_TYPE:E=u,I="audio";break;case v1.METADATA_STREAM_TYPE:E=p,I="timed-metadata";break;default:return}b.payloadUnitStartIndicator&&_(E,I,!0),E.data.push(b),E.size+=b.data.byteLength},pmt:function(){var E={type:"metadata",tracks:[]};M=b.programMapTable,M.video!==null&&E.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.video,codec:"avc",type:"video"}),M.audio!==null&&E.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.audio,codec:"adts",type:"audio"}),s=!0,o.trigger("data",E)}})[b.type]()},this.reset=function(){g.size=0,g.data.length=0,u.size=0,u.data.length=0,this.trigger("reset")},this.flushStreams_=function(){_(g,"video"),_(u,"audio"),_(p,"timed-metadata")},this.flush=function(){if(!s&&M){var b={type:"metadata",tracks:[]};M.video!==null&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.video,codec:"avc",type:"video"}),M.audio!==null&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+M.audio,codec:"adts",type:"audio"}),o.trigger("data",b)}s=!1,this.flushStreams_(),this.trigger("done")}},T1.prototype=new Q;var zr={PAT_PID:0,MP2T_PACKET_LENGTH:Qt,TransportPacketStream:H1,TransportParseStream:I1,ElementaryStream:T1,TimestampRolloverStream:D1,CaptionStream:u1.CaptionStream,Cea608Stream:u1.Cea608Stream,Cea708Stream:u1.Cea708Stream,MetadataStream:q};for(var Ao in v1)v1.hasOwnProperty(Ao)&&(zr[Ao]=v1[Ao]);var UM=zr,$M=a,WM=k1.ONE_SECOND_IN_TS,N5,Q6=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];N5=function(o){var s,g=0;N5.prototype.init.call(this),this.skipWarn_=function(u,p){this.trigger("log",{level:"warn",message:`adts skiping bytes ${u} to ${p} in frame ${g} outside syncword`})},this.push=function(u){var p=0,M,B,_,b,E;if(o||(g=0),u.type==="audio"){s&&s.length?(_=s,s=new Uint8Array(_.byteLength+u.data.byteLength),s.set(_),s.set(u.data,_.byteLength)):s=u.data;for(var I;p+7<s.length;){if(s[p]!==255||(s[p+1]&246)!==240){typeof I!="number"&&(I=p),p++;continue}if(typeof I=="number"&&(this.skipWarn_(I,p),I=null),B=(~s[p+1]&1)*2,M=(s[p+3]&3)<<11|s[p+4]<<3|(s[p+5]&224)>>5,b=((s[p+6]&3)+1)*1024,E=b*WM/Q6[(s[p+2]&60)>>>2],s.byteLength-p<M)break;this.trigger("data",{pts:u.pts+g*E,dts:u.dts+g*E,sampleCount:b,audioobjecttype:(s[p+2]>>>6&3)+1,channelcount:(s[p+2]&1)<<2|(s[p+3]&192)>>>6,samplerate:Q6[(s[p+2]&60)>>>2],samplingfrequencyindex:(s[p+2]&60)>>>2,samplesize:16,data:s.subarray(p+7+B,p+M)}),g++,p+=M}typeof I=="number"&&(this.skipWarn_(I,p),I=null),s=s.subarray(p)}},this.flush=function(){g=0,this.trigger("done")},this.reset=function(){s=void 0,this.trigger("reset")},this.endTimeline=function(){s=void 0,this.trigger("endedtimeline")}},N5.prototype=new $M;var qM=N5,J6;J6=function(o){var s=o.byteLength,g=0,u=0;this.length=function(){return 8*s},this.bitsAvailable=function(){return 8*s+u},this.loadWord=function(){var p=o.byteLength-s,M=new Uint8Array(4),B=Math.min(4,s);if(B===0)throw new Error("no bytes available");M.set(o.subarray(p,p+B)),g=new DataView(M.buffer).getUint32(0),u=B*8,s-=B},this.skipBits=function(p){var M;u>p?(g<<=p,u-=p):(p-=u,M=Math.floor(p/8),p-=M*8,s-=M,this.loadWord(),g<<=p,u-=p)},this.readBits=function(p){var M=Math.min(u,p),B=g>>>32-M;return u-=M,u>0?g<<=M:s>0&&this.loadWord(),M=p-M,M>0?B<<M|this.readBits(M):B},this.skipLeadingZeros=function(){var p;for(p=0;p<u;++p)if(g&2147483648>>>p)return g<<=p,u-=p,p;return this.loadWord(),p+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var p=this.skipLeadingZeros();return this.readBits(p+1)-1},this.readExpGolomb=function(){var p=this.readUnsignedExpGolomb();return 1&p?1+p>>>1:-1*(p>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var KM=J6,Z6=a,XM=KM,F5,Mr,tv;Mr=function(){var o=0,s,g;Mr.prototype.init.call(this),this.push=function(u){var p;g?(p=new Uint8Array(g.byteLength+u.data.byteLength),p.set(g),p.set(u.data,g.byteLength),g=p):g=u.data;for(var M=g.byteLength;o<M-3;o++)if(g[o+2]===1){s=o+5;break}for(;s<M;)switch(g[s]){case 0:if(g[s-1]!==0){s+=2;break}else if(g[s-2]!==0){s++;break}o+3!==s-2&&this.trigger("data",g.subarray(o+3,s-2));do s++;while(g[s]!==1&&s<M);o=s-2,s+=3;break;case 1:if(g[s-1]!==0||g[s-2]!==0){s+=3;break}this.trigger("data",g.subarray(o+3,s-2)),o=s-2,s+=3;break;default:s+=3;break}g=g.subarray(o),s-=o,o=0},this.reset=function(){g=null,o=0,this.trigger("reset")},this.flush=function(){g&&g.byteLength>3&&this.trigger("data",g.subarray(o+3)),g=null,o=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Mr.prototype=new Z6,tv={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},F5=function(){var o=new Mr,s,g,u,p,M,B,_;F5.prototype.init.call(this),s=this,this.push=function(b){b.type==="video"&&(g=b.trackId,u=b.pts,p=b.dts,o.push(b))},o.on("data",function(b){var E={trackId:g,pts:u,dts:p,data:b,nalUnitTypeCode:b[0]&31};switch(E.nalUnitTypeCode){case 5:E.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:E.nalUnitType="sei_rbsp",E.escapedRBSP=M(b.subarray(1));break;case 7:E.nalUnitType="seq_parameter_set_rbsp",E.escapedRBSP=M(b.subarray(1)),E.config=B(E.escapedRBSP);break;case 8:E.nalUnitType="pic_parameter_set_rbsp";break;case 9:E.nalUnitType="access_unit_delimiter_rbsp";break}s.trigger("data",E)}),o.on("done",function(){s.trigger("done")}),o.on("partialdone",function(){s.trigger("partialdone")}),o.on("reset",function(){s.trigger("reset")}),o.on("endedtimeline",function(){s.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},_=function(b,E){var I=8,U=8,i1,X;for(i1=0;i1<b;i1++)U!==0&&(X=E.readExpGolomb(),U=(I+X+256)%256),I=U===0?I:U},M=function(b){for(var E=b.byteLength,I=[],U=1,i1,X;U<E-2;)b[U]===0&&b[U+1]===0&&b[U+2]===3?(I.push(U+2),U+=2):U++;if(I.length===0)return b;i1=E-I.length,X=new Uint8Array(i1);var g1=0;for(U=0;U<i1;g1++,U++)g1===I[0]&&(g1++,I.shift()),X[U]=b[g1];return X},B=function(b){var E=0,I=0,U=0,i1=0,X,g1,p1,ct,L2,X0,_v,Tv,Ov,Uo,bv,it=[1,1],Av,Y0;if(X=new XM(b),g1=X.readUnsignedByte(),ct=X.readUnsignedByte(),p1=X.readUnsignedByte(),X.skipUnsignedExpGolomb(),tv[g1]&&(L2=X.readUnsignedExpGolomb(),L2===3&&X.skipBits(1),X.skipUnsignedExpGolomb(),X.skipUnsignedExpGolomb(),X.skipBits(1),X.readBoolean()))for(bv=L2!==3?8:12,Y0=0;Y0<bv;Y0++)X.readBoolean()&&(Y0<6?_(16,X):_(64,X));if(X.skipUnsignedExpGolomb(),X0=X.readUnsignedExpGolomb(),X0===0)X.readUnsignedExpGolomb();else if(X0===1)for(X.skipBits(1),X.skipExpGolomb(),X.skipExpGolomb(),_v=X.readUnsignedExpGolomb(),Y0=0;Y0<_v;Y0++)X.skipExpGolomb();if(X.skipUnsignedExpGolomb(),X.skipBits(1),Tv=X.readUnsignedExpGolomb(),Ov=X.readUnsignedExpGolomb(),Uo=X.readBits(1),Uo===0&&X.skipBits(1),X.skipBits(1),X.readBoolean()&&(E=X.readUnsignedExpGolomb(),I=X.readUnsignedExpGolomb(),U=X.readUnsignedExpGolomb(),i1=X.readUnsignedExpGolomb()),X.readBoolean()&&X.readBoolean()){switch(Av=X.readUnsignedByte(),Av){case 1:it=[1,1];break;case 2:it=[12,11];break;case 3:it=[10,11];break;case 4:it=[16,11];break;case 5:it=[40,33];break;case 6:it=[24,11];break;case 7:it=[20,11];break;case 8:it=[32,11];break;case 9:it=[80,33];break;case 10:it=[18,11];break;case 11:it=[15,11];break;case 12:it=[64,33];break;case 13:it=[160,99];break;case 14:it=[4,3];break;case 15:it=[3,2];break;case 16:it=[2,1];break;case 255:{it=[X.readUnsignedByte()<<8|X.readUnsignedByte(),X.readUnsignedByte()<<8|X.readUnsignedByte()];break}}it&&it[0]/it[1]}return{profileIdc:g1,levelIdc:p1,profileCompatibility:ct,width:(Tv+1)*16-E*2-I*2,height:(2-Uo)*(Ov+1)*16-U*2-i1*2,sarRatio:it}}},F5.prototype=new Z6;var YM={H264Stream:F5,NalByteStream:Mr},QM=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ev=function(o,s){var g=o[s+6]<<21|o[s+7]<<14|o[s+8]<<7|o[s+9],u=o[s+5],p=(u&16)>>4;return g=g>=0?g:0,p?g+20:g+10},av=function(o,s){return o.length-s<10||o[s]!=="I".charCodeAt(0)||o[s+1]!=="D".charCodeAt(0)||o[s+2]!=="3".charCodeAt(0)?s:(s+=ev(o,s),av(o,s))},JM=function(o){var s=av(o,0);return o.length>=s+2&&(o[s]&255)===255&&(o[s+1]&240)===240&&(o[s+1]&22)===16},rv=function(o){return o[0]<<21|o[1]<<14|o[2]<<7|o[3]},ZM=function(o,s,g){var u,p="";for(u=s;u<g;u++)p+="%"+("00"+o[u].toString(16)).slice(-2);return p},tm=function(o,s,g){return unescape(ZM(o,s,g))},em=function(o,s){var g=(o[s+5]&224)>>5,u=o[s+4]<<3,p=o[s+3]&6144;return p|u|g},am=function(o,s){return o[s]==="I".charCodeAt(0)&&o[s+1]==="D".charCodeAt(0)&&o[s+2]==="3".charCodeAt(0)?"timed-metadata":o[s]&!0&&(o[s+1]&240)===240?"audio":null},rm=function(o){for(var s=0;s+5<o.length;){if(o[s]!==255||(o[s+1]&246)!==240){s++;continue}return QM[(o[s+2]&60)>>>2]}return null},nm=function(o){var s,g,u,p;s=10,o[5]&64&&(s+=4,s+=rv(o.subarray(10,14)));do{if(g=rv(o.subarray(s+4,s+8)),g<1)return null;if(p=String.fromCharCode(o[s],o[s+1],o[s+2],o[s+3]),p==="PRIV"){u=o.subarray(s+10,s+g+10);for(var M=0;M<u.byteLength;M++)if(u[M]===0){var B=tm(u,0,M);if(B==="com.apple.streaming.transportStreamTimestamp"){var _=u.subarray(M+1),b=(_[3]&1)<<30|_[4]<<22|_[5]<<14|_[6]<<6|_[7]>>>2;return b*=4,b+=_[7]&3,b}break}}s+=10,s+=g}while(s<o.byteLength);return null},Eo={isLikelyAacData:JM,parseId3TagSize:ev,parseAdtsSize:em,parseType:am,parseSampleRate:rm,parseAacTimestamp:nm},im=a,nv=Eo,U5;U5=function(){var o=new Uint8Array,s=0;U5.prototype.init.call(this),this.setTimestamp=function(g){s=g},this.push=function(g){var u=0,p=0,M,B,_,b;for(o.length?(b=o.length,o=new Uint8Array(g.byteLength+b),o.set(o.subarray(0,b)),o.set(g,b)):o=g;o.length-p>=3;){if(o[p]==="I".charCodeAt(0)&&o[p+1]==="D".charCodeAt(0)&&o[p+2]==="3".charCodeAt(0)){if(o.length-p<10||(u=nv.parseId3TagSize(o,p),p+u>o.length))break;B={type:"timed-metadata",data:o.subarray(p,p+u)},this.trigger("data",B),p+=u;continue}else if((o[p]&255)===255&&(o[p+1]&240)===240){if(o.length-p<7||(u=nv.parseAdtsSize(o,p),p+u>o.length))break;_={type:"audio",data:o.subarray(p,p+u),pts:s,dts:s},this.trigger("data",_),p+=u;continue}p++}M=o.length-p,M>0?o=o.subarray(p):o=new Uint8Array},this.reset=function(){o=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){o=new Uint8Array,this.trigger("endedtimeline")}},U5.prototype=new im;var hm=U5,lm=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],om=lm,cm=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],sm=cm,$5=a,mr=gt,Hr=_5,W5=sr,F2=Vo,Oe=UM,G5=k1,iv=qM,vm=YM.H264Stream,dm=hm,um=Eo.isLikelyAacData,gm=k1.ONE_SECOND_IN_TS,ko=om,Po=sm,xr,I4,q5,q0,pm=function(o,s){s.stream=o,this.trigger("log",s)},hv=function(o,s){for(var g=Object.keys(s),u=0;u<g.length;u++){var p=g[u];p==="headOfPipeline"||!s[p].on||s[p].on("log",pm.bind(o,p))}},lv=function(o,s){var g;if(o.length!==s.length)return!1;for(g=0;g<o.length;g++)if(o[g]!==s[g])return!1;return!0},Do=function(o,s,g,u,p,M){var B=g-s,_=u-s,b=p-g;return{start:{dts:o,pts:o+B},end:{dts:o+_,pts:o+b},prependedContentDuration:M,baseMediaDecodeTime:o}};I4=function(o,s){var g=[],u,p=0,M=0,B=1/0;s=s||{},u=s.firstSequenceNumber||0,I4.prototype.init.call(this),this.push=function(_){F2.collectDtsInfo(o,_),o&&ko.forEach(function(b){o[b]=_[b]}),g.push(_)},this.setEarliestDts=function(_){p=_},this.setVideoBaseMediaDecodeTime=function(_){B=_},this.setAudioAppendStart=function(_){M=_},this.flush=function(){var _,b,E,I,U,i1,X;if(g.length===0){this.trigger("done","AudioSegmentStream");return}_=W5.trimAdtsFramesByEarliestDts(g,o,p),o.baseMediaDecodeTime=F2.calculateTrackBaseMediaDecodeTime(o,s.keepOriginalTimestamps),X=W5.prefixWithSilence(o,_,M,B),o.samples=W5.generateSampleTable(_),E=mr.mdat(W5.concatenateFrameData(_)),g=[],b=mr.moof(u,[o]),I=new Uint8Array(b.byteLength+E.byteLength),u++,I.set(b),I.set(E,b.byteLength),F2.clearDtsInfo(o),U=Math.ceil(gm*1024/o.samplerate),_.length&&(i1=_.length*U,this.trigger("segmentTimingInfo",Do(G5.audioTsToVideoTs(o.baseMediaDecodeTime,o.samplerate),_[0].dts,_[0].pts,_[0].dts+i1,_[0].pts+i1,X||0)),this.trigger("timingInfo",{start:_[0].pts,end:_[0].pts+i1})),this.trigger("data",{track:o,boxes:I}),this.trigger("done","AudioSegmentStream")},this.reset=function(){F2.clearDtsInfo(o),g=[],this.trigger("reset")}},I4.prototype=new $5,xr=function(o,s){var g,u=[],p=[],M,B;s=s||{},g=s.firstSequenceNumber||0,xr.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(_){F2.collectDtsInfo(o,_),_.nalUnitType==="seq_parameter_set_rbsp"&&!M&&(M=_.config,o.sps=[_.data],Po.forEach(function(b){o[b]=M[b]},this)),_.nalUnitType==="pic_parameter_set_rbsp"&&!B&&(B=_.data,o.pps=[_.data]),u.push(_)},this.flush=function(){for(var _,b,E,I,U,i1,X=0,g1,p1;u.length&&u[0].nalUnitType!=="access_unit_delimiter_rbsp";)u.shift();if(u.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(_=Hr.groupNalsIntoFrames(u),E=Hr.groupFramesIntoGops(_),E[0][0].keyFrame||(b=this.getGopForFusion_(u[0],o),b?(X=b.duration,E.unshift(b),E.byteLength+=b.byteLength,E.nalCount+=b.nalCount,E.pts=b.pts,E.dts=b.dts,E.duration+=b.duration):E=Hr.extendFirstKeyFrame(E)),p.length){var ct;if(s.alignGopsAtEnd?ct=this.alignGopsAtEnd_(E):ct=this.alignGopsAtStart_(E),!ct){this.gopCache_.unshift({gop:E.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),u=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}F2.clearDtsInfo(o),E=ct}F2.collectDtsInfo(o,E),o.samples=Hr.generateSampleTable(E),U=mr.mdat(Hr.concatenateNalData(E)),o.baseMediaDecodeTime=F2.calculateTrackBaseMediaDecodeTime(o,s.keepOriginalTimestamps),this.trigger("processedGopsInfo",E.map(function(L2){return{pts:L2.pts,dts:L2.dts,byteLength:L2.byteLength}})),g1=E[0],p1=E[E.length-1],this.trigger("segmentTimingInfo",Do(o.baseMediaDecodeTime,g1.dts,g1.pts,p1.dts+p1.duration,p1.pts+p1.duration,X)),this.trigger("timingInfo",{start:E[0].pts,end:E[E.length-1].pts+E[E.length-1].duration}),this.gopCache_.unshift({gop:E.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),u=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),I=mr.moof(g,[o]),i1=new Uint8Array(I.byteLength+U.byteLength),g++,i1.set(I),i1.set(U,I.byteLength),this.trigger("data",{track:o,boxes:i1}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),u=[],this.gopCache_.length=0,p.length=0,this.trigger("reset")},this.resetStream_=function(){F2.clearDtsInfo(o),M=void 0,B=void 0},this.getGopForFusion_=function(_){var b=45e3,E=1e4,I=1/0,U,i1,X,g1,p1;for(p1=0;p1<this.gopCache_.length;p1++)g1=this.gopCache_[p1],X=g1.gop,!(!(o.pps&&lv(o.pps[0],g1.pps[0]))||!(o.sps&&lv(o.sps[0],g1.sps[0])))&&(X.dts<o.timelineStartInfo.dts||(U=_.dts-X.dts-X.duration,U>=-E&&U<=b&&(!i1||I>U)&&(i1=g1,I=U)));return i1?i1.gop:null},this.alignGopsAtStart_=function(_){var b,E,I,U,i1,X,g1,p1;for(i1=_.byteLength,X=_.nalCount,g1=_.duration,b=E=0;b<p.length&&E<_.length&&(I=p[b],U=_[E],I.pts!==U.pts);){if(U.pts>I.pts){b++;continue}E++,i1-=U.byteLength,X-=U.nalCount,g1-=U.duration}return E===0?_:E===_.length?null:(p1=_.slice(E),p1.byteLength=i1,p1.duration=g1,p1.nalCount=X,p1.pts=p1[0].pts,p1.dts=p1[0].dts,p1)},this.alignGopsAtEnd_=function(_){var b,E,I,U,i1,X;for(b=p.length-1,E=_.length-1,i1=null,X=!1;b>=0&&E>=0;){if(I=p[b],U=_[E],I.pts===U.pts){X=!0;break}if(I.pts>U.pts){b--;continue}b===p.length-1&&(i1=E),E--}if(!X&&i1===null)return null;var g1;if(X?g1=E:g1=i1,g1===0)return _;var p1=_.slice(g1),ct=p1.reduce(function(L2,X0){return L2.byteLength+=X0.byteLength,L2.duration+=X0.duration,L2.nalCount+=X0.nalCount,L2},{byteLength:0,duration:0,nalCount:0});return p1.byteLength=ct.byteLength,p1.duration=ct.duration,p1.nalCount=ct.nalCount,p1.pts=p1[0].pts,p1.dts=p1[0].dts,p1},this.alignGopsWith=function(_){p=_}},xr.prototype=new $5,q0=function(o,s){this.numberOfTracks=0,this.metadataStream=s,o=o||{},typeof o.remux<"u"?this.remuxTracks=!!o.remux:this.remuxTracks=!0,typeof o.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=o.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,q0.prototype.init.call(this),this.push=function(g){if(g.text)return this.pendingCaptions.push(g);if(g.frames)return this.pendingMetadata.push(g);this.pendingTracks.push(g.track),this.pendingBytes+=g.boxes.byteLength,g.track.type==="video"&&(this.videoTrack=g.track,this.pendingBoxes.push(g.boxes)),g.track.type==="audio"&&(this.audioTrack=g.track,this.pendingBoxes.unshift(g.boxes))}},q0.prototype=new $5,q0.prototype.flush=function(o){var s=0,g={captions:[],captionStreams:{},metadata:[],info:{}},u,p,M,B=0,_;if(this.pendingTracks.length<this.numberOfTracks){if(o!=="VideoSegmentStream"&&o!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(B=this.videoTrack.timelineStartInfo.pts,Po.forEach(function(b){g.info[b]=this.videoTrack[b]},this)):this.audioTrack&&(B=this.audioTrack.timelineStartInfo.pts,ko.forEach(function(b){g.info[b]=this.audioTrack[b]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,M=mr.initSegment(this.pendingTracks),g.initSegment=new Uint8Array(M.byteLength),g.initSegment.set(M),g.data=new Uint8Array(this.pendingBytes),_=0;_<this.pendingBoxes.length;_++)g.data.set(this.pendingBoxes[_],s),s+=this.pendingBoxes[_].byteLength;for(_=0;_<this.pendingCaptions.length;_++)u=this.pendingCaptions[_],u.startTime=G5.metadataTsToSeconds(u.startPts,B,this.keepOriginalTimestamps),u.endTime=G5.metadataTsToSeconds(u.endPts,B,this.keepOriginalTimestamps),g.captionStreams[u.stream]=!0,g.captions.push(u);for(_=0;_<this.pendingMetadata.length;_++)p=this.pendingMetadata[_],p.cueTime=G5.metadataTsToSeconds(p.pts,B,this.keepOriginalTimestamps),g.metadata.push(p);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),_=0;_<g.captions.length;_++)u=g.captions[_],this.trigger("caption",u);for(_=0;_<g.metadata.length;_++)p=g.metadata[_],this.trigger("id3Frame",p)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},q0.prototype.setRemux=function(o){this.remuxTracks=o},q5=function(o){var s=this,g=!0,u,p;q5.prototype.init.call(this),o=o||{},this.baseMediaDecodeTime=o.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var M={};this.transmuxPipeline_=M,M.type="aac",M.metadataStream=new Oe.MetadataStream,M.aacStream=new dm,M.audioTimestampRolloverStream=new Oe.TimestampRolloverStream("audio"),M.timedMetadataTimestampRolloverStream=new Oe.TimestampRolloverStream("timed-metadata"),M.adtsStream=new iv,M.coalesceStream=new q0(o,M.metadataStream),M.headOfPipeline=M.aacStream,M.aacStream.pipe(M.audioTimestampRolloverStream).pipe(M.adtsStream),M.aacStream.pipe(M.timedMetadataTimestampRolloverStream).pipe(M.metadataStream).pipe(M.coalesceStream),M.metadataStream.on("timestamp",function(B){M.aacStream.setTimestamp(B.timeStamp)}),M.aacStream.on("data",function(B){B.type!=="timed-metadata"&&B.type!=="audio"||M.audioSegmentStream||(p=p||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},M.coalesceStream.numberOfTracks++,M.audioSegmentStream=new I4(p,o),M.audioSegmentStream.on("log",s.getLogTrigger_("audioSegmentStream")),M.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),M.adtsStream.pipe(M.audioSegmentStream).pipe(M.coalesceStream),s.trigger("trackinfo",{hasAudio:!!p,hasVideo:!!u}))}),M.coalesceStream.on("data",this.trigger.bind(this,"data")),M.coalesceStream.on("done",this.trigger.bind(this,"done")),hv(this,M)},this.setupTsPipeline=function(){var M={};this.transmuxPipeline_=M,M.type="ts",M.metadataStream=new Oe.MetadataStream,M.packetStream=new Oe.TransportPacketStream,M.parseStream=new Oe.TransportParseStream,M.elementaryStream=new Oe.ElementaryStream,M.timestampRolloverStream=new Oe.TimestampRolloverStream,M.adtsStream=new iv,M.h264Stream=new vm,M.captionStream=new Oe.CaptionStream(o),M.coalesceStream=new q0(o,M.metadataStream),M.headOfPipeline=M.packetStream,M.packetStream.pipe(M.parseStream).pipe(M.elementaryStream).pipe(M.timestampRolloverStream),M.timestampRolloverStream.pipe(M.h264Stream),M.timestampRolloverStream.pipe(M.adtsStream),M.timestampRolloverStream.pipe(M.metadataStream).pipe(M.coalesceStream),M.h264Stream.pipe(M.captionStream).pipe(M.coalesceStream),M.elementaryStream.on("data",function(B){var _;if(B.type==="metadata"){for(_=B.tracks.length;_--;)!u&&B.tracks[_].type==="video"?(u=B.tracks[_],u.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):!p&&B.tracks[_].type==="audio"&&(p=B.tracks[_],p.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime);u&&!M.videoSegmentStream&&(M.coalesceStream.numberOfTracks++,M.videoSegmentStream=new xr(u,o),M.videoSegmentStream.on("log",s.getLogTrigger_("videoSegmentStream")),M.videoSegmentStream.on("timelineStartInfo",function(b){p&&!o.keepOriginalTimestamps&&(p.timelineStartInfo=b,M.audioSegmentStream.setEarliestDts(b.dts-s.baseMediaDecodeTime))}),M.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),M.videoSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"videoSegmentTimingInfo")),M.videoSegmentStream.on("baseMediaDecodeTime",function(b){p&&M.audioSegmentStream.setVideoBaseMediaDecodeTime(b)}),M.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),M.h264Stream.pipe(M.videoSegmentStream).pipe(M.coalesceStream)),p&&!M.audioSegmentStream&&(M.coalesceStream.numberOfTracks++,M.audioSegmentStream=new I4(p,o),M.audioSegmentStream.on("log",s.getLogTrigger_("audioSegmentStream")),M.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),M.audioSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"audioSegmentTimingInfo")),M.adtsStream.pipe(M.audioSegmentStream).pipe(M.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!p,hasVideo:!!u})}}),M.coalesceStream.on("data",this.trigger.bind(this,"data")),M.coalesceStream.on("id3Frame",function(B){B.dispatchType=M.metadataStream.dispatchType,s.trigger("id3Frame",B)}),M.coalesceStream.on("caption",this.trigger.bind(this,"caption")),M.coalesceStream.on("done",this.trigger.bind(this,"done")),hv(this,M)},this.setBaseMediaDecodeTime=function(M){var B=this.transmuxPipeline_;o.keepOriginalTimestamps||(this.baseMediaDecodeTime=M),p&&(p.timelineStartInfo.dts=void 0,p.timelineStartInfo.pts=void 0,F2.clearDtsInfo(p),B.audioTimestampRolloverStream&&B.audioTimestampRolloverStream.discontinuity()),u&&(B.videoSegmentStream&&(B.videoSegmentStream.gopCache_=[]),u.timelineStartInfo.dts=void 0,u.timelineStartInfo.pts=void 0,F2.clearDtsInfo(u),B.captionStream.reset()),B.timestampRolloverStream&&B.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(M){p&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(M)},this.setRemux=function(M){var B=this.transmuxPipeline_;o.remux=M,B&&B.coalesceStream&&B.coalesceStream.setRemux(M)},this.alignGopsWith=function(M){u&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(M)},this.getLogTrigger_=function(M){var B=this;return function(_){_.stream=M,B.trigger("log",_)}},this.push=function(M){if(g){var B=um(M);B&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!B&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),g=!1}this.transmuxPipeline_.headOfPipeline.push(M)},this.flush=function(){g=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},q5.prototype=new $5;var fm={Transmuxer:q5,VideoSegmentStream:xr,AudioSegmentStream:I4,AUDIO_PROPERTIES:ko,VIDEO_PROPERTIES:Po,generateSegmentTimingInfo:Do},zm=function(o){return o>>>0},Mm=function(o){return("00"+o.toString(16)).slice(-2)},K5={toUnsigned:zm,toHexString:Mm},mm=function(o){var s="";return s+=String.fromCharCode(o[0]),s+=String.fromCharCode(o[1]),s+=String.fromCharCode(o[2]),s+=String.fromCharCode(o[3]),s},ov=mm,Hm=K5.toUnsigned,xm=ov,cv=function(o,s){var g=[],u,p,M,B,_;if(!s.length)return null;for(u=0;u<o.byteLength;)p=Hm(o[u]<<24|o[u+1]<<16|o[u+2]<<8|o[u+3]),M=xm(o.subarray(u+4,u+8)),B=p>1?u+p:o.byteLength,M===s[0]&&(s.length===1?g.push(o.subarray(u+8,B)):(_=cv(o.subarray(u+8,B),s.slice(1)),_.length&&(g=g.concat(_)))),u=B;return g},sv=cv,Vm=K5.toUnsigned,wm=i.getUint64,Lm=function(o){var s={version:o[0],flags:new Uint8Array(o.subarray(1,4))};return s.version===1?s.baseMediaDecodeTime=wm(o.subarray(4)):s.baseMediaDecodeTime=Vm(o[4]<<24|o[5]<<16|o[6]<<8|o[7]),s},vv=Lm,ym=function(o){return{isLeading:(o[0]&12)>>>2,dependsOn:o[0]&3,isDependedOn:(o[1]&192)>>>6,hasRedundancy:(o[1]&48)>>>4,paddingValue:(o[1]&14)>>>1,isNonSyncSample:o[1]&1,degradationPriority:o[2]<<8|o[3]}},Cm=ym,dv=Cm,Bm=function(o){var s={version:o[0],flags:new Uint8Array(o.subarray(1,4)),samples:[]},g=new DataView(o.buffer,o.byteOffset,o.byteLength),u=s.flags[2]&1,p=s.flags[2]&4,M=s.flags[1]&1,B=s.flags[1]&2,_=s.flags[1]&4,b=s.flags[1]&8,E=g.getUint32(4),I=8,U;for(u&&(s.dataOffset=g.getInt32(I),I+=4),p&&E&&(U={flags:dv(o.subarray(I,I+4))},I+=4,M&&(U.duration=g.getUint32(I),I+=4),B&&(U.size=g.getUint32(I),I+=4),b&&(s.version===1?U.compositionTimeOffset=g.getInt32(I):U.compositionTimeOffset=g.getUint32(I),I+=4),s.samples.push(U),E--);E--;)U={},M&&(U.duration=g.getUint32(I),I+=4),B&&(U.size=g.getUint32(I),I+=4),_&&(U.flags=dv(o.subarray(I,I+4)),I+=4),b&&(s.version===1?U.compositionTimeOffset=g.getInt32(I):U.compositionTimeOffset=g.getUint32(I),I+=4),s.samples.push(U);return s},uv=Bm,Sm=function(o){var s=new DataView(o.buffer,o.byteOffset,o.byteLength),g={version:o[0],flags:new Uint8Array(o.subarray(1,4)),trackId:s.getUint32(4)},u=g.flags[2]&1,p=g.flags[2]&2,M=g.flags[2]&8,B=g.flags[2]&16,_=g.flags[2]&32,b=g.flags[0]&65536,E=g.flags[0]&131072,I;return I=8,u&&(I+=4,g.baseDataOffset=s.getUint32(12),I+=4),p&&(g.sampleDescriptionIndex=s.getUint32(I),I+=4),M&&(g.defaultSampleDuration=s.getUint32(I),I+=4),B&&(g.defaultSampleSize=s.getUint32(I),I+=4),_&&(g.defaultSampleFlags=s.getUint32(I)),b&&(g.durationIsEmpty=!0),!u&&E&&(g.baseDataOffsetIsMoof=!0),g},gv=Sm,Vr;typeof window<"u"?Vr=window:typeof e<"u"?Vr=e:typeof self<"u"?Vr=self:Vr={};var pv=Vr,_m=q1.discardEmulationPreventionBytes,Tm=I5.CaptionStream,wr=sv,Om=vv,bm=uv,Am=gv,fv=pv,Em=function(o,s){for(var g=o,u=0;u<s.length;u++){var p=s[u];if(g<p.size)return p;g-=p.size}return null},km=function(o,s,g){var u=new DataView(o.buffer,o.byteOffset,o.byteLength),p={logs:[],seiNals:[]},M,B,_,b;for(B=0;B+4<o.length;B+=_)if(_=u.getUint32(B),B+=4,!(_<=0))switch(o[B]&31){case 6:var E=o.subarray(B+1,B+1+_),I=Em(B,s);if(M={nalUnitType:"sei_rbsp",size:_,data:E,escapedRBSP:_m(E),trackId:g},I)M.pts=I.pts,M.dts=I.dts,b=I;else if(b)M.pts=b.pts,M.dts=b.dts;else{p.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+B+" for trackId "+g+". See mux.js#223."});break}p.seiNals.push(M);break}return p},Pm=function(o,s,g){var u=s,p=g.defaultSampleDuration||0,M=g.defaultSampleSize||0,B=g.trackId,_=[];return o.forEach(function(b){var E=bm(b),I=E.samples;I.forEach(function(U){U.duration===void 0&&(U.duration=p),U.size===void 0&&(U.size=M),U.trackId=B,U.dts=u,U.compositionTimeOffset===void 0&&(U.compositionTimeOffset=0),typeof u=="bigint"?(U.pts=u+fv.BigInt(U.compositionTimeOffset),u+=fv.BigInt(U.duration)):(U.pts=u+U.compositionTimeOffset,u+=U.duration)}),_=_.concat(I)}),_},Dm=function(o,s){var g=wr(o,["moof","traf"]),u=wr(o,["mdat"]),p={},M=[];return u.forEach(function(B,_){var b=g[_];M.push({mdat:B,traf:b})}),M.forEach(function(B){var _=B.mdat,b=B.traf,E=wr(b,["tfhd"]),I=Am(E[0]),U=I.trackId,i1=wr(b,["tfdt"]),X=i1.length>0?Om(i1[0]).baseMediaDecodeTime:0,g1=wr(b,["trun"]),p1,ct;s===U&&g1.length>0&&(p1=Pm(g1,X,I),ct=km(_,p1,U),p[U]||(p[U]={seiNals:[],logs:[]}),p[U].seiNals=p[U].seiNals.concat(ct.seiNals),p[U].logs=p[U].logs.concat(ct.logs))}),p},Im=function(o,s,g){var u;if(s===null)return null;u=Dm(o,s);var p=u[s]||{};return{seiNals:p.seiNals,logs:p.logs,timescale:g}},jm=function(){var o=!1,s,g,u,p,M,B;this.isInitialized=function(){return o},this.init=function(_){s=new Tm,o=!0,B=_?_.isPartial:!1,s.on("data",function(b){b.startTime=b.startPts/p,b.endTime=b.endPts/p,M.captions.push(b),M.captionStreams[b.stream]=!0}),s.on("log",function(b){M.logs.push(b)})},this.isNewInit=function(_,b){return _&&_.length===0||b&&typeof b=="object"&&Object.keys(b).length===0?!1:u!==_[0]||p!==b[u]},this.parse=function(_,b,E){var I;if(this.isInitialized()){if(!b||!E)return null;if(this.isNewInit(b,E))u=b[0],p=E[u];else if(u===null||!p)return g.push(_),null}else return null;for(;g.length>0;){var U=g.shift();this.parse(U,b,E)}return I=Im(_,u,p),I&&I.logs&&(M.logs=M.logs.concat(I.logs)),I===null||!I.seiNals?M.logs.length?{logs:M.logs,captions:[],captionStreams:[]}:null:(this.pushNals(I.seiNals),this.flushStream(),M)},this.pushNals=function(_){if(!this.isInitialized()||!_||_.length===0)return null;_.forEach(function(b){s.push(b)})},this.flushStream=function(){if(!this.isInitialized())return null;B?s.partialFlush():s.flush()},this.clearParsedCaptions=function(){M.captions=[],M.captionStreams={},M.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;s.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){g=[],u=null,p=null,M?this.clearParsedCaptions():M={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Rm=jm,Nm=function(o){for(var s=0,g=String.fromCharCode(o[s]),u="";g!=="\0";)u+=g,s++,g=String.fromCharCode(o[s]);return u+=g,u},Fm={uint8ToCString:Nm},X5=Fm.uint8ToCString,Um=i.getUint64,$m=function(o){var s=4,g=o[0],u,p,M,B,_,b,E,I;if(g===0){u=X5(o.subarray(s)),s+=u.length,p=X5(o.subarray(s)),s+=p.length;var U=new DataView(o.buffer);M=U.getUint32(s),s+=4,_=U.getUint32(s),s+=4,b=U.getUint32(s),s+=4,E=U.getUint32(s),s+=4}else if(g===1){var U=new DataView(o.buffer);M=U.getUint32(s),s+=4,B=Um(o.subarray(s)),s+=8,b=U.getUint32(s),s+=4,E=U.getUint32(s),s+=4,u=X5(o.subarray(s)),s+=u.length,p=X5(o.subarray(s)),s+=p.length}I=new Uint8Array(o.subarray(s,o.byteLength));var i1={scheme_id_uri:u,value:p,timescale:M||1,presentation_time:B,presentation_time_delta:_,event_duration:b,id:E,message_data:I};return Gm(g,i1)?i1:void 0},Wm=function(o,s,g,u){return o||o===0?o/s:u+g/s},Gm=function(o,s){var g=s.scheme_id_uri!=="\0",u=o===0&&zv(s.presentation_time_delta)&&g,p=o===1&&zv(s.presentation_time)&&g;return!(o>1)&&u||p},zv=function(o){return o!==void 0||o!==null},qm={parseEmsgBox:$m,scaleTime:Wm},Y5=K5.toUnsigned,Lr=K5.toHexString,nt=sv,j4=ov,Io=qm,Km=gv,Xm=uv,Ym=vv,Qm=i.getUint64,Mv,mv,Hv,xv,Vv,jo,wv,Ro=pv,Jm=f.parseId3Frames;Mv=function(o){var s={},g=nt(o,["moov","trak"]);return g.reduce(function(u,p){var M,B,_,b,E;return M=nt(p,["tkhd"])[0],!M||(B=M[0],_=B===0?12:20,b=Y5(M[_]<<24|M[_+1]<<16|M[_+2]<<8|M[_+3]),E=nt(p,["mdia","mdhd"])[0],!E)?null:(B=E[0],_=B===0?12:20,u[b]=Y5(E[_]<<24|E[_+1]<<16|E[_+2]<<8|E[_+3]),u)},s)},mv=function(o,s){var g;g=nt(s,["moof","traf"]);var u=g.reduce(function(p,M){var B=nt(M,["tfhd"])[0],_=Y5(B[4]<<24|B[5]<<16|B[6]<<8|B[7]),b=o[_]||9e4,E=nt(M,["tfdt"])[0],I=new DataView(E.buffer,E.byteOffset,E.byteLength),U;E[0]===1?U=Qm(E.subarray(4,12)):U=I.getUint32(4);let i1;return typeof U=="bigint"?i1=U/Ro.BigInt(b):typeof U=="number"&&!isNaN(U)&&(i1=U/b),i1<Number.MAX_SAFE_INTEGER&&(i1=Number(i1)),i1<p&&(p=i1),p},1/0);return typeof u=="bigint"||isFinite(u)?u:0},Hv=function(o,s){var g=nt(s,["moof","traf"]),u=0,p=0,M;if(g&&g.length){var B=nt(g[0],["tfhd"])[0],_=nt(g[0],["trun"])[0],b=nt(g[0],["tfdt"])[0];if(B){var E=Km(B);M=E.trackId}if(b){var I=Ym(b);u=I.baseMediaDecodeTime}if(_){var U=Xm(_);U.samples&&U.samples.length&&(p=U.samples[0].compositionTimeOffset||0)}}var i1=o[M]||9e4;typeof u=="bigint"&&(p=Ro.BigInt(p),i1=Ro.BigInt(i1));var X=(u+p)/i1;return typeof X=="bigint"&&X<Number.MAX_SAFE_INTEGER&&(X=Number(X)),X},xv=function(o){var s=nt(o,["moov","trak"]),g=[];return s.forEach(function(u){var p=nt(u,["mdia","hdlr"]),M=nt(u,["tkhd"]);p.forEach(function(B,_){var b=j4(B.subarray(8,12)),E=M[_],I,U,i1;b==="vide"&&(I=new DataView(E.buffer,E.byteOffset,E.byteLength),U=I.getUint8(0),i1=U===0?I.getUint32(12):I.getUint32(20),g.push(i1))})}),g},jo=function(o){var s=o[0],g=s===0?12:20;return Y5(o[g]<<24|o[g+1]<<16|o[g+2]<<8|o[g+3])},Vv=function(o){var s=nt(o,["moov","trak"]),g=[];return s.forEach(function(u){var p={},M=nt(u,["tkhd"])[0],B,_;M&&(B=new DataView(M.buffer,M.byteOffset,M.byteLength),_=B.getUint8(0),p.id=_===0?B.getUint32(12):B.getUint32(20));var b=nt(u,["mdia","hdlr"])[0];if(b){var E=j4(b.subarray(8,12));E==="vide"?p.type="video":E==="soun"?p.type="audio":p.type=E}var I=nt(u,["mdia","minf","stbl","stsd"])[0];if(I){var U=I.subarray(8);p.codec=j4(U.subarray(4,8));var i1=nt(U,[p.codec])[0],X,g1;i1&&(/^[asm]vc[1-9]$/i.test(p.codec)?(X=i1.subarray(78),g1=j4(X.subarray(4,8)),g1==="avcC"&&X.length>11?(p.codec+=".",p.codec+=Lr(X[9]),p.codec+=Lr(X[10]),p.codec+=Lr(X[11])):p.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(p.codec)?(X=i1.subarray(28),g1=j4(X.subarray(4,8)),g1==="esds"&&X.length>20&&X[19]!==0?(p.codec+="."+Lr(X[19]),p.codec+="."+Lr(X[20]>>>2&63).replace(/^0/,"")):p.codec="mp4a.40.2"):p.codec=p.codec.toLowerCase())}var p1=nt(u,["mdia","mdhd"])[0];p1&&(p.timescale=jo(p1)),g.push(p)}),g},wv=function(o,s=0){var g=nt(o,["emsg"]);return g.map(u=>{var p=Io.parseEmsgBox(new Uint8Array(u)),M=Jm(p.message_data);return{cueTime:Io.scaleTime(p.presentation_time,p.timescale,p.presentation_time_delta,s),duration:Io.scaleTime(p.event_duration,p.timescale),frames:M}})};var Lv={findBox:nt,parseType:j4,timescale:Mv,startTime:mv,compositionStartTime:Hv,videoTrackIds:xv,tracks:Vv,getTimescaleFromMediaHeader:jo,getEmsgID3:wv},No=$0,yv=function(o){var s=o[1]&31;return s<<=8,s|=o[2],s},Q5=function(o){return!!(o[1]&64)},J5=function(o){var s=0;return(o[3]&48)>>>4>1&&(s+=o[4]+1),s},Zm=function(o,s){var g=yv(o);return g===0?"pat":g===s?"pmt":s?"pes":null},tH=function(o){var s=Q5(o),g=4+J5(o);return s&&(g+=o[g]+1),(o[g+10]&31)<<8|o[g+11]},eH=function(o){var s={},g=Q5(o),u=4+J5(o);if(g&&(u+=o[u]+1),!!(o[u+5]&1)){var p,M,B;p=(o[u+1]&15)<<8|o[u+2],M=3+p-4,B=(o[u+10]&15)<<8|o[u+11];for(var _=12+B;_<M;){var b=u+_;s[(o[b+1]&31)<<8|o[b+2]]=o[b],_+=((o[b+3]&15)<<8|o[b+4])+5}return s}},aH=function(o,s){var g=yv(o),u=s[g];switch(u){case No.H264_STREAM_TYPE:return"video";case No.ADTS_STREAM_TYPE:return"audio";case No.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},rH=function(o){var s=Q5(o);if(!s)return null;var g=4+J5(o);if(g>=o.byteLength)return null;var u=null,p;return p=o[g+7],p&192&&(u={},u.pts=(o[g+9]&14)<<27|(o[g+10]&255)<<20|(o[g+11]&254)<<12|(o[g+12]&255)<<5|(o[g+13]&254)>>>3,u.pts*=4,u.pts+=(o[g+13]&6)>>>1,u.dts=u.pts,p&64&&(u.dts=(o[g+14]&14)<<27|(o[g+15]&255)<<20|(o[g+16]&254)<<12|(o[g+17]&255)<<5|(o[g+18]&254)>>>3,u.dts*=4,u.dts+=(o[g+18]&6)>>>1)),u},Fo=function(o){switch(o){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},nH=function(o){for(var s=4+J5(o),g=o.subarray(s),u=0,p=0,M=!1,B;p<g.byteLength-3;p++)if(g[p+2]===1){u=p+5;break}for(;u<g.byteLength;)switch(g[u]){case 0:if(g[u-1]!==0){u+=2;break}else if(g[u-2]!==0){u++;break}p+3!==u-2&&(B=Fo(g[p+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(M=!0));do u++;while(g[u]!==1&&u<g.length);p=u-2,u+=3;break;case 1:if(g[u-1]!==0||g[u-2]!==0){u+=3;break}B=Fo(g[p+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(M=!0),p=u-2,u+=3;break;default:u+=3;break}return g=g.subarray(p),u-=p,p=0,g&&g.byteLength>3&&(B=Fo(g[p+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(M=!0)),M},iH={parseType:Zm,parsePat:tH,parsePmt:eH,parsePayloadUnitStartIndicator:Q5,parsePesType:aH,parsePesTime:rH,videoPacketContainsKeyFrame:nH},Cv=$0,R4=R5.handleRollover,O1={};O1.ts=iH,O1.aac=Eo;var K0=k1.ONE_SECOND_IN_TS,Dt=188,oe=71,hH=function(o,s){for(var g=0,u=Dt,p,M;u<o.byteLength;){if(o[g]===oe&&o[u]===oe){switch(p=o.subarray(g,u),M=O1.ts.parseType(p,s.pid),M){case"pat":s.pid=O1.ts.parsePat(p);break;case"pmt":var B=O1.ts.parsePmt(p);s.table=s.table||{},Object.keys(B).forEach(function(_){s.table[_]=B[_]});break}g+=Dt,u+=Dt;continue}g++,u++}},Bv=function(o,s,g){for(var u=0,p=Dt,M,B,_,b,E,I=!1;p<=o.byteLength;){if(o[u]===oe&&(o[p]===oe||p===o.byteLength)){switch(M=o.subarray(u,p),B=O1.ts.parseType(M,s.pid),B){case"pes":_=O1.ts.parsePesType(M,s.table),b=O1.ts.parsePayloadUnitStartIndicator(M),_==="audio"&&b&&(E=O1.ts.parsePesTime(M),E&&(E.type="audio",g.audio.push(E),I=!0));break}if(I)break;u+=Dt,p+=Dt;continue}u++,p++}for(p=o.byteLength,u=p-Dt,I=!1;u>=0;){if(o[u]===oe&&(o[p]===oe||p===o.byteLength)){switch(M=o.subarray(u,p),B=O1.ts.parseType(M,s.pid),B){case"pes":_=O1.ts.parsePesType(M,s.table),b=O1.ts.parsePayloadUnitStartIndicator(M),_==="audio"&&b&&(E=O1.ts.parsePesTime(M),E&&(E.type="audio",g.audio.push(E),I=!0));break}if(I)break;u-=Dt,p-=Dt;continue}u--,p--}},lH=function(o,s,g){for(var u=0,p=Dt,M,B,_,b,E,I,U,i1,X=!1,g1={data:[],size:0};p<o.byteLength;){if(o[u]===oe&&o[p]===oe){switch(M=o.subarray(u,p),B=O1.ts.parseType(M,s.pid),B){case"pes":if(_=O1.ts.parsePesType(M,s.table),b=O1.ts.parsePayloadUnitStartIndicator(M),_==="video"&&(b&&!X&&(E=O1.ts.parsePesTime(M),E&&(E.type="video",g.video.push(E),X=!0)),!g.firstKeyFrame)){if(b&&g1.size!==0){for(I=new Uint8Array(g1.size),U=0;g1.data.length;)i1=g1.data.shift(),I.set(i1,U),U+=i1.byteLength;if(O1.ts.videoPacketContainsKeyFrame(I)){var p1=O1.ts.parsePesTime(I);p1?(g.firstKeyFrame=p1,g.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}g1.size=0}g1.data.push(M),g1.size+=M.byteLength}break}if(X&&g.firstKeyFrame)break;u+=Dt,p+=Dt;continue}u++,p++}for(p=o.byteLength,u=p-Dt,X=!1;u>=0;){if(o[u]===oe&&o[p]===oe){switch(M=o.subarray(u,p),B=O1.ts.parseType(M,s.pid),B){case"pes":_=O1.ts.parsePesType(M,s.table),b=O1.ts.parsePayloadUnitStartIndicator(M),_==="video"&&b&&(E=O1.ts.parsePesTime(M),E&&(E.type="video",g.video.push(E),X=!0));break}if(X)break;u-=Dt,p-=Dt;continue}u--,p--}},oH=function(o,s){if(o.audio&&o.audio.length){var g=s;(typeof g>"u"||isNaN(g))&&(g=o.audio[0].dts),o.audio.forEach(function(M){M.dts=R4(M.dts,g),M.pts=R4(M.pts,g),M.dtsTime=M.dts/K0,M.ptsTime=M.pts/K0})}if(o.video&&o.video.length){var u=s;if((typeof u>"u"||isNaN(u))&&(u=o.video[0].dts),o.video.forEach(function(M){M.dts=R4(M.dts,u),M.pts=R4(M.pts,u),M.dtsTime=M.dts/K0,M.ptsTime=M.pts/K0}),o.firstKeyFrame){var p=o.firstKeyFrame;p.dts=R4(p.dts,u),p.pts=R4(p.pts,u),p.dtsTime=p.dts/K0,p.ptsTime=p.pts/K0}}},cH=function(o){for(var s=!1,g=0,u=null,p=null,M=0,B=0,_;o.length-B>=3;){var b=O1.aac.parseType(o,B);switch(b){case"timed-metadata":if(o.length-B<10){s=!0;break}if(M=O1.aac.parseId3TagSize(o,B),M>o.length){s=!0;break}p===null&&(_=o.subarray(B,B+M),p=O1.aac.parseAacTimestamp(_)),B+=M;break;case"audio":if(o.length-B<7){s=!0;break}if(M=O1.aac.parseAdtsSize(o,B),M>o.length){s=!0;break}u===null&&(_=o.subarray(B,B+M),u=O1.aac.parseSampleRate(_)),g++,B+=M;break;default:B++;break}if(s)return null}if(u===null||p===null)return null;var E=K0/u,I={audio:[{type:"audio",dts:p,pts:p},{type:"audio",dts:p+g*1024*E,pts:p+g*1024*E}]};return I},sH=function(o){var s={pid:null,table:null},g={};hH(o,s);for(var u in s.table)if(s.table.hasOwnProperty(u)){var p=s.table[u];switch(p){case Cv.H264_STREAM_TYPE:g.video=[],lH(o,s,g),g.video.length===0&&delete g.video;break;case Cv.ADTS_STREAM_TYPE:g.audio=[],Bv(o,s,g),g.audio.length===0&&delete g.audio;break}}return g},vH=function(o,s){var g=O1.aac.isLikelyAacData(o),u;return g?u=cH(o):u=sH(o),!u||!u.audio&&!u.video?null:(oH(u,s),u)},dH={inspect:vH,parseAudioPes_:Bv};let uH=function(o,s){s.on("data",function(g){let u=g.initSegment;g.initSegment={data:u.buffer,byteOffset:u.byteOffset,byteLength:u.byteLength};let p=g.data;g.data=p.buffer,o.postMessage({action:"data",segment:g,byteOffset:p.byteOffset,byteLength:p.byteLength},[g.data])}),s.on("done",function(g){o.postMessage({action:"done"})}),s.on("gopInfo",function(g){o.postMessage({action:"gopInfo",gopInfo:g})}),s.on("videoSegmentTimingInfo",function(g){let u={start:{decode:k1.videoTsToSeconds(g.start.dts),presentation:k1.videoTsToSeconds(g.start.pts)},end:{decode:k1.videoTsToSeconds(g.end.dts),presentation:k1.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:k1.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(u.prependedContentDuration=k1.videoTsToSeconds(g.prependedContentDuration)),o.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:u})}),s.on("audioSegmentTimingInfo",function(g){let u={start:{decode:k1.videoTsToSeconds(g.start.dts),presentation:k1.videoTsToSeconds(g.start.pts)},end:{decode:k1.videoTsToSeconds(g.end.dts),presentation:k1.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:k1.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(u.prependedContentDuration=k1.videoTsToSeconds(g.prependedContentDuration)),o.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:u})}),s.on("id3Frame",function(g){o.postMessage({action:"id3Frame",id3Frame:g})}),s.on("caption",function(g){o.postMessage({action:"caption",caption:g})}),s.on("trackinfo",function(g){o.postMessage({action:"trackinfo",trackInfo:g})}),s.on("audioTimingInfo",function(g){o.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:k1.videoTsToSeconds(g.start),end:k1.videoTsToSeconds(g.end)}})}),s.on("videoTimingInfo",function(g){o.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:k1.videoTsToSeconds(g.start),end:k1.videoTsToSeconds(g.end)}})}),s.on("log",function(g){o.postMessage({action:"log",log:g})})};class Sv{constructor(s,g){this.options=g||{},this.self=s,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new fm.Transmuxer(this.options),uH(this.self,this.transmuxer)}pushMp4Captions(s){this.captionParser||(this.captionParser=new Rm,this.captionParser.init());let g=new Uint8Array(s.data,s.byteOffset,s.byteLength),u=this.captionParser.parse(g,s.trackIds,s.timescales);this.self.postMessage({action:"mp4Captions",captions:u&&u.captions||[],logs:u&&u.logs||[],data:g.buffer},[g.buffer])}probeMp4StartTime({timescales:s,data:g}){let u=Lv.startTime(s,g);this.self.postMessage({action:"probeMp4StartTime",startTime:u,data:g},[g.buffer])}probeMp4Tracks({data:s}){let g=Lv.tracks(s);this.self.postMessage({action:"probeMp4Tracks",tracks:g,data:s},[s.buffer])}probeTs({data:s,baseStartTime:g}){let u=typeof g=="number"&&!isNaN(g)?g*k1.ONE_SECOND_IN_TS:void 0,p=dH.inspect(s,u),M=null;p&&(M={hasVideo:p.video&&p.video.length===2||!1,hasAudio:p.audio&&p.audio.length===2||!1},M.hasVideo&&(M.videoStart=p.video[0].ptsTime),M.hasAudio&&(M.audioStart=p.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:M,data:s},[s.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(s){let g=new Uint8Array(s.data,s.byteOffset,s.byteLength);this.transmuxer.push(g)}reset(){this.transmuxer.reset()}setTimestampOffset(s){let g=s.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(k1.secondsToVideoTs(g)))}setAudioAppendStart(s){this.transmuxer.setAudioAppendStart(Math.ceil(k1.secondsToVideoTs(s.appendStart)))}setRemux(s){this.transmuxer.setRemux(s.remux)}flush(s){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(s){this.transmuxer.alignGopsWith(s.gopsToAlignWith.slice())}}self.onmessage=function(o){if(o.data.action==="init"&&o.data.options){this.messageHandlers=new Sv(self,o.data.options);return}this.messageHandlers||(this.messageHandlers=new Sv(self)),o.data&&o.data.action&&o.data.action!=="init"&&this.messageHandlers[o.data.action]&&this.messageHandlers[o.data.action](o.data)}})),gB=Gz(uB),pB=(e,t,a)=>{let{type:r,initSegment:n,captions:i,captionStreams:h,metadata:l,videoFrameDtsTime:c,videoFramePtsTime:v}=e.data.segment;t.buffer.push({captions:i,captionStreams:h,metadata:l});let d=e.data.segment.boxes||{data:e.data.segment.data},z={type:r,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof c<"u"&&(z.videoFrameDtsTime=c),typeof v<"u"&&(z.videoFramePtsTime=v),a(z)},fB=({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)},zB=(e,t)=>{t.gopInfo=e.data.gopInfo},Xz=e=>{let{transmuxer:t,bytes:a,audioAppendStart:r,gopsToAlignWith:n,remux:i,onData:h,onTrackInfo:l,onAudioTimingInfo:c,onVideoTimingInfo:v,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:z,onId3:L,onCaptions:y,onDone:w,onEndedTimeline:O,onTransmuxerLog:k,isEndOfTimeline:V}=e,x={buffer:[]},C=V,T=S=>{t.currentTransmux===e&&(S.data.action==="data"&&pB(S,x,h),S.data.action==="trackinfo"&&l(S.data.trackInfo),S.data.action==="gopInfo"&&zB(S,x),S.data.action==="audioTimingInfo"&&c(S.data.audioTimingInfo),S.data.action==="videoTimingInfo"&&v(S.data.videoTimingInfo),S.data.action==="videoSegmentTimingInfo"&&d(S.data.videoSegmentTimingInfo),S.data.action==="audioSegmentTimingInfo"&&z(S.data.audioSegmentTimingInfo),S.data.action==="id3Frame"&&L([S.data.id3Frame],S.data.id3Frame.dispatchType),S.data.action==="caption"&&y(S.data.caption),S.data.action==="endedtimeline"&&(C=!1,O()),S.data.action==="log"&&k(S.data.log),S.data.type==="transmuxed"&&(C||(t.onmessage=null,fB({transmuxedData:x,callback:w}),Yz(t))))};if(t.onmessage=T,r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(n)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof i<"u"&&t.postMessage({action:"setRemux",remux:i}),a.byteLength){let S=a instanceof ArrayBuffer?a:a.buffer,R=a instanceof ArrayBuffer?0:a.byteOffset;t.postMessage({action:"push",data:S,byteOffset:R,byteLength:a.byteLength},[S])}V&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Yz=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():Xz(e.currentTransmux))},zf=(e,t)=>{e.postMessage({action:t}),Yz(e)},Qz=(e,t)=>{if(!t.currentTransmux){t.currentTransmux=e,zf(t,e);return}t.transmuxQueue.push(zf.bind(null,t,e))},MB=e=>{Qz("reset",e)},mB=e=>{Qz("endTimeline",e)},Jz=e=>{if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,Xz(e);return}e.transmuxer.transmuxQueue.push(e)},HB=e=>{let t=new gB;t.currentTransmux=null,t.transmuxQueue=[];let a=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,a.call(t)),t.postMessage({action:"init",options:e}),t},C9={reset:MB,endTimeline:mB,transmux:Jz,createTransmuxer:HB},Dl=function(e){let t=e.transmuxer,a=e.endAction||e.action,r=e.callback,n=Q2({},e,{endAction:null,transmuxer:null,callback:null}),i=h=>{h.data.action===a&&(t.removeEventListener("message",i),h.data.data&&(h.data.data=new Uint8Array(h.data.data,e.byteOffset||0,e.byteLength||h.data.data.byteLength),e.data&&(e.data=h.data.data)),r(h.data))};if(t.addEventListener("message",i),e.data){let h=e.data instanceof ArrayBuffer;n.byteOffset=h?0:e.data.byteOffset,n.byteLength=e.data.byteLength;let l=[h?e.data:e.data.buffer];t.postMessage(n,l)}else t.postMessage(n)},xe={FAILURE:2,TIMEOUT:-101,ABORTED:-102},c6=e=>{e.forEach(t=>{t.abort()})},xB=e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}),VB=e=>{let t=e.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},k6=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:xe.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:xe.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:xe.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:xe.FAILURE,xhr:t}:null,Mf=(e,t,a)=>(r,n)=>{let i=n.response,h=k6(r,n);if(h)return a(h,e);if(i.byteLength!==16)return a({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:xe.FAILURE,xhr:n},e);let l=new DataView(i),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let v=0;v<t.length;v++)t[v].bytes=c;return a(null,e)},Zz=(e,t)=>{let a=Gh(e.map.bytes);if(a!=="mp4"){let r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${a||"unknown"} container for initialization segment at URL: ${r}`,code:xe.FAILURE})}Dl({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:r,data:n})=>(e.map.bytes=n,r.forEach(function(i){e.map.tracks=e.map.tracks||{},!e.map.tracks[i.type]&&(e.map.tracks[i.type]=i,typeof i.id=="number"&&i.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[i.id]=i.timescale))}),t(null))})},wB=({segment:e,finishProcessingFn:t})=>(a,r)=>{let n=k6(a,r);if(n)return t(n,e);let i=new Uint8Array(r.response);if(e.map.key)return e.map.encryptedBytes=i,t(null,e);e.map.bytes=i,Zz(e,function(h){if(h)return h.xhr=r,h.status=r.status,t(h,e);t(null,e)})},LB=({segment:e,finishProcessingFn:t,responseType:a})=>(r,n)=>{let i=k6(r,n);if(i)return t(i,e);let h=a==="arraybuffer"||!n.responseText?n.response:vB(n.responseText.substring(e.lastReachedChar||0));return e.stats=xB(n),e.key?e.encryptedBytes=new Uint8Array(h):e.bytes=new Uint8Array(h),t(null,e)},yB=({segment:e,bytes:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})=>{let y=e.map&&e.map.tracks||{},w=!!(y.audio&&y.video),O=r.bind(null,e,"audio","start"),k=r.bind(null,e,"audio","end"),V=r.bind(null,e,"video","start"),x=r.bind(null,e,"video","end"),C=()=>Jz({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:w,onData:T=>{T.type=T.type==="combined"?"video":T.type,d(e,T)},onTrackInfo:T=>{a&&(w&&(T.isMuxed=!0),a(e,T))},onAudioTimingInfo:T=>{O&&typeof T.start<"u"&&(O(T.start),O=null),k&&typeof T.end<"u"&&k(T.end)},onVideoTimingInfo:T=>{V&&typeof T.start<"u"&&(V(T.start),V=null),x&&typeof T.end<"u"&&x(T.end)},onVideoSegmentTimingInfo:T=>{n(T)},onAudioSegmentTimingInfo:T=>{i(T)},onId3:(T,S)=>{h(e,T,S)},onCaptions:T=>{l(e,[T])},isEndOfTimeline:c,onEndedTimeline:()=>{v()},onTransmuxerLog:L,onDone:T=>{z&&(T.type=T.type==="combined"?"video":T.type,z(null,e,T))}});Dl({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:T=>{e.bytes=t=T.data;let S=T.result;S&&(a(e,{hasAudio:S.hasAudio,hasVideo:S.hasVideo,isMuxed:w}),a=null,S.hasAudio&&!w&&O(S.audioStart),S.hasVideo&&V(S.videoStart),O=null,V=null),C()}})},tM=({segment:e,bytes:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})=>{let y=new Uint8Array(t);if(Pp(y)){e.isFmp4=!0;let{tracks:w}=e.map,O={isFmp4:!0,hasVideo:!!w.video,hasAudio:!!w.audio};w.audio&&w.audio.codec&&w.audio.codec!=="enca"&&(O.audioCodec=w.audio.codec),w.video&&w.video.codec&&w.video.codec!=="encv"&&(O.videoCodec=w.video.codec),w.video&&w.audio&&(O.isMuxed=!0),a(e,O);let k=V=>{d(e,{data:y,type:O.hasAudio&&!O.isMuxed?"audio":"video"}),V&&V.length&&l(e,V),z(null,e,{})};Dl({action:"probeMp4StartTime",timescales:e.map.timescales,data:y,transmuxer:e.transmuxer,callback:({data:V,startTime:x})=>{if(t=V.buffer,e.bytes=y=V,O.hasAudio&&!O.isMuxed&&r(e,"audio","start",x),O.hasVideo&&r(e,"video","start",x),!w.video||!V.byteLength||!e.transmuxer){k();return}Dl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:y,timescales:e.map.timescales,trackIds:[w.video.id],callback:C=>{t=C.data.buffer,e.bytes=y=C.data,C.logs.forEach(function(T){L($1(T,{stream:"mp4CaptionParser"}))}),k(C.captions)}})}});return}if(!e.transmuxer){z(null,e,{});return}if(typeof e.container>"u"&&(e.container=Gh(y)),e.container!=="ts"&&e.container!=="aac"){a(e,{hasAudio:!1,hasVideo:!1}),z(null,e,{});return}yB({segment:e,bytes:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})},eM=function({id:e,key:t,encryptedBytes:a,decryptionWorker:r},n){let i=l=>{if(l.data.source===e){r.removeEventListener("message",i);let c=l.data.decrypted;n(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};r.addEventListener("message",i);let h;t.bytes.slice?h=t.bytes.slice():h=new Uint32Array(Array.prototype.slice.call(t.bytes)),r.postMessage(Rz({source:e,encrypted:a,key:h,iv:t.iv}),[a.buffer,h.buffer])},CB=({decryptionWorker:e,segment:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})=>{eM({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},y=>{t.bytes=y,tM({segment:t,bytes:t.bytes,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})})},BB=({activeXhrs:e,decryptionWorker:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})=>{let y=0,w=!1;return(O,k)=>{if(!w){if(O)return w=!0,c6(e),z(O,k);if(y+=1,y===e.length){let V=function(){if(k.encryptedBytes)return CB({decryptionWorker:t,segment:k,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L});tM({segment:k,bytes:k.bytes,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d,doneFn:z,onTransmuxerLog:L})};if(k.endOfAllRequests=Date.now(),k.map&&k.map.encryptedBytes&&!k.map.bytes)return eM({decryptionWorker:t,id:k.requestId+"-init",encryptedBytes:k.map.encryptedBytes,key:k.map.key},x=>{k.map.bytes=x,Zz(k,C=>{if(C)return c6(e),z(C,k);V()})});V()}}}},SB=({loadendState:e,abortFn:t})=>a=>{a.target.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)},_B=({segment:e,progressFn:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:d})=>z=>{if(!z.target.aborted)return e.stats=$1(e.stats,VB(z)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(z,e)},TB=({xhr:e,xhrOptions:t,decryptionWorker:a,segment:r,abortFn:n,progressFn:i,trackInfoFn:h,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:v,id3Fn:d,captionsFn:z,isEndOfTimeline:L,endedTimelineFn:y,dataFn:w,doneFn:O,onTransmuxerLog:k})=>{let V=[],x=BB({activeXhrs:V,decryptionWorker:a,trackInfoFn:h,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:v,id3Fn:d,captionsFn:z,isEndOfTimeline:L,endedTimelineFn:y,dataFn:w,doneFn:O,onTransmuxerLog:k});if(r.key&&!r.key.bytes){let N=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&N.push(r.map.key);let $=$1(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),e1=Mf(r,N,x),r1=e($,e1);V.push(r1)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){let Y=$1(t,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),J=Mf(r,[r.map.key],x),W=e(Y,J);V.push(W)}let $=$1(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:o6(r.map)}),e1=wB({segment:r,finishProcessingFn:x}),r1=e($,e1);V.push(r1)}let C=$1(t,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:o6(r)}),T=LB({segment:r,finishProcessingFn:x,responseType:C.responseType}),S=e(C,T);S.addEventListener("progress",_B({segment:r,progressFn:i,trackInfoFn:h,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:v,id3Fn:d,captionsFn:z,isEndOfTimeline:L,endedTimelineFn:y,dataFn:w})),V.push(S);let R={};return V.forEach(N=>{N.addEventListener("loadend",SB({loadendState:R,abortFn:n}))}),()=>c6(V)},OB=re("CodecUtils"),bB=function(e){let t=e.attributes||{};if(t.CODECS)return J2(t.CODECS)},aM=(e,t)=>{let a=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&a.AUDIO&&e.mediaGroups.AUDIO[a.AUDIO]},AB=(e,t)=>{if(!aM(e,t))return!0;let a=t.attributes||{},r=e.mediaGroups.AUDIO[a.AUDIO];for(let n in r)if(!r[n].uri&&!r[n].playlists)return!0;return!1},Il=function(e){let t={};return e.forEach(({mediaType:a,type:r,details:n})=>{t[a]=t[a]||[],t[a].push(_s(`${r}${n}`))}),Object.keys(t).forEach(function(a){if(t[a].length>1){OB(`multiple ${a} codecs found as attributes: ${t[a].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),t[a]=null;return}t[a]=t[a][0]}),t},mf=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Xn=function(e,t){let a=t.attributes||{},r=Il(bB(t)||[]);if(aM(e,t)&&!r.audio&&!AB(e,t)){let n=Il(ig(e,a.AUDIO)||[]);n.audio&&(r.audio=n.audio)}return r},Qh=re("PlaylistSelector"),Hf=function(e){if(!e||!e.playlist)return;let t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},jl=function(e,t){if(!e)return"";let a=P.default.getComputedStyle(e);return a?a[t]:""},Ua=function(e,t){let a=e.slice();e.sort(function(r,n){let i=t(r,n);return i===0?a.indexOf(r)-a.indexOf(n):i})},P6=function(e,t){let a,r;return e.attributes.BANDWIDTH&&(a=e.attributes.BANDWIDTH),a=a||P.default.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||P.default.Number.MAX_VALUE,a-r},EB=function(e,t){let a,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(a=e.attributes.RESOLUTION.width),a=a||P.default.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||P.default.Number.MAX_VALUE,a===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:a-r},rM=function(e,t,a,r,n,i){if(!e)return;let h={bandwidth:t,width:a,height:r,limitRenditionByPlayerDimensions:n},l=e.playlists;o2.isAudioOnly(e)&&(l=i.getAudioTrackPlaylists_(),h.audioOnly=!0);let c=l.map(S=>{let R,N=S.attributes&&S.attributes.RESOLUTION&&S.attributes.RESOLUTION.width,$=S.attributes&&S.attributes.RESOLUTION&&S.attributes.RESOLUTION.height;return R=S.attributes&&S.attributes.BANDWIDTH,R=R||P.default.Number.MAX_VALUE,{bandwidth:R,width:N,height:$,playlist:S}});Ua(c,(S,R)=>S.bandwidth-R.bandwidth),c=c.filter(S=>!o2.isIncompatible(S.playlist));let v=c.filter(S=>o2.isEnabled(S.playlist));v.length||(v=c.filter(S=>!o2.isDisabled(S.playlist)));let d=v.filter(S=>S.bandwidth*mt.BANDWIDTH_VARIANCE<t),z=d[d.length-1],L=d.filter(S=>S.bandwidth===z.bandwidth)[0];if(n===!1){let S=L||v[0]||c[0];if(S&&S.playlist){let R="sortedPlaylistReps";return L&&(R="bandwidthBestRep"),v[0]&&(R="enabledPlaylistReps"),Qh(`choosing ${Hf(S)} using ${R} with options`,h),S.playlist}return Qh("could not choose a playlist with options",h),null}let y=d.filter(S=>S.width&&S.height);Ua(y,(S,R)=>S.width-R.width);let w=y.filter(S=>S.width===a&&S.height===r);z=w[w.length-1];let O=w.filter(S=>S.bandwidth===z.bandwidth)[0],k,V,x;O||(k=y.filter(S=>S.width>a||S.height>r),V=k.filter(S=>S.width===k[0].width&&S.height===k[0].height),z=V[V.length-1],x=V.filter(S=>S.bandwidth===z.bandwidth)[0]);let C;if(i.leastPixelDiffSelector){let S=y.map(R=>(R.pixelDiff=Math.abs(R.width-a)+Math.abs(R.height-r),R));Ua(S,(R,N)=>R.pixelDiff===N.pixelDiff?N.bandwidth-R.bandwidth:R.pixelDiff-N.pixelDiff),C=S[0]}let T=C||x||O||L||v[0]||c[0];if(T&&T.playlist){let S="sortedPlaylistReps";return C?S="leastPixelDiffRep":x?S="resolutionPlusOneRep":O?S="resolutionBestRep":L?S="bandwidthBestRep":v[0]&&(S="enabledPlaylistReps"),Qh(`choosing ${Hf(T)} using ${S} with options`,h),T.playlist}return Qh("could not choose a playlist with options",h),null},xf=function(){let e=this.useDevicePixelRatio&&P.default.devicePixelRatio||1;return rM(this.playlists.main,this.systemBandwidth,parseInt(jl(this.tech_.el(),"width"),10)*e,parseInt(jl(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},kB=function(e){let t=-1,a=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&P.default.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,a=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==a&&(t=e*this.systemBandwidth+(1-e)*t,a=this.systemBandwidth),rM(this.playlists.main,t,parseInt(jl(this.tech_.el(),"width"),10)*r,parseInt(jl(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},PB=function(e){let{main:t,currentTime:a,bandwidth:r,duration:n,segmentDuration:i,timeUntilRebuffer:h,currentTimeline:l,syncController:c}=e,v=t.playlists.filter(w=>!o2.isIncompatible(w)),d=v.filter(o2.isEnabled);d.length||(d=v.filter(w=>!o2.isDisabled(w)));let L=d.filter(o2.hasAttribute.bind(null,"BANDWIDTH")).map(w=>{let k=c.getSyncPoint(w,n,l,a)?1:2,x=o2.estimateSegmentRequestTime(i,r,w)*k-h;return{playlist:w,rebufferingImpact:x}}),y=L.filter(w=>w.rebufferingImpact<=0);return Ua(y,(w,O)=>P6(O.playlist,w.playlist)),y.length?y[0]:(Ua(L,(w,O)=>w.rebufferingImpact-O.rebufferingImpact),L[0]||null)},DB=function(){let e=this.playlists.main.playlists.filter(o2.isEnabled);return Ua(e,(a,r)=>P6(a,r)),e.filter(a=>!!Xn(this.playlists.main,a).video)[0]||null},IB=e=>{let t=0,a;return e.bytes&&(a=new Uint8Array(e.bytes),e.segments.forEach(r=>{a.set(r,t),t+=r.byteLength})),a},jB=function(e,t,a){if(!e[a]){t.trigger({type:"usage",name:"vhs-608"});let r=a;/^cc708_/.test(a)&&(r="SERVICE"+a.split("_")[1]);let n=t.textTracks().getTrackById(r);if(n)e[a]=n;else{let i=t.options_.vhs&&t.options_.vhs.captionServices||{},h=a,l=a,c=!1,v=i[r];v&&(h=v.label,l=v.language,c=v.default),e[a]=t.addRemoteTextTrack({kind:"captions",id:r,default:c,label:h,language:l},!1).track}}},RB=function({inbandTextTracks:e,captionArray:t,timestampOffset:a}){if(!t)return;let r=P.default.WebKitDataCue||P.default.VTTCue;t.forEach(n=>{let i=n.stream;e[i].addCue(new r(n.startTime+a,n.endTime+a,n.text))})},NB=function(e){Object.defineProperties(e.frame,{id:{get(){return F.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get(){return F.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get(){return F.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},FB=({inbandTextTracks:e,metadataArray:t,timestampOffset:a,videoDuration:r})=>{if(!t)return;let n=P.default.WebKitDataCue||P.default.VTTCue,i=e.metadataTrack_;if(!i||(t.forEach(d=>{let z=d.cueTime+a;typeof z!="number"||P.default.isNaN(z)||z<0||!(z<1/0)||d.frames.forEach(L=>{let y=new n(z,z,L.value||L.url||L.data||"");y.frame=L,y.value=L,NB(y),i.addCue(y)})}),!i.cues||!i.cues.length))return;let h=i.cues,l=[];for(let d=0;d<h.length;d++)h[d]&&l.push(h[d]);let c=l.reduce((d,z)=>{let L=d[z.startTime]||[];return L.push(z),d[z.startTime]=L,d},{}),v=Object.keys(c).sort((d,z)=>Number(d)-Number(z));v.forEach((d,z)=>{let L=c[d],y=Number(v[z+1])||r;L.forEach(w=>{w.endTime=y})})},UB=(e,t,a)=>{e.metadataTrack_||(e.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},$n=function(e,t,a){let r,n;if(a&&a.cues)for(r=a.cues.length;r--;)n=a.cues[r],n.startTime>=e&&n.endTime<=t&&a.removeCue(n)},$B=function(e){let t=e.cues;if(t)for(let a=0;a<t.length;a++){let r=[],n=0;for(let i=0;i<t.length;i++)t[a].startTime===t[i].startTime&&t[a].endTime===t[i].endTime&&t[a].text===t[i].text&&(n++,n>1&&r.push(t[i]));r.length&&r.forEach(i=>e.removeCue(i))}},WB=(e,t,a)=>{if(typeof t>"u"||t===null||!e.length)return[];let r=Math.ceil((t-a+3)*Yn.ONE_SECOND_IN_TS),n;for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)},GB=(e,t,a)=>{if(!t.length)return e;if(a)return t.slice();let r=t[0].pts,n=0;for(n;n<e.length&&!(e[n].pts>=r);n++);return e.slice(0,n).concat(t)},qB=(e,t,a,r)=>{let n=Math.ceil((t-r)*Yn.ONE_SECOND_IN_TS),i=Math.ceil((a-r)*Yn.ONE_SECOND_IN_TS),h=e.slice(),l=e.length;for(;l--&&!(e[l].pts<=i););if(l===-1)return h;let c=l+1;for(;c--&&!(e[c].pts<=n););return c=Math.max(c,0),h.splice(c,l-c+1),h},KB=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;let a=Object.keys(e).sort(),r=Object.keys(t).sort();if(a.length!==r.length)return!1;for(let n=0;n<a.length;n++){let i=a[n];if(i!==r[n]||e[i]!==t[i])return!1}return!0},nM=22,XB=function(e,t,a){t=t||[];let r=[],n=0;for(let i=0;i<t.length;i++){let h=t[i];if(e===h.timeline&&(r.push(i),n+=h.duration,n>a))return i}return r.length===0?0:r[r.length-1]},Fn=1,YB=500,Vf=e=>typeof e=="number"&&isFinite(e),Jh=1/60,QB=(e,t,a)=>e!=="main"||!t||!a?null:!a.hasAudio&&!a.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!a.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&a.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,JB=(e,t,a)=>{let r=t-mt.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));let n=t-a;return Math.min(n,r)},Pa=e=>{let{startOfSegment:t,duration:a,segment:r,part:n,playlist:{mediaSequence:i,id:h,segments:l=[]},mediaIndex:c,partIndex:v,timeline:d}=e,z=l.length-1,L="mediaIndex/partIndex increment";e.getMediaInfoForTime?L=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(L="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(L+=` with independent ${e.independent}`);let y=typeof v=="number",w=e.segment.uri?"segment":"pre-segment",O=y?Cz({preloadSegment:r})-1:0;return`${w} [${i+c}/${i+z}]`+(y?` part [${v}/${O}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(y?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${t}] duration [${a}] timeline [${d}] selected by [${L}] playlist [${h}]`},wf=e=>`${e}TimingInfo`,ZB=({segmentTimeline:e,currentTimeline:t,startOfSegment:a,buffered:r,overrideCheck:n})=>!n&&e===t?null:e<t?a:r.length?r.end(r.length-1):a,Lf=({timelineChangeController:e,currentTimeline:t,segmentTimeline:a,loaderType:r,audioDisabled:n})=>{if(t===a)return!1;if(r==="audio"){let i=e.lastTimelineChange({type:"main"});return!i||i.to!==a}if(r==="main"&&n){let i=e.pendingTimelineChange({type:"audio"});return!(i&&i.to===a)}return!1},tS=e=>{let t=0;return["video","audio"].forEach(function(a){let r=e[`${a}TimingInfo`];if(!r)return;let{start:n,end:i}=r,h;typeof n=="bigint"||typeof i=="bigint"?h=P.default.BigInt(i)-P.default.BigInt(n):typeof n=="number"&&typeof i=="number"&&(h=i-n),typeof h<"u"&&h>t&&(t=h)}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},yf=({segmentDuration:e,maxDuration:t})=>e?Math.round(e)>t+E0:!1,eS=(e,t)=>{if(t!=="hls")return null;let a=tS({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!a)return null;let r=e.playlist.targetDuration,n=yf({segmentDuration:a,maxDuration:r*2}),i=yf({segmentDuration:a,maxDuration:r}),h=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${a} when the reported duration is ${e.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||i?{severity:n?"warn":"info",message:h}:null},M5=class extends F.EventTarget{constructor(t,a={}){if(super(),!t)throw new TypeError("Initialization settings are required");if(typeof t.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=F.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=re(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return C9.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&P.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,P.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==t}error(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&C9.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){let t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return Et();if(this.loaderType_==="main"){let{hasAudio:a,hasVideo:r,isMuxed:n}=t;if(r&&a&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,a=!1){if(!t)return null;let r=Pl(t),n=this.initSegments_[r];return a&&!n&&t.bytes&&(this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),n||t}segmentKey(t,a=!1){if(!t)return null;let r=Nz(t),n=this.keyCache_[r];this.cacheEncryptionKeys_&&a&&!n&&t.bytes&&(this.keyCache_[r]=n={resolvedUri:t.resolvedUri,bytes:t.bytes});let i={resolvedUri:(n||t).resolvedUri};return n&&(i.bytes=n.bytes),i}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,a={}){if(!t)return;let r=this.playlist_,n=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=a,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));let i=null;if(r&&(r.id?i=r.id:r.uri&&(i=r.uri)),this.logger_(`playlist update [${i} => ${t.id||t.uri}]`),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==t.uri){this.mediaIndex!==null&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}let h=t.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${h}]`),this.mediaIndex!==null)if(this.mediaIndex-=h,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{let l=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!l.parts||!l.parts.length||!l.parts[this.partIndex])){let c=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=c}}n&&(n.mediaIndex-=h,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=t.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,t)}pause(){this.checkBufferTimeout_&&(P.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&C9.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,a,r=()=>{},n=!1){if(a===1/0&&(a=this.duration_()),a<=t){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let i=1,h=()=>{i--,i===0&&r()};(n||!this.audioDisabled_)&&(i++,this.sourceUpdater_.removeAudio(t,a,h)),(n||this.loaderType_==="main")&&(this.gopBuffer_=qB(this.gopBuffer_,t,a,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(t,a,h));for(let l in this.inbandTextTracks_)$n(t,a,this.inbandTextTracks_[l]);$n(t,a,this.segmentMetadataTrack_),h()}monitorBuffer_(){this.checkBufferTimeout_&&P.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=P.default.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&P.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=P.default.setTimeout(this.monitorBufferTick_.bind(this),YB)}fillBuffer_(){if(this.sourceUpdater_.updating())return;let t=this.chooseNextRequest_();t&&(typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}isEndOfStream_(t=this.mediaIndex,a=this.playlist_,r=this.partIndex){if(!a||!this.mediaSource_)return!1;let n=typeof t=="number"&&a.segments[t],i=t+1===a.segments.length,h=!n||!n.parts||r+1===n.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&i&&h}chooseNextRequest_(){let t=this.buffered_(),a=uf(t)||0,r=T6(t,this.currentTime_()),n=!this.hasPlayed_()&&r>=1,i=r>=this.goalBufferLength_(),h=this.playlist_.segments;if(!h.length||n||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());let l={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(l.isSyncRequest)l.mediaIndex=XB(this.currentTimeline_,h,a);else if(this.mediaIndex!==null){let z=h[this.mediaIndex],L=typeof this.partIndex=="number"?this.partIndex:-1;l.startOfSegment=z.end?z.end:a,z.parts&&z.parts[L+1]?(l.mediaIndex=this.mediaIndex,l.partIndex=L+1):l.mediaIndex=this.mediaIndex+1}else{let{segmentIndex:z,startTime:L,partIndex:y}=o2.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});l.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${a}`:`currentTime ${this.currentTime_()}`,l.mediaIndex=z,l.startOfSegment=L,l.partIndex=y}let c=h[l.mediaIndex],v=c&&typeof l.partIndex=="number"&&c.parts&&c.parts[l.partIndex];if(!c||typeof l.partIndex=="number"&&!v)return null;if(typeof l.partIndex!="number"&&c.parts&&(l.partIndex=0,v=c.parts[0]),!r&&v&&!v.independent)if(l.partIndex===0){let z=h[l.mediaIndex-1],L=z.parts&&z.parts.length&&z.parts[z.parts.length-1];L&&L.independent&&(l.mediaIndex-=1,l.partIndex=z.parts.length-1,l.independent="previous segment")}else c.parts[l.partIndex-1].independent&&(l.partIndex-=1,l.independent="previous part");let d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return l.mediaIndex>=h.length-1&&d&&!this.seeking_()?null:this.generateSegmentInfo_(l)}generateSegmentInfo_(t){let{independent:a,playlist:r,mediaIndex:n,startOfSegment:i,isSyncRequest:h,partIndex:l,forceTimestampOffset:c,getMediaInfoForTime:v}=t,d=r.segments[n],z=typeof l=="number"&&d.parts[l],L={requestId:"segment-loader-"+Math.random(),uri:z&&z.resolvedUri||d.resolvedUri,mediaIndex:n,partIndex:z?l:null,isSyncRequest:h,startOfSegment:i,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:z&&z.duration||d.duration,segment:d,part:z,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:a},y=typeof c<"u"?c:this.isPendingTimestampOffset_;L.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:y});let w=uf(this.sourceUpdater_.audioBuffered());return typeof w=="number"&&(L.audioAppendStart=w-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(L.gopsToAlignWith=WB(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),L}timestampOffsetForSegment_(t){return ZB(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;let a=this.currentTime_(),r=t.bandwidth,n=this.pendingSegment_.duration,i=o2.estimateSegmentRequestTime(n,r,this.playlist_,t.bytesReceived),h=LC(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(i<=h)return;let l=PB({main:this.vhs_.playlists.main,currentTime:a,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:h,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!l)return;let v=i-h-l.rebufferingImpact,d=.5;h<=E0&&(d=1),!(!l.playlist||l.playlist.uri===this.playlist_.uri||v<d)&&(this.bandwidth=l.playlist.attributes.BANDWIDTH*mt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${Pa(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")}handleTrackInfo_(t,a){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},KB(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(t,a,r,n){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;let i=this.pendingSegment_,h=wf(a);i[h]=i[h]||{},i[h][r]=n,this.logger_(`timinginfo: ${a} - ${r} - ${n}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(t,a){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,a));return}let n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};a.forEach(h=>{i[h.stream]=i[h.stream]||{startTime:1/0,captions:[],endTime:0};let l=i[h.stream];l.startTime=Math.min(l.startTime,h.startTime+n),l.endTime=Math.max(l.endTime,h.endTime+n),l.captions.push(h)}),Object.keys(i).forEach(h=>{let{startTime:l,endTime:c,captions:v}=i[h],d=this.inbandTextTracks_;this.logger_(`adding cues from ${l} -> ${c} for ${h}`),jB(d,this.vhs_.tech_,h),$n(l,c,d[h]),RB({captionArray:v,inbandTextTracks:d,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,a,r){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,a,r));return}let i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();UB(this.inbandTextTracks_,r,this.vhs_.tech_),FB({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:i,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){let t=this.callQueue_;this.callQueue_=[],t.forEach(a=>a())}processLoadQueue_(){let t=this.loadQueue_;this.loadQueue_=[],t.forEach(a=>a())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;let t=this.pendingSegment_;return t?this.getCurrentMediaInfo_()?!Lf({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;let t=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!t||!a)return!1;let{hasAudio:r,hasVideo:n,isMuxed:i}=a;return!(n&&!t.videoTimingInfo||r&&!this.audioDisabled_&&!i&&!t.audioTimingInfo||Lf({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,a){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,t,a));return}let r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),r.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),r.isFmp4=t.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[wf(a.type)].start;else{let n=this.getCurrentMediaInfo_(),i=this.loaderType_==="main"&&n&&n.hasVideo,h;i&&(h=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:h,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,a.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});let n=this.chooseNextRequest_();if(n.mediaIndex!==r.mediaIndex||n.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,a)}}updateAppendInitSegmentStatus(t,a){this.loaderType_==="main"&&typeof t.timestampOffset=="number"&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==t.playlist&&(this.appendInitSegment_[a]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:a,map:r,playlist:n}){if(r){let i=Pl(r);if(this.activeInitSegmentId_===i)return null;a=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=i}return a&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=n,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,a):null}handleQuotaExceededError_({segmentInfo:t,type:a,bytes:r},n){let i=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();i.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+x4(i).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+x4(h).join(", "));let l=i.length?i.start(0):0,c=i.length?i.end(i.length-1):0,v=h.length?h.start(0):0,d=h.length?h.end(h.length-1):0;if(c-l<=Fn&&d-v<=Fn){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${x4(i).join(", ")}, video buffer: ${x4(h).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:a,bytes:r}));let L=this.currentTime_()-Fn;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${L}`),this.remove(0,L,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Fn}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=P.default.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Fn*1e3)},!0)}handleAppendError_({segmentInfo:t,type:a,bytes:r},n){if(n){if(n.code===nM){this.handleQuotaExceededError_({segmentInfo:t,type:a,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(`${a} append of ${r.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:t,type:a,initSegment:r,data:n,bytes:i}){if(!i){let h=[n],l=n.byteLength;r&&(h.unshift(r),l+=r.byteLength),i=IB({bytes:l,segments:h})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:a,bytes:i},this.handleAppendError_.bind(this,{segmentInfo:t,type:a,bytes:i}))}handleSegmentTimingInfo_(t,a,r){if(!this.pendingSegment_||a!==this.pendingSegment_.requestId)return;let n=this.pendingSegment_.segment,i=`${t}TimingInfo`;n[i]||(n[i]={}),n[i].transmuxerPrependedSeconds=r.prependedContentDuration||0,n[i].transmuxedPresentationStart=r.start.presentation,n[i].transmuxedDecodeStart=r.start.decode,n[i].transmuxedPresentationEnd=r.end.presentation,n[i].transmuxedDecodeEnd=r.end.decode,n[i].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(t,a){let{type:r,data:n}=a;if(!n||!n.byteLength||r==="audio"&&this.audioDisabled_)return;let i=this.getInitSegmentAndUpdateState_({type:r,initSegment:a.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:r,initSegment:i,data:n})}loadSegment_(t){if(this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{let a=Q2({},t,{forceTimestampOffset:!0});Q2(t,this.generateSegmentInfo_(a)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)});return}this.updateTransmuxerAndRequestSegment_(t)}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));let a=this.createSimplifiedSegmentObj_(t),r=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),n=this.mediaIndex!==null,i=t.timeline!==this.currentTimeline_&&t.timeline>0,h=r||n&&i;this.logger_(`Requesting ${Pa(t)}`),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=TB({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:h,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:l,level:c,stream:v})=>{this.logger_(`${Pa(t)} logged from transmuxer stream ${v} as a ${c}: ${l}`)}})}trimBackBuffer_(t){let a=JB(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)}createSimplifiedSegmentObj_(t){let a=t.segment,r=t.part,n={resolvedUri:r?r.resolvedUri:a.resolvedUri,byterange:r?r.byterange:a.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},i=t.playlist.segments[t.mediaIndex-1];if(i&&i.timeline===a.timeline&&(i.videoTimingInfo?n.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(n.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),a.key){let h=a.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key=this.segmentKey(a.key),n.key.iv=h}return a.map&&(n.map=this.initSegmentForMap(a.map)),n}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,a){if(this.pendingSegment_.byteLength=a.bytesReceived,t<Jh){this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record ${Jh}`);return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,a,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,a,r));return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_||a.requestId!==this.pendingSegment_.requestId)return;if(t){if(this.pendingSegment_=null,this.state="READY",t.code===xe.ABORTED)return;if(this.pause(),t.code===xe.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(t),this.trigger("error");return}let n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,a.stats),n.endOfAllRequests=a.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=GB(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(t){let a=this.syncController_.mappingForTimeline(t);a!==null&&(this.timeMapping_=a)}updateMediaSecondsLoaded_(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return t===null?!1:this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:t,playlist:a,mediaIndex:r,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:i,useVideoTimingInfo:h,videoTimingInfo:l,audioTimingInfo:c}){if(typeof t<"u")return t;if(!h)return c.start;let v=a.segments[r-1];return r===0||!v||typeof v.start>"u"||v.end!==n+i?n:l.start}waitForAppendsToComplete_(t){let a=this.getCurrentMediaInfo_(t);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}let{hasAudio:r,hasVideo:n,isMuxed:i}=a,h=this.loaderType_==="main"&&n,l=!this.audioDisabled_&&r&&!i;if(t.waitingOnAppends=0,!t.hasAppendedData_){!t.timingInfo&&typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),this.checkAppendsDone_(t);return}h&&t.waitingOnAppends++,l&&t.waitingOnAppends++,h&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),l&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){let a=QB(this.loaderType_,this.getCurrentMediaInfo_(),t);return a?(this.error({message:a,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(t){if(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")return;let a=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),a=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:a,timingInfo:r}){return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};let a=this.getMediaInfo_(),n=this.loaderType_==="main"&&a&&a.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;n&&(t.timingInfo.end=typeof n.end=="number"?n.end:n.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}let t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});let a=eS(t,this.sourceType_);if(a&&(a.severity==="warn"?F.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Pa(t)}`);return}this.logger_(`Appended ${Pa(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");let r=t.segment,n=t.part,i=r.end&&this.currentTime_()-r.end>t.playlist.targetDuration*3,h=n&&n.end&&this.currentTime_()-n.end>t.playlist.partTargetDuration*3;if(i||h){this.logger_(`bad ${i?"segment":"part"} ${Pa(t)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<Jh){this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record ${Jh}`);return}let a=this.throughput.rate,r=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(n-a)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;let a=t.segment,r=a.start,n=a.end;if(!Vf(r)||!Vf(n))return;$n(r,n,this.segmentMetadataTrack_);let i=P.default.WebKitDataCue||P.default.VTTCue,h={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:r,end:n},l=JSON.stringify(h),c=new i(r,n,l);c.value=h,this.segmentMetadataTrack_.addCue(c)}};function Je(){}var iM=function(e){return typeof e!="string"?e:e.replace(/./,t=>t.toUpperCase())},aS=["video","audio"],s6=(e,t)=>{let a=t[`${e}Buffer`];return a&&a.updating||t.queuePending[e]},rS=(e,t)=>{for(let a=0;a<t.length;a++){let r=t[a];if(r.type==="mediaSource")return null;if(r.type===e)return a}return null},$a=(e,t)=>{if(t.queue.length===0)return;let a=0,r=t.queue[a];if(r.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),$a("audio",t),$a("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||s6(e,t))){if(r.type!==e){if(a=rS(e,t.queue),a===null)return;r=t.queue[a]}if(t.queue.splice(a,1),t.queuePending[e]=r,r.action(e,t),!r.doneFn){t.queuePending[e]=null,$a(e,t);return}}},hM=(e,t)=>{let a=t[`${e}Buffer`],r=iM(e);a&&(a.removeEventListener("updateend",t[`on${r}UpdateEnd_`]),a.removeEventListener("error",t[`on${r}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},Me=(e,t)=>e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1,M2={appendBuffer:(e,t,a)=>(r,n)=>{let i=n[`${r}Buffer`];if(Me(n.mediaSource,i)){n.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${r}Buffer`);try{i.appendBuffer(e)}catch(h){n.logger_(`Error with code ${h.code} `+(h.code===nM?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${r}Buffer`),n.queuePending[r]=null,a(h)}}},remove:(e,t)=>(a,r)=>{let n=r[`${a}Buffer`];if(Me(r.mediaSource,n)){r.logger_(`Removing ${e} to ${t} from ${a}Buffer`);try{n.remove(e,t)}catch{r.logger_(`Remove ${e} to ${t} from ${a}Buffer failed`)}}},timestampOffset:e=>(t,a)=>{let r=a[`${t}Buffer`];Me(a.mediaSource,r)&&(a.logger_(`Setting ${t}timestampOffset to ${e}`),r.timestampOffset=e)},callback:e=>(t,a)=>{e()},endOfStream:e=>t=>{if(t.mediaSource.readyState==="open"){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(a){F.log.warn("Failed to call media source endOfStream",a)}}},duration:e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(a){F.log.warn("Failed to set media source duration",a)}},abort:()=>(e,t)=>{if(t.mediaSource.readyState!=="open")return;let a=t[`${e}Buffer`];if(Me(t.mediaSource,a)){t.logger_(`calling abort on ${e}Buffer`);try{a.abort()}catch(r){F.log.warn(`Failed to abort on ${e}Buffer`,r)}}},addSourceBuffer:(e,t)=>a=>{let r=iM(e),n=xa(t);a.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);let i=a.mediaSource.addSourceBuffer(n);i.addEventListener("updateend",a[`on${r}UpdateEnd_`]),i.addEventListener("error",a[`on${r}Error_`]),a.codecs[e]=t,a[`${e}Buffer`]=i},removeSourceBuffer:e=>t=>{let a=t[`${e}Buffer`];if(hM(e,t),!!Me(t.mediaSource,a)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(a)}catch(r){F.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,r)}}},changeType:e=>(t,a)=>{let r=a[`${t}Buffer`],n=xa(e);Me(a.mediaSource,r)&&a.codecs[t]!==e&&(a.logger_(`changing ${t}Buffer codec from ${a.codecs[t]} to ${e}`),r.changeType(n),a.codecs[t]=e)}},m2=({type:e,sourceUpdater:t,action:a,doneFn:r,name:n})=>{t.queue.push({type:e,action:a,doneFn:r,name:n}),$a(e,t)},Cf=(e,t)=>a=>{if(t.queuePending[e]){let r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[`${e}Error_`])}$a(e,t)},Rl=class extends F.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>$a("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=re("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Cf("video",this),this.onAudioUpdateEnd_=Cf("audio",this),this.onVideoError_=a=>{this.videoError_=a},this.onAudioError_=a=>{this.audioError_=a},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,a){m2({type:"mediaSource",sourceUpdater:this,action:M2.addSourceBuffer(t,a),name:"addSourceBuffer"})}abort(t){m2({type:t,sourceUpdater:this,action:M2.abort(t),name:"abort"})}removeSourceBuffer(t){if(!this.canRemoveSourceBuffer()){F.log.error("removeSourceBuffer is not supported!");return}m2({type:"mediaSource",sourceUpdater:this,action:M2.removeSourceBuffer(t),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!F.browser.IE_VERSION&&!F.browser.IS_FIREFOX&&P.default.MediaSource&&P.default.MediaSource.prototype&&typeof P.default.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return P.default.SourceBuffer&&P.default.SourceBuffer.prototype&&typeof P.default.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(t,a){if(!this.canChangeType()){F.log.error("changeType is not supported!");return}m2({type:t,sourceUpdater:this,action:M2.changeType(a),name:"changeType"})}addOrChangeSourceBuffers(t){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(a=>{let r=t[a];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(a,r);this.canChangeType()&&this.changeType(a,r)})}appendBuffer(t,a){let{segmentInfo:r,type:n,bytes:i}=t;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([t,a]),this.logger_(`delayed audio append of ${i.length} until video append`);return}let h=a;if(m2({type:n,sourceUpdater:this,action:M2.appendBuffer(i,r||{mediaIndex:-1},h),doneFn:a,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;let l=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return Me(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Et()}videoBuffered(){return Me(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Et()}buffered(){let t=Me(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Me(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!t?this.audioBuffered():t&&!a?this.videoBuffered():wC(this.audioBuffered(),this.videoBuffered())}setDuration(t,a=Je){m2({type:"mediaSource",sourceUpdater:this,action:M2.duration(t),name:"duration",doneFn:a})}endOfStream(t=null,a=Je){typeof t!="string"&&(t=void 0),m2({type:"mediaSource",sourceUpdater:this,action:M2.endOfStream(t),name:"endOfStream",doneFn:a})}removeAudio(t,a,r=Je){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}m2({type:"audio",sourceUpdater:this,action:M2.remove(t,a),doneFn:r,name:"remove"})}removeVideo(t,a,r=Je){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}m2({type:"video",sourceUpdater:this,action:M2.remove(t,a),doneFn:r,name:"remove"})}updating(){return!!(s6("audio",this)||s6("video",this))}audioTimestampOffset(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(m2({type:"audio",sourceUpdater:this,action:M2.timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(m2({type:"video",sourceUpdater:this,action:M2.timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&m2({type:"audio",sourceUpdater:this,action:M2.callback(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&m2({type:"video",sourceUpdater:this,action:M2.callback(t),name:"callback"})}dispose(){this.trigger("dispose"),aS.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`](()=>hM(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}},Bf=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),Sf=new Uint8Array(`

`.split("").map(e=>e.charCodeAt(0))),v6=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},d6=class extends M5{constructor(t,a={}){super(t,a),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Et();let t=this.subtitlesTrack_.cues,a=t[0].startTime,r=t[t.length-1].startTime;return Et([[a,r]])}initSegmentForMap(t,a=!1){if(!t)return null;let r=Pl(t),n=this.initSegments_[r];if(a&&!n&&t.bytes){let i=Sf.byteLength+t.bytes.byteLength,h=new Uint8Array(i);h.set(t.bytes),h.set(Sf,t.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:h}}return n||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return typeof t>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(t,a){$n(t,a,this.subtitlesTrack_)}fillBuffer_(){let t=this.chooseNextRequest_();if(t){if(this.syncController_.timestampOffsetForTimeline(t.timeline)===null){let a=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,a,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(t){t.code===xe.TIMEOUT&&this.handleTimeout_(),t.code===xe.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(t);return}let n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");let i=n.segment;if(i.map&&(i.map.bytes=a.map.bytes),n.bytes=a.bytes,typeof P.default.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(t,a,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}i.requested=!0;try{this.parseVTTCues_(n)}catch(h){this.stopForError({message:h.message});return}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,n.cues.forEach(h=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new P.default.VTTCue(h.startTime,h.endTime,h.text):h)}),$B(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(t){let a,r=!1;if(typeof P.default.WebVTT!="function")throw new v6;typeof P.default.TextDecoder=="function"?a=new P.default.TextDecoder("utf8"):(a=P.default.WebVTT.StringDecoder(),r=!0);let n=new P.default.WebVTT.Parser(P.default,P.default.vttjs,a);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=h=>{t.timestampmap=h},n.onparsingerror=h=>{F.log.warn("Error encountered when parsing cues: "+h.message)},t.segment.map){let h=t.segment.map.bytes;r&&(h=Bf(h)),n.parse(h)}let i=t.bytes;r&&(i=Bf(i)),n.parse(i),n.flush()}updateTimeMapping_(t,a,r){let n=t.segment;if(!a)return;if(!t.cues.length){n.empty=!0;return}let i=t.timestampmap,h=i.MPEGTS/Yn.ONE_SECOND_IN_TS-i.LOCAL+a.mapping;if(t.cues.forEach(l=>{l.startTime+=h,l.endTime+=h}),!r.syncInfo){let l=t.cues[0].startTime,c=t.cues[t.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:Math.min(l,c-n.duration)}}}},nS=function(e,t){let a=e.cues;for(let r=0;r<a.length;r++){let n=a[r];if(t>=n.adStartTime&&t<=n.adEndTime)return n}return null},iS=function(e,t,a=0){if(!e.segments)return;let r=a,n;for(let i=0;i<e.segments.length;i++){let h=e.segments[i];if(n||(n=nS(t,r+h.duration/2)),n){if("cueIn"in h){n.endTime=r,n.adEndTime=r,r+=h.duration,n=null;continue}if(r<n.endTime){r+=h.duration;continue}n.endTime+=h.duration}else if("cueOut"in h&&(n=new P.default.VTTCue(r,r+h.duration,h.cueOut),n.adStartTime=r,n.adEndTime=r+parseFloat(h.cueOut),t.addCue(n)),"cueOutCont"in h){let[l,c]=h.cueOutCont.split("/").map(parseFloat);n=new P.default.VTTCue(r,r+h.duration,""),n.adStartTime=r-l,n.adEndTime=n.adStartTime+c,t.addCue(n)}r+=h.duration}},hS=86400,_f=[{name:"VOD",run:(e,t,a,r,n)=>a!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(e,t,a,r,n)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let i=null,h=null,l=r6(t);n=n||0;for(let c=0;c<l.length;c++){let v=t.endList||n===0?c:l.length-(c+1),d=l[v],z=d.segment,L=e.timelineToDatetimeMappings[z.timeline];if(!L||!z.dateTimeObject)continue;let w=z.dateTimeObject.getTime()/1e3+L;if(z.parts&&typeof d.partIndex=="number")for(let k=0;k<d.partIndex;k++)w+=z.parts[k].duration;let O=Math.abs(n-w);if(h!==null&&(O===0||h<O))break;h=O,i={time:w,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return i}},{name:"Segment",run:(e,t,a,r,n)=>{let i=null,h=null;n=n||0;let l=r6(t);for(let c=0;c<l.length;c++){let v=t.endList||n===0?c:l.length-(c+1),d=l[v],z=d.segment,L=d.part&&d.part.start||z&&z.start;if(z.timeline===r&&typeof L<"u"){let y=Math.abs(n-L);if(h!==null&&h<y)break;(!i||h===null||h>=y)&&(h=y,i={time:L,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return i}},{name:"Discontinuity",run:(e,t,a,r,n)=>{let i=null;if(n=n||0,t.discontinuityStarts&&t.discontinuityStarts.length){let h=null;for(let l=0;l<t.discontinuityStarts.length;l++){let c=t.discontinuityStarts[l],v=t.discontinuitySequence+l+1,d=e.discontinuities[v];if(d){let z=Math.abs(n-d.time);if(h!==null&&h<z)break;(!i||h===null||h>=z)&&(h=z,i={time:d.time,segmentIndex:c,partIndex:null})}}}return i}},{name:"Playlist",run:(e,t,a,r,n)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}],u6=class extends F.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=re("SyncController")}getSyncPoint(t,a,r,n){let i=this.runStrategies_(t,a,r,n);return i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null}getExpiredTime(t,a){if(!t||!t.segments)return null;let r=this.runStrategies_(t,a,t.discontinuitySequence,0);if(!r.length)return null;let n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+Kn({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(t,a,r,n){let i=[];for(let h=0;h<_f.length;h++){let l=_f[h],c=l.run(this,t,a,r,n);c&&(c.strategy=l.name,i.push({strategy:l.name,syncPoint:c}))}return i}selectSyncPoint_(t,a){let r=t[0].syncPoint,n=Math.abs(t[0].syncPoint[a.key]-a.value),i=t[0].strategy;for(let h=1;h<t.length;h++){let l=Math.abs(t[h].syncPoint[a.key]-a.value);l<n&&(n=l,r=t[h].syncPoint,i=t[h].strategy)}return this.logger_(`syncPoint for [${a.key}: ${a.value}] chosen with strategy [${i}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(t,a){let r=a.mediaSequence-t.mediaSequence;if(r>hS){F.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let n=r-1;n>=0;n--){let i=t.segments[n];if(i&&typeof i.start<"u"){a.syncInfo={mediaSequence:t.mediaSequence+n,time:i.start},this.logger_(`playlist refresh sync: [time:${a.syncInfo.time}, mediaSequence: ${a.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){let a=t.segments[0],r=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:a}){let r=this.calculateSegmentTimeMapping_(t,t.timingInfo,a),n=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:n.start}));let i=n.dateTimeObject;n.discontinuity&&a&&i&&(this.timelineToDatetimeMappings[n.timeline]=-(i.getTime()/1e3))}timestampOffsetForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time}mappingForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,a,r){let n=t.segment,i=t.part,h=this.timelines[t.timeline],l,c;if(typeof t.timestampOffset=="number")h={time:t.startOfSegment,mapping:t.startOfSegment-a.start},r&&(this.timelines[t.timeline]=h,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${h.time}] [mapping: ${h.mapping}]`)),l=t.startOfSegment,c=a.end+h.mapping;else if(h)l=a.start+h.mapping,c=a.end+h.mapping;else return!1;return i&&(i.start=l,i.end=c),(!n.start||l<n.start)&&(n.start=l),n.end=c,!0}saveDiscontinuitySyncInfo_(t){let a=t.playlist,r=t.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(let n=0;n<a.discontinuityStarts.length;n++){let i=a.discontinuityStarts[n],h=a.discontinuitySequence+n+1,l=i-t.mediaIndex,c=Math.abs(l);if(!this.discontinuities[h]||this.discontinuities[h].accuracy>c){let v;l<0?v=r.start-Kn({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex,endIndex:i}):v=r.end+Kn({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex+1,endIndex:i}),this.discontinuities[h]={time:v,accuracy:c}}}}dispose(){this.trigger("dispose"),this.off()}},g6=class extends F.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:a,to:r}){return typeof a=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:a,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:a,to:r}){return typeof a=="number"&&typeof r=="number"&&(this.lastTimelineChanges_[t]={type:t,from:a,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}},lS=qz(Kz(function(){var e=function(){function O(){this.listeners={}}var k=O.prototype;return k.on=function(x,C){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push(C)},k.off=function(x,C){if(!this.listeners[x])return!1;var T=this.listeners[x].indexOf(C);return this.listeners[x]=this.listeners[x].slice(0),this.listeners[x].splice(T,1),T>-1},k.trigger=function(x){var C=this.listeners[x];if(C)if(arguments.length===2)for(var T=C.length,S=0;S<T;++S)C[S].call(this,arguments[1]);else for(var R=Array.prototype.slice.call(arguments,1),N=C.length,$=0;$<N;++$)C[$].apply(this,R)},k.dispose=function(){this.listeners={}},k.pipe=function(x){this.on("data",function(C){x.push(C)})},O}();function t(O){return O.subarray(0,O.byteLength-O[O.byteLength-1])}let a=function(){let O=[[[],[],[],[],[]],[[],[],[],[],[]]],k=O[0],V=O[1],x=k[4],C=V[4],T,S,R,N=[],$=[],e1,r1,Y,J,W,K;for(T=0;T<256;T++)$[(N[T]=T<<1^(T>>7)*283)^T]=T;for(S=R=0;!x[S];S^=e1||1,R=$[R]||1)for(J=R^R<<1^R<<2^R<<3^R<<4,J=J>>8^J&255^99,x[S]=J,C[J]=S,Y=N[r1=N[e1=N[S]]],K=Y*16843009^r1*65537^e1*257^S*16843008,W=N[J]*257^J*16843008,T=0;T<4;T++)k[T][S]=W=W<<24^W>>>8,V[T][J]=K=K<<24^K>>>8;for(T=0;T<5;T++)k[T]=k[T].slice(0),V[T]=V[T].slice(0);return O},r=null;class n{constructor(k){r||(r=a()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let V,x,C,T=this._tables[0][4],S=this._tables[1],R=k.length,N=1;if(R!==4&&R!==6&&R!==8)throw new Error("Invalid aes key size");let $=k.slice(0),e1=[];for(this._key=[$,e1],V=R;V<4*R+28;V++)C=$[V-1],(V%R===0||R===8&&V%R===4)&&(C=T[C>>>24]<<24^T[C>>16&255]<<16^T[C>>8&255]<<8^T[C&255],V%R===0&&(C=C<<8^C>>>24^N<<24,N=N<<1^(N>>7)*283)),$[V]=$[V-R]^C;for(x=0;V;x++,V--)C=$[x&3?V:V-4],V<=4||x<4?e1[x]=C:e1[x]=S[0][T[C>>>24]]^S[1][T[C>>16&255]]^S[2][T[C>>8&255]]^S[3][T[C&255]]}decrypt(k,V,x,C,T,S){let R=this._key[1],N=k^R[0],$=C^R[1],e1=x^R[2],r1=V^R[3],Y,J,W,K=R.length/4-2,Z,n1=4,o1=this._tables[1],s1=o1[0],B1=o1[1],L1=o1[2],j1=o1[3],dt=o1[4];for(Z=0;Z<K;Z++)Y=s1[N>>>24]^B1[$>>16&255]^L1[e1>>8&255]^j1[r1&255]^R[n1],J=s1[$>>>24]^B1[e1>>16&255]^L1[r1>>8&255]^j1[N&255]^R[n1+1],W=s1[e1>>>24]^B1[r1>>16&255]^L1[N>>8&255]^j1[$&255]^R[n1+2],r1=s1[r1>>>24]^B1[N>>16&255]^L1[$>>8&255]^j1[e1&255]^R[n1+3],n1+=4,N=Y,$=J,e1=W;for(Z=0;Z<4;Z++)T[(3&-Z)+S]=dt[N>>>24]<<24^dt[$>>16&255]<<16^dt[e1>>8&255]<<8^dt[r1&255]^R[n1++],Y=N,N=$,$=e1,e1=r1,r1=Y}}class i extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(k){this.jobs.push(k),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}let h=function(O){return O<<24|(O&65280)<<8|(O&16711680)>>8|O>>>24},l=function(O,k,V){let x=new Int32Array(O.buffer,O.byteOffset,O.byteLength>>2),C=new n(Array.prototype.slice.call(k)),T=new Uint8Array(O.byteLength),S=new Int32Array(T.buffer),R,N,$,e1,r1,Y,J,W,K;for(R=V[0],N=V[1],$=V[2],e1=V[3],K=0;K<x.length;K+=4)r1=h(x[K]),Y=h(x[K+1]),J=h(x[K+2]),W=h(x[K+3]),C.decrypt(r1,Y,J,W,S,K),S[K]=h(S[K]^R),S[K+1]=h(S[K+1]^N),S[K+2]=h(S[K+2]^$),S[K+3]=h(S[K+3]^e1),R=r1,N=Y,$=J,e1=W;return T};class c{constructor(k,V,x,C){let T=c.STEP,S=new Int32Array(k.buffer),R=new Uint8Array(k.byteLength),N=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(S.subarray(N,N+T),V,x,R)),N=T;N<S.length;N+=T)x=new Uint32Array([h(S[N-4]),h(S[N-3]),h(S[N-2]),h(S[N-1])]),this.asyncStream_.push(this.decryptChunk_(S.subarray(N,N+T),V,x,R));this.asyncStream_.push(function(){C(null,t(R))})}static get STEP(){return 32e3}decryptChunk_(k,V,x,C){return function(){let T=l(k,V,x);C.set(T,k.byteOffset)}}}var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof v<"u"?d=v:typeof self<"u"?d=self:d={};var z=d,L=function(k){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(k):k&&k.buffer instanceof ArrayBuffer},y=z.BigInt||Number;y("0x1"),y("0x100"),y("0x10000"),y("0x1000000"),y("0x100000000"),y("0x10000000000"),y("0x1000000000000"),y("0x100000000000000"),y("0x10000000000000000"),function(){var O=new Uint16Array([65484]),k=new Uint8Array(O.buffer,O.byteOffset,O.byteLength);return k[0]===255?"big":k[0]===204?"little":"unknown"}();let w=function(O){let k={};return Object.keys(O).forEach(V=>{let x=O[V];L(x)?k[V]={bytes:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength}:k[V]=x}),k};self.onmessage=function(O){let k=O.data,V=new Uint8Array(k.encrypted.bytes,k.encrypted.byteOffset,k.encrypted.byteLength),x=new Uint32Array(k.key.bytes,k.key.byteOffset,k.key.byteLength/4),C=new Uint32Array(k.iv.bytes,k.iv.byteOffset,k.iv.byteLength/4);new c(V,x,C,function(T,S){self.postMessage(w({source:k.source,decrypted:S}),[S.buffer])})}})),oS=Gz(lS),cS=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Nl=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},p6=(e,t)=>{t.activePlaylistLoader=e,e.load()},sS=(e,t)=>()=>{let{segmentLoaders:{[e]:a,main:r},mediaTypes:{[e]:n}}=t,i=n.activeTrack(),h=n.getActiveGroup(),l=n.activePlaylistLoader,c=n.lastGroup_;if(!(h&&c&&h.id===c.id)&&(n.lastGroup_=h,n.lastTrack_=i,Nl(a,n),!(!h||h.isMainPlaylist))){if(!h.playlistLoader){l&&r.resetEverything();return}a.resyncLoader(),p6(h.playlistLoader,n)}},vS=(e,t)=>()=>{let{segmentLoaders:{[e]:a},mediaTypes:{[e]:r}}=t;r.lastGroup_=null,a.abort(),a.pause()},dS=(e,t)=>()=>{let{mainPlaylistLoader:a,segmentLoaders:{[e]:r,main:n},mediaTypes:{[e]:i}}=t,h=i.activeTrack(),l=i.getActiveGroup(),c=i.activePlaylistLoader,v=i.lastTrack_;if(!(v&&h&&v.id===h.id)&&(i.lastGroup_=l,i.lastTrack_=h,Nl(r,i),!!l)){if(l.isMainPlaylist){if(!h||!v||h.id===v.id)return;let d=t.vhs.playlistController_,z=d.selectPlaylist();if(d.media()===z)return;i.logger_(`track change. Switching main audio from ${v.id} to ${h.id}`),a.pause(),n.resetEverything(),d.fastQualityChange_(z);return}if(e==="AUDIO"){if(!l.playlistLoader){n.setAudio(!0),n.resetEverything();return}r.setAudio(!0),n.setAudio(!1)}if(c===l.playlistLoader){p6(l.playlistLoader,i);return}r.track&&r.track(h),r.resetEverything(),p6(l.playlistLoader,i)}},Fl={AUDIO:(e,t)=>()=>{let{segmentLoaders:{[e]:a},mediaTypes:{[e]:r},excludePlaylist:n}=t;Nl(a,r);let i=r.activeTrack(),h=r.activeGroup(),l=(h.filter(v=>v.default)[0]||h[0]).id,c=r.tracks[l];if(i===c){n({error:{message:"Problem encountered loading the default audio track."}});return}F.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(let v in r.tracks)r.tracks[v].enabled=r.tracks[v]===c;r.onTrackChanged()},SUBTITLES:(e,t)=>()=>{let{segmentLoaders:{[e]:a},mediaTypes:{[e]:r}}=t;F.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Nl(a,r);let n=r.activeTrack();n&&(n.mode="disabled"),r.onTrackChanged()}},Tf={AUDIO:(e,t,a)=>{if(!t)return;let{tech:r,requestOptions:n,segmentLoaders:{[e]:i}}=a;t.on("loadedmetadata",()=>{let h=t.media();i.playlist(h,n),(!r.paused()||h.endList&&r.preload()!=="none")&&i.load()}),t.on("loadedplaylist",()=>{i.playlist(t.media(),n),r.paused()||i.load()}),t.on("error",Fl[e](e,a))},SUBTITLES:(e,t,a)=>{let{tech:r,requestOptions:n,segmentLoaders:{[e]:i},mediaTypes:{[e]:h}}=a;t.on("loadedmetadata",()=>{let l=t.media();i.playlist(l,n),i.track(h.activeTrack()),(!r.paused()||l.endList&&r.preload()!=="none")&&i.load()}),t.on("loadedplaylist",()=>{i.playlist(t.media(),n),r.paused()||i.load()}),t.on("error",Fl[e](e,a))}},uS={AUDIO:(e,t)=>{let{vhs:a,sourceType:r,segmentLoaders:{[e]:n},requestOptions:i,main:{mediaGroups:h},mediaTypes:{[e]:{groups:l,tracks:c,logger_:v}},mainPlaylistLoader:d}=t,z=H5(d.main);(!h[e]||Object.keys(h[e]).length===0)&&(h[e]={main:{default:{default:!0}}},z&&(h[e].main.default.playlists=d.main.playlists));for(let L in h[e]){l[L]||(l[L]=[]);for(let y in h[e][L]){let w=h[e][L][y],O;if(z?(v(`AUDIO group '${L}' label '${y}' is a main playlist`),w.isMainPlaylist=!0,O=null):r==="vhs-json"&&w.playlists?O=new B0(w.playlists[0],a,i):w.resolvedUri?O=new B0(w.resolvedUri,a,i):w.playlists&&r==="dash"?O=new z5(w.playlists[0],a,i,d):O=null,w=$1({id:y,playlistLoader:O},w),Tf[e](e,w.playlistLoader,t),l[L].push(w),typeof c[y]>"u"){let k=new F.AudioTrack({id:y,kind:cS(w),enabled:!1,language:w.language,default:w.default,label:y});c[y]=k}}}n.on("error",Fl[e](e,t))},SUBTITLES:(e,t)=>{let{tech:a,vhs:r,sourceType:n,segmentLoaders:{[e]:i},requestOptions:h,main:{mediaGroups:l},mediaTypes:{[e]:{groups:c,tracks:v}},mainPlaylistLoader:d}=t;for(let z in l[e]){c[z]||(c[z]=[]);for(let L in l[e][z]){if(l[e][z][L].forced)continue;let y=l[e][z][L],w;if(n==="hls")w=new B0(y.resolvedUri,r,h);else if(n==="dash"){if(!y.playlists.filter(k=>k.excludeUntil!==1/0).length)return;w=new z5(y.playlists[0],r,h,d)}else n==="vhs-json"&&(w=new B0(y.playlists?y.playlists[0]:y.resolvedUri,r,h));if(y=$1({id:L,playlistLoader:w},y),Tf[e](e,y.playlistLoader,t),c[z].push(y),typeof v[L]>"u"){let O=a.addRemoteTextTrack({id:L,kind:"subtitles",default:y.default&&y.autoselect,language:y.language,label:L},!1).track;v[L]=O}}}i.on("error",Fl[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{let{tech:a,main:{mediaGroups:r},mediaTypes:{[e]:{groups:n,tracks:i}}}=t;for(let h in r[e]){n[h]||(n[h]=[]);for(let l in r[e][h]){let c=r[e][h][l];if(!/^(?:CC|SERVICE)/.test(c.instreamId))continue;let v=a.options_.vhs&&a.options_.vhs.captionServices||{},d={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(v[d.instreamId]&&(d=$1(d,v[d.instreamId])),d.default===void 0&&delete d.default,n[h].push($1({id:l},c)),typeof i[l]>"u"){let z=a.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;i[l]=z}}}}},lM=(e,t)=>{for(let a=0;a<e.length;a++)if(A6(t,e[a])||e[a].playlists&&lM(e[a].playlists,t))return!0;return!1},gS=(e,t)=>a=>{let{mainPlaylistLoader:r,mediaTypes:{[e]:{groups:n}}}=t,i=r.media();if(!i)return null;let h=null;i.attributes[e]&&(h=n[i.attributes[e]]);let l=Object.keys(n);if(!h)if(e==="AUDIO"&&l.length>1&&H5(t.main))for(let c=0;c<l.length;c++){let v=n[l[c]];if(lM(v,i)){h=v;break}}else n.main?h=n.main:l.length===1&&(h=n[l[0]]);return typeof a>"u"?h:a===null||!h?null:h.filter(c=>c.id===a.id)[0]||null},pS={AUDIO:(e,t)=>()=>{let{mediaTypes:{[e]:{tracks:a}}}=t;for(let r in a)if(a[r].enabled)return a[r];return null},SUBTITLES:(e,t)=>()=>{let{mediaTypes:{[e]:{tracks:a}}}=t;for(let r in a)if(a[r].mode==="showing"||a[r].mode==="hidden")return a[r];return null}},fS=(e,{mediaTypes:t})=>()=>{let a=t[e].activeTrack();return a?t[e].activeGroup(a):null},zS=e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(v=>{uS[v](v,e)});let{mediaTypes:t,mainPlaylistLoader:a,tech:r,vhs:n,segmentLoaders:{["AUDIO"]:i,main:h}}=e;["AUDIO","SUBTITLES"].forEach(v=>{t[v].activeGroup=gS(v,e),t[v].activeTrack=pS[v](v,e),t[v].onGroupChanged=sS(v,e),t[v].onGroupChanging=vS(v,e),t[v].onTrackChanged=dS(v,e),t[v].getActiveGroup=fS(v,e)});let l=t.AUDIO.activeGroup();if(l){let v=(l.filter(z=>z.default)[0]||l[0]).id;t.AUDIO.tracks[v].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(h.setAudio(!1),i.setAudio(!0)):h.setAudio(!0)}a.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(v=>t[v].onGroupChanged())}),a.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(v=>t[v].onGroupChanging())});let c=()=>{t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",c),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),n.on("dispose",()=>{r.audioTracks().removeEventListener("change",c),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(let v in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[v])},MS=()=>{let e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Je,activeTrack:Je,getActiveGroup:Je,onGroupChanged:Je,onTrackChanged:Je,lastTrack_:null,logger_:re(`MediaGroups[${t}]`)}}),e},mS=60*2,Ye,HS=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],xS=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},VS=function({currentPlaylist:e,buffered:t,currentTime:a,nextPlaylist:r,bufferLowWaterLine:n,bufferHighWaterLine:i,duration:h,bufferBasedABR:l,log:c}){if(!r)return F.log.warn("We received no playlist to switch to. Please check your stream."),!1;let v=`allowing switch ${e&&e.id||"null"} -> ${r.id}`;if(!e)return c(`${v} as current playlist is not set`),!0;if(r.id===e.id)return!1;let d=!!Ia(t,a).length;if(!e.endList)return!d&&typeof e.partTargetDuration=="number"?(c(`not ${v} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(c(`${v} as current playlist is live`),!0);let z=T6(t,a),L=l?mt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:mt.MAX_BUFFER_LOW_WATER_LINE;if(h<L)return c(`${v} as duration < max low water line (${h} < ${L})`),!0;let y=r.attributes.BANDWIDTH,w=e.attributes.BANDWIDTH;if(y<w&&(!l||z<i)){let O=`${v} as next bandwidth < current bandwidth (${y} < ${w})`;return l&&(O+=` and forwardBuffer < bufferHighWaterLine (${z} < ${i})`),c(O),!0}if((!l||y>w)&&z>=n){let O=`${v} as forwardBuffer >= bufferLowWaterLine (${z} >= ${n})`;return l&&(O+=` and next bandwidth > current bandwidth (${y} > ${w})`),c(O),!0}return c(`not ${v} as no switching criteria met`),!1},f6=class extends F.EventTarget{constructor(t){super();let{src:a,withCredentials:r,tech:n,bandwidth:i,externVhs:h,useCueTags:l,playlistExclusionDuration:c,enableLowInitialPlaylist:v,sourceType:d,cacheEncryptionKeys:z,bufferBasedABR:L,leastPixelDiffSelector:y,captionServices:w}=t;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:O}=t;(O===null||typeof O>"u")&&(O=1/0),Ye=h,this.bufferBasedABR=!!L,this.leastPixelDiffSelector=!!y,this.withCredentials=r,this.tech_=n,this.vhs_=n.vhs,this.sourceType_=d,this.useCueTags_=l,this.playlistExclusionDuration=c,this.maxPlaylistRetries=O,this.enableLowInitialPlaylist=v,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:O,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=MS(),this.mediaSource=new P.default.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Et(),this.hasPlayed_=!1,this.syncController_=new u6(t),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new oS,this.sourceUpdater_=new Rl(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new g6;let k={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:w,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:i,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:z,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings};this.mainPlaylistLoader_=this.sourceType_==="dash"?new z5(a,this.vhs_,this.requestOptions_):new B0(a,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new M5($1(k,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new M5($1(k,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new d6($1(k,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((x,C)=>{function T(){n.off("vttjserror",S),x()}function S(){n.off("vttjsloaded",T),C()}n.one("vttjsloaded",T),n.one("vttjserror",S),n.addWebVttScript_()})}),t),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),HS.forEach(x=>{this[x+"_"]=xS.bind(this,x)}),this.logger_=re("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;let V=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(V,()=>{let x=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-x,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){let t=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return t===-1||a===-1?-1:t+a}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){let a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,t)}switchMedia_(t,a,r){let n=this.media(),i=n&&(n.id||n.uri),h=t.id||t.uri;i&&i!==h&&(this.logger_(`switch media ${i} -> ${h} from ${a}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${a}`})),this.mainPlaylistLoader_.media(t,r)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=P.default.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(P.default.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){let t=this.main(),a=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return a;let r=t.mediaGroups.AUDIO,n=Object.keys(r),i;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{let l=r.main||n.length&&r[n[0]];for(let c in l)if(l[c].default){i={label:c};break}}if(!i)return a;let h=[];for(let l in r)if(r[l][i.label]){let c=r[l][i.label];if(c.playlists&&c.playlists.length)h.push.apply(h,c.playlists);else if(c.uri)h.push(c);else if(t.playlists.length)for(let v=0;v<t.playlists.length;v++){let d=t.playlists[v];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&h.push(d)}}return h.length?h:a}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{let t=this.mainPlaylistLoader_.media(),a=t.targetDuration*1.5*1e3;n6(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=a,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),zS({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.excludeUnsupportedVariants_();let a;if(this.enableLowInitialPlaylist&&(a=this.selectInitialPlaylist()),a||(a=this.selectPlaylist()),!a||!this.shouldSwitchToMedia_(a)||(this.initialMedia_=a,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{let t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{let t=this.mainPlaylistLoader_.media(),a=t.targetDuration*1.5*1e3;n6(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=a,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{let t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,a){let r=t.mediaGroups||{},n=!0,i=Object.keys(r.AUDIO);for(let h in r.AUDIO)for(let l in r.AUDIO[h])r.AUDIO[h][l].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Ye.Playlist.isAes(a)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),i.length&&Object.keys(r.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){let a=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),n=this.bufferLowWaterLine(),i=this.bufferHighWaterLine(),h=this.tech_.buffered();return VS({buffered:h,currentTime:r,currentPlaylist:a,nextPlaylist:t,bufferLowWaterLine:n,bufferHighWaterLine:i,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{let a=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:a.playlist,error:a})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",a=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:mS}))});let t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();let a=this.getCodecsOrExclude_();a&&this.sourceUpdater_.addOrChangeSourceBuffers(a)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(t=this.selectPlaylist()){if(t===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{F.browser.IE_VERSION||F.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();let t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}setupFirstPlay(){let t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){let a=this.seekable();if(!a.length)return!1;if(F.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){let t=this.tech_.play();typeof t<"u"&&typeof t.then=="function"&&t.then(null,a=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;let t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;let a=this.duration();t[t.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){let a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?t=t&&this.audioSegmentLoader_.ended_:t=this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;let r=this.syncController_.getExpiredTime(t,this.duration());if(r===null)return!1;let n=Ye.Playlist.playlistEnd(t,r),i=this.tech_.currentTime(),h=this.tech_.buffered();if(!h.length)return n-i<=He;let l=h.end(h.length-1);return l-i<=He&&n-l<=He}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:a={},playlistExclusionDuration:r}){if(t=t||this.mainPlaylistLoader_.media(),r=r||a.playlistExclusionDuration||this.playlistExclusionDuration,!t){this.error=a,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}t.playlistErrors_++;let n=this.mainPlaylistLoader_.main.playlists,i=n.filter(no),h=i.length===1&&i[0]===t;if(n.length===1&&r!==1/0)return F.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(h);if(h){let y=!1;n.forEach(w=>{if(w===t)return;let O=w.excludeUntil;typeof O<"u"&&O!==1/0&&(y=!0,delete w.excludeUntil)}),y&&(F.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let l;t.playlistErrors_>this.maxPlaylistRetries?l=1/0:l=Date.now()+r*1e3,t.excludeUntil=l,a.reason&&(t.lastExcludeReason_=a.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});let c=this.selectPlaylist();if(!c){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}let v=a.internal?this.logger_:F.log.warn,d=a.message?" "+a.message:"";v(`${a.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${d} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);let z=c.targetDuration/2*1e3||5*1e3,L=typeof c.lastRequest=="number"&&Date.now()-c.lastRequest<=z;return this.switchMedia_(c,"exclude",h||L)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,a){let r=[],n=t==="all";(n||t==="main")&&r.push(this.mainPlaylistLoader_);let i=[];(n||t==="audio")&&i.push("AUDIO"),(n||t==="subtitle")&&(i.push("CLOSED-CAPTIONS"),i.push("SUBTITLES")),i.forEach(h=>{let l=this.mediaTypes_[h]&&this.mediaTypes_[h].activePlaylistLoader;l&&r.push(l)}),["main","audio","subtitle"].forEach(h=>{let l=this[`${h}SegmentLoader_`];l&&(t===h||t==="all")&&r.push(l)}),r.forEach(h=>a.forEach(l=>{typeof h[l]=="function"&&h[l]()}))}setCurrentTime(t){let a=Ia(this.tech_.buffered(),t);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(a&&a.length)return t;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;let t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:Ye.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let t;if(!this.mainPlaylistLoader_)return;let a=this.mainPlaylistLoader_.media();if(!a)return;let r=this.syncController_.getExpiredTime(a,this.duration());if(r===null)return;let n=this.mainPlaylistLoader_.main,i=Ye.Playlist.seekable(a,r,Ye.Playlist.liveEdgeDelay(n,a));if(i.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(a,this.duration()),r===null||(t=Ye.Playlist.seekable(a,r,Ye.Playlist.liveEdgeDelay(n,a)),t.length===0)))return;let h,l;this.seekable_&&this.seekable_.length&&(h=this.seekable_.end(0),l=this.seekable_.start(0)),t?t.start(0)>i.end(0)||i.start(0)>t.end(0)?this.seekable_=i:this.seekable_=Et([[t.start(0)>i.start(0)?t.start(0):i.start(0),t.end(0)<i.end(0)?t.end(0):i.end(0)]]):this.seekable_=i,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===h&&this.seekable_.start(0)===l)&&(this.logger_(`seekable updated [${Lz(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,t),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(t){let n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}let a=this.tech_.buffered(),r=Ye.Playlist.duration(this.mainPlaylistLoader_.media());a.length>0&&(r=Math.max(r,a.end(a.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{let a=this.mediaTypes_[t].groups;for(let r in a)a[r].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){let t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=t?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!r)}getCodecsOrExclude_(){let t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;let r=Xn(this.main(),a),n={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=r.video||t.main.videoCodec||hg),t.main.isMuxed&&(n.video+=`,${r.audio||t.main.audioCodec||Os}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(n.audio=r.audio||t.main.audioCodec||t.audio.audioCodec||Os,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:a,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}let h=(v,d)=>v?Ln(d):_h(d),l={},c;if(["video","audio"].forEach(function(v){if(n.hasOwnProperty(v)&&!h(t[v].isFmp4,n[v])){let d=t[v].isFmp4?"browser":"muxer";l[d]=l[d]||[],l[d].push(n[v]),v==="audio"&&(c=d)}}),i&&c&&a.attributes.AUDIO){let v=a.attributes.AUDIO;this.main().playlists.forEach(d=>{(d.attributes&&d.attributes.AUDIO)===v&&d!==a&&(d.excludeUntil=1/0)}),this.logger_(`excluding audio group ${v} as ${c} does not support codec(s): "${n.audio}"`)}if(Object.keys(l).length){let v=Object.keys(l).reduce((d,z)=>(d&&(d+=", "),d+=`${z} does not support codec(s): "${l[z].join(",")}"`,d),"")+".";this.excludePlaylist({playlistToExclude:a,error:{internal:!0,message:v},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let v=[];if(["video","audio"].forEach(d=>{let z=(J2(this.sourceUpdater_.codecs[d]||"")[0]||{}).type,L=(J2(n[d]||"")[0]||{}).type;z&&L&&z.toLowerCase()!==L.toLowerCase()&&v.push(`"${this.sourceUpdater_.codecs[d]}" -> "${n[d]}"`)}),v.length){this.excludePlaylist({playlistToExclude:a,error:{message:`Codec switching not supported: ${v.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;let t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);let a=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}excludeUnsupportedVariants_(){let t=this.main().playlists,a=[];Object.keys(t).forEach(r=>{let n=t[r];if(a.indexOf(n.id)!==-1)return;a.push(n.id);let i=Xn(this.main,n),h=[];i.audio&&!_h(i.audio)&&!Ln(i.audio)&&h.push(`audio codec ${i.audio}`),i.video&&!_h(i.video)&&!Ln(i.video)&&h.push(`video codec ${i.video}`),i.text&&i.text==="stpp.ttml.im1t"&&h.push(`text codec ${i.text}`),h.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${h.join(", ")}`))})}excludeIncompatibleVariants_(t){let a=[],r=this.main().playlists,n=Il(J2(t)),i=mf(n),h=n.video&&J2(n.video)[0]||null,l=n.audio&&J2(n.audio)[0]||null;Object.keys(r).forEach(c=>{let v=r[c];if(a.indexOf(v.id)!==-1||v.excludeUntil===1/0)return;a.push(v.id);let d=[],z=Xn(this.mainPlaylistLoader_.main,v),L=mf(z);if(!(!z.audio&&!z.video)){if(L!==i&&d.push(`codec count "${L}" !== "${i}"`),!this.sourceUpdater_.canChangeType()){let y=z.video&&J2(z.video)[0]||null,w=z.audio&&J2(z.audio)[0]||null;y&&h&&y.type.toLowerCase()!==h.type.toLowerCase()&&d.push(`video codec "${y.type}" !== "${h.type}"`),w&&l&&w.type.toLowerCase()!==l.type.toLowerCase()&&d.push(`audio codec "${w.type}" !== "${l.type}"`)}d.length&&(v.excludeUntil=1/0,this.logger_(`excluding ${v.id}: ${d.join(" && ")}`))}})}updateAdCues_(t){let a=0,r=this.seekable();r.length&&(a=r.start(0)),iS(t,this.cueTagsTrack_,a)}goalBufferLength(){let t=this.tech_.currentTime(),a=mt.GOAL_BUFFER_LENGTH,r=mt.GOAL_BUFFER_LENGTH_RATE,n=Math.max(a,mt.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+t*r,n)}bufferLowWaterLine(){let t=this.tech_.currentTime(),a=mt.BUFFER_LOW_WATER_LINE,r=mt.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(a,mt.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(a,mt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+t*r,this.bufferBasedABR?i:n)}bufferHighWaterLine(){return mt.BUFFER_HIGH_WATER_LINE}},wS=(e,t,a)=>r=>{let n=e.main.playlists[t],i=b6(n),h=no(n);return typeof r>"u"?h:(r?delete n.disabled:n.disabled=!0,r!==h&&!i&&(a(),r?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),r)},z6=class{constructor(t,a,r){let{playlistController_:n}=t,i=n.fastQualityChange_.bind(n);if(a.attributes){let h=a.attributes.RESOLUTION;this.width=h&&h.width,this.height=h&&h.height,this.bandwidth=a.attributes.BANDWIDTH,this.frameRate=a.attributes["FRAME-RATE"]}this.codecs=Xn(n.main(),a),this.playlist=a,this.id=r,this.enabled=wS(t.playlists,a.id,i)}},LS=function(e){e.representations=()=>{let t=e.playlistController_.main(),a=H5(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return a?a.filter(r=>!b6(r)).map((r,n)=>new z6(e,r,r.id)):[]}},Of=["seeking","seeked","pause","playing","error"],M6=class{constructor(t){this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=re("PlaybackWatcher"),this.logger_("initialize");let a=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),i=()=>this.resetTimeUpdate_(),h=this.playlistController_,l=["main","subtitle","audio"],c={};l.forEach(d=>{c[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},h[`${d}SegmentLoader_`].on("appendsdone",c[d].updateend),h[`${d}SegmentLoader_`].on("playlistupdate",c[d].reset),this.tech_.on(["seeked","seeking"],c[d].reset)});let v=d=>{["main","audio"].forEach(z=>{h[`${z}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=()=>v("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(Of,i),this.tech_.on("canplay",r),this.tech_.one("play",a),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(Of,i),this.tech_.off("canplay",r),this.tech_.off("play",a),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),l.forEach(d=>{h[`${d}SegmentLoader_`].off("appendsdone",c[d].updateend),h[`${d}SegmentLoader_`].off("playlistupdate",c[d].reset),this.tech_.off(["seeked","seeking"],c[d].reset)}),this.checkCurrentTimeTimeout_&&P.default.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&P.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=P.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){let a=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=a.buffered_()}checkSegmentDownloads_(t){let a=this.playlistController_,r=a[`${t}SegmentLoader_`],n=r.buffered_(),i=yC(this[`${t}Buffered_`],n);if(this[`${t}Buffered_`]=n,i){this.resetSegmentDownloads_(t);return}this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:x4(n)}),!(this[`${t}StalledDownloads_`]<10)&&(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),t!=="subtitle"&&a.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;let t=this.tech_.currentTime(),a=this.tech_.buffered();if(this.lastRecordedTime===t&&(!a.length||t+He>=a.end(a.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;let a=this.seekable(),r=this.tech_.currentTime(),n=this.afterSeekableWindow_(a,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow),i;if(n&&(i=a.end(a.length-1)),this.beforeSeekableWindow_(a,r)){let w=a.start(0);i=w+(w===a.end(0)?0:He)}if(typeof i<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${Lz(a)}. Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0;let h=this.playlistController_.sourceUpdater_,l=this.tech_.buffered(),c=h.audioBuffer?h.audioBuffered():null,v=h.videoBuffer?h.videoBuffered():null,d=this.media(),z=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-E0)*2,L=[c,v];for(let w=0;w<L.length;w++){if(!L[w])continue;if(T6(L[w],r)<z)return!1}let y=Yh(l,r);return y.length===0?!1:(i=y.start(0)+He,this.logger_(`Buffered region starts (${y.start(0)})  just beyond seek point (${r}). Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0)}waiting_(){if(this.techWaiting_())return;let t=this.tech_.currentTime(),a=this.tech_.buffered(),r=Ia(a,t);if(r.length&&t+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){let t=this.seekable(),a=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,a)){let l=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${a}. Seeking to live point (seekable end) ${l}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}let r=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:a}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;let h=Yh(n,a);return h.length>0?(this.logger_(`Stopped at ${a} and seeking to ${h.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(a),!0):!1}afterSeekableWindow_(t,a,r,n=!1){if(!t.length)return!1;let i=t.end(t.length-1)+He;return!r.endList&&n&&(i=t.end(t.length-1)+r.targetDuration*3),a>i}beforeSeekableWindow_(t,a){return!!(t.length&&t.start(0)>0&&a<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:a,currentTime:r}){if(!t)return;let n;if(t.length&&a.length){let i=Ia(t,r-3),h=Ia(t,r),l=Ia(a,r);l.length&&!h.length&&i.length&&(n={start:i.end(0),end:l.end(0)})}else Yh(t,r).length||(n=this.gapFromVideoUnderflow_(t,r));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(t){let a=this.tech_.buffered(),r=this.tech_.currentTime(),n=Yh(a,r);this.resetTimeUpdate_(),!(n.length===0||r!==t)&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+E0),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(t,a){let r=VC(t);for(let n=0;n<r.length;n++){let i=r.start(n),h=r.end(n);if(a-i<4&&a-i>2)return{start:i,end:h}}return null}},yS={errorInterval:30,getSource(e){let a=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return e(a)}},oM=function(e,t){let a=0,r=0,n=$1(yS,t);e.ready(()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})});let i=function(){r&&e.currentTime(r)},h=function(d){d!=null&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",i),e.src(d),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},l=function(){if(Date.now()-a<n.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){F.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return a=Date.now(),n.getSource.call(e,h)},c=function(){e.off("loadedmetadata",i),e.off("error",l),e.off("dispose",c)},v=function(d){c(),oM(e,d)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=v},CS=function(e){oM(this,e)},cM="3.0.2",BS="6.3.0",SS="1.0.1",_S="6.0.0",TS="4.0.1",Kt={PlaylistLoader:B0,Playlist:o2,utils:XC,STANDARD_PLAYLIST_SELECTOR:xf,INITIAL_PLAYLIST_SELECTOR:DB,lastBandwidthSelector:xf,movingAverageBandwidthSelector:kB,comparePlaylistBandwidth:P6,comparePlaylistResolution:EB,xhr:jz()};Object.keys(mt).forEach(e=>{Object.defineProperty(Kt,e,{get(){return F.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),mt[e]},set(t){if(F.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),typeof t!="number"||t<0){F.log.warn(`value of Vhs.${e} must be greater than or equal to 0`);return}mt[e]=t}})});var sM="videojs-vhs",vM=function(e,t){let a=t.media(),r=-1;for(let n=0;n<e.length;n++)if(e[n].id===a.id){r=n;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},OS=function(e,t){t.representations().forEach(a=>{e.addQualityLevel(a)}),vM(e,t.playlists)};Kt.canPlaySource=function(){return F.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var bS=(e,t,a)=>{if(!e)return e;let r={};t&&t.attributes&&t.attributes.CODECS&&(r=Il(J2(t.attributes.CODECS))),a&&a.attributes&&a.attributes.CODECS&&(r.audio=a.attributes.CODECS);let n=xa(r.video),i=xa(r.audio),h={};for(let l in e)h[l]={},i&&(h[l].audioContentType=i),n&&(h[l].videoContentType=n),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(h[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(h[l].url=e[l]);return $1(e,h)},AS=(e,t)=>e.reduce((a,r)=>{if(!r.contentProtection)return a;let n=t.reduce((i,h)=>{let l=r.contentProtection[h];return l&&l.pssh&&(i[h]={pssh:l.pssh}),i},{});return Object.keys(n).length&&a.push(n),a},[]),ES=({player:e,sourceKeySystems:t,audioMedia:a,mainPlaylists:r})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();let n=a?r.concat([a]):r,i=AS(n,Object.keys(t)),h=[],l=[];return i.forEach(c=>{l.push(new Promise((v,d)=>{e.tech_.one("keysessioncreated",v)})),h.push(new Promise((v,d)=>{e.eme.initializeMediaKeys({keySystems:c},z=>{if(z){d(z);return}v()})}))}),Promise.race([Promise.all(h),Promise.race(l)])},kS=({player:e,sourceKeySystems:t,media:a,audioMedia:r})=>{let n=bS(t,a,r);return n?(e.currentSource().keySystems=n,n&&!e.eme?(F.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},dM=()=>{if(!P.default.localStorage)return null;let e=P.default.localStorage.getItem(sM);if(!e)return null;try{return JSON.parse(e)}catch{return null}},PS=e=>{if(!P.default.localStorage)return!1;let t=dM();t=t?$1(t,e):e;try{P.default.localStorage.setItem(sM,JSON.stringify(t))}catch{return!1}return t},DS=e=>e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e;Kt.supportsNativeHls=function(){if(!a1.default||!a1.default.createElement)return!1;let e=a1.default.createElement("video");return F.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(e.canPlayType(a))}):!1}();Kt.supportsNativeDash=function(){return!a1.default||!a1.default.createElement||!F.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(a1.default.createElement("video").canPlayType("application/dash+xml"))}();Kt.supportsTypeNatively=e=>e==="hls"?Kt.supportsNativeHls:e==="dash"?Kt.supportsNativeDash:!1;Kt.isSupported=function(){return F.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var IS=F.getComponent("Component"),Ul=class extends IS{constructor(t,a,r){if(super(a,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=re("VhsHandler"),a.options_&&a.options_.playerId){let n=F.getPlayer(a.options_.playerId);this.player_=n}if(this.tech_=a,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&a.overrideNativeAudioTracks&&a.overrideNativeVideoTracks)a.overrideNativeAudioTracks(!0),a.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(a.featuresNativeVideoTracks||a.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(a1.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{let i=a1.default.fullscreenElement||a1.default.webkitFullscreenElement||a1.default.mozFullScreenElement||a1.default.msFullscreenElement;i&&i.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){let t=dM();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=mt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===mt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(t=>{typeof this.source_[t]<"u"&&(this.options_[t]=this.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(t,a){if(!t)return;this.setOptions_(),this.options_.src=DS(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Kt,this.options_.sourceType=bs(a),this.options_.seekTo=i=>{this.tech_.setCurrentTime(i)},this.playlistController_=new f6(this.options_);let r=$1({liveRangeSafeTimeDelta:He},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new M6(r),this.playlistController_.on("error",()=>{let i=F.players[this.tech_.options_.playerId],h=this.playlistController_.error;typeof h=="object"&&!h.code?h.code=3:typeof h=="string"&&(h={message:h,code:3}),i.error(h)});let n=this.options_.bufferBasedABR?Kt.movingAverageBandwidthSelector(.55):Kt.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=Kt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(i){this.playlistController_.selectPlaylist=i.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(i){this.playlistController_.mainSegmentLoader_.throughput.rate=i,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let i=this.playlistController_.mainSegmentLoader_.bandwidth,h=P.default.navigator.connection||P.default.navigator.mozConnection||P.default.navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&h){let c=h.downlink*1e3*1e3;c>=l&&i>=l?i=Math.max(i,c):i=c}return i},set(i){this.playlistController_.mainSegmentLoader_.bandwidth=i,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let i=1/(this.bandwidth||1),h;return this.throughput>0?h=1/this.throughput:h=0,Math.floor(1/(i+h))},set(){F.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>x4(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>x4(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&PS({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{LS(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=P.default.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){let t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),ES({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(a=>{this.logger_("error while creating EME key session",a),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){let t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=kS({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});if(this.player_.tech_.on("keystatuschange",r=>{if(r.status!=="output-restricted")return;let n=this.playlistController_.main();if(!n||!n.playlists)return;let i=[];n.playlists.forEach(h=>{h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,i.push(h))}),i.length&&(F.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...i),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),F.browser.IE_VERSION===11||!a){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){let t=F.players[this.tech_.options_.playerId];!t||!t.qualityLevels||this.qualityLevels_||(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{OS(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{vM(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":cM,"mux.js":BS,"mpd-parser":SS,"m3u8-parser":_S,"aes-decrypter":TS}}version(){return this.constructor.version()}canChangeType(){return Rl.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&P.default.URL.revokeObjectURL&&(P.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,a){return aB({playlist:this.playlistController_.media(),time:t,callback:a})}seekToProgramTime(t,a,r=!0,n=2){return $z({programTime:t,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})}},$l={name:"videojs-http-streaming",VERSION:cM,canHandleSource(e,t={}){let a=$1(F.options,t);return $l.canPlayType(e.type,a)},handleSource(e,t,a={}){let r=$1(F.options,a);return t.vhs=new Ul(e,t,r),t.vhs.xhr=jz(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){let a=bs(e);if(!a)return"";let r=$l.getOverrideNative(t);return!Kt.supportsTypeNatively(a)||r?"maybe":""},getOverrideNative(e={}){let{vhs:t={}}=e,a=!(F.browser.IS_ANY_SAFARI||F.browser.IS_IOS),{overrideNative:r=a}=t;return r}},jS=()=>Ln("avc1.4d400d,mp4a.40.2");jS()&&F.getTech("Html5").registerSourceHandler($l,0);F.VhsHandler=Ul;F.VhsSourceHandler=$l;F.Vhs=Kt;F.use||F.registerComponent("Vhs",Kt);F.options.vhs=F.options.vhs||{};(!F.getPlugin||!F.getPlugin("reloadSourceOnError"))&&F.registerPlugin("reloadSourceOnError",CS);document.getElementById("4948d515ff475a0415740e31d2e2c02f5d7787804f2f50f9ea3e23cf0d92469d")||(io=document.createElement("style"),io.id="4948d515ff475a0415740e31d2e2c02f5d7787804f2f50f9ea3e23cf0d92469d",io.textContent='\uFEFF.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABUgAAsAAAAAItAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV33Y21hcAAAAYQAAAEJAAAD5p42+VxnbHlmAAACkAAADwwAABdk9R/WHmhlYWQAABGcAAAAKwAAADYn8kSnaGhlYQAAEcgAAAAdAAAAJA+RCL1obXR4AAAR6AAAABMAAAC8Q44AAGxvY2EAABH8AAAAYAAAAGB7SIHGbWF4cAAAElwAAAAfAAAAIAFAAI9uYW1lAAASfAAAASUAAAIK1cf1oHBvc3QAABOkAAABfAAAAnXdFqh1eJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGR7xDiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGPHcRdyA4RZgQRADbZCycAAHic7dPXbcMwAEXRK1vuvffem749XAbKV3bjBA6fXsaIgMMLEWoQJaAEFKNnlELyQ4K27zib5PNF6vl8yld+TKr5kH0+cUw0xv00Hwvx2DResUyFKrV4XoMmLdp06NKjz4AhI8ZMmDJjzoIlK9Zs2LJjz4EjJ85cuHLjziPe/0UWL17mf2tqKLz/9jK9f8tXpGCoRdPKhtS0RqFkWvVQNtSKoVYNtWaoddPXEBqG2jQ9XWgZattQO4baNdSeofYNdWCoQ0MdGerYUCeGOjXUmaHODXVhqEtDXRnq2lA3hro11J2h7g31YKhHQz0Z6tlQL4Z6NdSbod4N9WGoT9MfHF6GmhnZLxyDcRMAAAB4nJ1YC1gUV5auc6urCmxEGrq6VRD6ATQP5dHPKK8GRIyoKApoEBUDAiGzGmdUfKNRM4qLZrUZdGKcGN/GZJKd0SyOWTbfbmZ2NxqzM5IxRtNZd78vwYlJdtREoO7sudVNq6PmmxmKqrqPU+eee173P80Bh39Cu9DOEY4DHZBK3i20D/QRLcfxbE5sEVtwLpZzclw4ibFIkSCJUcZ4MBpMnnzwuKNsGWBL5i3qy6kO2dVpvUpKbkAP9fq62rdeGJ+TM/7C1nbIutfuWrWk5ci4zMxxR1qW/N+9JsmCGXj9VKWhFx/6tr/nz78INDm2C9yPF/fDcxLuyKxLBZ1ZBz2QTi+RSkiH5RrDQJ/GgGQadX9m0YSURs7GpSG905Zsk41uj14yul1OtieZ7QUk5GRG/YiS7PYYPSAZNRed9sq3+bOpz00rKb7pe/ZEZvbALxZAHT3AFoH8GXP3rt67QFn40kt8W13FjLTDb48c+fSi5/7h0P4dL5yz7DPtbmgmYxfQA9RL2+EOfTcvdp+1vmuBpvOll1As1S6ak0IvJzC7sKWJFtJgBd2uWcg+0Zyg7dzQfhcjXRgXGZRf5/a4A58IDU777Nl252AUk4m2ByRRjqTNqIDCEJeAnU3iCFwrkrNwXEzg4yFevBwypzxkcX+AIfk3VEKl3XmWbT8788SzvpvFJaiOezL6QyuSr9VNf97csNu0z3LuhR0wATUxZAfVBwVOy+nQFhxYdWaXlXe4HC4zWGWzzsrLDtmhI9pOWOHv7PTT7XybH1Z0+v2d5Abd3kmG+TsH23CS/KwTxx/JkzEwx6jcQOUc42LLwHJ/J93uZ9ygh3HuZGwqsY9dWDHQ58dxNqyqKRQTYdxwTubiOSs3FiMDkq0WSZQgCT0GBDOg2lxOAd1FlPVGs4AKBAcYHHaP2wPkHaivmLF5zYqnIZrvcHx5gN4k/6tchNW1DtdgNL2KrxEkS/kfnIHoVnp1VjmjpTf5r0lTzLj0mdS28tX+XGorU364eMPmnWVl8J36nlKGw3CZhjEiuMw8h8mKvhGD+4/lElBWjAhLJMg6fTw4zPZ8cOmcGQBm2Qxml1nAm13CpYGq1JKUlJJUzQn1PTAO0mgv6VMMpA/DuRfSWEu4lDIxdbAtdWIKvnn2Vk766CWfz9fpY0sH/UpdP50rfszaVpdVRmvIejEdLMk45s4Bu0EWHjeOySmFyZSiMahvZdNSn29peoI/YexYfKQTLeurTXXwEVLeSfInTWHkkMaeUx7sBvOCSTSj3AlcKjfueyS36tCrXDlgRtF0etFq9jhc1kfKuBT/OwMr0F4UUTTh1AN0g20+H/ScPcsIEsYu9d/zN5PmjprPtNwI1ZZcDK6iC97Mcjp2y2aX36f+QbpGHrgRuHlXJ+Zf6PFRL2uQSp8vxHeF2IoRb8Rd2rhMzsNxSRmEuKK4JFnkojhMcx6jzqHzGMGFcW+MhBj0bhf6cowN+45I4LHvwT6fteu7M42wGRI/pxcg6/MZdEvt1U1XaulHFXuLmqov/MukvRVL35/b3ODM1+4aPjtzeK7zmUkV2h3DN54HaQ9GzJvxHRb6Ks2gB81fwqraT+A7GvZJrRLRofU6G0urNL+zFw3v0FaVDFxsKEZW56F31r6ip6vOL+FCObBPuIMRiXld9RaMdLzRIOGhPey2T9vA/35DmZPK9IWaT9d/WgOGMieYqJ/dzjLIhZU118gbysxrNUGefxD6UO/hyNNllpFTOIbx32kSFQctnweV5PxTMHLjRqiAN+fQE9gL+Xy5WB6MOS4GJJuYbDUHhcKDhHGRbLzOpjsjdM1+iwAZLGeieehACX2hhI7SjK/ZUTNrvVje31TxJiFBGYViWFkCn9PMeX9fS6qVbzfCj4fOCTzDnuWy2c4xA7mdNkA3RS9FH2VeqzdCBlixxbzXjvkHU1I8BOYFb1pZvPIHSSIj4svT8xpzcxtXN+ZKyjdDvbz08niiF3PqV9Tn5NST8vg48MTaY8E5xqSSIsWoWHo+LtAzxdH/GDUyp37CBEYfso04F/NlMTcDJUTpECLY0HFGQHImE8xsEUdgnrQlixIvGhJA1BvxpDHGxEMBYFeNOHcBJlSjwe2JcSfbBEsGOPPBHg/6SBBOCsLLw0SpUxod0Z1bFMfLkbQ3UiZxEyd0Dx8t+SRBu18Q9msFbI4e3p1THEfkSEh7kEJ5orR10qTWDvbgPWn5aWvCYyOAjwgXyjJi34uMjo58L25cmRAeQZWI2PA1QQLsPESAH8WGFwZZ4SPoR73BHPzIPMJj9AreBzKUmrH4todT18ANvi1oc3YGjUT/0j+ExUwq8PI9BLaCQIpvewwYu2evAG/Vo/5avPdY7o+BemLLXw3y+AdkzP9bpIxB1wm5EYq8fesHbPEPtm6HrHvtx4jcGPR8fDDpkZBefIjB46QnlUNRltv4Z/pO/J6dxEjhYAtmoMeq+GozvUVvNYOW3m6GCIhoprcfr97B8AcIQYsfD8ljUvGNjvkrpj0ETA48ZMIxCeqsRIsQALE0gi2GB+glSOfbOjW3GSBM9yPq8/rpJXrJDz0BPxV6xdN4uiCGDQed3WhgFkBUZEFsmeyyBpzXrm7UGTBZG8Lh5aubFufk5eUsbrrFGr7McYdbltxa0nKYqRKbQjvikXYkTGM0f2xuyM3Ly21oXnWfvf6I1BmZwfh7EWWIYsg2nHhsDhOnczhJcmI6eBAmy3jZ3RiJmKQR/JA99FcwsfaVbNDDyi1rL9NPj9hfo61wjM6BjzOLijLpeTgk/pL+ip6tfYWupzeOgPny2tcUu9J/9mhxJlgyi985NFRbvCVewXUNXLJaW0RxZqtRYtnfYdcYomXQWdnJHQA3jiEEkeTQWcWxdDP9IvvVWvo2TK553XEMEq+s69/QDU1Q7p0zxwsm9qS379whr8NI2PJqLUyGyfNeX3eFfnJU2U+uHR9cVV1IqgurqwuV44XVp0h2qN55X5XJwtk59yP0IZuHrqBOBIuIYhkcoT6Kx79Pu2HS/IPZIMOqLWs/pteOOk4NPgEb6QAIdAPsyZk5Mwd+wVaHMexJv719W7xCu2l37UG6lvYdBcvHa08p89741zd63phTRGqL5ggo6SlvdbWXzCqsPq78NnSu7wnKy2HNZbVoRCI7UJEOyRj+sPE002tOOY7Qa5fXboFWkLNeqYUSZRocp9XwSUZxcQZ9Hw6LV2pOoVmvHQEDbGIENEG5i6bLgMSM4n8+FNLTtAds99DaWEvgcf4o5SyYe9x+kF6/tGoTPAdRmS/XQIEy//QxKC2oqioAI3tS5auvxCtzT6y6RK8fhChYcwCJaMJhxc0vqSxQ/qmgsrKAlBZUHlauheTpvd9uj5DnLzJct6qfq5fXbYHVIGcfrIVJihbaVLu1wW7Vbs8zK0A8e9Jvb91S9cVMjPrazD6gpfeZTXzYbCFMcppVRsGMpp55OWgx1/3JeAxW1Y7AORgM/m3rWrsdLkQVmEVSU16cX/e7uvkvpqRiQsG06XJ0t64Tf+l0nG1dt025gyOIZlvq5u9KSU1N2TW/rsWnnMRPyTDkctbhvIcNvYIXWyLzdwYLoYesUbaQG4iK2cWO2gdpeUYLqDD0MUTOPhDIGnZEs58yArR86FznuWEsU4YDi2x26dA4klkn8Qa6vhk2QUfX4Jxm/ngX9r7ogn1dmlmwqZmuhxtdg9XN/DEcUgqb+9hMyNansfaQET2mcROCmGEMVqxm5u+h6kN2MOwgqykV2wH9yQG9DvVFU38Pogaf4FVuE62KI/oJ02RDdWW2w5dqQwU/8+N1q1DlvsL863u61KLE7x/o8w0VJQM/Y/SQ3unIrqxueEa1BqT5VFNsO7p39/UC771a77RowpaKe9nvJQIT1Pog5LGx8XblBKmCNGTf3xMogAQvPnz9PYKX/08sVDTG1OKUlOLUgS/UaZtm1NAaYTsl7i9ZQ+L6O4Rl0OGa577LuWvc+C+x96/vYh0lLBuM+7XwI/dTLtdT7v4d6rRTWDnku0IBrqFnZ5bVIqKP8lasJlithWnaLhTsr8qFJBulF/70p4undou36HeTJ5+jv1fCybeQ8nH3+Xv6aENczmOFlab+hqMDg1rLOt12A+tiUFrYDwQ6c3RUJp601nzegTNX6WlYAI2zSUV945F6zU56ZmZVQaWspWcIADxJ9GmljQUnL2p2Dpr5T8H+5KJFu+vqBq8qvyHRzStLHPEO5SPYCV9nZe0yZT2RcH0oHvegSzNEJ0oGWU8iQWM12dgPEugngVceGIwZgPFp0BiT1a0a3R5Rcot7ihfA1J/20v96jX7zmTX9s583H0kwx6WnLd09cXrR9LGroOa9sHNbdyz8wcKk5lqhaVFJZNwmqtw884MXNdvJujpBa3xzuSaZH9sxa06Z7x+HJSduPbdYHv/DgmEhfbehvlmGN7JUkcG78GDM12CeyFFTPNqVeNxC1gzjz+c2nVo63Xxs8rKJWXoBJM0tmEbfGm4qzpoOH3xpzQfyxLzW1gnE9NHo6tol1eMEic4ZVPrjnVi0kqAe2sQ2bgqupScaq8WGlUWgWHI51SKJl/UYT6zccNsCSkBtiVZLsiefuFSDYT3Fi8Zk7EUnmjTRYtsFeuDDJS05MW79M3mr3mla+d8dzac31KTPmBYfFiYSUef48PhPjm9ryZsSGZZkdNvzq0Y9rdNcwDq5Dg5C3QW+7UN64IKptvS3tvHbvu5c9pv1Exau21rc9LIpwpQwUjTq8576yeVDz5+4WZ1nXT43wV60rPLJbDp/UksNrP3iQ2SA63Pst058gOYDbhRnRUw8l/sRt4HbxPzO4WYpInCpuVgSbVh6JXuwnnJngKTTCwaPWmG5Xbhpm1U0Yt3FyBGpGYemPM77p2TD904JjgJ2QFpFLeYpGx8X15Qx1Zk31p5ki9ZLUuXE0lmuJlcakJMVLeFS1iIvrB8drY0aloilakqCZwzwRORtxlgwxS4IThggJd4TDxoiaAIT80fFPGrCPPru+puFn504P/ybr4ihA/6dKASLshEJic7xE8tmzu3KzA7TABBe8y5fNbWo3ilQn/SuFKM16b2l5bOeayqfGhYmhIulU+fVNDdWVv4NMzX10MBHyPR5uhWUu8D9P1VnIMt4nGNgZGBgAOJ/1bf64vltvjJwszOAwAOlmqvINEc/WJyDgQlEAQA+dgnjAHicY2BkYGBnAAGOPgaG//85+hkYGVCBPgBGJwNkAAAAeJxjYGBgYB/EmKMPtxwAhg4B0gAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAe4CLgKKAtAC/ANiA4wDqAPgBDAEsATaBQgFWgXABggGLgZwBqwG9gdOB4oH0ggqCHAIhgicCMgJJAlWCYgJrAnyCkAKdgrkC7J4nGNgZGBg0GdoZmBnAAEmIOYCQgaG/2A+AwAaqwHQAHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkXlT2zAQxf1C4thJAwRajt4HRy8VMwwfSJHXsQZZcnUQ+PYoTtwpM+wf2t9brWZ2n5JBsol58nJcYYAdDDFCijEy5JhgileYYRd72MccBzjEa7zBEY5xglO8xTu8xwd8xCd8xhd8xTec4RwXuMR3/MBP/MJvMPzBFYpk2Cr+OF0fTEgrFI1aHhxN740KDbEmeJpsWZlVj40s+45aLuv9KijlhCXSjLQnu/d/4UH6sWul1mRzFxZeekUuE7z10mg3qMtM1FGQddPSrLQyvJR6OaukItYXDp6pCJrmz0umqkau5pZ2hFmm7m+ImG5W2t0kZoJXUtPhVnYTbbdOBdeCVGqpJe7XKTqSbRK7zbdwXfR0U+SVsStuS3Y76em6+Ic3xYiHUppc04Nn0lMzay3dSxNcp8auDlWlaCi48yetFD7Y9USsx87G45cuop1ZxQUtjLnL4j53FO0a+5X08UXqQ7NQNo92R0XOz7sxWEnxN2TneJI8Acttu4Q=) format("woff");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:"\uF101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\uF102"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:"\uF103"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:"\uF104"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:"\uF105"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:"\uF106"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:"\uF107"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:"\uF108"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:"\uF109"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\uF10A"}.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:"\uF10B"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:"\uF10C"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\uF10D"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:"\uF10E"}.vjs-icon-downloading{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-downloading:before{content:"\uF10F"}.vjs-icon-file-download{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download:before{content:"\uF110"}.vjs-icon-file-download-done{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-done:before{content:"\uF111"}.vjs-icon-file-download-off{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-off:before{content:"\uF112"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\uF113"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\uF114"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\uF115"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before{content:"\uF116"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\uF117"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\uF118"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:"\uF119"}.vjs-icon-repeat{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-repeat:before{content:"\uF11A"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:"\uF11B"}.video-js .vjs-skip-backward-5 .vjs-icon-placeholder,.vjs-icon-replay-5{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-backward-5 .vjs-icon-placeholder:before,.vjs-icon-replay-5:before{content:"\uF11C"}.video-js .vjs-skip-backward-10 .vjs-icon-placeholder,.vjs-icon-replay-10{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-backward-10 .vjs-icon-placeholder:before,.vjs-icon-replay-10:before{content:"\uF11D"}.video-js .vjs-skip-backward-30 .vjs-icon-placeholder,.vjs-icon-replay-30{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-backward-30 .vjs-icon-placeholder:before,.vjs-icon-replay-30:before{content:"\uF11E"}.video-js .vjs-skip-forward-5 .vjs-icon-placeholder,.vjs-icon-forward-5{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-forward-5 .vjs-icon-placeholder:before,.vjs-icon-forward-5:before{content:"\uF11F"}.video-js .vjs-skip-forward-10 .vjs-icon-placeholder,.vjs-icon-forward-10{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-forward-10 .vjs-icon-placeholder:before,.vjs-icon-forward-10:before{content:"\uF120"}.video-js .vjs-skip-forward-30 .vjs-icon-placeholder,.vjs-icon-forward-30{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-forward-30 .vjs-icon-placeholder:before,.vjs-icon-forward-30:before{content:"\uF121"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:"\uF122"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\uF123"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\uF124"}.vjs-icon-shuffle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-shuffle:before{content:"\uF125"}.vjs-icon-cast{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cast:before{content:"\uF126"}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-enter:before{content:"\uF127"}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-exit:before{content:"\uF128"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\uF129"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\uF12A"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\uF12B"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\uF12C"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\uF12D"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:"\uF12E"}.video-js{display:inline-block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100% !important;height:100% !important}.video-js[tabindex="-1"]{outline:0}.video-js *,.video-js :after,.video-js :before{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.video-js.vjs-1-1,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-fluid{width:100%;max-width:100%}.video-js.vjs-1-1:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-fluid:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window,body.vjs-pip-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen,body.vjs-pip-window .video-js{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs),body.vjs-pip-window .video-js{width:100% !important;height:100% !important;padding-top:0 !important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-pip-container .vjs-pip-text{position:absolute;bottom:10%;font-size:2em;background-color:rgba(0, 0, 0, 0.7);padding:.5em;text-align:center;width:100%}.vjs-layout-small.vjs-pip-container .vjs-pip-text,.vjs-layout-tiny.vjs-pip-container .vjs-pip-text,.vjs-layout-x-small.vjs-pip-container .vjs-pip-text{bottom:0;font-size:1.4em}.vjs-hidden{display:none !important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block !important;opacity:1 !important;visibility:visible !important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:50%;left:50%;padding:0;margin-top:-0.81666em;margin-left:-1.5em;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7);border-radius:.3em;transition:all .4s}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:rgba(115, 133, 159, 0.5);transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:0 0;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0, 0, 0, 0.8);background:linear-gradient(180deg, rgba(0, 0, 0, 0.8), rgba(255, 255, 255, 0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.js-focus-visible .vjs-menu li.vjs-menu-item:hover,.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:rgba(115, 133, 159, 0.5)}.js-focus-visible .vjs-menu li.vjs-selected:hover,.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.js-focus-visible .vjs-menu :not(.vjs-selected):focus:not(.focus-visible),.video-js .vjs-menu :not(.vjs-selected):focus:not(:focus-visible){background:0 0}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em 0;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:rgba(43, 51, 63, 0.7)}.vjs-pip-window .vjs-menu-button-popup .vjs-menu{left:unset;right:1em}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7);position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7)}.vjs-audio-only-mode .vjs-control-bar,.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none !important}.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js :not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-0.5em;line-height:.35em;z-index:1}.video-js .vjs-load-progress{background:rgba(115, 133, 159, 0.5)}.video-js .vjs-load-progress div{background:rgba(115, 133, 159, 0.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:rgba(255, 255, 255, 0.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:rgba(0, 0, 0, 0.8)}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em 0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#73859f;background-color:rgba(115, 133, 159, 0.5)}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-0.5em;left:-0.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{line-height:.35em;right:-0.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7)}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:rgba(255, 255, 255, 0.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:rgba(0, 0, 0, 0.8)}.vjs-poster{display:inline-block;vertical-align:middle;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster,.vjs-pip-container.vjs-has-started .vjs-poster{display:block}.vjs-poster img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.video-js.vjs-liveui .vjs-live-control,.video-js:not(.vjs-live) .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.video-js .vjs-current-time,.video-js .vjs-duration,.vjs-live .vjs-time-control,.vjs-live .vjs-time-divider{display:none}.vjs-time-divider{display:none;line-height:3em}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control,.vjs-pip-window .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control,.vjs-pip-window .vjs-fullscreen-control{display:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-0.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43, 51, 63, 0.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{animation:vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{100%{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}100%{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-0.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\uF10C";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-0.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \uF12E";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:auto;width:initial}.video-js.vjs-layout-tiny .vjs-progress-control,.video-js.vjs-layout-x-small .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:rgba(43, 51, 63, 0.75);color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports(display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0 24px}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:10px;border:none}.vjs-text-track-settings fieldset span{display:inline-block;padding:0 6px 8px}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;font-weight:700;font-size:14px}.vjs-text-track-settings .vjs-label{clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);margin:0 5px 5px 0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg, #fff 88%, #73859f 100%)}.vjs-track-settings-controls button:hover{color:rgba(43, 51, 63, 0.75)}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg, #fff 88%, #73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}.vjs-title-bar{background:rgba(0, 0, 0, 0.9);background:linear-gradient(180deg, rgba(0, 0, 0, 0.9) 0, rgba(0, 0, 0, 0.7) 60%, rgba(0, 0, 0, 0) 100%);font-size:1.2em;line-height:1.5;transition:opacity .1s;padding:.666em 1.333em 4em;pointer-events:none;position:absolute;top:0;width:100%}.vjs-title-bar-description,.vjs-title-bar-title{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vjs-title-bar-title{font-weight:700;margin-bottom:.333em}.vjs-playing.vjs-user-inactive .vjs-title-bar{opacity:0;transition:opacity 1s}.video-js .vjs-skip-forward-5{cursor:pointer}.video-js .vjs-skip-forward-10{cursor:pointer}.video-js .vjs-skip-forward-30{cursor:pointer}.video-js .vjs-skip-backward-5{cursor:pointer}.video-js .vjs-skip-backward-10{cursor:pointer}.video-js .vjs-skip-backward-30{cursor:pointer}@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js :focus:not(.focus-visible){outline:0}.video-js :focus:not(:focus-visible){outline:0}',document.head.appendChild(io));var io;var pM=d1(uM(),1);async function RS(e){let t=await fetch(`https://embed.nicovideo.jp/watch/${e}?jsapi=1&playerId=2&noRelatedVideo=0&autoplay=1&mute=0&defaultNoComment=1&noLinkToNiconico=0&noController=0&noHeader=0&noTags=0&noShare=1&noVideoDetail=0&allowProgrammaticFullScreen=1&noIncrementViewCount=0&persistence=1&disableAdCheck=0`),a=document.createElement("div");a.innerHTML=await t.text();let n=a.querySelector("#ext-player")?.getAttribute("data-props");if(n!=null){let i=JSON.parse(n),l=await(await fetch(`https://www.nicovideo.jp/api/watch/v3_guest/${e}?_frontendId=70&_frontendVersion=0&actionTrackId=${i.actionTrackId}&skips=harmful&noSideEffect=false&i18nLanguage=ja-jp&t=1685257525946`)).text();return JSON.parse(l)}else return null}async function NS(e){let a=await(await fetch("https://api.dmc.nico/api/sessions?_format=json",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(FS(e))})).text();return JSON.parse(a)}function FS(e){let t=e.data.media.delivery.movie.videos.filter(({isAvailable:n})=>{if(n)return!0}).map(({id:n})=>n),a=e.data.media.delivery.movie.audios.filter(({isAvailable:n})=>{if(n)return!0}).map(({id:n})=>n),r=[];return t.forEach((n,i)=>{a[i]!==void 0&&r.push({src_id_to_mux:{audio_src_ids:[a[i]],video_src_ids:[n]}})}),{session:{recipe_id:"nicovideo-"+e.data.video.id,content_id:"out1",content_type:"movie",content_src_id_sets:[{content_src_ids:r}],timing_constraint:"unlimited",keep_method:{heartbeat:{lifetime:12e4}},protocol:{name:"http",parameters:{http_parameters:{parameters:{hls_parameters:{use_well_known_port:"yes",use_ssl:"yes",transfer_preset:"",segment_duration:6e3}}}}},content_uri:"",session_operation_auth:{session_operation_auth_by_signature:{token:e.data.media.delivery.movie.session.token,signature:e.data.media.delivery.movie.session.signature}},content_auth:{auth_type:"ht2",content_key_timeout:6e5,service_id:"nicovideo",service_user_id:e.data.media.delivery.movie.session.serviceUserId},client_info:{player_id:e.data.media.delivery.movie.session.playerId},priority:e.data.media.delivery.movie.session.priority}}}async function US(e){await fetch(`https://api.dmc.nico/api/sessions/${e.data.session.id}?_format=json&_method=PUT`,{method:"POST",body:JSON.stringify({session:e.data.session})})}var $S=({children:e,videoid:t})=>{let[a,r]=(0,X1.useState)(!1),n=(0,X1.useRef)(),i=(0,X1.useRef)(),h=(0,X1.useRef)(null);return(0,X1.useEffect)(()=>{r(!1),h.current!==null&&clearInterval(h.current),RS(t).then(l=>{l!==null&&NS(l).then(c=>{n.current=l,i.current=c,r(!0),h.current=setInterval(()=>{US(c)},4e4)}).catch(c=>{console.error(c)})}).catch(l=>{console.error(l)})},[t]),(0,s2.jsx)(j6.Provider,{value:{ready:a,initialWatchData:n.current,session:i.current},children:e})},j6=(0,X1.createContext)({ready:!1}),R6=()=>(0,X1.useContext)(j6),WS=({src:e,id:t,options:a={},children:r,className:n,...i})=>{let h=(0,X1.useRef)(),[l,c]=(0,X1.useState)(!1);return(0,X1.useEffect)(()=>{let v=document.querySelector(`#${t}`);v!==null&&(h.current=F(v,a,()=>{c(!0)}))},[]),(0,X1.useEffect)(()=>{h.current?.src(e)},[e]),(0,s2.jsxs)(s2.Fragment,{children:[(0,s2.jsx)("video",{id:t,className:(n!==void 0?n+" ":"")+"video-js",...i}),l&&h.current!==void 0&&(0,s2.jsx)(fM.Provider,{value:h.current,children:r})]})},fM=(0,X1.createContext)(null),ne=()=>{let e=(0,X1.useContext)(fM);if(!e)throw new Error("Videojs player is null");return e},zM=({videoid:e,children:t,id:a,className:r,width:n,height:i,...h})=>(0,s2.jsx)("div",{className:"niconico-react-vjs",style:{width:n,height:i},children:(0,s2.jsx)($S,{videoid:e,children:(0,s2.jsx)(j6.Consumer,{children:({session:l})=>(0,s2.jsx)(WS,{id:a!==void 0?a:"niconico-react-vjs",src:l?.data.session.content_uri,options:{},className:(r!==void 0?r+" ":"")+"niconico-react-vjs-player",...h,children:t})})})});async function GS(e){return await fetch(e.data.comment.nvComment.server+"/v1/threads",{method:"POST",body:JSON.stringify({additionals:{},threadKey:e.data.comment.nvComment.threadKey,params:e.data.comment.nvComment.params}),headers:{"X-Frontend-Id":"6","X-Frontend-Version":"0","Content-Type":"application/json"}}).then(async a=>await a.text()).then(a=>JSON.parse(a))}var gM;(function(e){e.Leaf="leaf",e.Trunk="trunk"})(gM||(gM={}));var MM=({children:e,className:t,id:a})=>{let{initialWatchData:r}=R6(),n=(0,X1.useRef)(),i=(0,X1.useRef)(),h=ne(),[l,c]=(0,X1.useState)(!0),v="niconico-react-vjs-comment-layer";return(0,X1.useEffect)(()=>{let d=document.querySelector(`#${a!==void 0?a:v}`);d!==null&&r!==void 0&&(clearInterval(i.current),GS(r).then(z=>{n.current=new pM.default(d,z.data.threads,{format:"v1",scale:1,mode:"default"})}),i.current=setInterval(()=>{let z=h.currentTime();if(z===void 0){clearInterval(i.current);return}n.current?.drawCanvas(Math.floor(z*100))},10))},[r]),(0,s2.jsxs)(mM.Provider,{value:{enable:()=>{c(!0)},disable:()=>{c(!1)},get:()=>l},children:[(0,s2.jsx)("canvas",{id:a!==void 0?a:v,className:(l?"":"niconico-react-vjs-comment-hide ")+(t!==void 0?t+" ":"")+"niconico-react-vjs-comment niconico-react-vjs-layer-item",width:1920,height:1080}),e]})},mM=(0,X1.createContext)(void 0),HM=()=>{let e=(0,X1.useContext)(mM);if(!e)throw new Error("Comment context is undefined!!");return e};var xM=d1(Jt());var ho=d1(at()),qS=()=>{let e=ne(),t=ma();return(0,xM.useEffect)(()=>{if(t!==null&&e!==null){t.sendParent("videojsAttached",null),t.addMessageListener("setTime",({value:n})=>{e.currentTime(n)}),t.addMessageListener("pause",()=>{e.pause()}),t.addMessageListener("play",()=>{e.play()}),t.addMessageListener("setVolume",({value:n})=>{e.volume(n)});let a=()=>{let n=e.duration(),i=e.currentTime();n-i<30&&(t.sendParent("nextPlayingGetStartReqest",null),e.off("timeupdate",a))};e.on("loadeddata",()=>{t.sendParent("loadeddata",null),e.one("playing",()=>{t.sendParent("firstPlaying",null),e.on("timeupdate",a)})}),e.on("ended",()=>{t.sendParent("ended",null)});let r=()=>{document.visibilityState==="hidden"&&e.play()};navigator.userAgent.match("iPhone|iPad")!==null&&e.on("pause",()=>{document.addEventListener("visibilitychange",r),setTimeout(()=>{document.removeEventListener("visibilitychange",r)},500)})}},[]),(0,ho.jsx)(ho.Fragment,{})},VM=qS;var IM=d1(Jt());document.getElementById("8d15ab5042517d76de6434f7e51169b629ad9808c457740b63ec6ccdf140f839")||(lo=document.createElement("style"),lo.id="8d15ab5042517d76de6434f7e51169b629ad9808c457740b63ec6ccdf140f839",lo.textContent=".video-controls{position:absolute;top:0;left:0;height:100%;width:100%}.video-controls .overlay{position:absolute;top:0;left:0;height:100%;width:100%}.video-controls .initial-play-click-overlay{display:flex;align-items:center;justify-content:center}.video-controls .initial-play-click-overlay .playButton{background-color:#292929;color:#fff;width:80px;height:80px;border-radius:80px;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.video-controls .initial-play-click-overlay .playButton svg{width:40px;height:40px}.video-controls .control-container .control-bar{height:45px;width:100%;position:absolute;left:0;bottom:0;background:linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3));transition:ease 200ms opacity;opacity:1;overflow:hidden}.video-controls .control-container .control-bar .control-bar-button{float:left;background-color:rgba(0,0,0,0);border:none;cursor:pointer;width:45px;height:45px;margin:0 2px;padding:0;display:flex;justify-content:center;align-items:center}.video-controls .control-container .control-bar .control-bar-button svg{color:#fff;width:27px;height:27px}.video-controls .control-container .control-bar .video-time{float:left;height:100%;display:flex;justify-self:center;align-items:center;margin-left:10px;padding:0}.video-controls .control-container .control-bar .video-time span{color:#fff;font-size:1rem}.video-controls .control-container .control-bar-hide{opacity:0}",document.head.appendChild(lo));var lo;var co=d1(Jt());var ir=d1(Jt());var N6=d1(Jt()),F6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},U6=N6.default.createContext&&N6.default.createContext(F6);var P0=function(){return P0=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},P0.apply(this,arguments)},KS=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function wM(e){return e&&e.map(function(t,a){return ir.default.createElement(t.tag,P0({key:a},t.attr),wM(t.child))})}function S4(e){return function(t){return ir.default.createElement(XS,P0({attr:P0({},e.attr)},t),wM(e.child))}}function XS(e){var t=function(a){var r=e.attr,n=e.size,i=e.title,h=KS(e,["attr","size","title"]),l=n||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),ir.default.createElement("svg",P0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,h,{className:c,style:P0(P0({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&ir.default.createElement("title",null,i),e.children)};return U6!==void 0?ir.default.createElement(U6.Consumer,null,function(a){return t(a)}):t(F6)}function LM(e){return S4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"}}]})(e)}function yM(e){return S4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 12V6H4v12h10v2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2v6h-2zm-1 2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm-4.34-6H9v5.66l2.12-2.12 2.83 2.83 1.41-1.41-2.83-2.83L14.66 8z"}}]})(e)}function CM(e){return S4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}}]})(e)}function oo(e){return S4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 5v14l11-7z"}}]})(e)}function BM(e){return S4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM20 4v13.17L18.83 16H4V4h16zM6 12h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"}}]})(e)}function SM(e){return S4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.83 16H20V4H6.83l-2-2H20c1.1 0 2 .9 2 2v15.17L18.83 16zM18 6H8.83l2 2H18V6zm0 3h-6.17l2 2H18V9zm0 5v-2h-3.17l2 2H18zm3.9 7.9l-1.41 1.41L15.17 18H4c-1.1 0-2-.9-2-2V4.83L.69 3.51 2.1 2.1l19.8 19.8zM13.17 16l-2-2H6v-2h3.17l-1-1H6V9h.17L4 6.83V16h9.17z"}}]})(e)}var _4=d1(at()),YS=()=>{let e=ne(),[t,a]=(0,co.useState)(!1);return(0,co.useEffect)(()=>{e?.one("canplay",()=>{a(!0)})},[]),t?(0,_4.jsx)("div",{className:"overlay initial-play-click-overlay",children:(0,_4.jsx)("button",{className:"playButton",onClick:()=>{e?.play(),a(!1)},children:(0,_4.jsx)(oo,{})})}):(0,_4.jsx)(_4.Fragment,{})},_M=YS;var D0=d1(Jt());var x5=d1(Jt());var O4=d1(Jt()),T4=d1(vs()),bM=d1(TM()),AM=d1(OM()),so=d1(at()),QS=()=>{let e=ne(),t=(0,O4.useRef)(void 0),[a,r]=(0,O4.useState)(0),[n,i]=(0,O4.useState)(0);(0,O4.useEffect)(()=>{let l=()=>{if(e!==null){t.current=setInterval(()=>{r(e.currentTime()),i(e.duration())},500);let c=()=>{e.off("pause",c),e.off("ended",c),clearInterval(t.current)};e.one("pause",c),e.one("ended",c)}};e?.on("play",()=>{t.current!==void 0&&clearInterval(t.current),l()}),l()},[]);function h(l){T4.default.extend(bM.default),T4.default.extend(AM.default);let c=(0,T4.default)().subtract(Math.round(l),"seconds"),v=T4.default.duration((0,T4.default)().diff(c));return T4.default.utc(v.asMilliseconds()).format("mm:ss")}return(0,so.jsx)("div",{className:"video-time",children:(0,so.jsxs)("span",{children:[h(a)," / ",h(n)]})})},EM=QS;var x2=d1(at()),JS=({show:e,isPlay:t})=>{let a=ne(),r=HM(),[n,i]=(0,x5.useState)(!0),[h,l]=(0,x5.useState)(!1);(0,x5.useEffect)(()=>{a?.on("leavepictureinpicture",()=>{l(!1)}),a?.on("enterpictureinpicture",()=>{l(!0)})},[]);let c=L=>{L.stopPropagation(),t?a?.pause():a?.play()},v=L=>{L.stopPropagation(),h?a?.exitPictureInPicture():a?.requestPictureInPicture()},d=()=>{n?(r?.disable(),i(!1)):(r?.enable(),i(!0))},z=L=>{L.stopPropagation()};return(0,x2.jsxs)("div",{className:"control-bar"+(e?"":" control-bar-hide"),onClick:z,children:[(0,x2.jsx)("button",{className:"control-bar-button",onClick:c,children:t?(0,x2.jsx)(CM,{}):(0,x2.jsx)(oo,{})}),(0,x2.jsx)("button",{className:"control-bar-button",onClick:d,children:n?(0,x2.jsx)(SM,{}):(0,x2.jsx)(BM,{})}),(0,x2.jsx)("button",{className:"control-bar-button",onClick:v,children:h?(0,x2.jsx)(yM,{}):(0,x2.jsx)(LM,{})}),(0,x2.jsx)(EM,{})]})},kM=JS;var hr=d1(at()),ZS=()=>{let[e,t]=(0,D0.useState)(!1),[a,r]=(0,D0.useState)(!1),[n,i]=(0,D0.useState)(!1),h=(0,D0.useRef)(),l=ma(),c=ne();(0,D0.useEffect)(()=>{c?.one("playing",()=>{t(!0)}),c?.on("play",()=>{r(!0),l?.sendParent("timeSyncRequest",null)}),c?.on("pause",()=>{r(!1)})},[]);let v=()=>{a?c?.pause():c?.play()},d=()=>{i(!0),clearTimeout(h.current),h.current=setTimeout(()=>{i(!1)},5e3)};return e?(0,hr.jsx)("div",{className:"control-container overlay",onClick:v,onMouseOver:d,onMouseMove:d,onTouchStartCapture:d,children:(0,hr.jsx)(kM,{show:n,isPlay:a})}):(0,hr.jsx)(hr.Fragment,{})},PM=ZS;var V5=d1(at()),t_=()=>(0,V5.jsxs)("div",{className:"video-controls",children:[(0,V5.jsx)(PM,{}),(0,V5.jsx)(_M,{})]}),DM=t_;var w5=d1(at()),e_=()=>{let{initialWatchData:e}=R6();return(0,IM.useEffect)(()=>{if(e!==void 0){let t=e?.data.owner?.nickname??e?.data.channel.name??"UNKNOWN";a_(String(e?.data.video.thumbnail.player)).then(a=>{navigator.mediaSession.metadata=new MediaMetadata({title:e?.data.video.title,artist:t,artwork:[{src:a,sizes:"540x540",type:"image/png"}]})})}},[e]),(0,w5.jsxs)("div",{className:"nico-player-outer",children:[(0,w5.jsx)(DM,{}),(0,w5.jsx)(VM,{})]})};async function a_(e){return await new Promise(t=>{let a=document.createElement("canvas"),r=540,n=960;a.width=r,a.height=r;let i=a.getContext("2d"),h=new Image;h.onload=()=>{i?.drawImage(h,(n-r)/2*-1,0);let l=a.toDataURL("image/png");a.remove(),t(l)},h.crossOrigin="anonymous",h.src=e})}var jM=e_;document.getElementById("3a436710d4486b52f13ebb1d29e942c036e4a3c4bf9dc63d2d5d076eb365f4b8")||(vo=document.createElement("style"),vo.id="3a436710d4486b52f13ebb1d29e942c036e4a3c4bf9dc63d2d5d076eb365f4b8",vo.textContent=".niconico-react-vjs{position:relative}.niconico-react-vjs-layer-item{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;display:inline-block}.niconico-react-vjs-layer-item-pointer{pointer-events:all}.niconico-react-vjs-comment{pointer-events:none;width:100%;height:100%}.niconico-react-vjs-player{position:absolute;width:100%;height:100%;left:0;top:0}.niconico-react-vjs-comment-hide{display:none}",document.head.appendChild(vo));var vo;var L5=d1(at()),r_=()=>{let[e,t]=(0,y5.useState)(null),a=ma();return(0,y5.useEffect)(()=>{b2("Kiite plus niconico client"),a?.addMessageListener("setVideoId",({value:r})=>{b2(`new VideoId: ${String(r)}`),t(r)}),a?.sendParent("playerRendered",null)},[]),(0,y5.useEffect)(()=>{},[e]),(0,L5.jsx)("div",{className:"embed-wrapper",children:e!==null&&(0,L5.jsx)(zM,{videoid:e,width:1920,height:1080,playsInline:!0,autoPlay:!0,children:(0,L5.jsx)(MM,{children:(0,L5.jsx)(jM,{})})})})},RM=r_;var K6=d1(at());function X6(){document.body.innerHTML="";let e=document.createElement("div");e.id="root",document.body.appendChild(e),NM.default.createRoot(e).render((0,K6.jsx)(Hu,{origin:"https://cafe.kiite.jp",children:(0,K6.jsx)(RM,{})}))}document.getElementById("9829630aad96f4c13ea759798dcbbda4942aa9810aa1d2a5aec09e254a97a4db")||(uo=document.createElement("style"),uo.id="9829630aad96f4c13ea759798dcbbda4942aa9810aa1d2a5aec09e254a97a4db",uo.textContent="#niconico-client{width:100%;height:100%;z-index:99}",document.head.appendChild(uo));var uo;var C5=class{iframe;postMessage;origin;nowPlayData;nextPlayData;mode;constructor(t="mobile"){this.origin="https://embed.nicovideo.jp",this.mode=t,t==="mobile"?this.iframe=this.overridePlayer():this.iframe=this.overridePlayerPC(),this.postMessage=new za(this.origin),b2("Kiite cafe plus Loaded")}start(){this.postMessage.addMessageListener("videojsAttached",()=>{this.mode==="pc"&&this.volumeChangeHandler()}),this.postMessage.addMessageListener("playerRendered",async()=>{b2("Player rendered"),this.getNowPlaying().then(t=>{this.sendMessage("setVideoId",t.video_id),this.nowPlayData=t})}),this.postMessage.addMessageListener("firstPlaying",()=>{b2("Playing"),this.sendMessage("setTime",this.getNowCurrentTime(this.nowPlayData.start_time))}),this.postMessage.addMessageListener("nextPlayingGetStartReqest",()=>{b2("Get nextsong"),this.getNextSong().then(t=>{b2(`Nextsong: ${t.video_id}`),this.nextPlayData=t})}),this.postMessage.addMessageListener("ended",()=>{b2("Ended"),this.nowPlayData=this.nextPlayData,this.sendMessage("setVideoId",this.nowPlayData.video_id)}),this.postMessage.addMessageListener("timeSyncRequest",()=>{this.sendMessage("setTime",this.getNowCurrentTime(this.nowPlayData.start_time))})}overridePlayer(){let t=document.createElement("iframe");t.src="https://embed.nicovideo.jp/kiite-embed-client",t.id="niconico-client";let a=document.querySelector("#videos");return a!==null&&(a.innerHTML="",a.appendChild(t)),t}overridePlayerPC(){let t=document.createElement("iframe");t.src="https://embed.nicovideo.jp/kiite-embed-client",t.id="niconico-client",document.querySelector("#cafe_player > .front")?.remove();let r=document.querySelector("#cafe_player > .videos");return r!==null&&(r.innerHTML="",r.appendChild(t)),t}volumeChangeHandler(){let t=document.querySelector(".volume > .button > .value"),a=()=>{let n=Number(t?.innerHTML)/100;this.sendMessage("setVolume",n),b2("setvol")},r=new MutationObserver(()=>{a()});t!==null&&(r.observe(t,{childList:!0,attributes:!0,characterData:!0}),a())}getNowCurrentTime(t){let a=new Date(t),n=new Date().getTime()-a.getTime();return Math.floor(n/100)/10}sendMessage(t,a){this.iframe.contentWindow?.window?.postMessage({type:t,value:a},this.origin)}async getNowPlaying(){let t=await fetch("https://cafeapi.kiite.jp/api/cafe/now_playing");return JSON.parse(await t.text())}async getNextSong(){let t=await fetch("https://cafeapi.kiite.jp/api/cafe/next_song");return JSON.parse(await t.text())}attachDebugCommands(){b2("attach debug commands"),window._kcp={setVideo:t=>(this.sendMessage("setVideoId",t),"Success!"),setTime:t=>(this.sendMessage("setTime",t),"Success!"),reSync:()=>(this.getNowPlaying().then(t=>{this.sendMessage("setVideoId",t.video_id),this.nowPlayData=t}),this.sendMessage("setTime",this.getNowCurrentTime(this.nowPlayData.start_time)),"Success!")}}};function Y6(){if(location.href==="https://cafe.kiite.jp/"){let e=new C5("mobile");e.start(),e.attachDebugCommands()}if(location.href==="https://cafe.kiite.jp/pc"){let e=new C5("pc");e.start(),e.attachDebugCommands()}location.href==="https://embed.nicovideo.jp/kiite-embed-client"&&X6()}var FM={};typeof GM_info<"u"&&GM_info.script.grant.forEach(e=>{let t=e.split("GM_")[1];t==="xmlhttpRequest"&&(t="xmlHttpRequest"),FM[e]=GM[t]});Y6(FM);
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

@videojs/xhr/lib/index.js:
  (**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Björklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   *)

@xpadev-net/niconicomments/dist/bundle.js:
  (*!
    niconicomments.js v0.2.52
    (c) 2021 xpadev-net https://xpadev.net
    Released under the MIT License.
  *)

m3u8-parser/dist/m3u8-parser.es.js:
  (*! @name m3u8-parser @version 6.2.0 @license Apache-2.0 *)

mpd-parser/dist/mpd-parser.es.js:
  (*! @name mpd-parser @version 1.1.1 @license Apache-2.0 *)

video.js/dist/video.es.js:
  (**
   * @license
   * Video.js 8.3.0 <http://videojs.com/>
   * Copyright Brightcove, Inc. <https://www.brightcove.com/>
   * Available under Apache License Version 2.0
   * <https://github.com/videojs/video.js/blob/main/LICENSE>
   *
   * Includes vtt.js <https://github.com/mozilla/vtt.js>
   * Available under Apache License Version 2.0
   * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
   *)
  (*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 *)
  (*! @name @videojs/http-streaming @version 3.0.2 @license Apache-2.0 *)
  (*! @name pkcs7 @version 1.0.4 @license Apache-2.0 *)
  (*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 *)
*/
