// ==UserScript==
// @name Kiite cafe plus
// @version 0.4.1
// @license MIT
// @author yakisova41
// @description kiite cafe Background playback and Continuous playback
// @description:ja kiite cafe バックグラウンド再生 連続再生
// @match https://cafe.kiite.jp/*
// @match https://embed.nicovideo.jp/kiite-embed-client
// @namespace https://yakisova.com
// ==/UserScript==

var xH=Object.create;var Sv=Object.defineProperty;var VH=Object.getOwnPropertyDescriptor;var wH=Object.getOwnPropertyNames;var LH=Object.getPrototypeOf,yH=Object.prototype.hasOwnProperty;var S1=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var BH=(e,t,a,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of wH(t))!yH.call(e,n)&&n!==a&&Sv(e,n,{get:()=>t[n],enumerable:!(r=VH(t,n))||r.enumerable});return e};var z1=(e,t,a)=>(a=e!=null?xH(LH(e)):{},BH(t||!e||!e.__esModule?Sv(a,"default",{value:e,enumerable:!0}):a,e));var Rv=S1(_1=>{"use strict";var Cr=Symbol.for("react.element"),CH=Symbol.for("react.portal"),SH=Symbol.for("react.fragment"),_H=Symbol.for("react.strict_mode"),TH=Symbol.for("react.profiler"),bH=Symbol.for("react.provider"),OH=Symbol.for("react.context"),AH=Symbol.for("react.forward_ref"),EH=Symbol.for("react.suspense"),kH=Symbol.for("react.memo"),PH=Symbol.for("react.lazy"),_v=Symbol.iterator;function DH(e){return e===null||typeof e!="object"?null:(e=_v&&e[_v]||e["@@iterator"],typeof e=="function"?e:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Av=Object.assign,Ev={};function N4(e,t,a){this.props=e,this.context=t,this.refs=Ev,this.updater=a||Ov}N4.prototype.isReactComponent={};N4.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};N4.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kv(){}kv.prototype=N4.prototype;function Tl(e,t,a){this.props=e,this.context=t,this.refs=Ev,this.updater=a||Ov}var bl=Tl.prototype=new kv;bl.constructor=Tl;Av(bl,N4.prototype);bl.isPureReactComponent=!0;var Tv=Array.isArray,Pv=Object.prototype.hasOwnProperty,Ol={current:null},Dv={key:!0,ref:!0,__self:!0,__source:!0};function Iv(e,t,a){var r,n={},i=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(i=""+t.key),t)Pv.call(t,r)&&!Dv.hasOwnProperty(r)&&(n[r]=t[r]);var l=arguments.length-2;if(l===1)n.children=a;else if(1<l){for(var c=Array(l),v=0;v<l;v++)c[v]=arguments[v+2];n.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)n[r]===void 0&&(n[r]=l[r]);return{$$typeof:Cr,type:e,key:i,ref:h,props:n,_owner:Ol.current}}function IH(e,t){return{$$typeof:Cr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Al(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cr}function RH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return t[a]})}var bv=/\/+/g;function _l(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RH(""+e.key):t.toString(36)}function X5(e,t,a,r,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(i){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Cr:case CH:h=!0}}if(h)return h=e,n=n(h),e=r===""?"."+_l(h,0):r,Tv(n)?(a="",e!=null&&(a=e.replace(bv,"$&/")+"/"),X5(n,t,a,"",function(v){return v})):n!=null&&(Al(n)&&(n=IH(n,a+(!n.key||h&&h.key===n.key?"":(""+n.key).replace(bv,"$&/")+"/")+e)),t.push(n)),1;if(h=0,r=r===""?".":r+":",Tv(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+_l(i,l);h+=X5(i,t,a,c,n)}else if(c=DH(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+_l(i,l++),h+=X5(i,t,a,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function K5(e,t,a){if(e==null)return e;var r=[],n=0;return X5(e,r,"","",function(i){return t.call(a,i,n++)}),r}function jH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wt={current:null},Y5={transition:null},NH={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Y5,ReactCurrentOwner:Ol};_1.Children={map:K5,forEach:function(e,t,a){K5(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return K5(e,function(){t++}),t},toArray:function(e){return K5(e,function(t){return t})||[]},only:function(e){if(!Al(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_1.Component=N4;_1.Fragment=SH;_1.Profiler=TH;_1.PureComponent=Tl;_1.StrictMode=_H;_1.Suspense=EH;_1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NH;_1.cloneElement=function(e,t,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Av({},e.props),n=e.key,i=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,h=Ol.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Pv.call(t,c)&&!Dv.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=a;else if(1<c){l=Array(c);for(var v=0;v<c;v++)l[v]=arguments[v+2];r.children=l}return{$$typeof:Cr,type:e.type,key:n,ref:i,props:r,_owner:h}};_1.createContext=function(e){return e={$$typeof:OH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bH,_context:e},e.Consumer=e};_1.createElement=Iv;_1.createFactory=function(e){var t=Iv.bind(null,e);return t.type=e,t};_1.createRef=function(){return{current:null}};_1.forwardRef=function(e){return{$$typeof:AH,render:e}};_1.isValidElement=Al;_1.lazy=function(e){return{$$typeof:PH,_payload:{_status:-1,_result:e},_init:jH}};_1.memo=function(e,t){return{$$typeof:kH,type:e,compare:t===void 0?null:t}};_1.startTransition=function(e){var t=Y5.transition;Y5.transition={};try{e()}finally{Y5.transition=t}};_1.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};_1.useCallback=function(e,t){return Wt.current.useCallback(e,t)};_1.useContext=function(e){return Wt.current.useContext(e)};_1.useDebugValue=function(){};_1.useDeferredValue=function(e){return Wt.current.useDeferredValue(e)};_1.useEffect=function(e,t){return Wt.current.useEffect(e,t)};_1.useId=function(){return Wt.current.useId()};_1.useImperativeHandle=function(e,t,a){return Wt.current.useImperativeHandle(e,t,a)};_1.useInsertionEffect=function(e,t){return Wt.current.useInsertionEffect(e,t)};_1.useLayoutEffect=function(e,t){return Wt.current.useLayoutEffect(e,t)};_1.useMemo=function(e,t){return Wt.current.useMemo(e,t)};_1.useReducer=function(e,t,a){return Wt.current.useReducer(e,t,a)};_1.useRef=function(e){return Wt.current.useRef(e)};_1.useState=function(e){return Wt.current.useState(e)};_1.useSyncExternalStore=function(e,t,a){return Wt.current.useSyncExternalStore(e,t,a)};_1.useTransition=function(){return Wt.current.useTransition()};_1.version="18.2.0"});var At=S1((s_,jv)=>{"use strict";jv.exports=Rv()});var Yv=S1(K1=>{"use strict";function Dl(e,t){var a=e.length;e.push(t);t:for(;0<a;){var r=a-1>>>1,n=e[r];if(0<Q5(n,t))e[r]=t,e[a]=n,a=r;else break t}}function X2(e){return e.length===0?null:e[0]}function Z5(e){if(e.length===0)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;t:for(var r=0,n=e.length,i=n>>>1;r<i;){var h=2*(r+1)-1,l=e[h],c=h+1,v=e[c];if(0>Q5(l,a))c<n&&0>Q5(v,l)?(e[r]=v,e[c]=a,r=c):(e[r]=l,e[h]=a,r=h);else if(c<n&&0>Q5(v,a))e[r]=v,e[c]=a,r=c;else break t}}return t}function Q5(e,t){var a=e.sortIndex-t.sortIndex;return a!==0?a:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(Nv=performance,K1.unstable_now=function(){return Nv.now()}):(El=Date,Fv=El.now(),K1.unstable_now=function(){return El.now()-Fv});var Nv,El,Fv,fe=[],c0=[],FH=1,_2=null,Et=3,ti=!1,J0=!1,_r=!1,Wv=typeof setTimeout=="function"?setTimeout:null,Gv=typeof clearTimeout=="function"?clearTimeout:null,Uv=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Il(e){for(var t=X2(c0);t!==null;){if(t.callback===null)Z5(c0);else if(t.startTime<=e)Z5(c0),t.sortIndex=t.expirationTime,Dl(fe,t);else break;t=X2(c0)}}function Rl(e){if(_r=!1,Il(e),!J0)if(X2(fe)!==null)J0=!0,Nl(jl);else{var t=X2(c0);t!==null&&Fl(Rl,t.startTime-e)}}function jl(e,t){J0=!1,_r&&(_r=!1,Gv(Tr),Tr=-1),ti=!0;var a=Et;try{for(Il(t),_2=X2(fe);_2!==null&&(!(_2.expirationTime>t)||e&&!Xv());){var r=_2.callback;if(typeof r=="function"){_2.callback=null,Et=_2.priorityLevel;var n=r(_2.expirationTime<=t);t=K1.unstable_now(),typeof n=="function"?_2.callback=n:_2===X2(fe)&&Z5(fe),Il(t)}else Z5(fe);_2=X2(fe)}if(_2!==null)var i=!0;else{var h=X2(c0);h!==null&&Fl(Rl,h.startTime-t),i=!1}return i}finally{_2=null,Et=a,ti=!1}}var ei=!1,J5=null,Tr=-1,qv=5,Kv=-1;function Xv(){return!(K1.unstable_now()-Kv<qv)}function kl(){if(J5!==null){var e=K1.unstable_now();Kv=e;var t=!0;try{t=J5(!0,e)}finally{t?Sr():(ei=!1,J5=null)}}else ei=!1}var Sr;typeof Uv=="function"?Sr=function(){Uv(kl)}:typeof MessageChannel<"u"?(Pl=new MessageChannel,$v=Pl.port2,Pl.port1.onmessage=kl,Sr=function(){$v.postMessage(null)}):Sr=function(){Wv(kl,0)};var Pl,$v;function Nl(e){J5=e,ei||(ei=!0,Sr())}function Fl(e,t){Tr=Wv(function(){e(K1.unstable_now())},t)}K1.unstable_IdlePriority=5;K1.unstable_ImmediatePriority=1;K1.unstable_LowPriority=4;K1.unstable_NormalPriority=3;K1.unstable_Profiling=null;K1.unstable_UserBlockingPriority=2;K1.unstable_cancelCallback=function(e){e.callback=null};K1.unstable_continueExecution=function(){J0||ti||(J0=!0,Nl(jl))};K1.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qv=0<e?Math.floor(1e3/e):5};K1.unstable_getCurrentPriorityLevel=function(){return Et};K1.unstable_getFirstCallbackNode=function(){return X2(fe)};K1.unstable_next=function(e){switch(Et){case 1:case 2:case 3:var t=3;break;default:t=Et}var a=Et;Et=t;try{return e()}finally{Et=a}};K1.unstable_pauseExecution=function(){};K1.unstable_requestPaint=function(){};K1.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=Et;Et=e;try{return t()}finally{Et=a}};K1.unstable_scheduleCallback=function(e,t,a){var r=K1.unstable_now();switch(typeof a=="object"&&a!==null?(a=a.delay,a=typeof a=="number"&&0<a?r+a:r):a=r,e){case 1:var n=-1;break;case 2:n=250;break;case 5:n=1073741823;break;case 4:n=1e4;break;default:n=5e3}return n=a+n,e={id:FH++,callback:t,priorityLevel:e,startTime:a,expirationTime:n,sortIndex:-1},a>r?(e.sortIndex=a,Dl(c0,e),X2(fe)===null&&e===X2(c0)&&(_r?(Gv(Tr),Tr=-1):_r=!0,Fl(Rl,a-r))):(e.sortIndex=n,Dl(fe,e),J0||ti||(J0=!0,Nl(jl))),e};K1.unstable_shouldYield=Xv;K1.unstable_wrapCallback=function(e){var t=Et;return function(){var a=Et;Et=t;try{return e.apply(this,arguments)}finally{Et=a}}}});var Jv=S1((d_,Qv)=>{"use strict";Qv.exports=Yv()});var nu=S1(x2=>{"use strict";var id=At(),m2=Jv();function e1(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hd=new Set,Jr={};function v4(e,t){oa(e,t),oa(e+"Capture",t)}function oa(e,t){for(Jr[e]=t,e=0;e<t.length;e++)hd.add(t[e])}var Ue=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=Object.prototype.hasOwnProperty,UH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zv={},t8={};function $H(e){return vo.call(t8,e)?!0:vo.call(Zv,e)?!1:UH.test(e)?t8[e]=!0:(Zv[e]=!0,!1)}function WH(e,t,a,r){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GH(e,t,a,r){if(t===null||typeof t>"u"||WH(e,t,a,r))return!0;if(r)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Kt(e,t,a,r,n,i,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=h}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new Kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bt[t]=new Kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new Kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new Kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new Kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new Kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new Kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new Kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new Kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var nc=/[\-:]([a-z])/g;function ic(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nc,ic);bt[t]=new Kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nc,ic);bt[t]=new Kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nc,ic);bt[t]=new Kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new Kt(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new Kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function hc(e,t,a,r){var n=bt.hasOwnProperty(t)?bt[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GH(t,a,n,r)&&(a=null),r||n===null?$H(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):n.mustUseProperty?e[n.propertyName]=a===null?n.type===3?!1:"":a:(t=n.attributeName,r=n.attributeNamespace,a===null?e.removeAttribute(t):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,r?e.setAttributeNS(r,t,a):e.setAttribute(t,a))))}var qe=id.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ai=Symbol.for("react.element"),$4=Symbol.for("react.portal"),W4=Symbol.for("react.fragment"),lc=Symbol.for("react.strict_mode"),uo=Symbol.for("react.profiler"),ld=Symbol.for("react.provider"),od=Symbol.for("react.context"),oc=Symbol.for("react.forward_ref"),go=Symbol.for("react.suspense"),po=Symbol.for("react.suspense_list"),cc=Symbol.for("react.memo"),v0=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var cd=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var e8=Symbol.iterator;function br(e){return e===null||typeof e!="object"?null:(e=e8&&e[e8]||e["@@iterator"],typeof e=="function"?e:null)}var lt=Object.assign,Ul;function Rr(e){if(Ul===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Ul=t&&t[1]||""}return`
`+Ul+e}var $l=!1;function Wl(e,t){if(!e||$l)return"";$l=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var r=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){r=v}e.call(t.prototype)}else{try{throw Error()}catch(v){r=v}e()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var n=v.stack.split(`
`),i=r.stack.split(`
`),h=n.length-1,l=i.length-1;1<=h&&0<=l&&n[h]!==i[l];)l--;for(;1<=h&&0<=l;h--,l--)if(n[h]!==i[l]){if(h!==1||l!==1)do if(h--,l--,0>l||n[h]!==i[l]){var c=`
`+n[h].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=h&&0<=l);break}}}finally{$l=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?Rr(e):""}function qH(e){switch(e.tag){case 5:return Rr(e.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 2:case 15:return e=Wl(e.type,!1),e;case 11:return e=Wl(e.type.render,!1),e;case 1:return e=Wl(e.type,!0),e;default:return""}}function fo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W4:return"Fragment";case $4:return"Portal";case uo:return"Profiler";case lc:return"StrictMode";case go:return"Suspense";case po:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case od:return(e.displayName||"Context")+".Consumer";case ld:return(e._context.displayName||"Context")+".Provider";case oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cc:return t=e.displayName||null,t!==null?t:fo(e.type)||"Memo";case v0:t=e._payload,e=e._init;try{return fo(e(t))}catch{}}return null}function KH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fo(t);case 8:return t===lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function y0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function XH(e){var t=sd(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(h){r=""+h,i.call(this,h)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ri(e){e._valueTracker||(e._valueTracker=XH(e))}function vd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=sd(e)?e.checked?"true":"false":e.value),e=r,e!==a?(t.setValue(e),!0):!1}function bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zo(e,t){var a=t.checked;return lt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function a8(e,t){var a=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;a=y0(t.value!=null?t.value:a),e._wrapperState={initialChecked:r,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dd(e,t){t=t.checked,t!=null&&hc(e,"checked",t,!1)}function Mo(e,t){dd(e,t);var a=y0(t.value),r=t.type;if(a!=null)r==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?mo(e,t.type,a):t.hasOwnProperty("defaultValue")&&mo(e,t.type,y0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r8(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function mo(e,t,a){(t!=="number"||bi(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var jr=Array.isArray;function aa(e,t,a,r){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&r&&(e[a].defaultSelected=!0)}else{for(a=""+y0(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Ho(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(e1(91));return lt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function n8(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(e1(92));if(jr(a)){if(1<a.length)throw Error(e1(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:y0(a)}}function ud(e,t){var a=y0(t.value),r=y0(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),r!=null&&(e.defaultValue=""+r)}function i8(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ni,pd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,a,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ni=ni||document.createElement("div"),ni.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zr(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YH=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(e){YH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ur[t]=Ur[e]})});function fd(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Ur.hasOwnProperty(e)&&Ur[e]?(""+t).trim():t+"px"}function zd(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var r=a.indexOf("--")===0,n=fd(a,t[a],r);a==="float"&&(a="cssFloat"),r?e.setProperty(a,n):e[a]=n}}var QH=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vo(e,t){if(t){if(QH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(e1(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(e1(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(e1(61))}if(t.style!=null&&typeof t.style!="object")throw Error(e1(62))}}function wo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=null;function sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yo=null,ra=null,na=null;function h8(e){if(e=Mn(e)){if(typeof yo!="function")throw Error(e1(280));var t=e.stateNode;t&&(t=ih(t),yo(e.stateNode,e.type,t))}}function Md(e){ra?na?na.push(e):na=[e]:ra=e}function md(){if(ra){var e=ra,t=na;if(na=ra=null,h8(e),t)for(e=0;e<t.length;e++)h8(t[e])}}function Hd(e,t){return e(t)}function xd(){}var Gl=!1;function Vd(e,t,a){if(Gl)return e(t,a);Gl=!0;try{return Hd(e,t,a)}finally{Gl=!1,(ra!==null||na!==null)&&(xd(),md())}}function tn(e,t){var a=e.stateNode;if(a===null)return null;var r=ih(a);if(r===null)return null;a=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(e1(231,t,typeof a));return a}var Bo=!1;if(Ue)try{F4={},Object.defineProperty(F4,"passive",{get:function(){Bo=!0}}),window.addEventListener("test",F4,F4),window.removeEventListener("test",F4,F4)}catch{Bo=!1}var F4;function JH(e,t,a,r,n,i,h,l,c){var v=Array.prototype.slice.call(arguments,3);try{t.apply(a,v)}catch(g){this.onError(g)}}var $r=!1,Oi=null,Ai=!1,Co=null,ZH={onError:function(e){$r=!0,Oi=e}};function tx(e,t,a,r,n,i,h,l,c){$r=!1,Oi=null,JH.apply(ZH,arguments)}function ex(e,t,a,r,n,i,h,l,c){if(tx.apply(this,arguments),$r){if($r){var v=Oi;$r=!1,Oi=null}else throw Error(e1(198));Ai||(Ai=!0,Co=v)}}function d4(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function wd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l8(e){if(d4(e)!==e)throw Error(e1(188))}function ax(e){var t=e.alternate;if(!t){if(t=d4(e),t===null)throw Error(e1(188));return t!==e?null:e}for(var a=e,r=t;;){var n=a.return;if(n===null)break;var i=n.alternate;if(i===null){if(r=n.return,r!==null){a=r;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return l8(n),e;if(i===r)return l8(n),t;i=i.sibling}throw Error(e1(188))}if(a.return!==r.return)a=n,r=i;else{for(var h=!1,l=n.child;l;){if(l===a){h=!0,a=n,r=i;break}if(l===r){h=!0,r=n,a=i;break}l=l.sibling}if(!h){for(l=i.child;l;){if(l===a){h=!0,a=i,r=n;break}if(l===r){h=!0,r=i,a=n;break}l=l.sibling}if(!h)throw Error(e1(189))}}if(a.alternate!==r)throw Error(e1(190))}if(a.tag!==3)throw Error(e1(188));return a.stateNode.current===a?e:t}function Ld(e){return e=ax(e),e!==null?yd(e):null}function yd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yd(e);if(t!==null)return t;e=e.sibling}return null}var Bd=m2.unstable_scheduleCallback,o8=m2.unstable_cancelCallback,rx=m2.unstable_shouldYield,nx=m2.unstable_requestPaint,pt=m2.unstable_now,ix=m2.unstable_getCurrentPriorityLevel,vc=m2.unstable_ImmediatePriority,Cd=m2.unstable_UserBlockingPriority,Ei=m2.unstable_NormalPriority,hx=m2.unstable_LowPriority,Sd=m2.unstable_IdlePriority,eh=null,He=null;function lx(e){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(eh,e,void 0,(e.current.flags&128)===128)}catch{}}var te=Math.clz32?Math.clz32:sx,ox=Math.log,cx=Math.LN2;function sx(e){return e>>>=0,e===0?32:31-(ox(e)/cx|0)|0}var ii=64,hi=4194304;function Nr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ki(e,t){var a=e.pendingLanes;if(a===0)return 0;var r=0,n=e.suspendedLanes,i=e.pingedLanes,h=a&268435455;if(h!==0){var l=h&~n;l!==0?r=Nr(l):(i&=h,i!==0&&(r=Nr(i)))}else h=a&~n,h!==0?r=Nr(h):i!==0&&(r=Nr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(r&4&&(r|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)a=31-te(t),n=1<<a,r|=e[a],t&=~n;return r}function vx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dx(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var h=31-te(i),l=1<<h,c=n[h];c===-1?(!(l&a)||l&r)&&(n[h]=vx(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function So(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _d(){var e=ii;return ii<<=1,!(ii&4194240)&&(ii=64),e}function ql(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function fn(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-te(t),e[t]=a}function ux(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<a;){var n=31-te(a),i=1<<n;t[n]=0,r[n]=-1,e[n]=-1,a&=~i}}function dc(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-te(a),n=1<<r;n&t|e[r]&t&&(e[r]|=t),a&=~n}}var N1=0;function Td(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bd,uc,Od,Ad,Ed,_o=!1,li=[],z0=null,M0=null,m0=null,en=new Map,an=new Map,u0=[],gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c8(e,t){switch(e){case"focusin":case"focusout":z0=null;break;case"dragenter":case"dragleave":M0=null;break;case"mouseover":case"mouseout":m0=null;break;case"pointerover":case"pointerout":en.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":an.delete(t.pointerId)}}function Or(e,t,a,r,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:i,targetContainers:[n]},t!==null&&(t=Mn(t),t!==null&&uc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function px(e,t,a,r,n){switch(t){case"focusin":return z0=Or(z0,e,t,a,r,n),!0;case"dragenter":return M0=Or(M0,e,t,a,r,n),!0;case"mouseover":return m0=Or(m0,e,t,a,r,n),!0;case"pointerover":var i=n.pointerId;return en.set(i,Or(en.get(i)||null,e,t,a,r,n)),!0;case"gotpointercapture":return i=n.pointerId,an.set(i,Or(an.get(i)||null,e,t,a,r,n)),!0}return!1}function kd(e){var t=e4(e.target);if(t!==null){var a=d4(t);if(a!==null){if(t=a.tag,t===13){if(t=wd(a),t!==null){e.blockedOn=t,Ed(e.priority,function(){Od(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=To(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var r=new a.constructor(a.type,a);Lo=r,a.target.dispatchEvent(r),Lo=null}else return t=Mn(a),t!==null&&uc(t),e.blockedOn=a,!1;t.shift()}return!0}function s8(e,t,a){xi(e)&&a.delete(t)}function fx(){_o=!1,z0!==null&&xi(z0)&&(z0=null),M0!==null&&xi(M0)&&(M0=null),m0!==null&&xi(m0)&&(m0=null),en.forEach(s8),an.forEach(s8)}function Ar(e,t){e.blockedOn===t&&(e.blockedOn=null,_o||(_o=!0,m2.unstable_scheduleCallback(m2.unstable_NormalPriority,fx)))}function rn(e){function t(n){return Ar(n,e)}if(0<li.length){Ar(li[0],e);for(var a=1;a<li.length;a++){var r=li[a];r.blockedOn===e&&(r.blockedOn=null)}}for(z0!==null&&Ar(z0,e),M0!==null&&Ar(M0,e),m0!==null&&Ar(m0,e),en.forEach(t),an.forEach(t),a=0;a<u0.length;a++)r=u0[a],r.blockedOn===e&&(r.blockedOn=null);for(;0<u0.length&&(a=u0[0],a.blockedOn===null);)kd(a),a.blockedOn===null&&u0.shift()}var ia=qe.ReactCurrentBatchConfig,Pi=!0;function zx(e,t,a,r){var n=N1,i=ia.transition;ia.transition=null;try{N1=1,gc(e,t,a,r)}finally{N1=n,ia.transition=i}}function Mx(e,t,a,r){var n=N1,i=ia.transition;ia.transition=null;try{N1=4,gc(e,t,a,r)}finally{N1=n,ia.transition=i}}function gc(e,t,a,r){if(Pi){var n=To(e,t,a,r);if(n===null)to(e,t,r,Di,a),c8(e,r);else if(px(n,e,t,a,r))r.stopPropagation();else if(c8(e,r),t&4&&-1<gx.indexOf(e)){for(;n!==null;){var i=Mn(n);if(i!==null&&bd(i),i=To(e,t,a,r),i===null&&to(e,t,r,Di,a),i===n)break;n=i}n!==null&&r.stopPropagation()}else to(e,t,r,null,a)}}var Di=null;function To(e,t,a,r){if(Di=null,e=sc(r),e=e4(e),e!==null)if(t=d4(e),t===null)e=null;else if(a=t.tag,a===13){if(e=wd(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Di=e,null}function Pd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ix()){case vc:return 1;case Cd:return 4;case Ei:case hx:return 16;case Sd:return 536870912;default:return 16}default:return 16}}var p0=null,pc=null,Vi=null;function Dd(){if(Vi)return Vi;var e,t=pc,a=t.length,r,n="value"in p0?p0.value:p0.textContent,i=n.length;for(e=0;e<a&&t[e]===n[e];e++);var h=a-e;for(r=1;r<=h&&t[a-r]===n[i-r];r++);return Vi=n.slice(e,1<r?1-r:void 0)}function wi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oi(){return!0}function v8(){return!1}function H2(e){function t(a,r,n,i,h){this._reactName=a,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=h,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(a=e[l],this[l]=a?a(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?oi:v8,this.isPropagationStopped=v8,this}return lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),t}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=H2(pa),zn=lt({},pa,{view:0,detail:0}),mx=H2(zn),Kl,Xl,Er,ah=lt({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Er&&(Er&&e.type==="mousemove"?(Kl=e.screenX-Er.screenX,Xl=e.screenY-Er.screenY):Xl=Kl=0,Er=e),Kl)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),d8=H2(ah),Hx=lt({},ah,{dataTransfer:0}),xx=H2(Hx),Vx=lt({},zn,{relatedTarget:0}),Yl=H2(Vx),wx=lt({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Lx=H2(wx),yx=lt({},pa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bx=H2(yx),Cx=lt({},pa,{data:0}),u8=H2(Cx),Sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_x={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tx[e])?!!t[e]:!1}function zc(){return bx}var Ox=lt({},zn,{key:function(e){if(e.key){var t=Sx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_x[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zc,charCode:function(e){return e.type==="keypress"?wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ax=H2(Ox),Ex=lt({},ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g8=H2(Ex),kx=lt({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zc}),Px=H2(kx),Dx=lt({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ix=H2(Dx),Rx=lt({},ah,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jx=H2(Rx),Nx=[9,13,27,32],Mc=Ue&&"CompositionEvent"in window,Wr=null;Ue&&"documentMode"in document&&(Wr=document.documentMode);var Fx=Ue&&"TextEvent"in window&&!Wr,Id=Ue&&(!Mc||Wr&&8<Wr&&11>=Wr),p8=String.fromCharCode(32),f8=!1;function Rd(e,t){switch(e){case"keyup":return Nx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var G4=!1;function Ux(e,t){switch(e){case"compositionend":return jd(t);case"keypress":return t.which!==32?null:(f8=!0,p8);case"textInput":return e=t.data,e===p8&&f8?null:e;default:return null}}function $x(e,t){if(G4)return e==="compositionend"||!Mc&&Rd(e,t)?(e=Dd(),Vi=pc=p0=null,G4=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Id&&t.locale!=="ko"?null:t.data;default:return null}}var Wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wx[e.type]:t==="textarea"}function Nd(e,t,a,r){Md(r),t=Ii(t,"onChange"),0<t.length&&(a=new fc("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Gr=null,nn=null;function Gx(e){Jd(e,0)}function rh(e){var t=X4(e);if(vd(t))return e}function qx(e,t){if(e==="change")return t}var Fd=!1;Ue&&(Ue?(si="oninput"in document,si||(Ql=document.createElement("div"),Ql.setAttribute("oninput","return;"),si=typeof Ql.oninput=="function"),ci=si):ci=!1,Fd=ci&&(!document.documentMode||9<document.documentMode));var ci,si,Ql;function M8(){Gr&&(Gr.detachEvent("onpropertychange",Ud),nn=Gr=null)}function Ud(e){if(e.propertyName==="value"&&rh(nn)){var t=[];Nd(t,nn,e,sc(e)),Vd(Gx,t)}}function Kx(e,t,a){e==="focusin"?(M8(),Gr=t,nn=a,Gr.attachEvent("onpropertychange",Ud)):e==="focusout"&&M8()}function Xx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rh(nn)}function Yx(e,t){if(e==="click")return rh(t)}function Qx(e,t){if(e==="input"||e==="change")return rh(t)}function Jx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ae=typeof Object.is=="function"?Object.is:Jx;function hn(e,t){if(ae(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var n=a[r];if(!vo.call(t,n)||!ae(e[n],t[n]))return!1}return!0}function m8(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function H8(e,t){var a=m8(e);e=0;for(var r;a;){if(a.nodeType===3){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=m8(a)}}function $d(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$d(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wd(){for(var e=window,t=bi();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=bi(e.document)}return t}function mc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zx(e){var t=Wd(),a=e.focusedElem,r=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&$d(a.ownerDocument.documentElement,a)){if(r!==null&&mc(a)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=a.textContent.length,i=Math.min(r.start,n);r=r.end===void 0?i:Math.min(r.end,n),!e.extend&&i>r&&(n=r,r=i,i=n),n=H8(a,i);var h=H8(a,r);n&&h&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tV=Ue&&"documentMode"in document&&11>=document.documentMode,q4=null,bo=null,qr=null,Oo=!1;function x8(e,t,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oo||q4==null||q4!==bi(r)||(r=q4,"selectionStart"in r&&mc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qr&&hn(qr,r)||(qr=r,r=Ii(bo,"onSelect"),0<r.length&&(t=new fc("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=q4)))}function vi(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var K4={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},Jl={},Gd={};Ue&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete K4.animationend.animation,delete K4.animationiteration.animation,delete K4.animationstart.animation),"TransitionEvent"in window||delete K4.transitionend.transition);function nh(e){if(Jl[e])return Jl[e];if(!K4[e])return e;var t=K4[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Gd)return Jl[e]=t[a];return e}var qd=nh("animationend"),Kd=nh("animationiteration"),Xd=nh("animationstart"),Yd=nh("transitionend"),Qd=new Map,V8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function C0(e,t){Qd.set(e,t),v4(t,[e])}for(di=0;di<V8.length;di++)ui=V8[di],w8=ui.toLowerCase(),L8=ui[0].toUpperCase()+ui.slice(1),C0(w8,"on"+L8);var ui,w8,L8,di;C0(qd,"onAnimationEnd");C0(Kd,"onAnimationIteration");C0(Xd,"onAnimationStart");C0("dblclick","onDoubleClick");C0("focusin","onFocus");C0("focusout","onBlur");C0(Yd,"onTransitionEnd");oa("onMouseEnter",["mouseout","mouseover"]);oa("onMouseLeave",["mouseout","mouseover"]);oa("onPointerEnter",["pointerout","pointerover"]);oa("onPointerLeave",["pointerout","pointerover"]);v4("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));v4("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));v4("onBeforeInput",["compositionend","keypress","textInput","paste"]);v4("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));v4("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));v4("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function y8(e,t,a){var r=e.type||"unknown-event";e.currentTarget=a,ex(r,t,void 0,e),e.currentTarget=null}function Jd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var r=e[a],n=r.event;r=r.listeners;t:{var i=void 0;if(t)for(var h=r.length-1;0<=h;h--){var l=r[h],c=l.instance,v=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break t;y8(n,l,v),i=c}else for(h=0;h<r.length;h++){if(l=r[h],c=l.instance,v=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break t;y8(n,l,v),i=c}}}if(Ai)throw e=Co,Ai=!1,Co=null,e}function Z1(e,t){var a=t[Do];a===void 0&&(a=t[Do]=new Set);var r=e+"__bubble";a.has(r)||(Zd(t,e,2,!1),a.add(r))}function Zl(e,t,a){var r=0;t&&(r|=4),Zd(a,e,r,t)}var gi="_reactListening"+Math.random().toString(36).slice(2);function ln(e){if(!e[gi]){e[gi]=!0,hd.forEach(function(a){a!=="selectionchange"&&(eV.has(a)||Zl(a,!1,e),Zl(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gi]||(t[gi]=!0,Zl("selectionchange",!1,t))}}function Zd(e,t,a,r){switch(Pd(t)){case 1:var n=zx;break;case 4:n=Mx;break;default:n=gc}a=n.bind(null,t,a,e),n=void 0,!Bo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function to(e,t,a,r,n){var i=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var l=r.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(h===4)for(h=r.return;h!==null;){var c=h.tag;if((c===3||c===4)&&(c=h.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;h=h.return}for(;l!==null;){if(h=e4(l),h===null)return;if(c=h.tag,c===5||c===6){r=i=h;continue t}l=l.parentNode}}r=r.return}Vd(function(){var v=i,g=sc(a),z=[];t:{var w=Qd.get(e);if(w!==void 0){var L=fc,V=e;switch(e){case"keypress":if(wi(a)===0)break t;case"keydown":case"keyup":L=Ax;break;case"focusin":V="focus",L=Yl;break;case"focusout":V="blur",L=Yl;break;case"beforeblur":case"afterblur":L=Yl;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=d8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=xx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Px;break;case qd:case Kd:case Xd:L=Lx;break;case Yd:L=Ix;break;case"scroll":L=mx;break;case"wheel":L=jx;break;case"copy":case"cut":case"paste":L=Bx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=g8}var b=(t&4)!==0,k=!b&&e==="scroll",m=b?w!==null?w+"Capture":null:w;b=[];for(var H=v,y;H!==null;){y=H;var B=y.stateNode;if(y.tag===5&&B!==null&&(y=B,m!==null&&(B=tn(H,m),B!=null&&b.push(on(H,B,y)))),k)break;H=H.return}0<b.length&&(w=new L(w,V,null,a,g),z.push({event:w,listeners:b}))}}if(!(t&7)){t:{if(w=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",w&&a!==Lo&&(V=a.relatedTarget||a.fromElement)&&(e4(V)||V[$e]))break t;if((L||w)&&(w=g.window===g?g:(w=g.ownerDocument)?w.defaultView||w.parentWindow:window,L?(V=a.relatedTarget||a.toElement,L=v,V=V?e4(V):null,V!==null&&(k=d4(V),V!==k||V.tag!==5&&V.tag!==6)&&(V=null)):(L=null,V=v),L!==V)){if(b=d8,B="onMouseLeave",m="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(b=g8,B="onPointerLeave",m="onPointerEnter",H="pointer"),k=L==null?w:X4(L),y=V==null?w:X4(V),w=new b(B,H+"leave",L,a,g),w.target=k,w.relatedTarget=y,B=null,e4(g)===v&&(b=new b(m,H+"enter",V,a,g),b.target=y,b.relatedTarget=k,B=b),k=B,L&&V)e:{for(b=L,m=V,H=0,y=b;y;y=U4(y))H++;for(y=0,B=m;B;B=U4(B))y++;for(;0<H-y;)b=U4(b),H--;for(;0<y-H;)m=U4(m),y--;for(;H--;){if(b===m||m!==null&&b===m.alternate)break e;b=U4(b),m=U4(m)}b=null}else b=null;L!==null&&B8(z,w,L,b,!1),V!==null&&k!==null&&B8(z,k,V,b,!0)}}t:{if(w=v?X4(v):window,L=w.nodeName&&w.nodeName.toLowerCase(),L==="select"||L==="input"&&w.type==="file")var _=qx;else if(z8(w))if(Fd)_=Qx;else{_=Xx;var j=Kx}else(L=w.nodeName)&&L.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(_=Yx);if(_&&(_=_(e,v))){Nd(z,_,a,g);break t}j&&j(e,w,v),e==="focusout"&&(j=w._wrapperState)&&j.controlled&&w.type==="number"&&mo(w,"number",w.value)}switch(j=v?X4(v):window,e){case"focusin":(z8(j)||j.contentEditable==="true")&&(q4=j,bo=v,qr=null);break;case"focusout":qr=bo=q4=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,x8(z,a,g);break;case"selectionchange":if(tV)break;case"keydown":case"keyup":x8(z,a,g)}var U;if(Mc)t:{switch(e){case"compositionstart":var q="onCompositionStart";break t;case"compositionend":q="onCompositionEnd";break t;case"compositionupdate":q="onCompositionUpdate";break t}q=void 0}else G4?Rd(e,a)&&(q="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(q="onCompositionStart");q&&(Id&&a.locale!=="ko"&&(G4||q!=="onCompositionStart"?q==="onCompositionEnd"&&G4&&(U=Dd()):(p0=g,pc="value"in p0?p0.value:p0.textContent,G4=!0)),j=Ii(v,q),0<j.length&&(q=new u8(q,e,null,a,g),z.push({event:q,listeners:j}),U?q.data=U:(U=jd(a),U!==null&&(q.data=U)))),(U=Fx?Ux(e,a):$x(e,a))&&(v=Ii(v,"onBeforeInput"),0<v.length&&(g=new u8("onBeforeInput","beforeinput",null,a,g),z.push({event:g,listeners:v}),g.data=U))}Jd(z,t)})}function on(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ii(e,t){for(var a=t+"Capture",r=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=tn(e,a),i!=null&&r.unshift(on(e,i,n)),i=tn(e,t),i!=null&&r.push(on(e,i,n))),e=e.return}return r}function U4(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function B8(e,t,a,r,n){for(var i=t._reactName,h=[];a!==null&&a!==r;){var l=a,c=l.alternate,v=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&v!==null&&(l=v,n?(c=tn(a,i),c!=null&&h.unshift(on(a,c,l))):n||(c=tn(a,i),c!=null&&h.push(on(a,c,l)))),a=a.return}h.length!==0&&e.push({event:t,listeners:h})}var aV=/\r\n?/g,rV=/\u0000|\uFFFD/g;function C8(e){return(typeof e=="string"?e:""+e).replace(aV,`
`).replace(rV,"")}function pi(e,t,a){if(t=C8(t),C8(e)!==t&&a)throw Error(e1(425))}function Ri(){}var Ao=null,Eo=null;function ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Po=typeof setTimeout=="function"?setTimeout:void 0,nV=typeof clearTimeout=="function"?clearTimeout:void 0,S8=typeof Promise=="function"?Promise:void 0,iV=typeof queueMicrotask=="function"?queueMicrotask:typeof S8<"u"?function(e){return S8.resolve(null).then(e).catch(hV)}:Po;function hV(e){setTimeout(function(){throw e})}function eo(e,t){var a=t,r=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){e.removeChild(n),rn(t);return}r--}else a!=="$"&&a!=="$?"&&a!=="$!"||r++;a=n}while(a);rn(t)}function H0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _8(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),me="__reactFiber$"+fa,cn="__reactProps$"+fa,$e="__reactContainer$"+fa,Do="__reactEvents$"+fa,lV="__reactListeners$"+fa,oV="__reactHandles$"+fa;function e4(e){var t=e[me];if(t)return t;for(var a=e.parentNode;a;){if(t=a[$e]||a[me]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=_8(e);e!==null;){if(a=e[me])return a;e=_8(e)}return t}e=a,a=e.parentNode}return null}function Mn(e){return e=e[me]||e[$e],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function X4(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(e1(33))}function ih(e){return e[cn]||null}var Io=[],Y4=-1;function S0(e){return{current:e}}function tt(e){0>Y4||(e.current=Io[Y4],Io[Y4]=null,Y4--)}function X1(e,t){Y4++,Io[Y4]=e.current,e.current=t}var B0={},It=S0(B0),h2=S0(!1),h4=B0;function ca(e,t){var a=e.type.contextTypes;if(!a)return B0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in a)n[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function l2(e){return e=e.childContextTypes,e!=null}function ji(){tt(h2),tt(It)}function T8(e,t,a){if(It.current!==B0)throw Error(e1(168));X1(It,t),X1(h2,a)}function t7(e,t,a){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return a;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(e1(108,KH(e)||"Unknown",n));return lt({},a,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||B0,h4=It.current,X1(It,e),X1(h2,h2.current),!0}function b8(e,t,a){var r=e.stateNode;if(!r)throw Error(e1(169));a?(e=t7(e,t,h4),r.__reactInternalMemoizedMergedChildContext=e,tt(h2),tt(It),X1(It,e)):tt(h2),X1(h2,a)}var Re=null,hh=!1,ao=!1;function e7(e){Re===null?Re=[e]:Re.push(e)}function cV(e){hh=!0,e7(e)}function _0(){if(!ao&&Re!==null){ao=!0;var e=0,t=N1;try{var a=Re;for(N1=1;e<a.length;e++){var r=a[e];do r=r(!0);while(r!==null)}Re=null,hh=!1}catch(n){throw Re!==null&&(Re=Re.slice(e+1)),Bd(vc,_0),n}finally{N1=t,ao=!1}}return null}var Q4=[],J4=0,Fi=null,Ui=0,T2=[],b2=0,l4=null,je=1,Ne="";function Z0(e,t){Q4[J4++]=Ui,Q4[J4++]=Fi,Fi=e,Ui=t}function a7(e,t,a){T2[b2++]=je,T2[b2++]=Ne,T2[b2++]=l4,l4=e;var r=je;e=Ne;var n=32-te(r)-1;r&=~(1<<n),a+=1;var i=32-te(t)+n;if(30<i){var h=n-n%5;i=(r&(1<<h)-1).toString(32),r>>=h,n-=h,je=1<<32-te(t)+n|a<<n|r,Ne=i+e}else je=1<<i|a<<n|r,Ne=e}function Hc(e){e.return!==null&&(Z0(e,1),a7(e,1,0))}function xc(e){for(;e===Fi;)Fi=Q4[--J4],Q4[J4]=null,Ui=Q4[--J4],Q4[J4]=null;for(;e===l4;)l4=T2[--b2],T2[b2]=null,Ne=T2[--b2],T2[b2]=null,je=T2[--b2],T2[b2]=null}var M2=null,z2=null,nt=!1,Z2=null;function r7(e,t){var a=O2(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function O8(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,M2=e,z2=H0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,M2=e,z2=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=l4!==null?{id:je,overflow:Ne}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=O2(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,M2=e,z2=null,!0):!1;default:return!1}}function Ro(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jo(e){if(nt){var t=z2;if(t){var a=t;if(!O8(e,t)){if(Ro(e))throw Error(e1(418));t=H0(a.nextSibling);var r=M2;t&&O8(e,t)?r7(r,a):(e.flags=e.flags&-4097|2,nt=!1,M2=e)}}else{if(Ro(e))throw Error(e1(418));e.flags=e.flags&-4097|2,nt=!1,M2=e}}}function A8(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;M2=e}function fi(e){if(e!==M2)return!1;if(!nt)return A8(e),nt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ko(e.type,e.memoizedProps)),t&&(t=z2)){if(Ro(e))throw n7(),Error(e1(418));for(;t;)r7(e,t),t=H0(t.nextSibling)}if(A8(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(e1(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){z2=H0(e.nextSibling);break t}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}z2=null}}else z2=M2?H0(e.stateNode.nextSibling):null;return!0}function n7(){for(var e=z2;e;)e=H0(e.nextSibling)}function sa(){z2=M2=null,nt=!1}function Vc(e){Z2===null?Z2=[e]:Z2.push(e)}var sV=qe.ReactCurrentBatchConfig;function Q2(e,t){if(e&&e.defaultProps){t=lt({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}var $i=S0(null),Wi=null,Z4=null,wc=null;function Lc(){wc=Z4=Wi=null}function yc(e){var t=$i.current;tt($i),e._currentValue=t}function No(e,t,a){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function ha(e,t){Wi=e,wc=Z4=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(i2=!0),e.firstContext=null)}function E2(e){var t=e._currentValue;if(wc!==e)if(e={context:e,memoizedValue:t,next:null},Z4===null){if(Wi===null)throw Error(e1(308));Z4=e,Wi.dependencies={lanes:0,firstContext:e}}else Z4=Z4.next=e;return t}var a4=null;function Bc(e){a4===null?a4=[e]:a4.push(e)}function i7(e,t,a,r){var n=t.interleaved;return n===null?(a.next=a,Bc(t)):(a.next=n.next,n.next=a),t.interleaved=a,We(e,r)}function We(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var d0=!1;function Cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fe(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function x0(e,t,a){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,E1&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,We(e,a)}return n=r.interleaved,n===null?(t.next=t,Bc(r)):(t.next=n.next,n.next=t),r.interleaved=t,We(e,a)}function Li(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,dc(e,a)}}function E8(e,t){var a=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var n=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var h={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};i===null?n=i=h:i=i.next=h,a=a.next}while(a!==null);i===null?n=i=t:i=i.next=t}else n=i=t;a={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Gi(e,t,a,r){var n=e.updateQueue;d0=!1;var i=n.firstBaseUpdate,h=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,v=c.next;c.next=null,h===null?i=v:h.next=v,h=c;var g=e.alternate;g!==null&&(g=g.updateQueue,l=g.lastBaseUpdate,l!==h&&(l===null?g.firstBaseUpdate=v:l.next=v,g.lastBaseUpdate=c))}if(i!==null){var z=n.baseState;h=0,g=v=c=null,l=i;do{var w=l.lane,L=l.eventTime;if((r&w)===w){g!==null&&(g=g.next={eventTime:L,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var V=e,b=l;switch(w=t,L=a,b.tag){case 1:if(V=b.payload,typeof V=="function"){z=V.call(L,z,w);break t}z=V;break t;case 3:V.flags=V.flags&-65537|128;case 0:if(V=b.payload,w=typeof V=="function"?V.call(L,z,w):V,w==null)break t;z=lt({},z,w);break t;case 2:d0=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,w=n.effects,w===null?n.effects=[l]:w.push(l))}else L={eventTime:L,lane:w,tag:l.tag,payload:l.payload,callback:l.callback,next:null},g===null?(v=g=L,c=z):g=g.next=L,h|=w;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;w=l,l=w.next,w.next=null,n.lastBaseUpdate=w,n.shared.pending=null}}while(1);if(g===null&&(c=z),n.baseState=c,n.firstBaseUpdate=v,n.lastBaseUpdate=g,t=n.shared.interleaved,t!==null){n=t;do h|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);c4|=h,e.lanes=h,e.memoizedState=z}}function k8(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=a,typeof n!="function")throw Error(e1(191,n));n.call(r)}}}var l7=new id.Component().refs;function Fo(e,t,a,r){t=e.memoizedState,a=a(r,t),a=a==null?t:lt({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var lh={isMounted:function(e){return(e=e._reactInternals)?d4(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var r=qt(),n=w0(e),i=Fe(r,n);i.payload=t,a!=null&&(i.callback=a),t=x0(e,i,n),t!==null&&(ee(t,e,n,r),Li(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=qt(),n=w0(e),i=Fe(r,n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=x0(e,i,n),t!==null&&(ee(t,e,n,r),Li(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=qt(),r=w0(e),n=Fe(a,r);n.tag=2,t!=null&&(n.callback=t),t=x0(e,n,r),t!==null&&(ee(t,e,r,a),Li(t,e,r))}};function P8(e,t,a,r,n,i,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,h):t.prototype&&t.prototype.isPureReactComponent?!hn(a,r)||!hn(n,i):!0}function o7(e,t,a){var r=!1,n=B0,i=t.contextType;return typeof i=="object"&&i!==null?i=E2(i):(n=l2(t)?h4:It.current,r=t.contextTypes,i=(r=r!=null)?ca(e,n):B0),t=new t(a,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function D8(e,t,a,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&lh.enqueueReplaceState(t,t.state,null)}function Uo(e,t,a,r){var n=e.stateNode;n.props=a,n.state=e.memoizedState,n.refs=l7,Cc(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=E2(i):(i=l2(t)?h4:It.current,n.context=ca(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Fo(e,t,i,a),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&lh.enqueueReplaceState(n,n.state,null),Gi(e,a,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function kr(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(e1(309));var r=a.stateNode}if(!r)throw Error(e1(147,e));var n=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(h){var l=n.refs;l===l7&&(l=n.refs={}),h===null?delete l[i]:l[i]=h},t._stringRef=i,t)}if(typeof e!="string")throw Error(e1(284));if(!a._owner)throw Error(e1(290,e))}return e}function zi(e,t){throw e=Object.prototype.toString.call(t),Error(e1(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function I8(e){var t=e._init;return t(e._payload)}function c7(e){function t(m,H){if(e){var y=m.deletions;y===null?(m.deletions=[H],m.flags|=16):y.push(H)}}function a(m,H){if(!e)return null;for(;H!==null;)t(m,H),H=H.sibling;return null}function r(m,H){for(m=new Map;H!==null;)H.key!==null?m.set(H.key,H):m.set(H.index,H),H=H.sibling;return m}function n(m,H){return m=L0(m,H),m.index=0,m.sibling=null,m}function i(m,H,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<H?(m.flags|=2,H):y):(m.flags|=2,H)):(m.flags|=1048576,H)}function h(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,H,y,B){return H===null||H.tag!==6?(H=co(y,m.mode,B),H.return=m,H):(H=n(H,y),H.return=m,H)}function c(m,H,y,B){var _=y.type;return _===W4?g(m,H,y.props.children,B,y.key):H!==null&&(H.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===v0&&I8(_)===H.type)?(B=n(H,y.props),B.ref=kr(m,H,y),B.return=m,B):(B=Ti(y.type,y.key,y.props,null,m.mode,B),B.ref=kr(m,H,y),B.return=m,B)}function v(m,H,y,B){return H===null||H.tag!==4||H.stateNode.containerInfo!==y.containerInfo||H.stateNode.implementation!==y.implementation?(H=so(y,m.mode,B),H.return=m,H):(H=n(H,y.children||[]),H.return=m,H)}function g(m,H,y,B,_){return H===null||H.tag!==7?(H=i4(y,m.mode,B,_),H.return=m,H):(H=n(H,y),H.return=m,H)}function z(m,H,y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=co(""+H,m.mode,y),H.return=m,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ai:return y=Ti(H.type,H.key,H.props,null,m.mode,y),y.ref=kr(m,null,H),y.return=m,y;case $4:return H=so(H,m.mode,y),H.return=m,H;case v0:var B=H._init;return z(m,B(H._payload),y)}if(jr(H)||br(H))return H=i4(H,m.mode,y,null),H.return=m,H;zi(m,H)}return null}function w(m,H,y,B){var _=H!==null?H.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(m,H,""+y,B);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ai:return y.key===_?c(m,H,y,B):null;case $4:return y.key===_?v(m,H,y,B):null;case v0:return _=y._init,w(m,H,_(y._payload),B)}if(jr(y)||br(y))return _!==null?null:g(m,H,y,B,null);zi(m,y)}return null}function L(m,H,y,B,_){if(typeof B=="string"&&B!==""||typeof B=="number")return m=m.get(y)||null,l(H,m,""+B,_);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ai:return m=m.get(B.key===null?y:B.key)||null,c(H,m,B,_);case $4:return m=m.get(B.key===null?y:B.key)||null,v(H,m,B,_);case v0:var j=B._init;return L(m,H,y,j(B._payload),_)}if(jr(B)||br(B))return m=m.get(y)||null,g(H,m,B,_,null);zi(H,B)}return null}function V(m,H,y,B){for(var _=null,j=null,U=H,q=H=0,D=null;U!==null&&q<y.length;q++){U.index>q?(D=U,U=null):D=U.sibling;var J=w(m,U,y[q],B);if(J===null){U===null&&(U=D);break}e&&U&&J.alternate===null&&t(m,U),H=i(J,H,q),j===null?_=J:j.sibling=J,j=J,U=D}if(q===y.length)return a(m,U),nt&&Z0(m,q),_;if(U===null){for(;q<y.length;q++)U=z(m,y[q],B),U!==null&&(H=i(U,H,q),j===null?_=U:j.sibling=U,j=U);return nt&&Z0(m,q),_}for(U=r(m,U);q<y.length;q++)D=L(U,m,q,y[q],B),D!==null&&(e&&D.alternate!==null&&U.delete(D.key===null?q:D.key),H=i(D,H,q),j===null?_=D:j.sibling=D,j=D);return e&&U.forEach(function(t1){return t(m,t1)}),nt&&Z0(m,q),_}function b(m,H,y,B){var _=br(y);if(typeof _!="function")throw Error(e1(150));if(y=_.call(y),y==null)throw Error(e1(151));for(var j=_=null,U=H,q=H=0,D=null,J=y.next();U!==null&&!J.done;q++,J=y.next()){U.index>q?(D=U,U=null):D=U.sibling;var t1=w(m,U,J.value,B);if(t1===null){U===null&&(U=D);break}e&&U&&t1.alternate===null&&t(m,U),H=i(t1,H,q),j===null?_=t1:j.sibling=t1,j=t1,U=D}if(J.done)return a(m,U),nt&&Z0(m,q),_;if(U===null){for(;!J.done;q++,J=y.next())J=z(m,J.value,B),J!==null&&(H=i(J,H,q),j===null?_=J:j.sibling=J,j=J);return nt&&Z0(m,q),_}for(U=r(m,U);!J.done;q++,J=y.next())J=L(U,m,q,J.value,B),J!==null&&(e&&J.alternate!==null&&U.delete(J.key===null?q:J.key),H=i(J,H,q),j===null?_=J:j.sibling=J,j=J);return e&&U.forEach(function(Z){return t(m,Z)}),nt&&Z0(m,q),_}function k(m,H,y,B){if(typeof y=="object"&&y!==null&&y.type===W4&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ai:t:{for(var _=y.key,j=H;j!==null;){if(j.key===_){if(_=y.type,_===W4){if(j.tag===7){a(m,j.sibling),H=n(j,y.props.children),H.return=m,m=H;break t}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===v0&&I8(_)===j.type){a(m,j.sibling),H=n(j,y.props),H.ref=kr(m,j,y),H.return=m,m=H;break t}a(m,j);break}else t(m,j);j=j.sibling}y.type===W4?(H=i4(y.props.children,m.mode,B,y.key),H.return=m,m=H):(B=Ti(y.type,y.key,y.props,null,m.mode,B),B.ref=kr(m,H,y),B.return=m,m=B)}return h(m);case $4:t:{for(j=y.key;H!==null;){if(H.key===j)if(H.tag===4&&H.stateNode.containerInfo===y.containerInfo&&H.stateNode.implementation===y.implementation){a(m,H.sibling),H=n(H,y.children||[]),H.return=m,m=H;break t}else{a(m,H);break}else t(m,H);H=H.sibling}H=so(y,m.mode,B),H.return=m,m=H}return h(m);case v0:return j=y._init,k(m,H,j(y._payload),B)}if(jr(y))return V(m,H,y,B);if(br(y))return b(m,H,y,B);zi(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,H!==null&&H.tag===6?(a(m,H.sibling),H=n(H,y),H.return=m,m=H):(a(m,H),H=co(y,m.mode,B),H.return=m,m=H),h(m)):a(m,H)}return k}var va=c7(!0),s7=c7(!1),mn={},xe=S0(mn),sn=S0(mn),vn=S0(mn);function r4(e){if(e===mn)throw Error(e1(174));return e}function Sc(e,t){switch(X1(vn,t),X1(sn,e),X1(xe,mn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xo(t,e)}tt(xe),X1(xe,t)}function da(){tt(xe),tt(sn),tt(vn)}function v7(e){r4(vn.current);var t=r4(xe.current),a=xo(t,e.type);t!==a&&(X1(sn,e),X1(xe,a))}function _c(e){sn.current===e&&(tt(xe),tt(sn))}var it=S0(0);function qi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ro=[];function Tc(){for(var e=0;e<ro.length;e++)ro[e]._workInProgressVersionPrimary=null;ro.length=0}var yi=qe.ReactCurrentDispatcher,no=qe.ReactCurrentBatchConfig,o4=0,ht=null,Vt=null,Lt=null,Ki=!1,Kr=!1,dn=0,vV=0;function kt(){throw Error(e1(321))}function bc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ae(e[a],t[a]))return!1;return!0}function Oc(e,t,a,r,n,i){if(o4=i,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yi.current=e===null||e.memoizedState===null?pV:fV,e=a(r,n),Kr){i=0;do{if(Kr=!1,dn=0,25<=i)throw Error(e1(301));i+=1,Lt=Vt=null,t.updateQueue=null,yi.current=zV,e=a(r,n)}while(Kr)}if(yi.current=Xi,t=Vt!==null&&Vt.next!==null,o4=0,Lt=Vt=ht=null,Ki=!1,t)throw Error(e1(300));return e}function Ac(){var e=dn!==0;return dn=0,e}function Me(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ht.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function k2(){if(Vt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Lt===null?ht.memoizedState:Lt.next;if(t!==null)Lt=t,Vt=e;else{if(e===null)throw Error(e1(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Lt===null?ht.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function un(e,t){return typeof t=="function"?t(e):t}function io(e){var t=k2(),a=t.queue;if(a===null)throw Error(e1(311));a.lastRenderedReducer=e;var r=Vt,n=r.baseQueue,i=a.pending;if(i!==null){if(n!==null){var h=n.next;n.next=i.next,i.next=h}r.baseQueue=n=i,a.pending=null}if(n!==null){i=n.next,r=r.baseState;var l=h=null,c=null,v=i;do{var g=v.lane;if((o4&g)===g)c!==null&&(c=c.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:e(r,v.action);else{var z={lane:g,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};c===null?(l=c=z,h=r):c=c.next=z,ht.lanes|=g,c4|=g}v=v.next}while(v!==null&&v!==i);c===null?h=r:c.next=l,ae(r,t.memoizedState)||(i2=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=c,a.lastRenderedState=r}if(e=a.interleaved,e!==null){n=e;do i=n.lane,ht.lanes|=i,c4|=i,n=n.next;while(n!==e)}else n===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function ho(e){var t=k2(),a=t.queue;if(a===null)throw Error(e1(311));a.lastRenderedReducer=e;var r=a.dispatch,n=a.pending,i=t.memoizedState;if(n!==null){a.pending=null;var h=n=n.next;do i=e(i,h.action),h=h.next;while(h!==n);ae(i,t.memoizedState)||(i2=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,r]}function d7(){}function u7(e,t){var a=ht,r=k2(),n=t(),i=!ae(r.memoizedState,n);if(i&&(r.memoizedState=n,i2=!0),r=r.queue,Ec(f7.bind(null,a,r,e),[e]),r.getSnapshot!==t||i||Lt!==null&&Lt.memoizedState.tag&1){if(a.flags|=2048,gn(9,p7.bind(null,a,r,n,t),void 0,null),yt===null)throw Error(e1(349));o4&30||g7(a,t,n)}return n}function g7(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function p7(e,t,a,r){t.value=a,t.getSnapshot=r,z7(t)&&M7(e)}function f7(e,t,a){return a(function(){z7(t)&&M7(e)})}function z7(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ae(e,a)}catch{return!0}}function M7(e){var t=We(e,1);t!==null&&ee(t,e,1,-1)}function R8(e){var t=Me();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:e},t.queue=e,e=e.dispatch=gV.bind(null,ht,e),[t.memoizedState,e]}function gn(e,t,a,r){return e={tag:e,create:t,destroy:a,deps:r,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e)),e}function m7(){return k2().memoizedState}function Bi(e,t,a,r){var n=Me();ht.flags|=e,n.memoizedState=gn(1|t,a,void 0,r===void 0?null:r)}function oh(e,t,a,r){var n=k2();r=r===void 0?null:r;var i=void 0;if(Vt!==null){var h=Vt.memoizedState;if(i=h.destroy,r!==null&&bc(r,h.deps)){n.memoizedState=gn(t,a,i,r);return}}ht.flags|=e,n.memoizedState=gn(1|t,a,i,r)}function j8(e,t){return Bi(8390656,8,e,t)}function Ec(e,t){return oh(2048,8,e,t)}function H7(e,t){return oh(4,2,e,t)}function x7(e,t){return oh(4,4,e,t)}function V7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function w7(e,t,a){return a=a!=null?a.concat([e]):null,oh(4,4,V7.bind(null,t,e),a)}function kc(){}function L7(e,t){var a=k2();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&bc(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function y7(e,t){var a=k2();t=t===void 0?null:t;var r=a.memoizedState;return r!==null&&t!==null&&bc(t,r[1])?r[0]:(e=e(),a.memoizedState=[e,t],e)}function B7(e,t,a){return o4&21?(ae(a,t)||(a=_d(),ht.lanes|=a,c4|=a,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,i2=!0),e.memoizedState=a)}function dV(e,t){var a=N1;N1=a!==0&&4>a?a:4,e(!0);var r=no.transition;no.transition={};try{e(!1),t()}finally{N1=a,no.transition=r}}function C7(){return k2().memoizedState}function uV(e,t,a){var r=w0(e);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},S7(e))_7(t,a);else if(a=i7(e,t,a,r),a!==null){var n=qt();ee(a,e,r,n),T7(a,t,r)}}function gV(e,t,a){var r=w0(e),n={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(S7(e))_7(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var h=t.lastRenderedState,l=i(h,a);if(n.hasEagerState=!0,n.eagerState=l,ae(l,h)){var c=t.interleaved;c===null?(n.next=n,Bc(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}a=i7(e,t,n,r),a!==null&&(n=qt(),ee(a,e,r,n),T7(a,t,r))}}function S7(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function _7(e,t){Kr=Ki=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function T7(e,t,a){if(a&4194240){var r=t.lanes;r&=e.pendingLanes,a|=r,t.lanes=a,dc(e,a)}}var Xi={readContext:E2,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},pV={readContext:E2,useCallback:function(e,t){return Me().memoizedState=[e,t===void 0?null:t],e},useContext:E2,useEffect:j8,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,Bi(4194308,4,V7.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bi(4,2,e,t)},useMemo:function(e,t){var a=Me();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var r=Me();return t=a!==void 0?a(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uV.bind(null,ht,e),[r.memoizedState,e]},useRef:function(e){var t=Me();return e={current:e},t.memoizedState=e},useState:R8,useDebugValue:kc,useDeferredValue:function(e){return Me().memoizedState=e},useTransition:function(){var e=R8(!1),t=e[0];return e=dV.bind(null,e[1]),Me().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var r=ht,n=Me();if(nt){if(a===void 0)throw Error(e1(407));a=a()}else{if(a=t(),yt===null)throw Error(e1(349));o4&30||g7(r,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,j8(f7.bind(null,r,i,e),[e]),r.flags|=2048,gn(9,p7.bind(null,r,i,a,t),void 0,null),a},useId:function(){var e=Me(),t=yt.identifierPrefix;if(nt){var a=Ne,r=je;a=(r&~(1<<32-te(r)-1)).toString(32)+a,t=":"+t+"R"+a,a=dn++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=vV++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fV={readContext:E2,useCallback:L7,useContext:E2,useEffect:Ec,useImperativeHandle:w7,useInsertionEffect:H7,useLayoutEffect:x7,useMemo:y7,useReducer:io,useRef:m7,useState:function(){return io(un)},useDebugValue:kc,useDeferredValue:function(e){var t=k2();return B7(t,Vt.memoizedState,e)},useTransition:function(){var e=io(un)[0],t=k2().memoizedState;return[e,t]},useMutableSource:d7,useSyncExternalStore:u7,useId:C7,unstable_isNewReconciler:!1},zV={readContext:E2,useCallback:L7,useContext:E2,useEffect:Ec,useImperativeHandle:w7,useInsertionEffect:H7,useLayoutEffect:x7,useMemo:y7,useReducer:ho,useRef:m7,useState:function(){return ho(un)},useDebugValue:kc,useDeferredValue:function(e){var t=k2();return Vt===null?t.memoizedState=e:B7(t,Vt.memoizedState,e)},useTransition:function(){var e=ho(un)[0],t=k2().memoizedState;return[e,t]},useMutableSource:d7,useSyncExternalStore:u7,useId:C7,unstable_isNewReconciler:!1};function ua(e,t){try{var a="",r=t;do a+=qH(r),r=r.return;while(r);var n=a}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function lo(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function $o(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var MV=typeof WeakMap=="function"?WeakMap:Map;function b7(e,t,a){a=Fe(-1,a),a.tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){Qi||(Qi=!0,tc=r),$o(e,t)},a}function O7(e,t,a){a=Fe(-1,a),a.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;a.payload=function(){return r(n)},a.callback=function(){$o(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(a.callback=function(){$o(e,t),typeof r!="function"&&(V0===null?V0=new Set([this]):V0.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),a}function N8(e,t,a){var r=e.pingCache;if(r===null){r=e.pingCache=new MV;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(a)||(n.add(a),e=OV.bind(null,e,t,a),t.then(e,e))}function F8(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function U8(e,t,a,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Fe(-1,1),t.tag=2,x0(a,t,1))),a.lanes|=1),e)}var mV=qe.ReactCurrentOwner,i2=!1;function Gt(e,t,a,r){t.child=e===null?s7(t,null,a,r):va(t,e.child,a,r)}function $8(e,t,a,r,n){a=a.render;var i=t.ref;return ha(t,n),r=Oc(e,t,a,r,i,n),a=Ac(),e!==null&&!i2?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ge(e,t,n)):(nt&&a&&Hc(t),t.flags|=1,Gt(e,t,r,n),t.child)}function W8(e,t,a,r,n){if(e===null){var i=a.type;return typeof i=="function"&&!Uc(i)&&i.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=i,A7(e,t,i,r,n)):(e=Ti(a.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var h=i.memoizedProps;if(a=a.compare,a=a!==null?a:hn,a(h,r)&&e.ref===t.ref)return Ge(e,t,n)}return t.flags|=1,e=L0(i,r),e.ref=t.ref,e.return=t,t.child=e}function A7(e,t,a,r,n){if(e!==null){var i=e.memoizedProps;if(hn(i,r)&&e.ref===t.ref)if(i2=!1,t.pendingProps=r=i,(e.lanes&n)!==0)e.flags&131072&&(i2=!0);else return t.lanes=e.lanes,Ge(e,t,n)}return Wo(e,t,a,r,n)}function E7(e,t,a){var r=t.pendingProps,n=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},X1(ea,f2),f2|=a;else{if(!(a&1073741824))return e=i!==null?i.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,X1(ea,f2),f2|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:a,X1(ea,f2),f2|=r}else i!==null?(r=i.baseLanes|a,t.memoizedState=null):r=a,X1(ea,f2),f2|=r;return Gt(e,t,n,a),t.child}function k7(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function Wo(e,t,a,r,n){var i=l2(a)?h4:It.current;return i=ca(t,i),ha(t,n),a=Oc(e,t,a,r,i,n),r=Ac(),e!==null&&!i2?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ge(e,t,n)):(nt&&r&&Hc(t),t.flags|=1,Gt(e,t,a,n),t.child)}function G8(e,t,a,r,n){if(l2(a)){var i=!0;Ni(t)}else i=!1;if(ha(t,n),t.stateNode===null)Ci(e,t),o7(t,a,r),Uo(t,a,r,n),r=!0;else if(e===null){var h=t.stateNode,l=t.memoizedProps;h.props=l;var c=h.context,v=a.contextType;typeof v=="object"&&v!==null?v=E2(v):(v=l2(a)?h4:It.current,v=ca(t,v));var g=a.getDerivedStateFromProps,z=typeof g=="function"||typeof h.getSnapshotBeforeUpdate=="function";z||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==r||c!==v)&&D8(t,h,r,v),d0=!1;var w=t.memoizedState;h.state=w,Gi(t,r,h,n),c=t.memoizedState,l!==r||w!==c||h2.current||d0?(typeof g=="function"&&(Fo(t,a,g,r),c=t.memoizedState),(l=d0||P8(t,a,l,r,w,c,v))?(z||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),h.props=r,h.state=c,h.context=v,r=l):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,h7(e,t),l=t.memoizedProps,v=t.type===t.elementType?l:Q2(t.type,l),h.props=v,z=t.pendingProps,w=h.context,c=a.contextType,typeof c=="object"&&c!==null?c=E2(c):(c=l2(a)?h4:It.current,c=ca(t,c));var L=a.getDerivedStateFromProps;(g=typeof L=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==z||w!==c)&&D8(t,h,r,c),d0=!1,w=t.memoizedState,h.state=w,Gi(t,r,h,n);var V=t.memoizedState;l!==z||w!==V||h2.current||d0?(typeof L=="function"&&(Fo(t,a,L,r),V=t.memoizedState),(v=d0||P8(t,a,v,r,w,V,c)||!1)?(g||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,V,c),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,V,c)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=V),h.props=r,h.state=V,h.context=c,r=v):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return Go(e,t,a,r,i,n)}function Go(e,t,a,r,n,i){k7(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return n&&b8(t,a,!1),Ge(e,t,i);r=t.stateNode,mV.current=t;var l=h&&typeof a.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=va(t,e.child,null,i),t.child=va(t,null,l,i)):Gt(e,t,l,i),t.memoizedState=r.state,n&&b8(t,a,!0),t.child}function P7(e){var t=e.stateNode;t.pendingContext?T8(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T8(e,t.context,!1),Sc(e,t.containerInfo)}function q8(e,t,a,r,n){return sa(),Vc(n),t.flags|=256,Gt(e,t,a,r),t.child}var qo={dehydrated:null,treeContext:null,retryLane:0};function Ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function D7(e,t,a){var r=t.pendingProps,n=it.current,i=!1,h=(t.flags&128)!==0,l;if((l=h)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),X1(it,n&1),e===null)return jo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=r.children,e=r.fallback,i?(r=t.mode,i=t.child,h={mode:"hidden",children:h},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=h):i=vh(h,r,0,null),e=i4(e,r,a,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ko(a),t.memoizedState=qo,e):Pc(t,h));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return HV(e,t,h,r,l,n,a);if(i){i=r.fallback,h=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:r.children};return!(h&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=L0(n,c),r.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=L0(l,i):(i=i4(i,h,a,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,h=e.child.memoizedState,h=h===null?Ko(a):{baseLanes:h.baseLanes|a,cachePool:null,transitions:h.transitions},i.memoizedState=h,i.childLanes=e.childLanes&~a,t.memoizedState=qo,r}return i=e.child,e=i.sibling,r=L0(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=a),r.return=t,r.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=r,t.memoizedState=null,r}function Pc(e,t){return t=vh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mi(e,t,a,r){return r!==null&&Vc(r),va(t,e.child,null,a),e=Pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function HV(e,t,a,r,n,i,h){if(a)return t.flags&256?(t.flags&=-257,r=lo(Error(e1(422))),Mi(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,n=t.mode,r=vh({mode:"visible",children:r.children},n,0,null),i=i4(i,n,h,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&va(t,e.child,null,h),t.child.memoizedState=Ko(h),t.memoizedState=qo,i);if(!(t.mode&1))return Mi(e,t,h,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(e1(419)),r=lo(i,r,void 0),Mi(e,t,h,r)}if(l=(h&e.childLanes)!==0,i2||l){if(r=yt,r!==null){switch(h&-h){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|h)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,We(e,n),ee(r,e,n,-1))}return Fc(),r=lo(Error(e1(421))),Mi(e,t,h,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=AV.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,z2=H0(n.nextSibling),M2=t,nt=!0,Z2=null,e!==null&&(T2[b2++]=je,T2[b2++]=Ne,T2[b2++]=l4,je=e.id,Ne=e.overflow,l4=t),t=Pc(t,r.children),t.flags|=4096,t)}function K8(e,t,a){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),No(e.return,t,a)}function oo(e,t,a,r,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=a,i.tailMode=n)}function I7(e,t,a){var r=t.pendingProps,n=r.revealOrder,i=r.tail;if(Gt(e,t,r.children,a),r=it.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&K8(e,a,t);else if(e.tag===19)K8(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(X1(it,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&qi(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),oo(t,!1,n,a,i);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&qi(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}oo(t,!0,a,null,i);break;case"together":oo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ge(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),c4|=t.lanes,!(a&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(e1(153));if(t.child!==null){for(e=t.child,a=L0(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=L0(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function xV(e,t,a){switch(t.tag){case 3:P7(t),sa();break;case 5:v7(t);break;case 1:l2(t.type)&&Ni(t);break;case 4:Sc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;X1($i,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(X1(it,it.current&1),t.flags|=128,null):a&t.child.childLanes?D7(e,t,a):(X1(it,it.current&1),e=Ge(e,t,a),e!==null?e.sibling:null);X1(it,it.current&1);break;case 19:if(r=(a&t.childLanes)!==0,e.flags&128){if(r)return I7(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),X1(it,it.current),r)break;return null;case 22:case 23:return t.lanes=0,E7(e,t,a)}return Ge(e,t,a)}var R7,Xo,j7,N7;R7=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Xo=function(){};j7=function(e,t,a,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,r4(xe.current);var i=null;switch(a){case"input":n=zo(e,n),r=zo(e,r),i=[];break;case"select":n=lt({},n,{value:void 0}),r=lt({},r,{value:void 0}),i=[];break;case"textarea":n=Ho(e,n),r=Ho(e,r),i=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ri)}Vo(a,r);var h;a=null;for(v in n)if(!r.hasOwnProperty(v)&&n.hasOwnProperty(v)&&n[v]!=null)if(v==="style"){var l=n[v];for(h in l)l.hasOwnProperty(h)&&(a||(a={}),a[h]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(Jr.hasOwnProperty(v)?i||(i=[]):(i=i||[]).push(v,null));for(v in r){var c=r[v];if(l=n?.[v],r.hasOwnProperty(v)&&c!==l&&(c!=null||l!=null))if(v==="style")if(l){for(h in l)!l.hasOwnProperty(h)||c&&c.hasOwnProperty(h)||(a||(a={}),a[h]="");for(h in c)c.hasOwnProperty(h)&&l[h]!==c[h]&&(a||(a={}),a[h]=c[h])}else a||(i||(i=[]),i.push(v,a)),a=c;else v==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(v,c)):v==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(v,""+c):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(v)?(c!=null&&v==="onScroll"&&Z1("scroll",e),i||l===c||(i=[])):(i=i||[]).push(v,c))}a&&(i=i||[]).push("style",a);var v=i;(t.updateQueue=v)&&(t.flags|=4)}};N7=function(e,t,a,r){a!==r&&(t.flags|=4)};function Pr(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,r=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function VV(e,t,a){var r=t.pendingProps;switch(xc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(t),null;case 1:return l2(t.type)&&ji(),Pt(t),null;case 3:return r=t.stateNode,da(),tt(h2),tt(It),Tc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Z2!==null&&(rc(Z2),Z2=null))),Xo(e,t),Pt(t),null;case 5:_c(t);var n=r4(vn.current);if(a=t.type,e!==null&&t.stateNode!=null)j7(e,t,a,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(e1(166));return Pt(t),null}if(e=r4(xe.current),fi(t)){r=t.stateNode,a=t.type;var i=t.memoizedProps;switch(r[me]=t,r[cn]=i,e=(t.mode&1)!==0,a){case"dialog":Z1("cancel",r),Z1("close",r);break;case"iframe":case"object":case"embed":Z1("load",r);break;case"video":case"audio":for(n=0;n<Fr.length;n++)Z1(Fr[n],r);break;case"source":Z1("error",r);break;case"img":case"image":case"link":Z1("error",r),Z1("load",r);break;case"details":Z1("toggle",r);break;case"input":a8(r,i),Z1("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Z1("invalid",r);break;case"textarea":n8(r,i),Z1("invalid",r)}Vo(a,i),n=null;for(var h in i)if(i.hasOwnProperty(h)){var l=i[h];h==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&pi(r.textContent,l,e),n=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&pi(r.textContent,l,e),n=["children",""+l]):Jr.hasOwnProperty(h)&&l!=null&&h==="onScroll"&&Z1("scroll",r)}switch(a){case"input":ri(r),r8(r,i,!0);break;case"textarea":ri(r),i8(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ri)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gd(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(a,{is:r.is}):(e=h.createElement(a),a==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,a),e[me]=t,e[cn]=r,R7(e,t,!1,!1),t.stateNode=e;t:{switch(h=wo(a,r),a){case"dialog":Z1("cancel",e),Z1("close",e),n=r;break;case"iframe":case"object":case"embed":Z1("load",e),n=r;break;case"video":case"audio":for(n=0;n<Fr.length;n++)Z1(Fr[n],e);n=r;break;case"source":Z1("error",e),n=r;break;case"img":case"image":case"link":Z1("error",e),Z1("load",e),n=r;break;case"details":Z1("toggle",e),n=r;break;case"input":a8(e,r),n=zo(e,r),Z1("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=lt({},r,{value:void 0}),Z1("invalid",e);break;case"textarea":n8(e,r),n=Ho(e,r),Z1("invalid",e);break;default:n=r}Vo(a,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zd(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pd(e,c)):i==="children"?typeof c=="string"?(a!=="textarea"||c!=="")&&Zr(e,c):typeof c=="number"&&Zr(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jr.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Z1("scroll",e):c!=null&&hc(e,i,c,h))}switch(a){case"input":ri(e),r8(e,r,!1);break;case"textarea":ri(e),i8(e);break;case"option":r.value!=null&&e.setAttribute("value",""+y0(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?aa(e,!!r.multiple,i,!1):r.defaultValue!=null&&aa(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Ri)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pt(t),null;case 6:if(e&&t.stateNode!=null)N7(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(e1(166));if(a=r4(vn.current),r4(xe.current),fi(t)){if(r=t.stateNode,a=t.memoizedProps,r[me]=t,(i=r.nodeValue!==a)&&(e=M2,e!==null))switch(e.tag){case 3:pi(r.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pi(r.nodeValue,a,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(a.nodeType===9?a:a.ownerDocument).createTextNode(r),r[me]=t,t.stateNode=r}return Pt(t),null;case 13:if(tt(it),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nt&&z2!==null&&t.mode&1&&!(t.flags&128))n7(),sa(),t.flags|=98560,i=!1;else if(i=fi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(e1(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(e1(317));i[me]=t}else sa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pt(t),i=!1}else Z2!==null&&(rc(Z2),Z2=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=a,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?wt===0&&(wt=3):Fc())),t.updateQueue!==null&&(t.flags|=4),Pt(t),null);case 4:return da(),Xo(e,t),e===null&&ln(t.stateNode.containerInfo),Pt(t),null;case 10:return yc(t.type._context),Pt(t),null;case 17:return l2(t.type)&&ji(),Pt(t),null;case 19:if(tt(it),i=t.memoizedState,i===null)return Pt(t),null;if(r=(t.flags&128)!==0,h=i.rendering,h===null)if(r)Pr(i,!1);else{if(wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=qi(e),h!==null){for(t.flags|=128,Pr(i,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=a,a=t.child;a!==null;)i=a,e=r,i.flags&=14680066,h=i.alternate,h===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=h.childLanes,i.lanes=h.lanes,i.child=h.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=h.memoizedProps,i.memoizedState=h.memoizedState,i.updateQueue=h.updateQueue,i.type=h.type,e=h.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return X1(it,it.current&1|2),t.child}e=e.sibling}i.tail!==null&&pt()>ga&&(t.flags|=128,r=!0,Pr(i,!1),t.lanes=4194304)}else{if(!r)if(e=qi(h),e!==null){if(t.flags|=128,r=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),Pr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!h.alternate&&!nt)return Pt(t),null}else 2*pt()-i.renderingStartTime>ga&&a!==1073741824&&(t.flags|=128,r=!0,Pr(i,!1),t.lanes=4194304);i.isBackwards?(h.sibling=t.child,t.child=h):(a=i.last,a!==null?a.sibling=h:t.child=h,i.last=h)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=pt(),t.sibling=null,a=it.current,X1(it,r?a&1|2:a&1),t):(Pt(t),null);case 22:case 23:return Nc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?f2&1073741824&&(Pt(t),t.subtreeFlags&6&&(t.flags|=8192)):Pt(t),null;case 24:return null;case 25:return null}throw Error(e1(156,t.tag))}function wV(e,t){switch(xc(t),t.tag){case 1:return l2(t.type)&&ji(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return da(),tt(h2),tt(It),Tc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _c(t),null;case 13:if(tt(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(e1(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tt(it),null;case 4:return da(),null;case 10:return yc(t.type._context),null;case 22:case 23:return Nc(),null;case 24:return null;default:return null}}var mi=!1,Dt=!1,LV=typeof WeakSet=="function"?WeakSet:Set,p1=null;function ta(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(r){vt(e,t,r)}else a.current=null}function Yo(e,t,a){try{a()}catch(r){vt(e,t,r)}}var X8=!1;function yV(e,t){if(Ao=Pi,e=Wd(),mc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break t}var h=0,l=-1,c=-1,v=0,g=0,z=e,w=null;e:for(;;){for(var L;z!==a||n!==0&&z.nodeType!==3||(l=h+n),z!==i||r!==0&&z.nodeType!==3||(c=h+r),z.nodeType===3&&(h+=z.nodeValue.length),(L=z.firstChild)!==null;)w=z,z=L;for(;;){if(z===e)break e;if(w===a&&++v===n&&(l=h),w===i&&++g===r&&(c=h),(L=z.nextSibling)!==null)break;z=w,w=z.parentNode}z=L}a=l===-1||c===-1?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(Eo={focusedElem:e,selectionRange:a},Pi=!1,p1=t;p1!==null;)if(t=p1,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,p1=e;else for(;p1!==null;){t=p1;try{var V=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var b=V.memoizedProps,k=V.memoizedState,m=t.stateNode,H=m.getSnapshotBeforeUpdate(t.elementType===t.type?b:Q2(t.type,b),k);m.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e1(163))}}catch(B){vt(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,p1=e;break}p1=t.return}return V=X8,X8=!1,V}function Xr(e,t,a){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&Yo(t,a,i)}n=n.next}while(n!==r)}}function ch(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var r=a.create;a.destroy=r()}a=a.next}while(a!==t)}}function Qo(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function F7(e){var t=e.alternate;t!==null&&(e.alternate=null,F7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[me],delete t[cn],delete t[Do],delete t[lV],delete t[oV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function U7(e){return e.tag===5||e.tag===3||e.tag===4}function Y8(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||U7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jo(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ri));else if(r!==4&&(e=e.child,e!==null))for(Jo(e,t,a),e=e.sibling;e!==null;)Jo(e,t,a),e=e.sibling}function Zo(e,t,a){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Zo(e,t,a),e=e.sibling;e!==null;)Zo(e,t,a),e=e.sibling}var _t=null,J2=!1;function s0(e,t,a){for(a=a.child;a!==null;)$7(e,t,a),a=a.sibling}function $7(e,t,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(eh,a)}catch{}switch(a.tag){case 5:Dt||ta(a,t);case 6:var r=_t,n=J2;_t=null,s0(e,t,a),_t=r,J2=n,_t!==null&&(J2?(e=_t,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):_t.removeChild(a.stateNode));break;case 18:_t!==null&&(J2?(e=_t,a=a.stateNode,e.nodeType===8?eo(e.parentNode,a):e.nodeType===1&&eo(e,a),rn(e)):eo(_t,a.stateNode));break;case 4:r=_t,n=J2,_t=a.stateNode.containerInfo,J2=!0,s0(e,t,a),_t=r,J2=n;break;case 0:case 11:case 14:case 15:if(!Dt&&(r=a.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var i=n,h=i.destroy;i=i.tag,h!==void 0&&(i&2||i&4)&&Yo(a,t,h),n=n.next}while(n!==r)}s0(e,t,a);break;case 1:if(!Dt&&(ta(a,t),r=a.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(l){vt(a,t,l)}s0(e,t,a);break;case 21:s0(e,t,a);break;case 22:a.mode&1?(Dt=(r=Dt)||a.memoizedState!==null,s0(e,t,a),Dt=r):s0(e,t,a);break;default:s0(e,t,a)}}function Q8(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new LV),t.forEach(function(r){var n=EV.bind(null,e,r);a.has(r)||(a.add(r),r.then(n,n))})}}function Y2(e,t){var a=t.deletions;if(a!==null)for(var r=0;r<a.length;r++){var n=a[r];try{var i=e,h=t,l=h;t:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,J2=!1;break t;case 3:_t=l.stateNode.containerInfo,J2=!0;break t;case 4:_t=l.stateNode.containerInfo,J2=!0;break t}l=l.return}if(_t===null)throw Error(e1(160));$7(i,h,n),_t=null,J2=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(v){vt(n,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)W7(t,e),t=t.sibling}function W7(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Y2(t,e),ze(e),r&4){try{Xr(3,e,e.return),ch(3,e)}catch(b){vt(e,e.return,b)}try{Xr(5,e,e.return)}catch(b){vt(e,e.return,b)}}break;case 1:Y2(t,e),ze(e),r&512&&a!==null&&ta(a,a.return);break;case 5:if(Y2(t,e),ze(e),r&512&&a!==null&&ta(a,a.return),e.flags&32){var n=e.stateNode;try{Zr(n,"")}catch(b){vt(e,e.return,b)}}if(r&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,h=a!==null?a.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&dd(n,i),wo(l,h);var v=wo(l,i);for(h=0;h<c.length;h+=2){var g=c[h],z=c[h+1];g==="style"?zd(n,z):g==="dangerouslySetInnerHTML"?pd(n,z):g==="children"?Zr(n,z):hc(n,g,z,v)}switch(l){case"input":Mo(n,i);break;case"textarea":ud(n,i);break;case"select":var w=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var L=i.value;L!=null?aa(n,!!i.multiple,L,!1):w!==!!i.multiple&&(i.defaultValue!=null?aa(n,!!i.multiple,i.defaultValue,!0):aa(n,!!i.multiple,i.multiple?[]:"",!1))}n[cn]=i}catch(b){vt(e,e.return,b)}}break;case 6:if(Y2(t,e),ze(e),r&4){if(e.stateNode===null)throw Error(e1(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(b){vt(e,e.return,b)}}break;case 3:if(Y2(t,e),ze(e),r&4&&a!==null&&a.memoizedState.isDehydrated)try{rn(t.containerInfo)}catch(b){vt(e,e.return,b)}break;case 4:Y2(t,e),ze(e);break;case 13:Y2(t,e),ze(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(Rc=pt())),r&4&&Q8(e);break;case 22:if(g=a!==null&&a.memoizedState!==null,e.mode&1?(Dt=(v=Dt)||g,Y2(t,e),Dt=v):Y2(t,e),ze(e),r&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!g&&e.mode&1)for(p1=e,g=e.child;g!==null;){for(z=p1=g;p1!==null;){switch(w=p1,L=w.child,w.tag){case 0:case 11:case 14:case 15:Xr(4,w,w.return);break;case 1:ta(w,w.return);var V=w.stateNode;if(typeof V.componentWillUnmount=="function"){r=w,a=w.return;try{t=r,V.props=t.memoizedProps,V.state=t.memoizedState,V.componentWillUnmount()}catch(b){vt(r,a,b)}}break;case 5:ta(w,w.return);break;case 22:if(w.memoizedState!==null){Z8(z);continue}}L!==null?(L.return=w,p1=L):Z8(z)}g=g.sibling}t:for(g=null,z=e;;){if(z.tag===5){if(g===null){g=z;try{n=z.stateNode,v?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=z.stateNode,c=z.memoizedProps.style,h=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=fd("display",h))}catch(b){vt(e,e.return,b)}}}else if(z.tag===6){if(g===null)try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(b){vt(e,e.return,b)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break t;for(;z.sibling===null;){if(z.return===null||z.return===e)break t;g===z&&(g=null),z=z.return}g===z&&(g=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Y2(t,e),ze(e),r&4&&Q8(e);break;case 21:break;default:Y2(t,e),ze(e)}}function ze(e){var t=e.flags;if(t&2){try{t:{for(var a=e.return;a!==null;){if(U7(a)){var r=a;break t}a=a.return}throw Error(e1(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Zr(n,""),r.flags&=-33);var i=Y8(e);Zo(e,i,n);break;case 3:case 4:var h=r.stateNode.containerInfo,l=Y8(e);Jo(e,l,h);break;default:throw Error(e1(161))}}catch(c){vt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function BV(e,t,a){p1=e,G7(e,t,a)}function G7(e,t,a){for(var r=(e.mode&1)!==0;p1!==null;){var n=p1,i=n.child;if(n.tag===22&&r){var h=n.memoizedState!==null||mi;if(!h){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=mi;var v=Dt;if(mi=h,(Dt=c)&&!v)for(p1=n;p1!==null;)h=p1,c=h.child,h.tag===22&&h.memoizedState!==null?td(n):c!==null?(c.return=h,p1=c):td(n);for(;i!==null;)p1=i,G7(i,t,a),i=i.sibling;p1=n,mi=l,Dt=v}J8(e,t,a)}else n.subtreeFlags&8772&&i!==null?(i.return=n,p1=i):J8(e,t,a)}}function J8(e){for(;p1!==null;){var t=p1;if(t.flags&8772){var a=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dt||ch(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Dt)if(a===null)r.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:Q2(t.type,a.memoizedProps);r.componentDidUpdate(n,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&k8(t,i,r);break;case 3:var h=t.updateQueue;if(h!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}k8(t,h,a)}break;case 5:var l=t.stateNode;if(a===null&&t.flags&4){a=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var g=v.memoizedState;if(g!==null){var z=g.dehydrated;z!==null&&rn(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e1(163))}Dt||t.flags&512&&Qo(t)}catch(w){vt(t,t.return,w)}}if(t===e){p1=null;break}if(a=t.sibling,a!==null){a.return=t.return,p1=a;break}p1=t.return}}function Z8(e){for(;p1!==null;){var t=p1;if(t===e){p1=null;break}var a=t.sibling;if(a!==null){a.return=t.return,p1=a;break}p1=t.return}}function td(e){for(;p1!==null;){var t=p1;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{ch(4,t)}catch(c){vt(t,a,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(c){vt(t,n,c)}}var i=t.return;try{Qo(t)}catch(c){vt(t,i,c)}break;case 5:var h=t.return;try{Qo(t)}catch(c){vt(t,h,c)}}}catch(c){vt(t,t.return,c)}if(t===e){p1=null;break}var l=t.sibling;if(l!==null){l.return=t.return,p1=l;break}p1=t.return}}var CV=Math.ceil,Yi=qe.ReactCurrentDispatcher,Dc=qe.ReactCurrentOwner,A2=qe.ReactCurrentBatchConfig,E1=0,yt=null,zt=null,Tt=0,f2=0,ea=S0(0),wt=0,pn=null,c4=0,sh=0,Ic=0,Yr=null,n2=null,Rc=0,ga=1/0,Ie=null,Qi=!1,tc=null,V0=null,Hi=!1,f0=null,Ji=0,Qr=0,ec=null,Si=-1,_i=0;function qt(){return E1&6?pt():Si!==-1?Si:Si=pt()}function w0(e){return e.mode&1?E1&2&&Tt!==0?Tt&-Tt:sV.transition!==null?(_i===0&&(_i=_d()),_i):(e=N1,e!==0||(e=window.event,e=e===void 0?16:Pd(e.type)),e):1}function ee(e,t,a,r){if(50<Qr)throw Qr=0,ec=null,Error(e1(185));fn(e,a,r),(!(E1&2)||e!==yt)&&(e===yt&&(!(E1&2)&&(sh|=a),wt===4&&g0(e,Tt)),o2(e,r),a===1&&E1===0&&!(t.mode&1)&&(ga=pt()+500,hh&&_0()))}function o2(e,t){var a=e.callbackNode;dx(e,t);var r=ki(e,e===yt?Tt:0);if(r===0)a!==null&&o8(a),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(a!=null&&o8(a),t===1)e.tag===0?cV(ed.bind(null,e)):e7(ed.bind(null,e)),iV(function(){!(E1&6)&&_0()}),a=null;else{switch(Td(r)){case 1:a=vc;break;case 4:a=Cd;break;case 16:a=Ei;break;case 536870912:a=Sd;break;default:a=Ei}a=tu(a,q7.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function q7(e,t){if(Si=-1,_i=0,E1&6)throw Error(e1(327));var a=e.callbackNode;if(la()&&e.callbackNode!==a)return null;var r=ki(e,e===yt?Tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Zi(e,r);else{t=r;var n=E1;E1|=2;var i=X7();(yt!==e||Tt!==t)&&(Ie=null,ga=pt()+500,n4(e,t));do try{TV();break}catch(l){K7(e,l)}while(1);Lc(),Yi.current=i,E1=n,zt!==null?t=0:(yt=null,Tt=0,t=wt)}if(t!==0){if(t===2&&(n=So(e),n!==0&&(r=n,t=ac(e,n))),t===1)throw a=pn,n4(e,0),g0(e,r),o2(e,pt()),a;if(t===6)g0(e,r);else{if(n=e.current.alternate,!(r&30)&&!SV(n)&&(t=Zi(e,r),t===2&&(i=So(e),i!==0&&(r=i,t=ac(e,i))),t===1))throw a=pn,n4(e,0),g0(e,r),o2(e,pt()),a;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(e1(345));case 2:t4(e,n2,Ie);break;case 3:if(g0(e,r),(r&130023424)===r&&(t=Rc+500-pt(),10<t)){if(ki(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){qt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Po(t4.bind(null,e,n2,Ie),t);break}t4(e,n2,Ie);break;case 4:if(g0(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var h=31-te(r);i=1<<h,h=t[h],h>n&&(n=h),r&=~i}if(r=n,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CV(r/1960))-r,10<r){e.timeoutHandle=Po(t4.bind(null,e,n2,Ie),r);break}t4(e,n2,Ie);break;case 5:t4(e,n2,Ie);break;default:throw Error(e1(329))}}}return o2(e,pt()),e.callbackNode===a?q7.bind(null,e):null}function ac(e,t){var a=Yr;return e.current.memoizedState.isDehydrated&&(n4(e,t).flags|=256),e=Zi(e,t),e!==2&&(t=n2,n2=a,t!==null&&rc(t)),e}function rc(e){n2===null?n2=e:n2.push.apply(n2,e)}function SV(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var r=0;r<a.length;r++){var n=a[r],i=n.getSnapshot;n=n.value;try{if(!ae(i(),n))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function g0(e,t){for(t&=~Ic,t&=~sh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-te(t),r=1<<a;e[a]=-1,t&=~r}}function ed(e){if(E1&6)throw Error(e1(327));la();var t=ki(e,0);if(!(t&1))return o2(e,pt()),null;var a=Zi(e,t);if(e.tag!==0&&a===2){var r=So(e);r!==0&&(t=r,a=ac(e,r))}if(a===1)throw a=pn,n4(e,0),g0(e,t),o2(e,pt()),a;if(a===6)throw Error(e1(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,t4(e,n2,Ie),o2(e,pt()),null}function jc(e,t){var a=E1;E1|=1;try{return e(t)}finally{E1=a,E1===0&&(ga=pt()+500,hh&&_0())}}function s4(e){f0!==null&&f0.tag===0&&!(E1&6)&&la();var t=E1;E1|=1;var a=A2.transition,r=N1;try{if(A2.transition=null,N1=1,e)return e()}finally{N1=r,A2.transition=a,E1=t,!(E1&6)&&_0()}}function Nc(){f2=ea.current,tt(ea)}function n4(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,nV(a)),zt!==null)for(a=zt.return;a!==null;){var r=a;switch(xc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ji();break;case 3:da(),tt(h2),tt(It),Tc();break;case 5:_c(r);break;case 4:da();break;case 13:tt(it);break;case 19:tt(it);break;case 10:yc(r.type._context);break;case 22:case 23:Nc()}a=a.return}if(yt=e,zt=e=L0(e.current,null),Tt=f2=t,wt=0,pn=null,Ic=sh=c4=0,n2=Yr=null,a4!==null){for(t=0;t<a4.length;t++)if(a=a4[t],r=a.interleaved,r!==null){a.interleaved=null;var n=r.next,i=a.pending;if(i!==null){var h=i.next;i.next=n,r.next=h}a.pending=r}a4=null}return e}function K7(e,t){do{var a=zt;try{if(Lc(),yi.current=Xi,Ki){for(var r=ht.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Ki=!1}if(o4=0,Lt=Vt=ht=null,Kr=!1,dn=0,Dc.current=null,a===null||a.return===null){wt=1,pn=t,zt=null;break}t:{var i=e,h=a.return,l=a,c=t;if(t=Tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var v=c,g=l,z=g.tag;if(!(g.mode&1)&&(z===0||z===11||z===15)){var w=g.alternate;w?(g.updateQueue=w.updateQueue,g.memoizedState=w.memoizedState,g.lanes=w.lanes):(g.updateQueue=null,g.memoizedState=null)}var L=F8(h);if(L!==null){L.flags&=-257,U8(L,h,l,i,t),L.mode&1&&N8(i,v,t),t=L,c=v;var V=t.updateQueue;if(V===null){var b=new Set;b.add(c),t.updateQueue=b}else V.add(c);break t}else{if(!(t&1)){N8(i,v,t),Fc();break t}c=Error(e1(426))}}else if(nt&&l.mode&1){var k=F8(h);if(k!==null){!(k.flags&65536)&&(k.flags|=256),U8(k,h,l,i,t),Vc(ua(c,l));break t}}i=c=ua(c,l),wt!==4&&(wt=2),Yr===null?Yr=[i]:Yr.push(i),i=h;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=b7(i,c,t);E8(i,m);break t;case 1:l=c;var H=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof H.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(V0===null||!V0.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var B=O7(i,l,t);E8(i,B);break t}}i=i.return}while(i!==null)}Q7(a)}catch(_){t=_,zt===a&&a!==null&&(zt=a=a.return);continue}break}while(1)}function X7(){var e=Yi.current;return Yi.current=Xi,e===null?Xi:e}function Fc(){(wt===0||wt===3||wt===2)&&(wt=4),yt===null||!(c4&268435455)&&!(sh&268435455)||g0(yt,Tt)}function Zi(e,t){var a=E1;E1|=2;var r=X7();(yt!==e||Tt!==t)&&(Ie=null,n4(e,t));do try{_V();break}catch(n){K7(e,n)}while(1);if(Lc(),E1=a,Yi.current=r,zt!==null)throw Error(e1(261));return yt=null,Tt=0,wt}function _V(){for(;zt!==null;)Y7(zt)}function TV(){for(;zt!==null&&!rx();)Y7(zt)}function Y7(e){var t=Z7(e.alternate,e,f2);e.memoizedProps=e.pendingProps,t===null?Q7(e):zt=t,Dc.current=null}function Q7(e){var t=e;do{var a=t.alternate;if(e=t.return,t.flags&32768){if(a=wV(a,t),a!==null){a.flags&=32767,zt=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wt=6,zt=null;return}}else if(a=VV(a,t,f2),a!==null){zt=a;return}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);wt===0&&(wt=5)}function t4(e,t,a){var r=N1,n=A2.transition;try{A2.transition=null,N1=1,bV(e,t,a,r)}finally{A2.transition=n,N1=r}return null}function bV(e,t,a,r){do la();while(f0!==null);if(E1&6)throw Error(e1(327));a=e.finishedWork;var n=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(e1(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(ux(e,i),e===yt&&(zt=yt=null,Tt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Hi||(Hi=!0,tu(Ei,function(){return la(),null})),i=(a.flags&15990)!==0,a.subtreeFlags&15990||i){i=A2.transition,A2.transition=null;var h=N1;N1=1;var l=E1;E1|=4,Dc.current=null,yV(e,a),W7(a,e),Zx(Eo),Pi=!!Ao,Eo=Ao=null,e.current=a,BV(a,e,n),nx(),E1=l,N1=h,A2.transition=i}else e.current=a;if(Hi&&(Hi=!1,f0=e,Ji=n),i=e.pendingLanes,i===0&&(V0=null),lx(a.stateNode,r),o2(e,pt()),t!==null)for(r=e.onRecoverableError,a=0;a<t.length;a++)n=t[a],r(n.value,{componentStack:n.stack,digest:n.digest});if(Qi)throw Qi=!1,e=tc,tc=null,e;return Ji&1&&e.tag!==0&&la(),i=e.pendingLanes,i&1?e===ec?Qr++:(Qr=0,ec=e):Qr=0,_0(),null}function la(){if(f0!==null){var e=Td(Ji),t=A2.transition,a=N1;try{if(A2.transition=null,N1=16>e?16:e,f0===null)var r=!1;else{if(e=f0,f0=null,Ji=0,E1&6)throw Error(e1(331));var n=E1;for(E1|=4,p1=e.current;p1!==null;){var i=p1,h=i.child;if(p1.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var v=l[c];for(p1=v;p1!==null;){var g=p1;switch(g.tag){case 0:case 11:case 15:Xr(8,g,i)}var z=g.child;if(z!==null)z.return=g,p1=z;else for(;p1!==null;){g=p1;var w=g.sibling,L=g.return;if(F7(g),g===v){p1=null;break}if(w!==null){w.return=L,p1=w;break}p1=L}}}var V=i.alternate;if(V!==null){var b=V.child;if(b!==null){V.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}p1=i}}if(i.subtreeFlags&2064&&h!==null)h.return=i,p1=h;else t:for(;p1!==null;){if(i=p1,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xr(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,p1=m;break t}p1=i.return}}var H=e.current;for(p1=H;p1!==null;){h=p1;var y=h.child;if(h.subtreeFlags&2064&&y!==null)y.return=h,p1=y;else t:for(h=H;p1!==null;){if(l=p1,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ch(9,l)}}catch(_){vt(l,l.return,_)}if(l===h){p1=null;break t}var B=l.sibling;if(B!==null){B.return=l.return,p1=B;break t}p1=l.return}}if(E1=n,_0(),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(eh,e)}catch{}r=!0}return r}finally{N1=a,A2.transition=t}}return!1}function ad(e,t,a){t=ua(a,t),t=b7(e,t,1),e=x0(e,t,1),t=qt(),e!==null&&(fn(e,1,t),o2(e,t))}function vt(e,t,a){if(e.tag===3)ad(e,e,a);else for(;t!==null;){if(t.tag===3){ad(t,e,a);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(V0===null||!V0.has(r))){e=ua(a,e),e=O7(t,e,1),t=x0(t,e,1),e=qt(),t!==null&&(fn(t,1,e),o2(t,e));break}}t=t.return}}function OV(e,t,a){var r=e.pingCache;r!==null&&r.delete(t),t=qt(),e.pingedLanes|=e.suspendedLanes&a,yt===e&&(Tt&a)===a&&(wt===4||wt===3&&(Tt&130023424)===Tt&&500>pt()-Rc?n4(e,0):Ic|=a),o2(e,t)}function J7(e,t){t===0&&(e.mode&1?(t=hi,hi<<=1,!(hi&130023424)&&(hi=4194304)):t=1);var a=qt();e=We(e,t),e!==null&&(fn(e,t,a),o2(e,a))}function AV(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),J7(e,a)}function EV(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(e1(314))}r!==null&&r.delete(t),J7(e,a)}var Z7;Z7=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||h2.current)i2=!0;else{if(!(e.lanes&a)&&!(t.flags&128))return i2=!1,xV(e,t,a);i2=!!(e.flags&131072)}else i2=!1,nt&&t.flags&1048576&&a7(t,Ui,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ci(e,t),e=t.pendingProps;var n=ca(t,It.current);ha(t,a),n=Oc(null,t,r,e,n,a);var i=Ac();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,l2(r)?(i=!0,Ni(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Cc(t),n.updater=lh,t.stateNode=n,n._reactInternals=t,Uo(t,r,e,a),t=Go(null,t,r,!0,i,a)):(t.tag=0,nt&&i&&Hc(t),Gt(null,t,n,a),t=t.child),t;case 16:r=t.elementType;t:{switch(Ci(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=PV(r),e=Q2(r,e),n){case 0:t=Wo(null,t,r,e,a);break t;case 1:t=G8(null,t,r,e,a);break t;case 11:t=$8(null,t,r,e,a);break t;case 14:t=W8(null,t,r,Q2(r.type,e),a);break t}throw Error(e1(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Q2(r,n),Wo(e,t,r,n,a);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Q2(r,n),G8(e,t,r,n,a);case 3:t:{if(P7(t),e===null)throw Error(e1(387));r=t.pendingProps,i=t.memoizedState,n=i.element,h7(e,t),Gi(t,r,null,a);var h=t.memoizedState;if(r=h.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=ua(Error(e1(423)),t),t=q8(e,t,r,a,n);break t}else if(r!==n){n=ua(Error(e1(424)),t),t=q8(e,t,r,a,n);break t}else for(z2=H0(t.stateNode.containerInfo.firstChild),M2=t,nt=!0,Z2=null,a=s7(t,null,r,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(sa(),r===n){t=Ge(e,t,a);break t}Gt(e,t,r,a)}t=t.child}return t;case 5:return v7(t),e===null&&jo(t),r=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,h=n.children,ko(r,n)?h=null:i!==null&&ko(r,i)&&(t.flags|=32),k7(e,t),Gt(e,t,h,a),t.child;case 6:return e===null&&jo(t),null;case 13:return D7(e,t,a);case 4:return Sc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=va(t,null,r,a):Gt(e,t,r,a),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Q2(r,n),$8(e,t,r,n,a);case 7:return Gt(e,t,t.pendingProps,a),t.child;case 8:return Gt(e,t,t.pendingProps.children,a),t.child;case 12:return Gt(e,t,t.pendingProps.children,a),t.child;case 10:t:{if(r=t.type._context,n=t.pendingProps,i=t.memoizedProps,h=n.value,X1($i,r._currentValue),r._currentValue=h,i!==null)if(ae(i.value,h)){if(i.children===n.children&&!h2.current){t=Ge(e,t,a);break t}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){h=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Fe(-1,a&-a),c.tag=2;var v=i.updateQueue;if(v!==null){v=v.shared;var g=v.pending;g===null?c.next=c:(c.next=g.next,g.next=c),v.pending=c}}i.lanes|=a,c=i.alternate,c!==null&&(c.lanes|=a),No(i.return,a,t),l.lanes|=a;break}c=c.next}}else if(i.tag===10)h=i.type===t.type?null:i.child;else if(i.tag===18){if(h=i.return,h===null)throw Error(e1(341));h.lanes|=a,l=h.alternate,l!==null&&(l.lanes|=a),No(h,a,t),h=i.sibling}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===t){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}Gt(e,t,n.children,a),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,ha(t,a),n=E2(n),r=r(n),t.flags|=1,Gt(e,t,r,a),t.child;case 14:return r=t.type,n=Q2(r,t.pendingProps),n=Q2(r.type,n),W8(e,t,r,n,a);case 15:return A7(e,t,t.type,t.pendingProps,a);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:Q2(r,n),Ci(e,t),t.tag=1,l2(r)?(e=!0,Ni(t)):e=!1,ha(t,a),o7(t,r,n),Uo(t,r,n,a),Go(null,t,r,!0,e,a);case 19:return I7(e,t,a);case 22:return E7(e,t,a)}throw Error(e1(156,t.tag))};function tu(e,t){return Bd(e,t)}function kV(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function O2(e,t,a,r){return new kV(e,t,a,r)}function Uc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PV(e){if(typeof e=="function")return Uc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oc)return 11;if(e===cc)return 14}return 2}function L0(e,t){var a=e.alternate;return a===null?(a=O2(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Ti(e,t,a,r,n,i){var h=2;if(r=e,typeof e=="function")Uc(e)&&(h=1);else if(typeof e=="string")h=5;else t:switch(e){case W4:return i4(a.children,n,i,t);case lc:h=8,n|=8;break;case uo:return e=O2(12,a,t,n|2),e.elementType=uo,e.lanes=i,e;case go:return e=O2(13,a,t,n),e.elementType=go,e.lanes=i,e;case po:return e=O2(19,a,t,n),e.elementType=po,e.lanes=i,e;case cd:return vh(a,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ld:h=10;break t;case od:h=9;break t;case oc:h=11;break t;case cc:h=14;break t;case v0:h=16,r=null;break t}throw Error(e1(130,e==null?e:typeof e,""))}return t=O2(h,a,t,n),t.elementType=e,t.type=r,t.lanes=i,t}function i4(e,t,a,r){return e=O2(7,e,r,t),e.lanes=a,e}function vh(e,t,a,r){return e=O2(22,e,r,t),e.elementType=cd,e.lanes=a,e.stateNode={isHidden:!1},e}function co(e,t,a){return e=O2(6,e,null,t),e.lanes=a,e}function so(e,t,a){return t=O2(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function DV(e,t,a,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function $c(e,t,a,r,n,i,h,l,c){return e=new DV(e,t,a,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=O2(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cc(i),e}function IV(e,t,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$4,key:r==null?null:""+r,children:e,containerInfo:t,implementation:a}}function eu(e){if(!e)return B0;e=e._reactInternals;t:{if(d4(e)!==e||e.tag!==1)throw Error(e1(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(l2(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(e1(171))}if(e.tag===1){var a=e.type;if(l2(a))return t7(e,a,t)}return t}function au(e,t,a,r,n,i,h,l,c){return e=$c(a,r,!0,e,n,i,h,l,c),e.context=eu(null),a=e.current,r=qt(),n=w0(a),i=Fe(r,n),i.callback=t??null,x0(a,i,n),e.current.lanes=n,fn(e,n,r),o2(e,r),e}function dh(e,t,a,r){var n=t.current,i=qt(),h=w0(n);return a=eu(a),t.context===null?t.context=a:t.pendingContext=a,t=Fe(i,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=x0(n,t,h),e!==null&&(ee(e,n,h,i),Li(e,n,h)),h}function th(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Wc(e,t){rd(e,t),(e=e.alternate)&&rd(e,t)}function RV(){return null}var ru=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}uh.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(e1(409));dh(e,t,null,null)};uh.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;s4(function(){dh(null,e,null,null)}),t[$e]=null}};function uh(e){this._internalRoot=e}uh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ad();e={blockedOn:null,target:e,priority:t};for(var a=0;a<u0.length&&t!==0&&t<u0[a].priority;a++);u0.splice(a,0,e),a===0&&kd(e)}};function qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nd(){}function jV(e,t,a,r,n){if(n){if(typeof r=="function"){var i=r;r=function(){var v=th(h);i.call(v)}}var h=au(t,r,e,0,null,!1,!1,"",nd);return e._reactRootContainer=h,e[$e]=h.current,ln(e.nodeType===8?e.parentNode:e),s4(),h}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var l=r;r=function(){var v=th(c);l.call(v)}}var c=$c(e,0,!1,null,null,!1,!1,"",nd);return e._reactRootContainer=c,e[$e]=c.current,ln(e.nodeType===8?e.parentNode:e),s4(function(){dh(t,c,a,r)}),c}function ph(e,t,a,r,n){var i=a._reactRootContainer;if(i){var h=i;if(typeof n=="function"){var l=n;n=function(){var c=th(h);l.call(c)}}dh(t,h,e,n)}else h=jV(a,t,e,n,r);return th(h)}bd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=Nr(t.pendingLanes);a!==0&&(dc(t,a|1),o2(t,pt()),!(E1&6)&&(ga=pt()+500,_0()))}break;case 13:s4(function(){var r=We(e,1);if(r!==null){var n=qt();ee(r,e,1,n)}}),Wc(e,1)}};uc=function(e){if(e.tag===13){var t=We(e,134217728);if(t!==null){var a=qt();ee(t,e,134217728,a)}Wc(e,134217728)}};Od=function(e){if(e.tag===13){var t=w0(e),a=We(e,t);if(a!==null){var r=qt();ee(a,e,t,r)}Wc(e,t)}};Ad=function(){return N1};Ed=function(e,t){var a=N1;try{return N1=e,t()}finally{N1=a}};yo=function(e,t,a){switch(t){case"input":if(Mo(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var n=ih(r);if(!n)throw Error(e1(90));vd(r),Mo(r,n)}}}break;case"textarea":ud(e,a);break;case"select":t=a.value,t!=null&&aa(e,!!a.multiple,t,!1)}};Hd=jc;xd=s4;var NV={usingClientEntryPoint:!1,Events:[Mn,X4,ih,Md,md,jc]},Dr={findFiberByHostInstance:e4,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},FV={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ld(e),e===null?null:e.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||RV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Ir=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Ir.isDisabled&&Ir.supportsFiber))try{eh=Ir.inject(FV),He=Ir}catch{}var Ir;x2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NV;x2.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qc(t))throw Error(e1(200));return IV(e,t,null,a)};x2.createRoot=function(e,t){if(!qc(e))throw Error(e1(299));var a=!1,r="",n=ru;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=$c(e,1,!1,null,null,a,!1,r,n),e[$e]=t.current,ln(e.nodeType===8?e.parentNode:e),new Gc(t)};x2.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(e1(188)):(e=Object.keys(e).join(","),Error(e1(268,e)));return e=Ld(t),e=e===null?null:e.stateNode,e};x2.flushSync=function(e){return s4(e)};x2.hydrate=function(e,t,a){if(!gh(t))throw Error(e1(200));return ph(null,e,t,!0,a)};x2.hydrateRoot=function(e,t,a){if(!qc(e))throw Error(e1(405));var r=a!=null&&a.hydratedSources||null,n=!1,i="",h=ru;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onRecoverableError!==void 0&&(h=a.onRecoverableError)),t=au(t,null,e,1,a??null,n,!1,i,h),e[$e]=t.current,ln(e),r)for(e=0;e<r.length;e++)a=r[e],n=a._getVersion,n=n(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new uh(t)};x2.render=function(e,t,a){if(!gh(t))throw Error(e1(200));return ph(null,e,t,!1,a)};x2.unmountComponentAtNode=function(e){if(!gh(e))throw Error(e1(40));return e._reactRootContainer?(s4(function(){ph(null,null,e,!1,function(){e._reactRootContainer=null,e[$e]=null})}),!0):!1};x2.unstable_batchedUpdates=jc;x2.unstable_renderSubtreeIntoContainer=function(e,t,a,r){if(!gh(a))throw Error(e1(200));if(e==null||e._reactInternals===void 0)throw Error(e1(38));return ph(e,t,a,!1,r)};x2.version="18.2.0-next-9e3b772b8-20220608"});var lu=S1((g_,hu)=>{"use strict";function iu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iu)}catch(e){console.error(e)}}iu(),hu.exports=nu()});var cu=S1(Kc=>{"use strict";var ou=lu();Kc.createRoot=ou.createRoot,Kc.hydrateRoot=ou.hydrateRoot;var p_});var Qc=S1((Xc,Yc)=>{(function(e,t){typeof Xc=="object"&&typeof Yc<"u"?Yc.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t()})(Xc,function(){"use strict";var e=1e3,t=6e4,a=36e5,r="millisecond",n="second",i="minute",h="hour",l="day",c="week",v="month",g="quarter",z="year",w="date",L="Invalid Date",V=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t1){var Z=["th","st","nd","rd"],F=t1%100;return"["+t1+(Z[(F-20)%10]||Z[F]||Z[0])+"]"}},m=function(t1,Z,F){var c1=String(t1);return!c1||c1.length>=Z?t1:""+Array(Z+1-c1.length).join(F)+t1},H={s:m,z:function(t1){var Z=-t1.utcOffset(),F=Math.abs(Z),c1=Math.floor(F/60),a1=F%60;return(Z<=0?"+":"-")+m(c1,2,"0")+":"+m(a1,2,"0")},m:function t1(Z,F){if(Z.date()<F.date())return-t1(F,Z);var c1=12*(F.year()-Z.year())+(F.month()-Z.month()),a1=Z.clone().add(c1,v),l1=F-a1<0,s1=Z.clone().add(c1+(l1?-1:1),v);return+(-(c1+(F-a1)/(l1?a1-s1:s1-a1))||0)},a:function(t1){return t1<0?Math.ceil(t1)||0:Math.floor(t1)},p:function(t1){return{M:v,y:z,w:c,d:l,D:w,h,m:i,s:n,ms:r,Q:g}[t1]||String(t1||"").toLowerCase().replace(/s$/,"")},u:function(t1){return t1===void 0}},y="en",B={};B[y]=k;var _=function(t1){return t1 instanceof D},j=function t1(Z,F,c1){var a1;if(!Z)return y;if(typeof Z=="string"){var l1=Z.toLowerCase();B[l1]&&(a1=l1),F&&(B[l1]=F,a1=l1);var s1=Z.split("-");if(!a1&&s1.length>1)return t1(s1[0])}else{var m1=Z.name;B[m1]=Z,a1=m1}return!c1&&a1&&(y=a1),a1||!c1&&y},U=function(t1,Z){if(_(t1))return t1.clone();var F=typeof Z=="object"?Z:{};return F.date=t1,F.args=arguments,new D(F)},q=H;q.l=j,q.i=_,q.w=function(t1,Z){return U(t1,{locale:Z.$L,utc:Z.$u,x:Z.$x,$offset:Z.$offset})};var D=function(){function t1(F){this.$L=j(F.locale,null,!0),this.parse(F)}var Z=t1.prototype;return Z.parse=function(F){this.$d=function(c1){var a1=c1.date,l1=c1.utc;if(a1===null)return new Date(NaN);if(q.u(a1))return new Date;if(a1 instanceof Date)return new Date(a1);if(typeof a1=="string"&&!/Z$/i.test(a1)){var s1=a1.match(V);if(s1){var m1=s1[2]-1||0,O1=(s1[7]||"0").substring(0,3);return l1?new Date(Date.UTC(s1[1],m1,s1[3]||1,s1[4]||0,s1[5]||0,s1[6]||0,O1)):new Date(s1[1],m1,s1[3]||1,s1[4]||0,s1[5]||0,s1[6]||0,O1)}}return new Date(a1)}(F),this.$x=F.x||{},this.init()},Z.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},Z.$utils=function(){return q},Z.isValid=function(){return this.$d.toString()!==L},Z.isSame=function(F,c1){var a1=U(F);return this.startOf(c1)<=a1&&a1<=this.endOf(c1)},Z.isAfter=function(F,c1){return U(F)<this.startOf(c1)},Z.isBefore=function(F,c1){return this.endOf(c1)<U(F)},Z.$g=function(F,c1,a1){return q.u(F)?this[c1]:this.set(a1,F)},Z.unix=function(){return Math.floor(this.valueOf()/1e3)},Z.valueOf=function(){return this.$d.getTime()},Z.startOf=function(F,c1){var a1=this,l1=!!q.u(c1)||c1,s1=q.p(F),m1=function($2,mt){var C2=q.w(a1.$u?Date.UTC(a1.$y,mt,$2):new Date(a1.$y,mt,$2),a1);return l1?C2:C2.endOf(l)},O1=function($2,mt){return q.w(a1.toDate()[$2].apply(a1.toDate("s"),(l1?[0,0,0,0]:[23,59,59,999]).slice(mt)),a1)},k1=this.$W,q1=this.$M,A1=this.$D,Mt="set"+(this.$u?"UTC":"");switch(s1){case z:return l1?m1(1,0):m1(31,11);case v:return l1?m1(1,q1):m1(0,q1+1);case c:var U2=this.$locale().weekStart||0,de=(k1<U2?k1+7:k1)-U2;return m1(l1?A1-de:A1+(6-de),q1);case l:case w:return O1(Mt+"Hours",0);case h:return O1(Mt+"Minutes",1);case i:return O1(Mt+"Seconds",2);case n:return O1(Mt+"Milliseconds",3);default:return this.clone()}},Z.endOf=function(F){return this.startOf(F,!1)},Z.$set=function(F,c1){var a1,l1=q.p(F),s1="set"+(this.$u?"UTC":""),m1=(a1={},a1[l]=s1+"Date",a1[w]=s1+"Date",a1[v]=s1+"Month",a1[z]=s1+"FullYear",a1[h]=s1+"Hours",a1[i]=s1+"Minutes",a1[n]=s1+"Seconds",a1[r]=s1+"Milliseconds",a1)[l1],O1=l1===l?this.$D+(c1-this.$W):c1;if(l1===v||l1===z){var k1=this.clone().set(w,1);k1.$d[m1](O1),k1.init(),this.$d=k1.set(w,Math.min(this.$D,k1.daysInMonth())).$d}else m1&&this.$d[m1](O1);return this.init(),this},Z.set=function(F,c1){return this.clone().$set(F,c1)},Z.get=function(F){return this[q.p(F)]()},Z.add=function(F,c1){var a1,l1=this;F=Number(F);var s1=q.p(c1),m1=function(q1){var A1=U(l1);return q.w(A1.date(A1.date()+Math.round(q1*F)),l1)};if(s1===v)return this.set(v,this.$M+F);if(s1===z)return this.set(z,this.$y+F);if(s1===l)return m1(1);if(s1===c)return m1(7);var O1=(a1={},a1[i]=t,a1[h]=a,a1[n]=e,a1)[s1]||1,k1=this.$d.getTime()+F*O1;return q.w(k1,this)},Z.subtract=function(F,c1){return this.add(-1*F,c1)},Z.format=function(F){var c1=this,a1=this.$locale();if(!this.isValid())return a1.invalidDate||L;var l1=F||"YYYY-MM-DDTHH:mm:ssZ",s1=q.z(this),m1=this.$H,O1=this.$m,k1=this.$M,q1=a1.weekdays,A1=a1.months,Mt=function(mt,C2,$0,p2){return mt&&(mt[C2]||mt(c1,l1))||$0[C2].slice(0,p2)},U2=function(mt){return q.s(m1%12||12,mt,"0")},de=a1.meridiem||function(mt,C2,$0){var p2=mt<12?"AM":"PM";return $0?p2.toLowerCase():p2},$2={YY:String(this.$y).slice(-2),YYYY:q.s(this.$y,4,"0"),M:k1+1,MM:q.s(k1+1,2,"0"),MMM:Mt(a1.monthsShort,k1,A1,3),MMMM:Mt(A1,k1),D:this.$D,DD:q.s(this.$D,2,"0"),d:String(this.$W),dd:Mt(a1.weekdaysMin,this.$W,q1,2),ddd:Mt(a1.weekdaysShort,this.$W,q1,3),dddd:q1[this.$W],H:String(m1),HH:q.s(m1,2,"0"),h:U2(1),hh:U2(2),a:de(m1,O1,!0),A:de(m1,O1,!1),m:String(O1),mm:q.s(O1,2,"0"),s:String(this.$s),ss:q.s(this.$s,2,"0"),SSS:q.s(this.$ms,3,"0"),Z:s1};return l1.replace(b,function(mt,C2){return C2||$2[mt]||s1.replace(":","")})},Z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Z.diff=function(F,c1,a1){var l1,s1=q.p(c1),m1=U(F),O1=(m1.utcOffset()-this.utcOffset())*t,k1=this-m1,q1=q.m(this,m1);return q1=(l1={},l1[z]=q1/12,l1[v]=q1,l1[g]=q1/3,l1[c]=(k1-O1)/6048e5,l1[l]=(k1-O1)/864e5,l1[h]=k1/a,l1[i]=k1/t,l1[n]=k1/e,l1)[s1]||k1,a1?q1:q.a(q1)},Z.daysInMonth=function(){return this.endOf(v).$D},Z.$locale=function(){return B[this.$L]},Z.locale=function(F,c1){if(!F)return this.$L;var a1=this.clone(),l1=j(F,c1,!0);return l1&&(a1.$L=l1),a1},Z.clone=function(){return q.w(this.$d,this)},Z.toDate=function(){return new Date(this.valueOf())},Z.toJSON=function(){return this.isValid()?this.toISOString():null},Z.toISOString=function(){return this.$d.toISOString()},Z.toString=function(){return this.$d.toUTCString()},t1}(),J=D.prototype;return U.prototype=J,[["$ms",r],["$s",n],["$m",i],["$H",h],["$W",l],["$M",v],["$y",z],["$D",w]].forEach(function(t1){J[t1[1]]=function(Z){return this.$g(Z,t1[0],t1[1])}}),U.extend=function(t1,Z){return t1.$i||(t1(Z,D,U),t1.$i=!0),U},U.locale=j,U.isDayjs=_,U.unix=function(t1){return U(1e3*t1)},U.en=B[y],U.Ls=B,U.p={},U})});var du=S1(fh=>{"use strict";var WV=At(),GV=Symbol.for("react.element"),qV=Symbol.for("react.fragment"),KV=Object.prototype.hasOwnProperty,XV=WV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YV={key:!0,ref:!0,__self:!0,__source:!0};function vu(e,t,a){var r,n={},i=null,h=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)KV.call(t,r)&&!YV.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:GV,type:e,key:i,ref:h,props:n,_owner:XV.current}}fh.Fragment=qV;fh.jsx=vu;fh.jsxs=vu});var G1=S1((V_,uu)=>{"use strict";uu.exports=du()});var D2=S1((O_,Hu)=>{var Hn;typeof window<"u"?Hn=window:typeof global<"u"?Hn=global:typeof self<"u"?Hn=self:Hn={};Hu.exports=Hn});var xu=S1(()=>{});var es=S1((k_,wu)=>{var Vu=typeof global<"u"?global:typeof window<"u"?window:{},ZV=xu(),xn;typeof document<"u"?xn=document:(xn=Vu["__GLOBAL_DOCUMENT_CACHE@4"],xn||(xn=Vu["__GLOBAL_DOCUMENT_CACHE@4"]=ZV));wu.exports=xn});var Cu=S1((u4,Bu)=>{function Lu(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return yu[e];var a=String(e),r=Ke[a.toLowerCase()];if(r)return r;var r=mh[a.toLowerCase()];if(r)return r;if(a.length===1)return a.charCodeAt(0)}Lu.isEventKey=function(t,a){if(t&&typeof t=="object"){var r=t.which||t.keyCode||t.charCode;if(r==null)return!1;if(typeof a=="string"){var n=Ke[a.toLowerCase()];if(n)return n===r;var n=mh[a.toLowerCase()];if(n)return n===r}else if(typeof a=="number")return a===r;return!1}};u4=Bu.exports=Lu;var Ke=u4.code=u4.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},mh=u4.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(ot=97;ot<123;ot++)Ke[String.fromCharCode(ot)]=ot-32;for(ot=48;ot<58;ot++)Ke[ot-48]=ot;var ot;for(ot=1;ot<13;ot++)Ke["f"+ot]=ot+111;for(ot=0;ot<10;ot++)Ke["numpad "+ot]=ot+96;var yu=u4.names=u4.title={};for(ot in Ke)yu[Ke[ot]]=ot;for(as in mh)Ke[as]=mh[as];var as});var _u=S1((P_,Su)=>{Su.exports=tw;function tw(e,t){var a,r=null;try{a=JSON.parse(e,t)}catch(n){r=n}return[r,a]}});var Tu=S1((D_,Xe)=>{function rs(){return Xe.exports=rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Xe.exports.__esModule=!0,Xe.exports.default=Xe.exports,rs.apply(this,arguments)}Xe.exports=rs,Xe.exports.__esModule=!0,Xe.exports.default=Xe.exports});var Ou=S1((I_,bu)=>{bu.exports=aw;var ew=Object.prototype.toString;function aw(e){if(!e)return!1;var t=ew.call(e);return t==="[object Function]"||typeof e=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}});var Eu=S1((R_,Au)=>{"use strict";var rw=D2(),nw=function(t,a){return a===void 0&&(a=!1),function(r,n,i){if(r){t(r);return}if(n.statusCode>=400&&n.statusCode<=599){var h=i;if(a)if(rw.TextDecoder){var l=iw(n.headers&&n.headers["content-type"]);try{h=new TextDecoder(l).decode(i)}catch{}}else h=String.fromCharCode.apply(null,new Uint8Array(i));t({cause:h});return}t(null,i)}};function iw(e){return e===void 0&&(e=""),e.toLowerCase().split(";").reduce(function(t,a){var r=a.split("="),n=r[0],i=r[1];return n.trim()==="charset"?i.trim():t},"utf-8")}Au.exports=nw});var Iu=S1((j_,ns)=>{"use strict";var ku=D2(),hw=Tu(),lw=Ou();we.httpHandler=Eu();var ow=function(t){var a={};return t&&t.trim().split(`
`).forEach(function(r){var n=r.indexOf(":"),i=r.slice(0,n).trim().toLowerCase(),h=r.slice(n+1).trim();typeof a[i]>"u"?a[i]=h:Array.isArray(a[i])?a[i].push(h):a[i]=[a[i],h]}),a};ns.exports=we;ns.exports.default=we;we.XMLHttpRequest=ku.XMLHttpRequest||dw;we.XDomainRequest="withCredentials"in new we.XMLHttpRequest?we.XMLHttpRequest:ku.XDomainRequest;cw(["get","put","post","patch","head","delete"],function(e){we[e==="delete"?"del":e]=function(t,a,r){return a=Pu(t,a,r),a.method=e.toUpperCase(),Du(a)}});function cw(e,t){for(var a=0;a<e.length;a++)t(e[a])}function sw(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Pu(e,t,a){var r=e;return lw(t)?(a=t,typeof e=="string"&&(r={uri:e})):r=hw({},t,{uri:e}),r.callback=a,r}function we(e,t,a){return t=Pu(e,t,a),Du(t)}function Du(e){if(typeof e.callback>"u")throw new Error("callback argument missing");var t=!1,a=function(y,B,_){t||(t=!0,e.callback(y,B,_))};function r(){l.readyState===4&&setTimeout(h,0)}function n(){var H=void 0;if(l.response?H=l.response:H=l.responseText||vw(l),b)try{H=JSON.parse(H)}catch{}return H}function i(H){return clearTimeout(k),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,a(H,m)}function h(){if(!v){var H;clearTimeout(k),e.useXDR&&l.status===void 0?H=200:H=l.status===1223?204:l.status;var y=m,B=null;return H!==0?(y={body:n(),statusCode:H,method:z,headers:{},url:g,rawRequest:l},l.getAllResponseHeaders&&(y.headers=ow(l.getAllResponseHeaders()))):B=new Error("Internal XMLHttpRequest Error"),a(B,y,y.body)}}var l=e.xhr||null;l||(e.cors||e.useXDR?l=new we.XDomainRequest:l=new we.XMLHttpRequest);var c,v,g=l.url=e.uri||e.url,z=l.method=e.method||"GET",w=e.body||e.data,L=l.headers=e.headers||{},V=!!e.sync,b=!1,k,m={body:void 0,headers:{},statusCode:0,method:z,url:g,rawRequest:l};if("json"in e&&e.json!==!1&&(b=!0,L.accept||L.Accept||(L.Accept="application/json"),z!=="GET"&&z!=="HEAD"&&(L["content-type"]||L["Content-Type"]||(L["Content-Type"]="application/json"),w=JSON.stringify(e.json===!0?w:e.json))),l.onreadystatechange=r,l.onload=h,l.onerror=i,l.onprogress=function(){},l.onabort=function(){v=!0},l.ontimeout=i,l.open(z,g,!V,e.username,e.password),V||(l.withCredentials=!!e.withCredentials),!V&&e.timeout>0&&(k=setTimeout(function(){if(!v){v=!0,l.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",i(H)}},e.timeout)),l.setRequestHeader)for(c in L)L.hasOwnProperty(c)&&l.setRequestHeader(c,L[c]);else if(e.headers&&!sw(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&typeof e.beforeSend=="function"&&e.beforeSend(l),l.send(w||null),l}function vw(e){try{if(e.responseType==="document")return e.responseXML;var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t)return e.responseXML}catch{}return null}function dw(){}});var Wu=S1((N_,$u)=>{var Ru=es(),hs=Object.create||function(){function e(){}return function(t){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function V2(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}V2.prototype=hs(Error.prototype);V2.prototype.constructor=V2;V2.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function ls(e){function t(r,n,i,h){return(r|0)*3600+(n|0)*60+(i|0)+(h|0)/1e3}var a=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return a?a[3]?t(a[1],a[2],a[3].replace(":",""),a[4]):a[1]>59?t(a[1],a[2],0,a[4]):t(0,a[1],a[2],a[4]):null}function wn(){this.values=hs(null)}wn.prototype={set:function(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)},get:function(e,t,a){return a?this.has(e)?this.values[e]:t[a]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,a){for(var r=0;r<a.length;++r)if(t===a[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var a;return(a=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100)?(this.set(e,t),!0):!1}};function Vn(e,t,a,r){var n=r?e.split(r):[e];for(var i in n)if(typeof n[i]=="string"){var h=n[i].split(a);if(h.length===2){var l=h[0].trim(),c=h[1].trim();t(l,c)}}}function uw(e,t,a){var r=e;function n(){var l=ls(e);if(l===null)throw new V2(V2.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),l}function i(l,c){var v=new wn;Vn(l,function(g,z){switch(g){case"region":for(var w=a.length-1;w>=0;w--)if(a[w].id===z){v.set(g,a[w].region);break}break;case"vertical":v.alt(g,z,["rl","lr"]);break;case"line":var L=z.split(","),V=L[0];v.integer(g,V),v.percent(g,V)&&v.set("snapToLines",!1),v.alt(g,V,["auto"]),L.length===2&&v.alt("lineAlign",L[1],["start","center","end"]);break;case"position":L=z.split(","),v.percent(g,L[0]),L.length===2&&v.alt("positionAlign",L[1],["start","center","end"]);break;case"size":v.percent(g,z);break;case"align":v.alt(g,z,["start","center","end","left","right"]);break}},/:/,/\s/),c.region=v.get("region",null),c.vertical=v.get("vertical","");try{c.line=v.get("line","auto")}catch{}c.lineAlign=v.get("lineAlign","start"),c.snapToLines=v.get("snapToLines",!0),c.size=v.get("size",100);try{c.align=v.get("align","center")}catch{c.align=v.get("align","middle")}try{c.position=v.get("position","auto")}catch{c.position=v.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},c.align)}c.positionAlign=v.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},c.align)}function h(){e=e.replace(/^\s+/,"")}if(h(),t.startTime=n(),h(),e.substr(0,3)!=="-->")throw new V2(V2.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+r);e=e.substr(3),h(),t.endTime=n(),h(),i(e,t)}var is=Ru.createElement&&Ru.createElement("textarea"),gw={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},ju={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},pw={v:"title",lang:"lang"},Nu={rt:"ruby"};function Uu(e,t){function a(){if(!t)return null;function V(k){return t=t.substr(k.length),k}var b=t.match(/^([^<]*)(<[^>]*>?)?/);return V(b[1]?b[1]:b[2])}function r(V){return is.innerHTML=V,V=is.textContent,is.textContent="",V}function n(V,b){return!Nu[b.localName]||Nu[b.localName]===V.localName}function i(V,b){var k=gw[V];if(!k)return null;var m=e.document.createElement(k),H=pw[V];return H&&b&&(m[H]=b.trim()),m}for(var h=e.document.createElement("div"),l=h,c,v=[];(c=a())!==null;){if(c[0]==="<"){if(c[1]==="/"){v.length&&v[v.length-1]===c.substr(2).replace(">","")&&(v.pop(),l=l.parentNode);continue}var g=ls(c.substr(1,c.length-2)),z;if(g){z=e.document.createProcessingInstruction("timestamp",g),l.appendChild(z);continue}var w=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!w||(z=i(w[1],w[3]),!z)||!n(l,z))continue;if(w[2]){var L=w[2].split(".");L.forEach(function(V){var b=/^bg_/.test(V),k=b?V.slice(3):V;if(ju.hasOwnProperty(k)){var m=b?"background-color":"color",H=ju[k];z.style[m]=H}}),z.className=L.join(" ")}v.push(w[1]),l.appendChild(z),l=z;continue}l.appendChild(e.document.createTextNode(r(c)))}return h}var Fu=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function fw(e){for(var t=0;t<Fu.length;t++){var a=Fu[t];if(e>=a[0]&&e<=a[1])return!0}return!1}function zw(e){var t=[],a="",r;if(!e||!e.childNodes)return"ltr";function n(l,c){for(var v=c.childNodes.length-1;v>=0;v--)l.push(c.childNodes[v])}function i(l){if(!l||!l.length)return null;var c=l.pop(),v=c.textContent||c.innerText;if(v){var g=v.match(/^.*(\n|\r)/);return g?(l.length=0,g[0]):v}if(c.tagName==="ruby")return i(l);if(c.childNodes)return n(l,c),i(l)}for(n(t,e);a=i(t);)for(var h=0;h<a.length;h++)if(r=a.charCodeAt(h),fw(r))return"rtl";return"ltr"}function Mw(e){if(typeof e.line=="number"&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,a=t.textTrackList,r=0,n=0;n<a.length&&a[n]!==t;n++)a[n].mode==="showing"&&r++;return++r*-1}function xh(){}xh.prototype.applyStyles=function(e,t){t=t||this.div;for(var a in e)e.hasOwnProperty(a)&&(t.style[a]=e[a])};xh.prototype.formatStyle=function(e,t){return e===0?0:e+t};function Hh(e,t,a){xh.call(this),this.cue=t,this.cueDiv=Uu(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:zw(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:a.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var n=0;switch(t.positionAlign){case"start":n=t.position;break;case"center":n=t.position-t.size/2;break;case"end":n=t.position-t.size;break}t.vertical===""?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}Hh.prototype=hs(xh.prototype);Hh.prototype.constructor=Hh;function Xt(e){var t,a,r,n;if(e.div){a=e.div.offsetHeight,r=e.div.offsetWidth,n=e.div.offsetTop;var i=(i=e.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects();e=e.div.getBoundingClientRect(),t=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0}this.left=e.left,this.right=e.right,this.top=e.top||n,this.height=e.height||a,this.bottom=e.bottom||n+(e.height||a),this.width=e.width||r,this.lineHeight=t!==void 0?t:e.lineHeight}Xt.prototype.move=function(e,t){switch(t=t!==void 0?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}};Xt.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};Xt.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1};Xt.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right};Xt.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}};Xt.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),a=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),r=t*a;return r/(this.height*this.width)};Xt.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}};Xt.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,a=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var n={left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||a};return n};function mw(e,t,a,r){function n(k,m){for(var H,y=new Xt(k),B=1,_=0;_<m.length;_++){for(;k.overlapsOppositeAxis(a,m[_])||k.within(a)&&k.overlapsAny(r);)k.move(m[_]);if(k.within(a))return k;var j=k.intersectPercentage(a);B>j&&(H=new Xt(k),B=j),k=new Xt(y)}return H||y}var i=new Xt(t),h=t.cue,l=Mw(h),c=[];if(h.snapToLines){var v;switch(h.vertical){case"":c=["+y","-y"],v="height";break;case"rl":c=["+x","-x"],v="width";break;case"lr":c=["-x","+x"],v="width";break}var g=i.lineHeight,z=g*Math.round(l),w=a[v]+g,L=c[0];Math.abs(z)>w&&(z=z<0?-1:1,z*=Math.ceil(w/g)*g),l<0&&(z+=h.vertical===""?a.height:a.width,c=c.reverse()),i.move(L,z)}else{var V=i.lineHeight/a.height*100;switch(h.lineAlign){case"center":l-=V/2;break;case"end":l-=V;break}switch(h.vertical){case"":t.applyStyles({top:t.formatStyle(l,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(l,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(l,"%")});break}c=["+y","-x","+x","-y"],i=new Xt(t)}var b=n(i,c);t.move(b.toCSSCompatValues(a))}function Ha(){}Ha.StringDecoder=function(){return{decode:function(e){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};Ha.convertCueToDOMTree=function(e,t){return!e||!t?null:Uu(e,t)};var Hw=.05,xw="sans-serif",Vw="1.5%";Ha.processCues=function(e,t,a){if(!e||!t||!a)return null;for(;a.firstChild;)a.removeChild(a.firstChild);var r=e.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=Vw,a.appendChild(r);function n(g){for(var z=0;z<g.length;z++)if(g[z].hasBeenReset||!g[z].displayState)return!0;return!1}if(!n(t)){for(var i=0;i<t.length;i++)r.appendChild(t[i].displayState);return}var h=[],l=Xt.getSimpleBoxPosition(r),c=Math.round(l.height*Hw*100)/100,v={font:c+"px "+xw};(function(){for(var g,z,w=0;w<t.length;w++)z=t[w],g=new Hh(e,z,v),r.appendChild(g.div),mw(e,g,l,h),z.displayState=g.div,h.push(Xt.getSimpleBoxPosition(g))})()};Ha.Parser=function(e,t,a){a||(a=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=a||new TextDecoder("utf8"),this.regionList=[]};Ha.Parser.prototype={reportOrThrowError:function(e){if(e instanceof V2)this.onparsingerror&&this.onparsingerror(e);else throw e},parse:function(e){var t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function a(){for(var g=t.buffer,z=0;z<g.length&&g[z]!=="\r"&&g[z]!==`
`;)++z;var w=g.substr(0,z);return g[z]==="\r"&&++z,g[z]===`
`&&++z,t.buffer=g.substr(z),w}function r(g){var z=new wn;if(Vn(g,function(L,V){switch(L){case"id":z.set(L,V);break;case"width":z.percent(L,V);break;case"lines":z.integer(L,V);break;case"regionanchor":case"viewportanchor":var b=V.split(",");if(b.length!==2)break;var k=new wn;if(k.percent("x",b[0]),k.percent("y",b[1]),!k.has("x")||!k.has("y"))break;z.set(L+"X",k.get("x")),z.set(L+"Y",k.get("y"));break;case"scroll":z.alt(L,V,["up"]);break}},/=/,/\s/),z.has("id")){var w=new(t.vttjs.VTTRegion||t.window.VTTRegion);w.width=z.get("width",100),w.lines=z.get("lines",3),w.regionAnchorX=z.get("regionanchorX",0),w.regionAnchorY=z.get("regionanchorY",100),w.viewportAnchorX=z.get("viewportanchorX",0),w.viewportAnchorY=z.get("viewportanchorY",100),w.scroll=z.get("scroll",""),t.onregion&&t.onregion(w),t.regionList.push({id:z.get("id"),region:w})}}function n(g){var z=new wn;Vn(g,function(w,L){switch(w){case"MPEGT":z.integer(w+"S",L);break;case"LOCA":z.set(w+"L",ls(L));break}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:z.get("MPEGTS"),LOCAL:z.get("LOCAL")})}function i(g){g.match(/X-TIMESTAMP-MAP/)?Vn(g,function(z,w){switch(z){case"X-TIMESTAMP-MAP":n(w);break}},/=/):Vn(g,function(z,w){switch(z){case"Region":r(w);break}},/:/)}try{var h;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;h=a();var l=h.match(/^WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new V2(V2.Errors.BadSignature);t.state="HEADER"}for(var c=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(c?c=!1:h=a(),t.state){case"HEADER":/:/.test(h)?i(h):h||(t.state="ID");continue;case"NOTE":h||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(h)){t.state="NOTE";break}if(!h)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch{t.cue.align="middle"}if(t.state="CUE",h.indexOf("-->")===-1){t.cue.id=h;continue}case"CUE":try{uw(h,t.cue,t.regionList)}catch(g){t.reportOrThrowError(g),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var v=h.indexOf("-->")!==-1;if(!h||v&&(c=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+=`
`),t.cue.text+=h.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":h||(t.state="ID");continue}}}catch(g){t.reportOrThrowError(g),t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL")throw new V2(V2.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};$u.exports=Ha});var Ku=S1((F_,qu)=>{var ww="auto",Lw={"":1,lr:1,rl:1},yw={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Bw(e){if(typeof e!="string")return!1;var t=Lw[e.toLowerCase()];return t?e.toLowerCase():!1}function os(e){if(typeof e!="string")return!1;var t=yw[e.toLowerCase()];return t?e.toLowerCase():!1}function Gu(e,t,a){this.hasBeenReset=!1;var r="",n=!1,i=e,h=t,l=a,c=null,v="",g=!0,z="auto",w="start",L="auto",V="auto",b=100,k="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(m){r=""+m}},pauseOnExit:{enumerable:!0,get:function(){return n},set:function(m){n=!!m}},startTime:{enumerable:!0,get:function(){return i},set:function(m){if(typeof m!="number")throw new TypeError("Start time must be set to a number.");i=m,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(m){if(typeof m!="number")throw new TypeError("End time must be set to a number.");h=m,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(m){l=""+m,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(m){c=m,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(m){var H=Bw(m);if(H===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=H,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return g},set:function(m){g=!!m,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return z},set:function(m){if(typeof m!="number"&&m!==ww)throw new SyntaxError("Line: an invalid number or illegal string was specified.");z=m,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return w},set:function(m){var H=os(m);H?(w=H,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return L},set:function(m){if(m<0||m>100)throw new Error("Position must be between 0 and 100.");L=m,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return V},set:function(m){var H=os(m);H?(V=H,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return b},set:function(m){if(m<0||m>100)throw new Error("Size must be between 0 and 100.");b=m,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return k},set:function(m){var H=os(m);if(!H)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");k=H,this.hasBeenReset=!0}}}),this.displayState=void 0}Gu.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};qu.exports=Gu});var Yu=S1((U_,Xu)=>{var Cw={"":!0,up:!0};function Sw(e){if(typeof e!="string")return!1;var t=Cw[e.toLowerCase()];return t?e.toLowerCase():!1}function Ln(e){return typeof e=="number"&&e>=0&&e<=100}function _w(){var e=100,t=3,a=0,r=100,n=0,i=100,h="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(l){if(!Ln(l))throw new Error("Width must be between 0 and 100.");e=l}},lines:{enumerable:!0,get:function(){return t},set:function(l){if(typeof l!="number")throw new TypeError("Lines must be set to a number.");t=l}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(l){if(!Ln(l))throw new Error("RegionAnchorX must be between 0 and 100.");r=l}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(l){if(!Ln(l))throw new Error("RegionAnchorY must be between 0 and 100.");a=l}},viewportAnchorY:{enumerable:!0,get:function(){return i},set:function(l){if(!Ln(l))throw new Error("ViewportAnchorY must be between 0 and 100.");i=l}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(l){if(!Ln(l))throw new Error("ViewportAnchorX must be between 0 and 100.");n=l}},scroll:{enumerable:!0,get:function(){return h},set:function(l){var c=Sw(l);c===!1?console.warn("Scroll: an invalid or illegal string was specified."):h=c}}})}Xu.exports=_w});var Ju=S1(($_,Qu)=>{var Ye=D2(),g4=Qu.exports={WebVTT:Wu(),VTTCue:Ku(),VTTRegion:Yu()};Ye.vttjs=g4;Ye.WebVTT=g4.WebVTT;var Tw=g4.VTTCue,bw=g4.VTTRegion,Ow=Ye.VTTCue,Aw=Ye.VTTRegion;g4.shim=function(){Ye.VTTCue=Tw,Ye.VTTRegion=bw};g4.restore=function(){Ye.VTTCue=Ow,Ye.VTTRegion=Aw};Ye.VTTCue||g4.shim()});var ss=S1((yn,cs)=>{(function(e){var t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,a=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,i={buildAbsoluteURL:function(h,l,c){if(c=c||{},h=h.trim(),l=l.trim(),!l){if(!c.alwaysNormalize)return h;var v=i.parseURL(h);if(!v)throw new Error("Error trying to parse base URL.");return v.path=i.normalizePath(v.path),i.buildURLFromParts(v)}var g=i.parseURL(l);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return c.alwaysNormalize?(g.path=i.normalizePath(g.path),i.buildURLFromParts(g)):l;var z=i.parseURL(h);if(!z)throw new Error("Error trying to parse base URL.");if(!z.netLoc&&z.path&&z.path[0]!=="/"){var w=a.exec(z.path);z.netLoc=w[1],z.path=w[2]}z.netLoc&&!z.path&&(z.path="/");var L={scheme:z.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(L.netLoc=z.netLoc,g.path[0]!=="/"))if(!g.path)L.path=z.path,g.params||(L.params=z.params,g.query||(L.query=z.query));else{var V=z.path,b=V.substring(0,V.lastIndexOf("/")+1)+g.path;L.path=i.normalizePath(b)}return L.path===null&&(L.path=c.alwaysNormalize?i.normalizePath(g.path):g.path),i.buildURLFromParts(L)},parseURL:function(h){var l=t.exec(h);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(h){for(h=h.split("").reverse().join("").replace(r,"");h.length!==(h=h.replace(n,"")).length;);return h.split("").reverse().join("")},buildURLFromParts:function(h){return h.scheme+h.netLoc+h.path+h.params+h.query+h.fragment}};typeof yn=="object"&&typeof cs=="object"?cs.exports=i:typeof define=="function"&&define.amd?define([],function(){return i}):typeof yn=="object"?yn.URLToolkit=i:e.URLToolkit=i})(yn)});var Cn=S1(Va=>{"use strict";function Kw(e,t,a){if(a===void 0&&(a=Array.prototype),e&&typeof a.find=="function")return a.find.call(e,t);for(var r=0;r<e.length;r++)if(Object.prototype.hasOwnProperty.call(e,r)){var n=e[r];if(t.call(void 0,n,r,e))return n}}function _s(e,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(e):e}function Xw(e,t){if(e===null||typeof e!="object")throw new TypeError("target is not an object");for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}var cg=_s({HTML:"text/html",isHTML:function(e){return e===cg.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),sg=_s({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===sg.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Va.assign=Xw;Va.find=Kw;Va.freeze=_s;Va.MIME_TYPE=cg;Va.NAMESPACE=sg});var js=S1(T0=>{var Mg=Cn(),Le=Mg.find,Sn=Mg.NAMESPACE;function Yw(e){return e!==""}function Qw(e){return e?e.split(/[\t\n\f\r ]+/).filter(Yw):[]}function Jw(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function vg(e){if(!e)return[];var t=Qw(e);return Object.keys(t.reduce(Jw,{}))}function Zw(e){return function(t){return e&&e.indexOf(t)!==-1}}function Tn(e,t){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}function s2(e,t){var a=e.prototype;if(!(a instanceof t)){let n=function(){};var r=n;n.prototype=t.prototype,n=new n,Tn(a,n),e.prototype=a=n}a.constructor!=e&&(typeof e!="function"&&console.error("unknown Class:"+e),a.constructor=e)}var v2={},ie=v2.ELEMENT_NODE=1,La=v2.ATTRIBUTE_NODE=2,Sh=v2.TEXT_NODE=3,mg=v2.CDATA_SECTION_NODE=4,Hg=v2.ENTITY_REFERENCE_NODE=5,tL=v2.ENTITY_NODE=6,xg=v2.PROCESSING_INSTRUCTION_NODE=7,Vg=v2.COMMENT_NODE=8,wg=v2.DOCUMENT_NODE=9,Lg=v2.DOCUMENT_TYPE_NODE=10,t0=v2.DOCUMENT_FRAGMENT_NODE=11,eL=v2.NOTATION_NODE=12,Rt={},Bt={},lT=Rt.INDEX_SIZE_ERR=(Bt[1]="Index size error",1),oT=Rt.DOMSTRING_SIZE_ERR=(Bt[2]="DOMString size error",2),c2=Rt.HIERARCHY_REQUEST_ERR=(Bt[3]="Hierarchy request error",3),cT=Rt.WRONG_DOCUMENT_ERR=(Bt[4]="Wrong document",4),sT=Rt.INVALID_CHARACTER_ERR=(Bt[5]="Invalid character",5),vT=Rt.NO_DATA_ALLOWED_ERR=(Bt[6]="No data allowed",6),dT=Rt.NO_MODIFICATION_ALLOWED_ERR=(Bt[7]="No modification allowed",7),yg=Rt.NOT_FOUND_ERR=(Bt[8]="Not found",8),uT=Rt.NOT_SUPPORTED_ERR=(Bt[9]="Not supported",9),dg=Rt.INUSE_ATTRIBUTE_ERR=(Bt[10]="Attribute in use",10),gT=Rt.INVALID_STATE_ERR=(Bt[11]="Invalid state",11),pT=Rt.SYNTAX_ERR=(Bt[12]="Syntax error",12),fT=Rt.INVALID_MODIFICATION_ERR=(Bt[13]="Invalid modification",13),zT=Rt.NAMESPACE_ERR=(Bt[14]="Invalid namespace",14),MT=Rt.INVALID_ACCESS_ERR=(Bt[15]="Invalid access",15);function ft(e,t){if(t instanceof Error)var a=t;else a=this,Error.call(this,Bt[e]),this.message=Bt[e],Error.captureStackTrace&&Error.captureStackTrace(this,ft);return a.code=e,t&&(this.message=this.message+": "+t),a}ft.prototype=Error.prototype;Tn(Rt,ft);function Ze(){}Ze.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var a=[],r=0;r<this.length;r++)wa(this[r],a,e,t);return a.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}};function ya(e,t){this._node=e,this._refresh=t,Os(this)}function Os(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var a=e._refresh(e._node);Dg(e,"length",a.length),Tn(a,e),e._inc=t}}ya.prototype.item=function(e){return Os(this),this[e]};s2(ya,Ze);function _h(){}function Bg(e,t){for(var a=e.length;a--;)if(e[a]===t)return a}function ug(e,t,a,r){if(r?t[Bg(t,r)]=a:t[t.length++]=a,e){a.ownerElement=e;var n=e.ownerDocument;n&&(r&&_g(n,e,r),aL(n,e,a))}}function gg(e,t,a){var r=Bg(t,a);if(r>=0){for(var n=t.length-1;r<n;)t[r]=t[++r];if(t.length=n,e){var i=e.ownerDocument;i&&(_g(i,e,a),a.ownerElement=null)}}else throw new ft(yg,new Error(e.tagName+"@"+a))}_h.prototype={length:0,item:Ze.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var a=this[t];if(a.nodeName==e)return a}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new ft(dg);var a=this.getNamedItem(e.nodeName);return ug(this._ownerElement,this,e,a),a},setNamedItemNS:function(e){var t=e.ownerElement,a;if(t&&t!=this._ownerElement)throw new ft(dg);return a=this.getNamedItemNS(e.namespaceURI,e.localName),ug(this._ownerElement,this,e,a),a},removeNamedItem:function(e){var t=this.getNamedItem(e);return gg(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var a=this.getNamedItemNS(e,t);return gg(this._ownerElement,this,a),a},getNamedItemNS:function(e,t){for(var a=this.length;a--;){var r=this[a];if(r.localName==t&&r.namespaceURI==e)return r}return null}};function Cg(){}Cg.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,a){var r=new bn;if(r.implementation=this,r.childNodes=new Ze,r.doctype=a||null,a&&r.appendChild(a),t){var n=r.createElementNS(e,t);r.appendChild(n)}return r},createDocumentType:function(e,t,a){var r=new Oh;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=a||"",r}};function U1(){}U1.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return Th(this,e,t)},replaceChild:function(e,t){Th(this,e,t,bg),t&&this.removeChild(t)},removeChild:function(e){return Tg(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return bs(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Sh&&e.nodeType==Sh?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var a=t._nsMap;if(a){for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&a[r]===e)return r}t=t.nodeType==La?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var a=t._nsMap;if(a&&Object.prototype.hasOwnProperty.call(a,e))return a[e];t=t.nodeType==La?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function Sg(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}Tn(v2,U1);Tn(v2,U1.prototype);function _n(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_n(e,t))return!0;while(e=e.nextSibling)}function bn(){this.ownerDocument=this}function aL(e,t,a){e&&e._inc++;var r=a.namespaceURI;r===Sn.XMLNS&&(t._nsMap[a.prefix?a.localName:""]=a.value)}function _g(e,t,a,r){e&&e._inc++;var n=a.namespaceURI;n===Sn.XMLNS&&delete t._nsMap[a.prefix?a.localName:""]}function As(e,t,a){if(e&&e._inc){e._inc++;var r=t.childNodes;if(a)r[r.length++]=a;else{for(var n=t.firstChild,i=0;n;)r[i++]=n,n=n.nextSibling;r.length=i,delete r[r.length]}}}function Tg(e,t){var a=t.previousSibling,r=t.nextSibling;return a?a.nextSibling=r:e.firstChild=r,r?r.previousSibling=a:e.lastChild=a,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,As(e.ownerDocument,e),t}function rL(e){return e&&(e.nodeType===U1.DOCUMENT_NODE||e.nodeType===U1.DOCUMENT_FRAGMENT_NODE||e.nodeType===U1.ELEMENT_NODE)}function nL(e){return e&&(ye(e)||Es(e)||e0(e)||e.nodeType===U1.DOCUMENT_FRAGMENT_NODE||e.nodeType===U1.COMMENT_NODE||e.nodeType===U1.PROCESSING_INSTRUCTION_NODE)}function e0(e){return e&&e.nodeType===U1.DOCUMENT_TYPE_NODE}function ye(e){return e&&e.nodeType===U1.ELEMENT_NODE}function Es(e){return e&&e.nodeType===U1.TEXT_NODE}function pg(e,t){var a=e.childNodes||[];if(Le(a,ye)||e0(t))return!1;var r=Le(a,e0);return!(t&&r&&a.indexOf(r)>a.indexOf(t))}function fg(e,t){var a=e.childNodes||[];function r(i){return ye(i)&&i!==t}if(Le(a,r))return!1;var n=Le(a,e0);return!(t&&n&&a.indexOf(n)>a.indexOf(t))}function iL(e,t,a){if(!rL(e))throw new ft(c2,"Unexpected parent node type "+e.nodeType);if(a&&a.parentNode!==e)throw new ft(yg,"child not in parent");if(!nL(t)||e0(t)&&e.nodeType!==U1.DOCUMENT_NODE)throw new ft(c2,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function hL(e,t,a){var r=e.childNodes||[],n=t.childNodes||[];if(t.nodeType===U1.DOCUMENT_FRAGMENT_NODE){var i=n.filter(ye);if(i.length>1||Le(n,Es))throw new ft(c2,"More than one element or text in fragment");if(i.length===1&&!pg(e,a))throw new ft(c2,"Element in fragment can not be inserted before doctype")}if(ye(t)&&!pg(e,a))throw new ft(c2,"Only one element can be added and only after doctype");if(e0(t)){if(Le(r,e0))throw new ft(c2,"Only one doctype is allowed");var h=Le(r,ye);if(a&&r.indexOf(h)<r.indexOf(a))throw new ft(c2,"Doctype can only be inserted before an element");if(!a&&h)throw new ft(c2,"Doctype can not be appended since element is present")}}function bg(e,t,a){var r=e.childNodes||[],n=t.childNodes||[];if(t.nodeType===U1.DOCUMENT_FRAGMENT_NODE){var i=n.filter(ye);if(i.length>1||Le(n,Es))throw new ft(c2,"More than one element or text in fragment");if(i.length===1&&!fg(e,a))throw new ft(c2,"Element in fragment can not be inserted before doctype")}if(ye(t)&&!fg(e,a))throw new ft(c2,"Only one element can be added and only after doctype");if(e0(t)){let c=function(v){return e0(v)&&v!==a};var l=c;if(Le(r,c))throw new ft(c2,"Only one doctype is allowed");var h=Le(r,ye);if(a&&r.indexOf(h)<r.indexOf(a))throw new ft(c2,"Doctype can only be inserted before an element")}}function Th(e,t,a,r){iL(e,t,a),e.nodeType===U1.DOCUMENT_NODE&&(r||hL)(e,t,a);var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===t0){var i=t.firstChild;if(i==null)return t;var h=t.lastChild}else i=h=t;var l=a?a.previousSibling:e.lastChild;i.previousSibling=l,h.nextSibling=a,l?l.nextSibling=i:e.firstChild=i,a==null?e.lastChild=h:a.previousSibling=h;do i.parentNode=e;while(i!==h&&(i=i.nextSibling));return As(e.ownerDocument||e,e),t.nodeType==t0&&(t.firstChild=t.lastChild=null),t}function lL(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,As(e.ownerDocument,e,t),t}bn.prototype={nodeName:"#document",nodeType:wg,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==t0){for(var a=e.firstChild;a;){var r=a.nextSibling;this.insertBefore(a,t),a=r}return e}return Th(this,e,t),e.ownerDocument=this,this.documentElement===null&&e.nodeType===ie&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),Tg(this,e)},replaceChild:function(e,t){Th(this,e,t,bg),e.ownerDocument=this,t&&this.removeChild(t),ye(e)&&(this.documentElement=e)},importNode:function(e,t){return Pg(this,e,t)},getElementById:function(e){var t=null;return _n(this.documentElement,function(a){if(a.nodeType==ie&&a.getAttribute("id")==e)return t=a,!0}),t},getElementsByClassName:function(e){var t=vg(e);return new ya(this,function(a){var r=[];return t.length>0&&_n(a.documentElement,function(n){if(n!==a&&n.nodeType===ie){var i=n.getAttribute("class");if(i){var h=e===i;if(!h){var l=vg(i);h=t.every(Zw(l))}h&&r.push(n)}}}),r})},createElement:function(e){var t=new z4;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new Ze;var a=t.attributes=new _h;return a._ownerElement=t,t},createDocumentFragment:function(){var e=new Ah;return e.ownerDocument=this,e.childNodes=new Ze,e},createTextNode:function(e){var t=new ks;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Ps;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Ds;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var a=new Rs;return a.ownerDocument=this,a.tagName=a.target=e,a.nodeValue=a.data=t,a},createAttribute:function(e){var t=new bh;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Is;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var a=new z4,r=t.split(":"),n=a.attributes=new _h;return a.childNodes=new Ze,a.ownerDocument=this,a.nodeName=t,a.tagName=t,a.namespaceURI=e,r.length==2?(a.prefix=r[0],a.localName=r[1]):a.localName=t,n._ownerElement=a,a},createAttributeNS:function(e,t){var a=new bh,r=t.split(":");return a.ownerDocument=this,a.nodeName=t,a.name=t,a.namespaceURI=e,a.specified=!0,r.length==2?(a.prefix=r[0],a.localName=r[1]):a.localName=t,a}};s2(bn,U1);function z4(){this._nsMap={}}z4.prototype={nodeType:ie,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var a=this.ownerDocument.createAttribute(e);a.value=a.nodeValue=""+t,this.setAttributeNode(a)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===t0?this.insertBefore(e,null):lL(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var a=this.getAttributeNodeNS(e,t);a&&this.removeAttributeNode(a)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var a=this.getAttributeNodeNS(e,t);return a&&a.value||""},setAttributeNS:function(e,t,a){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+a,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new ya(this,function(t){var a=[];return _n(t,function(r){r!==t&&r.nodeType==ie&&(e==="*"||r.tagName==e)&&a.push(r)}),a})},getElementsByTagNameNS:function(e,t){return new ya(this,function(a){var r=[];return _n(a,function(n){n!==a&&n.nodeType===ie&&(e==="*"||n.namespaceURI===e)&&(t==="*"||n.localName==t)&&r.push(n)}),r})}};bn.prototype.getElementsByTagName=z4.prototype.getElementsByTagName;bn.prototype.getElementsByTagNameNS=z4.prototype.getElementsByTagNameNS;s2(z4,U1);function bh(){}bh.prototype.nodeType=La;s2(bh,U1);function On(){}On.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(Bt[c2])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,a){var r=this.data.substring(0,e),n=this.data.substring(e+t);a=r+a+n,this.nodeValue=this.data=a,this.length=a.length}};s2(On,U1);function ks(){}ks.prototype={nodeName:"#text",nodeType:Sh,splitText:function(e){var t=this.data,a=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(a);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};s2(ks,On);function Ps(){}Ps.prototype={nodeName:"#comment",nodeType:Vg};s2(Ps,On);function Ds(){}Ds.prototype={nodeName:"#cdata-section",nodeType:mg};s2(Ds,On);function Oh(){}Oh.prototype.nodeType=Lg;s2(Oh,U1);function Og(){}Og.prototype.nodeType=eL;s2(Og,U1);function Ag(){}Ag.prototype.nodeType=tL;s2(Ag,U1);function Is(){}Is.prototype.nodeType=Hg;s2(Is,U1);function Ah(){}Ah.prototype.nodeName="#document-fragment";Ah.prototype.nodeType=t0;s2(Ah,U1);function Rs(){}Rs.prototype.nodeType=xg;s2(Rs,U1);function Eg(){}Eg.prototype.serializeToString=function(e,t,a){return kg.call(e,t,a)};U1.prototype.toString=kg;function kg(e,t){var a=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,i=r.namespaceURI;if(i&&n==null){var n=r.lookupPrefix(i);if(n==null)var h=[{namespace:i,prefix:null}]}return wa(this,a,e,t,h),a.join("")}function zg(e,t,a){var r=e.prefix||"",n=e.namespaceURI;if(!n||r==="xml"&&n===Sn.XML||n===Sn.XMLNS)return!1;for(var i=a.length;i--;){var h=a[i];if(h.prefix===r)return h.namespace!==n}return!0}function Ts(e,t,a){e.push(" ",t,'="',a.replace(/[<>&"\t\n\r]/g,Sg),'"')}function wa(e,t,a,r,n){if(n||(n=[]),r)if(e=r(e),e){if(typeof e=="string"){t.push(e);return}}else return;switch(e.nodeType){case ie:var i=e.attributes,h=i.length,m=e.firstChild,l=e.tagName;a=Sn.isHTML(e.namespaceURI)||a;var c=l;if(!a&&!e.prefix&&e.namespaceURI){for(var v,g=0;g<i.length;g++)if(i.item(g).name==="xmlns"){v=i.item(g).value;break}if(!v)for(var z=n.length-1;z>=0;z--){var w=n[z];if(w.prefix===""&&w.namespace===e.namespaceURI){v=w.namespace;break}}if(v!==e.namespaceURI)for(var z=n.length-1;z>=0;z--){var w=n[z];if(w.namespace===e.namespaceURI){w.prefix&&(c=w.prefix+":"+l);break}}}t.push("<",c);for(var L=0;L<h;L++){var V=i.item(L);V.prefix=="xmlns"?n.push({prefix:V.localName,namespace:V.value}):V.nodeName=="xmlns"&&n.push({prefix:"",namespace:V.value})}for(var L=0;L<h;L++){var V=i.item(L);if(zg(V,a,n)){var b=V.prefix||"",k=V.namespaceURI;Ts(t,b?"xmlns:"+b:"xmlns",k),n.push({prefix:b,namespace:k})}wa(V,t,a,r,n)}if(l===c&&zg(e,a,n)){var b=e.prefix||"",k=e.namespaceURI;Ts(t,b?"xmlns:"+b:"xmlns",k),n.push({prefix:b,namespace:k})}if(m||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),a&&/^script$/i.test(l))for(;m;)m.data?t.push(m.data):wa(m,t,a,r,n.slice()),m=m.nextSibling;else for(;m;)wa(m,t,a,r,n.slice()),m=m.nextSibling;t.push("</",c,">")}else t.push("/>");return;case wg:case t0:for(var m=e.firstChild;m;)wa(m,t,a,r,n.slice()),m=m.nextSibling;return;case La:return Ts(t,e.name,e.value);case Sh:return t.push(e.data.replace(/[<&>]/g,Sg));case mg:return t.push("<![CDATA[",e.data,"]]>");case Vg:return t.push("<!--",e.data,"-->");case Lg:var H=e.publicId,y=e.systemId;if(t.push("<!DOCTYPE ",e.name),H)t.push(" PUBLIC ",H),y&&y!="."&&t.push(" ",y),t.push(">");else if(y&&y!=".")t.push(" SYSTEM ",y,">");else{var B=e.internalSubset;B&&t.push(" [",B,"]"),t.push(">")}return;case xg:return t.push("<?",e.target," ",e.data,"?>");case Hg:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Pg(e,t,a){var r;switch(t.nodeType){case ie:r=t.cloneNode(!1),r.ownerDocument=e;case t0:break;case La:a=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,a)for(var n=t.firstChild;n;)r.appendChild(Pg(e,n,a)),n=n.nextSibling;return r}function bs(e,t,a){var r=new t.constructor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i!="object"&&i!=r[n]&&(r[n]=i)}switch(t.childNodes&&(r.childNodes=new Ze),r.ownerDocument=e,r.nodeType){case ie:var h=t.attributes,l=r.attributes=new _h,c=h.length;l._ownerElement=r;for(var v=0;v<c;v++)r.setAttributeNode(bs(e,h.item(v),!0));break;case La:a=!0}if(a)for(var g=t.firstChild;g;)r.appendChild(bs(e,g,a)),g=g.nextSibling;return r}function Dg(e,t,a){e[t]=a}try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case ie:case t0:var a=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&a.push(e(t)),t=t.nextSibling;return a.join("");default:return t.nodeValue}};mT=e,Object.defineProperty(ya.prototype,"length",{get:function(){return Os(this),this.$$length}}),Object.defineProperty(U1.prototype,"textContent",{get:function(){return e(this)},set:function(t){switch(this.nodeType){case ie:case t0:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),Dg=function(t,a,r){t["$$"+a]=r}}}catch{}var mT;T0.DocumentType=Oh;T0.DOMException=ft;T0.DOMImplementation=Cg;T0.Element=z4;T0.Node=U1;T0.NodeList=Ze;T0.XMLSerializer=Eg});var Rg=S1(An=>{var Ig=Cn().freeze;An.XML_ENTITIES=Ig({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});An.HTML_ENTITIES=Ig({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"});An.entityMap=An.HTML_ENTITIES});var qg=S1(Fs=>{var Dn=Cn().NAMESPACE,Ns=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,jg=new RegExp("[\\-\\.0-9"+Ns.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ng=new RegExp("^"+Ns.source+jg.source+"*(?::"+Ns.source+jg.source+"*)?$"),En=0,b0=1,Ba=2,kn=3,Ca=4,Sa=5,Pn=6,Eh=7;function _a(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,_a)}_a.prototype=new Error;_a.prototype.name=_a.name;function $g(){}$g.prototype={parse:function(e,t,a){var r=this.domBuilder;r.startDocument(),Wg(t,t={}),oL(e,t,a,r,this.errorHandler),r.endDocument()}};function oL(e,t,a,r,n){function i(l1){if(l1>65535){l1-=65536;var s1=55296+(l1>>10),m1=56320+(l1&1023);return String.fromCharCode(s1,m1)}else return String.fromCharCode(l1)}function h(l1){var s1=l1.slice(1,-1);return Object.hasOwnProperty.call(a,s1)?a[s1]:s1.charAt(0)==="#"?i(parseInt(s1.substr(1).replace("x","0x"))):(n.error("entity not found:"+l1),l1)}function l(l1){if(l1>b){var s1=e.substring(b,l1).replace(/&#?\w+;/g,h);w&&c(b),r.characters(s1,0,l1-b),b=l1}}function c(l1,s1){for(;l1>=g&&(s1=z.exec(e));)v=s1.index,g=v+s1[0].length,w.lineNumber++;w.columnNumber=l1-v+1}for(var v=0,g=0,z=/.*(?:\r\n?|\n)|.*$/g,w=r.locator,L=[{currentNSMap:t}],V={},b=0;;){try{var k=e.indexOf("<",b);if(k<0){if(!e.substr(b).match(/^\s*$/)){var m=r.doc,H=m.createTextNode(e.substr(b));m.appendChild(H),r.currentElement=H}return}switch(k>b&&l(k),e.charAt(k+1)){case"/":var t1=e.indexOf(">",k+3),y=e.substring(k+2,t1).replace(/[ \t\n\r]+$/g,""),B=L.pop();t1<0?(y=e.substring(k+2).replace(/[\s<].*/,""),n.error("end tag name: "+y+" is not complete:"+B.tagName),t1=k+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),n.error("end tag name: "+y+" maybe not complete"),t1=k+1+y.length);var _=B.localNSMap,j=B.tagName==y,U=j||B.tagName&&B.tagName.toLowerCase()==y.toLowerCase();if(U){if(r.endElement(B.uri,B.localName,y),_)for(var q in _)Object.prototype.hasOwnProperty.call(_,q)&&r.endPrefixMapping(q);j||n.fatalError("end tag name: "+y+" is not match the current start tagName:"+B.tagName)}else L.push(B);t1++;break;case"?":w&&c(k),t1=uL(e,k,r);break;case"!":w&&c(k),t1=dL(e,k,r,n);break;default:w&&c(k);var D=new Gg,J=L[L.length-1].currentNSMap,t1=cL(e,k,D,J,h,n),Z=D.length;if(!D.closed&&vL(e,t1,D.tagName,V)&&(D.closed=!0,a.nbsp||n.warning("unclosed xml attribute")),w&&Z){for(var F=Fg(w,{}),c1=0;c1<Z;c1++){var a1=D[c1];c(a1.offset),a1.locator=Fg(w,{})}r.locator=F,Ug(D,r,J)&&L.push(D),r.locator=w}else Ug(D,r,J)&&L.push(D);Dn.isHTML(D.uri)&&!D.closed?t1=sL(e,t1,D.tagName,h,r):t1++}}catch(l1){if(l1 instanceof _a)throw l1;n.error("element parse error: "+l1),t1=-1}t1>b?b=t1:l(Math.max(k,b)+1)}}function Fg(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function cL(e,t,a,r,n,i){function h(L,V,b){a.attributeNames.hasOwnProperty(L)&&i.fatalError("Attribute "+L+" redefined"),a.addValue(L,V.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,n),b)}for(var l,c,v=++t,g=En;;){var z=e.charAt(v);switch(z){case"=":if(g===b0)l=e.slice(t,v),g=kn;else if(g===Ba)g=kn;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(g===kn||g===b0)if(g===b0&&(i.warning('attribute value must after "="'),l=e.slice(t,v)),t=v+1,v=e.indexOf(z,t),v>0)c=e.slice(t,v),h(l,c,t-1),g=Sa;else throw new Error("attribute value no end '"+z+"' match");else if(g==Ca)c=e.slice(t,v),h(l,c,t),i.warning('attribute "'+l+'" missed start quot('+z+")!!"),t=v+1,g=Sa;else throw new Error('attribute value must after "="');break;case"/":switch(g){case En:a.setTagName(e.slice(t,v));case Sa:case Pn:case Eh:g=Eh,a.closed=!0;case Ca:case b0:break;case Ba:a.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),g==En&&a.setTagName(e.slice(t,v)),v;case">":switch(g){case En:a.setTagName(e.slice(t,v));case Sa:case Pn:case Eh:break;case Ca:case b0:c=e.slice(t,v),c.slice(-1)==="/"&&(a.closed=!0,c=c.slice(0,-1));case Ba:g===Ba&&(c=l),g==Ca?(i.warning('attribute "'+c+'" missed quot(")!'),h(l,c,t)):((!Dn.isHTML(r[""])||!c.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),h(c,c,t));break;case kn:throw new Error("attribute value missed!!")}return v;case"\x80":z=" ";default:if(z<=" ")switch(g){case En:a.setTagName(e.slice(t,v)),g=Pn;break;case b0:l=e.slice(t,v),g=Ba;break;case Ca:var c=e.slice(t,v);i.warning('attribute "'+c+'" missed quot(")!!'),h(l,c,t);case Sa:g=Pn;break}else switch(g){case Ba:var w=a.tagName;(!Dn.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&i.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),h(l,l,t),t=v,g=b0;break;case Sa:i.warning('attribute space is required"'+l+'"!!');case Pn:g=b0,t=v;break;case kn:g=Ca,t=v;break;case Eh:throw new Error("elements closed character '/' and '>' must be connected to")}}v++}}function Ug(e,t,a){for(var r=e.tagName,n=null,z=e.length;z--;){var i=e[z],h=i.qName,l=i.value,w=h.indexOf(":");if(w>0)var c=i.prefix=h.slice(0,w),v=h.slice(w+1),g=c==="xmlns"&&v;else v=h,c=null,g=h==="xmlns"&&"";i.localName=v,g!==!1&&(n==null&&(n={},Wg(a,a={})),a[g]=n[g]=l,i.uri=Dn.XMLNS,t.startPrefixMapping(g,l))}for(var z=e.length;z--;){i=e[z];var c=i.prefix;c&&(c==="xml"&&(i.uri=Dn.XML),c!=="xmlns"&&(i.uri=a[c||""]))}var w=r.indexOf(":");w>0?(c=e.prefix=r.slice(0,w),v=e.localName=r.slice(w+1)):(c=null,v=e.localName=r);var L=e.uri=a[c||""];if(t.startElement(L,v,r,e),e.closed){if(t.endElement(L,v,r),n)for(c in n)Object.prototype.hasOwnProperty.call(n,c)&&t.endPrefixMapping(c)}else return e.currentNSMap=a,e.localNSMap=n,!0}function sL(e,t,a,r,n){if(/^(?:script|textarea)$/i.test(a)){var i=e.indexOf("</"+a+">",t),h=e.substring(t+1,i);if(/[&<]/.test(h))return/^script$/i.test(a)?(n.characters(h,0,h.length),i):(h=h.replace(/&#?\w+;/g,r),n.characters(h,0,h.length),i)}return t+1}function vL(e,t,a,r){var n=r[a];return n==null&&(n=e.lastIndexOf("</"+a+">"),n<t&&(n=e.lastIndexOf("</"+a)),r[a]=n),n<t}function Wg(e,t){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}function dL(e,t,a,r){var n=e.charAt(t+2);switch(n){case"-":if(e.charAt(t+3)==="-"){var i=e.indexOf("-->",t+4);return i>t?(a.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(e.substr(t+3,6)=="CDATA["){var i=e.indexOf("]]>",t+9);return a.startCDATA(),a.characters(e,t+9,i-t-9),a.endCDATA(),i+3}var h=gL(e,t),l=h.length;if(l>1&&/!doctype/i.test(h[0][0])){var c=h[1][0],v=!1,g=!1;l>3&&(/^public$/i.test(h[2][0])?(v=h[3][0],g=l>4&&h[4][0]):/^system$/i.test(h[2][0])&&(g=h[3][0]));var z=h[l-1];return a.startDTD(c,v,g),a.endDTD(),z.index+z[0].length}}return-1}function uL(e,t,a){var r=e.indexOf("?>",t);if(r){var n=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){var i=n[0].length;return a.processingInstruction(n[1],n[2]),r+2}else return-1}return-1}function Gg(){this.attributeNames={}}Gg.prototype={setTagName:function(e){if(!Ng.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,a){if(!Ng.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:a}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function gL(e,t){var a,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);a=n.exec(e);)if(r.push(a),a[1])return r}Fs.XMLReader=$g;Fs.ParseError=_a});var tp=S1(Ph=>{var pL=Cn(),fL=js(),Kg=Rg(),Qg=qg(),zL=fL.DOMImplementation,Xg=pL.NAMESPACE,ML=Qg.ParseError,mL=Qg.XMLReader;function Jg(e){return e.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Zg(e){this.options=e||{locator:{}}}Zg.prototype.parseFromString=function(e,t){var a=this.options,r=new mL,n=a.domBuilder||new In,i=a.errorHandler,h=a.locator,l=a.xmlns||{},c=/\/x?html?$/.test(t),v=c?Kg.HTML_ENTITIES:Kg.XML_ENTITIES;h&&n.setDocumentLocator(h),r.errorHandler=HL(i,n,h),r.domBuilder=a.domBuilder||n,c&&(l[""]=Xg.HTML),l.xml=l.xml||Xg.XML;var g=a.normalizeLineEndings||Jg;return e&&typeof e=="string"?r.parse(g(e),l,v):r.errorHandler.error("invalid doc source"),n.doc};function HL(e,t,a){if(!e){if(t instanceof In)return t;e=t}var r={},n=e instanceof Function;a=a||{};function i(h){var l=e[h];!l&&n&&(l=e.length==2?function(c){e(h,c)}:e),r[h]=l&&function(c){l("[xmldom "+h+"]	"+c+Us(a))}||function(){}}return i("warning"),i("error"),i("fatalError"),r}function In(){this.cdata=!1}function Ta(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}In.prototype={startDocument:function(){this.doc=new zL().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,a,r){var n=this.doc,i=n.createElementNS(e,a||t),h=r.length;kh(this,i),this.currentElement=i,this.locator&&Ta(this.locator,i);for(var l=0;l<h;l++){var e=r.getURI(l),c=r.getValue(l),a=r.getQName(l),v=n.createAttributeNS(e,a);this.locator&&Ta(r.getLocator(l),v),v.value=v.nodeValue=c,i.setAttributeNode(v)}},endElement:function(e,t,a){var r=this.currentElement,n=r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var a=this.doc.createProcessingInstruction(e,t);this.locator&&Ta(this.locator,a),kh(this,a)},ignorableWhitespace:function(e,t,a){},characters:function(e,t,a){if(e=Yg.apply(this,arguments),e){if(this.cdata)var r=this.doc.createCDATASection(e);else var r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&Ta(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,a){e=Yg.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&Ta(this.locator,r),kh(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,a){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(e,t,a);this.locator&&Ta(this.locator,n),kh(this,n),this.doc.doctype=n}},warning:function(e){console.warn("[xmldom warning]	"+e,Us(this.locator))},error:function(e){console.error("[xmldom error]	"+e,Us(this.locator))},fatalError:function(e){throw new ML(e,this.locator)}};function Us(e){if(e)return`
@`+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function Yg(e,t,a){return typeof e=="string"?e.substr(t,a):e.length>=t+a||t?new java.lang.String(e,t,a)+"":e}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){In.prototype[e]=function(){return null}});function kh(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}Ph.__DOMHandler=In;Ph.normalizeLineEndings=Jg;Ph.DOMParser=Zg});var ap=S1(Dh=>{var ep=js();Dh.DOMImplementation=ep.DOMImplementation;Dh.XMLSerializer=ep.XMLSerializer;Dh.DOMParser=tp().DOMParser});var xp=S1((_T,Hp)=>{var mp=Math.pow(2,32),vy=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a;return t.getBigUint64?(a=t.getBigUint64(0),a<Number.MAX_SAFE_INTEGER?Number(a):a):t.getUint32(0)*mp+t.getUint32(4)};Hp.exports={getUint64:vy,MAX_UINT32:mp}});var Lp=S1((TT,wp)=>{var Vp=xp().getUint64,dy=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),a={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;a.version===0?(a.earliestPresentationTime=t.getUint32(r),a.firstOffset=t.getUint32(r+4),r+=8):(a.earliestPresentationTime=Vp(e.subarray(r)),a.firstOffset=Vp(e.subarray(r+8)),r+=16),r+=2;var n=t.getUint16(r);for(r+=2;n>0;r+=12,n--)a.references.push({referenceType:(e[r]&128)>>>7,referencedSize:t.getUint32(r)&2147483647,subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(e[r+8]&128),sapType:(e[r+8]&112)>>>4,sapDeltaTime:t.getUint32(r+8)&268435455});return a};wp.exports=dy});var Ip=S1((tb,Dp)=>{var Js=9e4,Zs,t9,Uh,e9,Ep,kp,Pp;Zs=function(e){return e*Js};t9=function(e,t){return e*t};Uh=function(e){return e/Js};e9=function(e,t){return e/t};Ep=function(e,t){return Zs(e9(e,t))};kp=function(e,t){return t9(Uh(e),t)};Pp=function(e,t,a){return Uh(a?e:e-t)};Dp.exports={ONE_SECOND_IN_TS:Js,secondsToVideoTs:Zs,secondsToAudioTs:t9,videoTsToSeconds:Uh,audioTsToSeconds:e9,audioTsToVideoTs:Ep,videoTsToAudioTs:kp,metadataTsToSeconds:Pp}});var gM=S1((C6,S6)=>{(function(e,t){typeof C6=="object"&&typeof S6<"u"?S6.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.NiconiComments=t())})(C6,function(){"use strict";var e={white:"#FFFFFF",red:"#FF0000",pink:"#FF8080",orange:"#FFC000",yellow:"#FFFF00",green:"#00FF00",cyan:"#00FFFF",blue:"#0000FF",purple:"#C000FF",black:"#000000",white2:"#CCCC99",niconicowhite:"#CCCC99",red2:"#CC0033",truered:"#CC0033",pink2:"#FF33CC",orange2:"#FF6600",passionorange:"#FF6600",yellow2:"#999900",madyellow:"#999900",green2:"#00CC66",elementalgreen:"#00CC66",cyan2:"#00CCCC",blue2:"#3399FF",marinblue:"#3399FF",purple2:"#6633CC",nobleviolet:"#6633CC",black2:"#666666"},t=function(x){return typeof x=="boolean"},a=function(x){return typeof x=="number"},r=function(x){return typeof x=="object"},n={formatted:{comment:function(x){return i(x,["id","vpos","content","date","date_usec","owner","premium","mail","user_id","layer"])},comments:function(x){if(typeof x!="object")return!1;for(var M=0,S=x;M<S.length;M++){var E=S[M];if(!n.formatted.comment(E))return!1}return!0},legacyComment:function(x){return i(x,["id","vpos","content","date","owner","premium","mail"])},legacyComments:function(x){if(typeof x!="object")return!1;for(var M=0,S=x;M<S.length;M++){var E=S[M];if(!n.formatted.legacyComment(E))return!1}return!0}},legacy:{rawApiResponses:function(x){if(typeof x!="object")return!1;for(var M=0,S=x;M<S.length;M++)for(var E=S[M],R=0,K=Object.keys(E);R<K.length;R++){var N=K[R],W=E[N];if(W&&!(n.legacy.apiChat(W)||n.legacy.apiGlobalNumRes(W)||n.legacy.apiLeaf(W)||n.legacy.apiPing(W)||n.legacy.apiThread(W)))return!1}return!0},apiChat:function(x){return typeof x=="object"&&i(x,["content","date","no","thread","vpos"])},apiGlobalNumRes:function(x){return i(x,["num_res","thread"])},apiLeaf:function(x){return i(x,["count","thread"])},apiPing:function(x){return i(x,["content"])},apiThread:function(x){return i(x,["resultcode","revision","server_time","thread","ticket"])}},xmlDocument:function(x){if(!x.documentElement||x.documentElement.nodeName!=="packet"||!x.documentElement.children)return!1;for(var M=0,S=Array.from(x.documentElement.children);M<S.length;M++){var E=S[M];if(!(!E||E.nodeName!=="chat")&&!h(E,["vpos","date"]))return!1}return!0},legacyOwner:{comments:function(x){if(typeof x!="string")return!1;for(var M=x.split(`
`),S=0,E=M;S<E.length;S++){var R=E[S];if(R.split(":").length<3)return!1}return!0}},owner:{comment:function(x){return i(x,["time","command","comment"])},comments:function(x){if(typeof x!="object")return!1;for(var M=0,S=x;M<S.length;M++){var E=S[M];if(!n.owner.comment(E))return!1}return!0}},v1:{comment:function(x){return i(x,["id","no","vposMs","body","commands","userId","isPremium","score","postedAt","nicoruCount","nicoruId","source","isMyPost"])},thread:function(x){if(!i(x,["id","fork","commentCount","comments"]))return!1;for(var M=0,S=x.comments;M<S.length;M++){var E=S[M];if(!n.v1.comment(E))return!1}return!0},threads:function(x){if(typeof x!="object")return!1;for(var M=0,S=x;M<S.length;M++){var E=S[M];if(!n.v1.thread(E))return!1}return!0}},nicoScript:{range:{target:function(x){return typeof x=="string"&&!!x.match(/^(?:\u6295?\u30b3\u30e1|\u5168)$/)}},replace:{range:function(x){return typeof x=="string"&&!!x.match(/^(?:\u5358|\u5168)$/)},target:function(x){return typeof x=="string"&&!!x.match(/^(?:\u30b3\u30e1|\u6295\u30b3\u30e1|\u5168|\u542b\u3080|\u542b\u307e\u306a\u3044)$/)},condition:function(x){return typeof x=="string"&&!!x.match(/^(?:\u90e8\u5206\u4e00\u81f4|\u5b8c\u5168\u4e00\u81f4)$/)}}},comment:{font:function(x){return typeof x=="string"&&!!x.match(/^(?:gothic|mincho|defont)$/)},loc:function(x){return typeof x=="string"&&!!x.match(/^(?:ue|naka|shita)$/)},size:function(x){return typeof x=="string"&&!!x.match(/^(?:big|medium|small)$/)},command:{key:function(x){return typeof x=="string"&&!!x.match(/^(?:full|ender|_live|invisible)$/)}},color:function(x){return typeof x=="string"&&Object.keys(e).includes(x)},colorCode:function(x){return typeof x=="string"&&!!x.match(/^#(?:[0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/)}},config:{initOptions:function(x){if(typeof x!="object"||!x)return!1;var M={useLegacy:t,formatted:t,showCollision:t,showFPS:t,showCommentCount:t,drawAllImageOnLoad:t,debug:t,enableLegacyPiP:t,keepCA:t,scale:a,config:r,format:function(E){return typeof E=="string"&&!!E.match(/^(XMLDocument|niconicome|formatted|legacy|legacyOwner|owner|v1|default|empty)$/)},video:function(E){return typeof E=="object"&&E.nodeName==="VIDEO"}};for(var S in M)if(x[S]!==void 0&&!M[S](x[S]))return console.warn("[Incorrect input] var: initOptions, key: ".concat(S,", value: ").concat(x[S])),!1;return!0}}},i=function(x,M){if(typeof x!="object"||!x)return!1;for(var S=0,E=M;S<E.length;S++){var R=E[S];if(!Object.prototype.hasOwnProperty.call(x,R))return!1}return!0},h=function(x,M){if(typeof x!="object"||!x)return!1;for(var S=0,E=M;S<E.length;S++){var R=E[S];if(x.getAttribute(R)===null)return!1}return!0},l=function(x,M){var S=[];if(M==="empty"&&x===void 0)return[];if((M==="XMLDocument"||M==="niconicome")&&n.xmlDocument(x))S=c(x);else if(M==="formatted"&&n.formatted.legacyComments(x))S=v(x);else if(M==="legacy"&&n.legacy.rawApiResponses(x))S=g(x);else if(M==="legacyOwner"&&n.legacyOwner.comments(x))S=z(x);else if(M==="owner"&&n.owner.comments(x))S=w(x);else if(M==="v1"&&n.v1.threads(x))S=L(x);else throw new Error("unknown input format");return V(S)},c=function(x){for(var M,S=[],E=[],R=Array.from(x.documentElement.children).length,K=0,N=Array.from(x.documentElement.children);K<N.length;K++){var W=N[K];if(W.nodeName==="chat"){var X={id:Number(W.getAttribute("no"))||R++,vpos:Number(W.getAttribute("vpos")),content:W.innerHTML,date:Number(W.getAttribute("date"))||0,date_usec:Number(W.getAttribute("date_usec"))||0,owner:!W.getAttribute("user_id"),premium:W.getAttribute("premium")==="1",mail:[],user_id:-1,layer:-1};W.getAttribute("mail")&&(X.mail=((M=W.getAttribute("mail"))===null||M===void 0?void 0:M.split(/\s+/g))||[]),X.content.startsWith("/")&&X.owner&&X.mail.push("invisible");var o1=W.getAttribute("user_id")||"",r1=E.indexOf(o1);r1===-1?(X.user_id=E.length,E.push(o1)):X.user_id=r1,S.push(X)}}return S},v=function(x){var M=x;if(!n.formatted.comments(x))for(var S=0,E=M;S<E.length;S++){var R=E[S];R.layer=-1,R.user_id=0,R.date_usec||(R.date_usec=0)}return M},g=function(x){for(var M=[],S=[],E=0,R=x;E<R.length;E++){var K=R[E];if(n.legacy.apiChat(K.chat)){var N=K.chat;if(N.deleted!==1){var W={id:N.no,vpos:N.vpos,content:N.content||"",date:N.date,date_usec:N.date_usec||0,owner:!N.user_id,premium:N.premium===1,mail:[],user_id:-1,layer:-1};N.mail&&(W.mail=N.mail.split(/\s+/g)),N.content.startsWith("/")&&!N.user_id&&W.mail.push("invisible");var X=S.indexOf(N.user_id);X===-1?(W.user_id=S.length,S.push(N.user_id)):W.user_id=X,M.push(W)}}}return M},z=function(x){for(var M=[],S=x.split(`
`),E=0;E<S.length;E++){var R=S[E];if(R){var K=R.split(":");if(!(K.length<3)){if(K.length>3)for(var N=3;N<K.length;N++)K[2]+=":".concat(K[N]);var W={id:E,vpos:Number(K[0]),content:K[2]||"",date:E,date_usec:0,owner:!0,premium:!0,mail:[],user_id:-1,layer:-1};K[1]&&(W.mail=K[1].split(/[\s+]/g)),W.content.startsWith("/")&&W.mail.push("invisible"),M.push(W)}}}return M},w=function(x){var M=[];return x.forEach(function(S,E){var R={id:E,vpos:b(S.time),content:S.comment,date:E,date_usec:0,owner:!0,premium:!0,mail:[],user_id:-1,layer:-1};S.command&&(R.mail=S.command.split(/\s+/g)),R.content.startsWith("/")&&R.mail.push("invisible"),M.push(R)}),M},L=function(x){for(var M=[],S=[],E=0,R=x;E<R.length;E++)for(var K=R[E],N=K.comments,W=K.fork,X=0,o1=N;X<o1.length;X++){var r1=o1[X],u1={id:r1.no,vpos:Math.floor(r1.vposMs/10),content:r1.body,date:k(r1.postedAt),date_usec:0,owner:W==="owner",premium:r1.isPremium,mail:r1.commands,user_id:-1,layer:-1};u1.content.startsWith("/")&&u1.owner&&u1.mail.push("invisible");var f1=S.indexOf(r1.userId);f1===-1?(u1.user_id=S.length,S.push(r1.userId)):u1.user_id=f1,M.push(u1)}return M},V=function(x){return x.sort(function(M,S){return M.vpos<S.vpos?-1:M.vpos>S.vpos?1:M.date<S.date?-1:M.date>S.date?1:M.date_usec<S.date_usec?-1:M.date_usec>S.date_usec?1:0}),x},b=function(x){var M=x.match(/^(?:(\d+):(\d+)\.(\d+)|(\d+):(\d+)|(\d+)\.(\d+)|(\d+))$/);if(M){if(M[1]!==void 0&&M[2]!==void 0&&M[3]!==void 0)return(Number(M[1])*60+Number(M[2]))*100+Number(M[3])/Math.pow(10,M[3].length-2);if(M[4]!==void 0&&M[5]!==void 0)return(Number(M[4])*60+Number(M[5]))*100;if(M[6]!==void 0&&M[7]!==void 0)return Number(M[6])*100+Number(M[7])/Math.pow(10,M[7].length-2);if(M[8]!==void 0)return Number(M[8])*100}return 0},k=function(x){return Math.floor(new Date(x).getTime()/1e3)},m=function(){return m=Object.assign||function(S){for(var E,R=1,K=arguments.length;R<K;R++){E=arguments[R];for(var N in E)Object.prototype.hasOwnProperty.call(E,N)&&(S[N]=E[N])}return S},m.apply(this,arguments)};function H(x,M,S){if(S||arguments.length===2)for(var E=0,R=M.length,K;E<R;E++)(K||!(E in M))&&(K||(K=Array.prototype.slice.call(M,0,E)),K[E]=M[E]);return x.concat(K||Array.prototype.slice.call(M))}var y=function(x){return x.reduce(function(M,S,E){return E===0?m({},S):(M.font+=", ".concat(S.font),M)},{font:"",offset:0,weight:600})},B={arial:{font:'Arial, "\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF", "MS PGothic", MSPGothic, MS-PGothic',offset:.01,weight:600},gothic:{font:'"\u6E38\u30B4\u30B7\u30C3\u30AF\u4F53", "\u6E38\u30B4\u30B7\u30C3\u30AF", "Yu Gothic", YuGothic, yugothic, YuGo-Medium',offset:-.04,weight:400},gulim:{font:'Gulim, "\u9ED1\u4F53", SimHei',offset:.03,weight:400},mincho:{font:'"\u6E38\u660E\u671D\u4F53", "\u6E38\u660E\u671D", "Yu Mincho", YuMincho, yumincho, YuMin-Medium',offset:-.01,weight:400},simsun:{font:'"\u5B8B\u4F53", SimSun',offset:.135,weight:400},macGothicPro6:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN W6", HiraKakuProN-W6, "\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',offset:-.05,weight:600},macGothicPro3:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN W3", HiraKakuProN-W3, "\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4 ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',offset:-.04,weight:300},macMincho:{font:'"\u30D2\u30E9\u30AE\u30CE\u660E\u671D ProN W3", HiraMinProN-W3, "\u30D2\u30E9\u30AE\u30CE\u660E\u671D ProN", HiraMinProN, "Hiragino Mincho ProN"',offset:-.02,weight:300},macGothic1:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4\u30B7\u30C3\u30AF", "Hiragino Sans", HiraginoSans',offset:-.05,weight:600},macGothic2:{font:'"\u30D2\u30E9\u30AE\u30CE\u89D2\u30B4\u30B7\u30C3\u30AF", "Hiragino Sans", HiraginoSans',offset:-.04,weight:300},sansSerif600:{font:"sans-serif",offset:0,weight:600},sansSerif400:{font:"sans-serif",offset:0,weight:400},serif:{font:"serif",offset:0,weight:400}},_={win7:{defont:y([B.arial]),gothic:y([B.gothic,B.gulim,B.arial]),mincho:y([B.mincho,B.simsun,B.arial])},win8_1:{defont:y([B.arial]),gothic:y([B.gothic,B.simsun,B.arial]),mincho:y([B.mincho,B.simsun,B.arial])},win:{defont:y([B.arial]),gothic:y([B.gulim,B.arial]),mincho:y([B.simsun,B.arial])},mac10_9:{defont:y([B.macGothicPro6]),gothic:y([B.gothic,B.macGothicPro3]),mincho:y([B.mincho,B.macMincho,B.macGothicPro3])},mac10_11:{defont:y([B.macGothic1]),gothic:y([B.gothic,B.macGothic2]),mincho:y([B.mincho,B.macMincho,B.macGothic2])},mac:{defont:y([B.macGothicPro6]),gothic:y([B.macGothicPro3]),mincho:y([B.macMincho])},other:{defont:y([B.sansSerif600]),gothic:y([B.sansSerif400]),mincho:y([B.serif])}},j,U=function(){var x=function(M){return M.match(/windows nt 6\.[12]/i)?"win7":M.match(/windows nt (6\.3|10\.\d+)/i)?"win8_1":M.match(/windows nt/i)?"win":M.match(/mac os x 10(.|_)(9|10)/i)?"mac10_9":M.match(/mac os x 10(.|_)\d{2}/i)?"mac10_11":M.match(/mac os x/i)?"mac":"other"}(navigator.userAgent);j={colors:e,contextStrokeColor:"#000000",contextStrokeInversionColor:"#FFFFFF",contextStrokeOpacity:.4,contextFillLiveOpacity:.5,contextLineWidth:2.8,commentScale:{html5:1920/683,flash:1920/683},commentStageSize:{html5:{width:512,fullWidth:683,height:384},flash:{width:512,fullWidth:640,height:385}},fontSize:{html5:{small:{default:18,resized:10},medium:{default:27,resized:14},big:{default:39,resized:19.5}},flash:{small:{default:15,resized:7.5},medium:{default:24,resized:12},big:{default:39,resized:19.5}}},lineCounts:{default:{big:8.4,medium:13.1,small:21},resized:{big:16,medium:25.4,small:38},doubleResized:{big:7.8,medium:11.3,small:16.6}},hiResCommentCorrection:20,minFontSize:10,fonts:_[x],fpsInterval:500,cacheAge:2e3,canvasWidth:1920,canvasHeight:1080,commentDrawRange:1530,commentDrawPadding:195,collisionRange:{left:235,right:1685},sameCARange:3600,sameCAGap:100,sameCAMinScore:10,plugins:[],flashThreshold:1499871600,flashChar:{gulim:"[\u0126\u0127\u0132\u0133\u0138\u013F\u0140\u0149-\u014B\u0166\u0167\u02D0\u02DA\u2074\u207F\u2081-\u2084\u2113\u2153\u2154\u215C-\u215E\u2194\u2195\u223C\u249C-\u24B5\u24D0-\u24E9\u25A3-\u25A9\u25B6\u25B7\u25C0\u25C1\u25C8\u25D0\u25D1\u260E\u260F\u261C\u261E\u2660\u2661\u2663-\u2665\u2667-\u2669\u266C\u3131-\u316E\u3200-\u321C\u3260-\u327B\u3380-\u3384\u3388-\u338D\u3390-\u339B\u339F\u33A0\u33A2-\u33CA\u33CF\u33D0\u33D3\u33D6\u33D8\u33DB-\u33DD\uF900-\uF928\uF92A-\uF994\uF996\uFA0B\uFFE6]",simsunStrong:"[\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u0251\u0261\u02CA\u02CB\u2016\u2035\u216A\u216B\u2223\u2236\u2237\u224C\u226E\u226F\u2295\u2483-\u249B\u2504-\u250B\u256D-\u2573\u2581-\u2583\u2585-\u2587\u2589-\u258B\u258D-\u258F\u2594\u2595\u25E2-\u25E5\u2609\u3016\u3017\u301E\u3021-\u3029\u3105-\u3129\u3220-\u3229\u32A3\u33CE\u33D1\u33D2\u33D5\uE758-\uE864\uFA0C\uFA0D\uFE30\uFE31\uFE33-\uFE44\uFE49-\uFE52\uFE54-\uFE57\uFE59-\uFE66\uFE68-\uFE6B]",simsunWeak:"[\u02C9\u2105\u2109\u2196-\u2199\u220F\u2215\u2248\u2264\u2265\u2299\u2474-\u2482\u250D\u250E\u2511\u2512\u2515\u2516\u2519\u251A\u251E\u251F\u2521\u2522\u2526\u2527\u2529\u252A\u252D\u252E\u2531\u2532\u2535\u2536\u2539\u253A\u253D\u253E\u2540\u2541\u2543-\u254A\u2550-\u256C\u2584\u2588\u258C\u2593]",gothic:"[\u03FB\uFF9F]"},flashMode:"vista",flashScriptChar:{super:"[\xAA\xB2\xB3\xB9\xBA\u02B0\u02B2\u02B3\u02B7\u02B8\u02E1-\u02E3\u0304\u1D2C-\u1D43\u1D45-\u1D61\u1D9B-\u1DA1\u1DA3-\u1DBF\u2070\u2071\u2074-\u207F\u2C7D]",sub:"[\u0320\u1D62-\u1D6A\u2080-\u208E\u2090-\u209C\u2C7C]"},font:{gulim:'normal 600 [size]px gulim, "Microsoft JhengHei UI", Arial, "\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF", "MS PGothic", MSPGothic, MS-PGothic',simsun:'normal 400 [size]px simsun, "\u6E38\u660E\u671D\u4F53", "\u6E38\u660E\u671D", "Yu Mincho", YuMincho, yumincho, YuMin-Medium'},lineHeight:{small:{default:18/15,resized:10/7.5},medium:{default:29/25,resized:15/12},big:{default:45/39,resized:24/19.5}},doubleResizeMaxWidth:{full:1200,normal:960},commentYPaddingTop:{default:5,resized:3},commentYMarginBottom:{small:.24,medium:.28,big:.24},commentYOffset:{small:{default:-.2,resized:-.2},medium:{default:-.2,resized:-.2},big:{default:-.2,resized:-.2}},letterSpacing:1,scriptCharOffset:.12}},q={config:{},debug:!1,enableLegacyPiP:!1,format:"default",formatted:!1,keepCA:!1,mode:"default",scale:1,showCollision:!1,showCommentCount:!1,showFPS:!1,useLegacy:!1,video:void 0},D,J,t1=function(x){return D=x},Z=function(x){return J=x},F={reverse:[],default:[],replace:[],ban:[],seekDisable:[],jump:[]},c1=function(){F={reverse:[],default:[],replace:[],ban:[],seekDisable:[],jump:[]}},a1=function(x,M,S){var E=!1,R=!1;if(!S)return{currentPos:x,isChanged:E,isBreak:R};for(var K=0,N=S;K<N.length;K++){var W=N[K];if(x<W.posY+W.height&&x+M.height>W.posY&&W.owner===M.owner&&W.layer===M.layer&&(W.posY+W.height>x&&(x=W.posY+W.height,E=!0),x+M.height>D.canvasHeight)){D.canvasHeight<M.height?M.mail.includes("naka")?x=(M.height-D.canvasHeight)/-2:x=0:x=Math.floor(Math.random()*(D.canvasHeight-M.height)),R=!0;break}}return{currentPos:x,isChanged:E,isBreak:R}},l1=function(x,M,S){var E=(D.commentDrawRange+x)/(S+100);return D.commentDrawPadding+D.commentDrawRange-(M+100)*E},s1=function(x,M){switch(x){case"gulim":case"simsun":return D.font[x].replace("[size]","".concat(M));case"gothic":case"mincho":return"".concat(D.fonts[x].weight," ").concat(M,"px ").concat(D.fonts[x].font);default:return"".concat(D.fonts.defont.weight," ").concat(M,"px ").concat(D.fonts.defont.font)}},m1=function(x,M,S){var E;x||(x={}),x[Number(M)]||(x[Number(M)]=[]),(E=x[Number(M)])===null||E===void 0||E.push(S)},O1=function(x){return x.slice(0,1)==="#"&&(x=x.slice(1)),x.length===3&&(x=x.slice(0,1)+x.slice(0,1)+x.slice(1,2)+x.slice(1,2)+x.slice(2,3)+x.slice(2,3)),[x.slice(0,2),x.slice(2,4),x.slice(4,6)].map(function(M){return parseInt(M,16)})},k1=function(x){return x.slice(0,1)==="#"&&(x=x.slice(1)),x.length===4&&(x=x.slice(0,1)+x.slice(0,1)+x.slice(1,2)+x.slice(1,2)+x.slice(2,3)+x.slice(2,3)+x.slice(3,4)+x.slice(3,4)),[x.slice(0,2),x.slice(2,4),x.slice(4,6),x.slice(4,6)].map(function(M,S){return S===3?parseInt(M,16)/256:parseInt(M,16)})},q1=function(x){for(var M={},S=[],E={},R=0,K=x;R<K.length;R++){var N=K[R];if(!(N.user_id===void 0||N.user_id===-1)){M[N.user_id]===void 0&&(M[N.user_id]=0),(N.mail.indexOf("ca")>-1||N.mail.indexOf("patissier")>-1||N.mail.indexOf("ender")>-1||N.mail.indexOf("full")>-1)&&(M[N.user_id]+=5),(N.content.match(/\r\n|\n|\r/g)||[]).length>2&&(M[N.user_id]+=(N.content.match(/\r\n|\n|\r/g)||[]).length/2);var W="".concat(N.content,"@@").concat(H([],N.mail,!0).sort().filter(function(u1){return!u1.match(/@[\d.]+|184|device:.+|patissier|ca/)}).join("")),X=E[W];X!==void 0?(N.vpos-X.vpos>D.sameCAGap||Math.abs(N.date-X.date)<D.sameCARange)&&(S.push(N),E[W]=N):(S.push(N),E[W]=N)}}for(var o1=0,r1=S;o1<r1.length;o1++){var N=r1[o1];(M[N.user_id]||0>=D.sameCAMinScore)&&(N.layer=N.user_id)}return S},A1=function(x,M){return M===void 0&&(M=!1),Object.prototype.hasOwnProperty.call(x,"html5")&&Object.prototype.hasOwnProperty.call(x,"flash")?x[M?"flash":"html5"]:x},Mt=function(x){return J.mode==="flash"||J.mode==="default"&&!(x.mail.includes("gothic")||x.mail.includes("defont")||x.mail.includes("mincho"))&&(x.date<D.flashThreshold||x.mail.includes("nico:flash"))},U2=function(x){var M=Mt(x),S=$2(x);de(x,S);for(var E=void 0,R=void 0,K=void 0,N=void 0,W=0;W<F.default.length;W++){var X=F.default[W];if(X){if(X.long!==void 0&&X.start+X.long<x.vpos){F.default=F.default.splice(Number(W),1);continue}if(X.loc&&(N=X.loc),X.color&&(E=X.color),X.size&&(R=X.size),X.font&&(K=X.font),N&&E&&R&&K)break}}for(var W=0;W<F.replace.length;W++){var X=F.replace[W];if(X){if(X.long!==void 0&&X.start+X.long<x.vpos){F.default=F.default.splice(Number(W),1);continue}X.target==="\u30B3\u30E1"&&x.owner||X.target==="\u6295\u30B3\u30E1"&&!x.owner||X.target==="\u542B\u307E\u306A\u3044"&&x.owner||(X.condition==="\u5B8C\u5168\u4E00\u81F4"&&x.content===X.keyword||X.condition==="\u90E8\u5206\u4E00\u81F4"&&x.content.indexOf(X.keyword)!==-1)&&(X.range==="\u5358"?x.content=x.content.replaceAll(X.keyword,X.replace):x.content=X.replace,X.loc&&(S.loc=X.loc),X.color&&(S.color=X.color),X.size&&(S.size=X.size,S.fontSize=A1(D.fontSize,M)[S.size].default),X.font&&(S.font=X.font))}}return S.loc||(S.loc=N||"naka"),S.color||(S.color=E||"#FFFFFF"),S.size||(S.size=R||"medium",S.fontSize=A1(D.fontSize,M)[S.size].default),S.font||(S.font=K||"defont"),S.long?S.long=Math.floor(Number(S.long)*100):S.long=300,m(m(m(m({},x),{content:[],lineCount:0,lineOffset:0}),S),{flash:M})},de=function(x,M){var S=x.content.match(/^(?:@|\uff20)(\u30c7\u30d5\u30a9\u30eb\u30c8|\u7f6e\u63db|\u9006|\u30b3\u30e1\u30f3\u30c8\u7981\u6b62|\u30b7\u30fc\u30af\u7981\u6b62|\u30b8\u30e3\u30f3\u30d7)(.*)/);if(!(!S||!x.owner)){if(M.invisible=!0,S[1]==="\u30C7\u30D5\u30A9\u30EB\u30C8"){F.default.unshift({start:x.vpos,long:M.long===void 0?void 0:Math.floor(M.long*100),color:M.color,size:M.size,font:M.font,loc:M.loc});return}if(S[1]==="\u9006"){var E=x.content.match(/^(?:@|\uff20)\u9006(?:\s+)?(\u5168|\u30b3\u30e1|\u6295\u30b3\u30e1)?/);if(!E||!E[1]||!n.nicoScript.range.target(E[1]))return;M.long===void 0&&(M.long=30),F.reverse.unshift({start:x.vpos,end:x.vpos+M.long*100,target:E[1]});return}if(S[1]==="\u30B3\u30E1\u30F3\u30C8\u7981\u6B62"){M.long===void 0&&(M.long=30),F.ban.unshift({start:x.vpos,end:x.vpos+M.long*100});return}if(S[1]==="\u30B7\u30FC\u30AF\u7981\u6B62"){M.long===void 0&&(M.long=30),F.seekDisable.unshift({start:x.vpos,end:x.vpos+M.long*100});return}if(S[1]==="\u30B8\u30E3\u30F3\u30D7"&&S[2]){var R=S[2].match(/\s*((?:sm|so|nm|\uff53\uff4d|\uff53\uff4f|\uff4e\uff4d)?[1-9\uff11-\uff19][0-9\uff11-\uff19]*|#[0-9]+:[0-9]+(?:\.[0-9]+)?)\s+(.*)/);if(!R||!R[1])return;F.jump.unshift({start:x.vpos,end:M.long===void 0?void 0:M.long*100,to:R[1],message:R[2]});return}if(S[1]==="\u7F6E\u63DB"){for(var K=x.content.split(""),N=[],W="",X="",o1="",r1=0,u1=K.slice(4);r1<u1.length;r1++){var f1=u1[r1];f1.match(/["'\u300c]/)&&W===""?W=f1:f1.match(/["']/)&&W===f1&&X!=="\\"?(N.push(o1.replaceAll("\\n",`
`)),W="",o1=""):f1.match(/\u300d/)&&W==="\u300C"?(N.push(o1),W="",o1=""):W===""&&f1.match(/\s+/)?o1&&(N.push(o1),o1=""):o1+=f1,X=f1}if(N.push(o1),N[0]===void 0||N[2]!==void 0&&!n.nicoScript.replace.range(N[2])||N[3]!==void 0&&!n.nicoScript.replace.target(N[3])||N[4]!==void 0&&!n.nicoScript.replace.condition(N[4]))return;F.replace.unshift({start:x.vpos,long:M.long===void 0?void 0:Math.floor(M.long*100),keyword:N[0],replace:N[1]||"",range:N[2]||"\u5358",target:N[3]||"\u30B3\u30E1",condition:N[4]||"\u90E8\u5206\u4E00\u81F4",color:M.color,size:M.size,font:M.font,loc:M.loc,no:x.id}),F.replace.sort(function(n1,i1){return n1.start<i1.start?-1:n1.start>i1.start?1:n1.no<i1.no?-1:n1.no>i1.no?1:0})}}},$2=function(x){for(var M=x.mail,S=Mt(x),E={loc:void 0,size:void 0,fontSize:void 0,color:void 0,strokeColor:void 0,wakuColor:void 0,font:void 0,full:!1,ender:!1,_live:!1,invisible:!1,long:void 0},R=0,K=M;R<K.length;R++){var N=K[R];N=N.toLowerCase();var W=void 0;if((W=N.match(/^(?:@|\uff20)([0-9.]+)/))&&W[1])E.long=Number(W[1]);else if(E.strokeColor===void 0&&(W=N.match(/^nico:stroke:(.+)$/)))n.comment.color(W[1])?E.strokeColor=e[W[1]]:n.comment.colorCode(W[1])&&(E.strokeColor=W[1].slice(1));else if(E.wakuColor===void 0&&(W=N.match(/^nico:waku:(.+)$/)))n.comment.color(W[1])?E.wakuColor=e[W[1]]:n.comment.colorCode(W[1])&&(E.wakuColor=W[1].slice(1));else if(E.loc===void 0&&n.comment.loc(N))E.loc=N;else if(E.size===void 0&&n.comment.size(N))E.size=N,E.fontSize=A1(D.fontSize,S)[N].default;else{if(E.color===void 0){var X=D.colors[N];if(X){E.color=X;continue}else{var o1=N.match(/#[0-9a-z]{3,6}/);if(o1&&o1[0]&&x.premium){E.color=o1[0].toUpperCase();continue}}}E.font===void 0&&n.comment.font(N)?E.font=N:n.comment.command.key(N)&&(E[N]=!0)}}return x.content.startsWith("/")&&(E.invisible=!0),E},mt=function(x){if(x.strokeColor){var M=x.strokeColor.length;if(M===3||M===6)return"rgba(".concat(O1(x.strokeColor).join(","),",").concat(D.contextStrokeOpacity,")");if(M===4||M===8)return"rgba(".concat(k1(x.strokeColor).join(","),")")}return"rgba(".concat(O1(x.color==="#000000"?D.contextStrokeInversionColor:D.contextStrokeColor).join(","),",").concat(D.contextStrokeOpacity,")")},C2=function(x,M){if(x.length!==M.length)return!1;for(var S=0,E=x.length;S<E;++S)if(x[S]!==M[S])return!1;return!0},$0=function(x){var M={simsunStrong:new RegExp(D.flashChar.simsunStrong),simsunWeak:new RegExp(D.flashChar.simsunWeak),gulim:new RegExp(D.flashChar.gulim),gothic:new RegExp(D.flashChar.gothic)},S=[],E;return(E=M.simsunStrong.exec(x))!==null&&S.push({font:"simsunStrong",index:E.index}),(E=M.simsunWeak.exec(x))!==null&&S.push({font:"simsunWeak",index:E.index}),(E=M.gulim.exec(x))!==null&&S.push({font:"gulim",index:E.index}),(E=M.gothic.exec(x))!==null&&S.push({font:"gothic",index:E.index}),S},p2=function(x){return x.match("^simsun.+")?"simsun":x==="gothic"?"defont":x},sl=function(x){return function(M,S){return x(M)>x(S)?1:x(M)<x(S)?-1:0}},lr=function(x,M,S){S===void 0&&(S=!1);var E=A1(D.lineCounts,M),R=A1(D.commentStageSize,M),K=R.height/E.doubleResized[x],N=E.default[x];if(S){var W=E.resized[x];return(R.height-K*(N/W))/(W-1)}return(R.height-K)/(N-1)},vl=function(x,M){var S=A1(D.lineCounts,M),E=A1(D.commentStageSize,M);return E.height/S.doubleResized[x]},h0=function(x,M){var S=dl(x,M);return m(m({},S),{height:x.lineHeight*(x.lineCount-1)+x.charSize})},dl=function(x,M){var S=or(x.charSize),E=S.fontSize,R=S.scale,K=[],N=[];M.font=s1(x.font,E);for(var W=0,X=0,o1=x.content;X<o1.length;X++){var r1=o1[X],u1=r1.content.split(`
`);M.font=s1(r1.font||x.font,E);for(var f1=[],n1=0;n1<u1.length;n1++){var i1=M.measureText(u1[n1]);W+=i1.width,f1.push(i1.width),n1<u1.length-1&&(K.push(Math.ceil(W*R)),W=0)}N.push(f1),K.push(Math.ceil(W*R))}return{width:Math.max.apply(Math,K),lineWidth:K,itemWidth:N}},or=function(x){return x*=.8,x<D.minFontSize?(x>=1&&(x=Math.floor(x)),{scale:x/D.minFontSize,fontSize:D.minFontSize}):{scale:1,fontSize:Math.floor(x)}},W2={},ue=function(){W2={}},k4=function(){function x(M,S){this.context=S,M.content=M.content.replace(/\t/g,"\u2003\u2003"),this.comment=this.getCommentSize(this.parseCommandAndNicoscript(M)),this.posY=0}return Object.defineProperty(x.prototype,"invisible",{get:function(){return this.comment.invisible},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"loc",{get:function(){return this.comment.loc},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"long",{get:function(){return this.comment.long},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"vpos",{get:function(){return this.comment.vpos},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"width",{get:function(){return this.comment.width},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"height",{get:function(){return this.comment.height},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"flash",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"layer",{get:function(){return this.comment.layer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"owner",{get:function(){return this.comment.owner},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"mail",{get:function(){return this.comment.mail},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"lineCount",{get:function(){return this.comment.lineCount},enumerable:!1,configurable:!0}),x.prototype.parseCommandAndNicoscript=function(M){var S=U2(M),E=[];E.push({content:M.content});var R=E.reduce(function(N,W){var X;return N+(((X=W.content.match(/\n/g))===null||X===void 0?void 0:X.length)||0)},1),K=0;return m(m({},S),{content:E,lineCount:R,lineOffset:K})},x.prototype.measureText=function(M){var S=A1(D.commentStageSize,!1)[M.full?"fullWidth":"width"],E=A1(D.commentScale,!1),R=A1(D.fontSize,!1),K=lr(M.size,!1),N=vl(M.size,!1),W=M.lineCount;M.lineHeight||(M.lineHeight=K),M.charSize||(M.charSize=N),M.fontSize=M.charSize*.8;var X,o1,r1;if(this.context.font=s1(M.font,M.fontSize),!M.resized&&!M.ender&&(M.size==="big"&&W>2||M.size==="medium"&&W>4||M.size==="small"&&W>6)){M.fontSize=R[M.size].resized;var u1=lr(M.size,!1,!0);M.charSize=M.charSize*(u1/M.lineHeight),M.lineHeight=u1,M.resized=!0,M.resizedY=!0;var f1=h0(M,this.context);o1=f1.height,X=f1.width,r1=f1.itemWidth}else{var f1=h0(M,this.context);o1=f1.height,X=f1.width,r1=f1.itemWidth}if(M.loc!=="naka"&&X>S){var n1=S/X;M.resizedX=!0;var i1=m({},M);i1.charSize=(i1.charSize||0)*n1,i1.lineHeight=(i1.lineHeight||0)*n1,i1.fontSize=i1.charSize*.8;var x1=h0(i1,this.context);if(x1.width>S)for(;x1.width>=S;){var T1=i1.charSize;i1.charSize-=1,i1.lineHeight*=i1.charSize/T1,i1.fontSize=i1.charSize*.8,x1=h0(i1,this.context)}else{for(var D1=m({},i1);x1.width<S;){D1=m({},i1);var T1=i1.charSize;i1.charSize+=1,i1.lineHeight*=i1.charSize/T1,i1.fontSize=i1.charSize*.8,x1=h0(i1,this.context)}i1=D1}if(M.resizedY){var C1=(i1.charSize||0)/M.charSize;M.charSize=C1*N,M.lineHeight=C1*K}else M.charSize=i1.charSize,M.lineHeight=i1.lineHeight;M.fontSize=(M.charSize||0)*.8,x1=h0(M,this.context),X=x1.width,o1=x1.height,r1=x1.itemWidth}for(var g1=0;g1<M.content.length;g1++){var $1=M.content[g1];!$1||!r1||($1.width=r1[g1])}M.fontSize=(M.charSize||0)*.8;var et=or(M.charSize||0);return et.scale<1&&(o1*=1.01),{width:X*E,height:o1*E,resized:!!M.resized,fontSize:M.fontSize,lineHeight:M.lineHeight||0,content:M.content,resizedX:!!M.resizedX,resizedY:!!M.resizedY,charSize:M.charSize||0}},x.prototype.getCommentSize=function(M){this.context.font=s1(M.font,M.fontSize);var S=M;if(M.invisible)return S.height=0,S.width=0,S.lineHeight=0,S.fontSize=0,S.content=[],S.resized=!1,S.resizedX=!1,S.resizedY=!1,S.charSize=0,S;var E=this.measureText(M);return J.scale!==1&&S.layer===-1&&(E.height*=J.scale,E.width*=J.scale,E.fontSize*=J.scale),S.height=E.height,S.width=E.width,S.lineHeight=E.lineHeight,S.fontSize=E.fontSize,S.content=E.content,S.resized=E.resized,S.resizedX=E.resizedX,S.resizedY=E.resizedY,S.charSize=E.charSize,S},x.prototype.draw=function(M,S,E){for(var R,K=!1,N=0,W=F.reverse;N<W.length;N++){var X=W[N];if(X.target==="\u30B3\u30E1"&&this.comment.owner||X.target==="\u6295\u30B3\u30E1"&&!this.comment.owner)break;X.start<M&&M<X.end&&(K=!0)}for(var o1=0,r1=F.ban;o1<r1.length;o1++){var X=r1[o1];if(X.start<M&&M<X.end)return}var u1=(D.canvasWidth-this.comment.width)/2,f1=this.posY;if(this.comment.loc==="naka"){if(K?u1=D.canvasWidth+this.comment.width-l1(this.comment.width,M-this.comment.vpos,this.comment.long):u1=l1(this.comment.width,M-this.comment.vpos,this.comment.long),u1>D.canvasWidth||u1+this.comment.width<0)return}else this.comment.loc==="shita"&&(f1=D.canvasHeight-this.posY-this.comment.height);if(this.image===void 0&&(this.image=this.getTextImage()),this.image&&(this.comment._live?this.context.globalAlpha=D.contextFillLiveOpacity:this.context.globalAlpha=1,this.context.drawImage(this.image,u1,f1)),this.comment.wakuColor&&(this.context.strokeStyle=this.comment.wakuColor,this.context.strokeRect(u1,f1,this.comment.width,this.comment.height)),S){var n1=A1(D.commentScale,!1);this.context.strokeStyle="rgba(0,255,255,1)",this.context.strokeRect(u1,f1,this.comment.width,this.comment.height);for(var i1=0;i1<this.comment.lineCount;i1++){var x1=(this.comment.lineHeight*(i1+1)+(this.comment.charSize-this.comment.lineHeight)/2+this.comment.lineHeight*-.16+(((R=D.fonts[this.comment.font])===null||R===void 0?void 0:R.offset)||0))*n1;this.context.strokeStyle="rgba(255,255,0,0.5)",this.context.strokeRect(u1,f1+x1,this.comment.width,this.comment.fontSize*-1*n1)}}if(E){var T1=this.context.font,D1=this.context.fillStyle;this.context.font=s1("defont",30),this.context.fillStyle="#ff00ff",this.context.fillText(this.comment.mail.join(","),u1,f1+30),this.context.font=T1,this.context.fillStyle=D1}},x.prototype.getTextImage=function(){var M=this,S;if(this.comment.invisible||this.comment.lineCount===1&&this.comment.width===0||this.comment.height-(this.comment.charSize-this.comment.lineHeight)<=0)return null;var E=JSON.stringify(this.comment.content)+"@@HTML5@@"+H([],this.comment.mail,!0).sort().join(","),R=W2[E];if(R)return this.image=R.image,window.setTimeout(function(){delete M.image},this.comment.long*10+D.cacheAge),clearTimeout(R.timeout),R.timeout=window.setTimeout(function(){delete W2[E]},this.comment.long*10+D.cacheAge),R.image;if(this.image)return this.image;var K=document.createElement("canvas");K.width=this.comment.width+2*2*this.comment.charSize,K.height=this.comment.height-(this.comment.charSize-this.comment.lineHeight);var N=K.getContext("2d");if(!N)throw new Error("Fail to get CanvasRenderingContext2D");N.strokeStyle=mt(this.comment),N.textAlign="start",N.textBaseline="alphabetic",N.lineWidth=D.contextLineWidth;var W=or(this.comment.charSize),X=W.fontSize,o1=W.scale;N.font=s1(this.comment.font,X);var r1=A1(D.commentScale,!1)*o1*(this.comment.layer===-1?J.scale:1);N.scale(r1,r1),N.fillStyle=this.comment.color;for(var u1=0,f1=0,n1=(10-o1*10)*(this.comment.lineCount/D.hiResCommentCorrection),i1=0,x1=this.comment.content;i1<x1.length;i1++)for(var T1=x1[i1],D1=T1.content.split(`
`),C1=0;C1<D1.length;C1++){var g1=D1[C1];if(g1!==void 0){var $1=(this.comment.lineHeight*(f1+1+n1)+(this.comment.charSize-this.comment.lineHeight)/2+this.comment.lineHeight*-.16+(((S=D.fonts[this.comment.font])===null||S===void 0?void 0:S.offset)||0))/o1;N.strokeText(g1,u1,$1),N.fillText(g1,u1,$1),C1<D1.length-1?(u1=0,f1+=1):u1+=T1.width[C1]||0}}return this.image=K,window.setTimeout(function(){delete M.image},this.comment.long*10+D.cacheAge),W2[E]={timeout:window.setTimeout(function(){delete W2[E]},this.comment.long*10+D.cacheAge),image:K},K},x}(),P1=function(){function x(M,S){this.context=S,this.scale=1,this.scaleX=1,this._globalScale=A1(D.commentScale,!0),this.posY=0,M.content=M.content.replace(/\t/g,"\u2003\u2003"),this.comment=this.getCommentSize(this.parseCommandAndNicoscript(M))}return Object.defineProperty(x.prototype,"invisible",{get:function(){return this.comment.invisible},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"loc",{get:function(){return this.comment.loc},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"long",{get:function(){return this.comment.long},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"vpos",{get:function(){return this.comment.vpos},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"width",{get:function(){return this.comment.width},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"height",{get:function(){return this.comment.height},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"flash",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"layer",{get:function(){return this.comment.layer},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"owner",{get:function(){return this.comment.owner},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"mail",{get:function(){return this.comment.mail},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"lineCount",{get:function(){return this.comment.lineCount},enumerable:!1,configurable:!0}),x.prototype.parseCommandAndNicoscript=function(M){for(var S,E,R=U2(M),K=[],N=(M.content.match(/\n|[^\n]+/g)||[]).map(function(i1){return Array.from(i1.match(/[ -~｡-ﾟ]+|[^ -~｡-ﾟ]+/g)||[])}),W=function(i1){for(var x1=[],T1=0,D1=i1;T1<D1.length;T1++){var C1=D1[T1];if(C1.match(/[ -~｡-ﾟ]+/g)!==null){x1.push({content:C1});continue}var g1=$0(C1);if(g1.length===0)x1.push({content:C1});else if(g1.length===1&&g1[0])x1.push({content:C1,font:p2(g1[0].font)});else if(g1.sort(sl(function(ge){return ge.index})),D.flashMode==="xp"){for(var $1=0,et=1;et<g1.length;et++){var at=g1[et],R1=g1[et-1];at===void 0||R1===void 0||(x1.push({content:C1.slice($1,at.index),font:p2(R1.font)}),$1=at.index)}var Ht=g1[g1.length-1];Ht&&x1.push({content:C1.slice($1),font:p2(Ht.font)})}else{var B1=g1[0],st=g1[1];if(!B1||!st){x1.push({content:C1});continue}B1.font!=="gothic"?x1.push({content:C1,font:p2(B1.font)}):(x1.push({content:C1.slice(0,st.index),font:p2(B1.font)}),x1.push({content:C1.slice(st.index),font:p2(st.font)}))}}var l0=x1[0];l0&&l0.font?K.push.apply(K,x1.map(function(ge){return ge.font||(ge.font=l0.font),ge})):K.push.apply(K,x1)},X=0,o1=N;X<o1.length;X++){var r1=o1[X];W(r1)}var u1=K[0];u1&&u1.font&&(R.font=u1.font);var f1=K.reduce(function(i1,x1){var T1;return i1+(((T1=x1.content.match(/\n/g))===null||T1===void 0?void 0:T1.length)||0)},1),n1=(((S=M.content.match(new RegExp(D.flashScriptChar.super,"g")))===null||S===void 0?void 0:S.length)||0)*-1*D.scriptCharOffset+(((E=M.content.match(new RegExp(D.flashScriptChar.sub,"g")))===null||E===void 0?void 0:E.length)||0)*D.scriptCharOffset;return m(m({},R),{content:K,lineCount:f1,lineOffset:n1})},x.prototype.measureText=function(M){var S=A1(D.lineHeight,!0),E=A1(D.fontSize,!0),R=M.lineCount;M.lineHeight||(M.lineHeight=S[M.size].default),!M.resized&&!M.ender&&(M.size==="big"&&R>2||M.size==="medium"&&R>4||M.size==="small"&&R>6)&&(M.fontSize=E[M.size].resized,M.lineHeight=S[M.size].resized,M.resized=!0,M.resizedY=!0,this.context.font=s1(M.font,M.fontSize));for(var K=[],N=[],W=0,X=0,o1=0,r1=M.content;o1<r1.length;o1++){var u1=r1[o1],f1=u1.content.split(`
`),n1=[];this.context.font=s1(u1.font||M.font,M.fontSize);for(var i1=0;i1<f1.length;i1++){var x1=f1[i1];if(x1!==void 0){var T1=this.context.measureText(x1);W+=T1.width,X+=T1.width+Math.max(x1.length-1,0)*D.letterSpacing,n1.push(T1.width),i1<f1.length-1&&(K.push(W),N.push(X),X=0,W=0)}}K.push(W),N.push(X),u1.width=n1}var D1=function(){for(var at=0,R1=-1,Ht=0,B1=N.length;Ht<B1;Ht++){var st=N[Ht];st&&at<st&&(at=st,R1=Ht)}return{max:at,index:R1}}(),C1=D1.max;this.scaleX=D1.max/(K[D1.index]||1);var g1=C1*this.scale,$1=(M.fontSize*M.lineHeight*R+D.commentYPaddingTop[M.resizedY?"resized":"default"])*this.scale;if(M.loc!=="naka"){var et=A1(D.commentStageSize,!0)[M.full?"fullWidth":"width"];if(g1>et&&!M.resizedX)return M.fontSize=E[M.size].default,M.lineHeight=S[M.size].default,this.scale=et/g1,M.resizedX=!0,M.resized=!0,this.measureText(M)}return{width:g1,charSize:0,height:$1,resized:!!M.resized,fontSize:M.fontSize,lineHeight:M.lineHeight,content:M.content,resizedX:!!M.resizedX,resizedY:!!M.resizedY}},x.prototype.getCommentSize=function(M){this.context.font=s1(M.font,M.fontSize);var S=M;if(M.invisible)return S.height=0,S.width=0,S.lineHeight=0,S.fontSize=0,S.content=[],S.resized=!1,S.resizedX=!1,S.resizedY=!1,S.charSize=0,S;var E=this.measureText(M);return J.scale!==1&&S.layer===-1&&(E.height*=J.scale,E.width*=J.scale),S.height=E.height*this._globalScale,S.width=E.width*this._globalScale,S.lineHeight=E.lineHeight,S.fontSize=E.fontSize,S.content=E.content,S.resized=E.resized,S.resizedX=E.resizedX,S.resizedY=E.resizedY,S.charSize=E.charSize,S},x.prototype.draw=function(M,S,E){for(var R=!1,K=0,N=F.reverse;K<N.length;K++){var W=N[K];if(W.target==="\u30B3\u30E1"&&this.comment.owner||W.target==="\u6295\u30B3\u30E1"&&!this.comment.owner)break;W.start<M&&M<W.end&&(R=!0)}for(var X=0,o1=F.ban;X<o1.length;X++){var W=o1[X];if(W.start<M&&M<W.end)return}var r1=(D.canvasWidth-this.comment.width)/2,u1=this.posY;if(this.comment.loc==="naka"){if(R?r1=D.canvasWidth+this.comment.width-l1(this.comment.width,M-this.comment.vpos,this.comment.long):r1=l1(this.comment.width,M-this.comment.vpos,this.comment.long),r1>D.canvasWidth||r1+this.comment.width<0)return}else this.comment.loc==="shita"&&(u1=D.canvasHeight-this.posY-this.comment.height);if(this.image===void 0&&(this.image=this.getTextImage()),this.image&&(this.comment._live?this.context.globalAlpha=D.contextFillLiveOpacity:this.context.globalAlpha=1,this.context.drawImage(this.image,r1,u1)),this.comment.wakuColor&&(this.context.strokeStyle=this.comment.wakuColor,this.context.strokeRect(r1,u1,this.comment.width,this.comment.height)),S){this.context.strokeStyle="rgba(255,0,255,1)",this.context.strokeRect(r1,u1,this.comment.width,this.comment.height);for(var f1=0;f1<this.comment.lineCount;f1++){var n1=((f1+1)*(this.comment.fontSize*this.comment.lineHeight)+D.commentYPaddingTop[this.comment.resizedY?"resized":"default"])*this.scale;this.context.strokeStyle="rgba(255,255,0,0.25)",this.context.strokeRect(r1,u1+n1*this._globalScale,this.comment.width,this.comment.fontSize*this.comment.lineHeight*-1*this._globalScale*this.scale*(this.comment.layer===-1?J.scale:1))}}if(E){var i1=this.context.font,x1=this.context.fillStyle;this.context.font=s1("defont",30),this.context.fillStyle="#ff00ff",this.context.fillText(this.comment.mail.join(","),r1,u1+30),this.context.font=i1,this.context.fillStyle=x1}},x.prototype.getTextImage=function(){var M=this;if(this.comment.invisible||this.comment.lineCount===1&&this.comment.width===0||this.comment.height-(this.comment.charSize-this.comment.lineHeight)<=0)return null;var S=JSON.stringify(this.comment.content)+"@@FLASH@@"+H([],this.comment.mail,!0).sort().join(","),E=W2[S];if(E)return this.image=E.image,window.setTimeout(function(){delete M.image},this.comment.long*10+D.cacheAge),clearTimeout(E.timeout),E.timeout=window.setTimeout(function(){delete W2[S]},this.comment.long*10+D.cacheAge),E.image;var R=document.createElement("canvas");R.width=this.comment.width,R.height=this.comment.height;var K=R.getContext("2d");if(!K)throw new Error("Fail to get CanvasRenderingContext2D");K.strokeStyle=mt(this.comment),K.textAlign="start",K.textBaseline="alphabetic",K.lineWidth=4,K.font=s1(this.comment.font,this.comment.fontSize),K.scale(this._globalScale*this.scale*(this.comment.layer===-1?J.scale:1)*this.scaleX,this._globalScale*this.scale*(this.comment.layer===-1?J.scale:1)),K.fillStyle=this.comment.color;for(var N=this.comment.lineOffset,W=this.comment.font,X=0,o1=0,r1=0,u1=this.comment.content;r1<u1.length;r1++){var f1=u1[r1];W!==(f1.font||this.comment.font)&&(W=f1.font||this.comment.font,K.font=s1(W,this.comment.fontSize));for(var n1=f1.content.split(`
`),i1=0;i1<n1.length;i1++){var x1=n1[i1];if(x1!==void 0){var T1=(N+o1+1)*(this.comment.fontSize*this.comment.lineHeight)+D.commentYPaddingTop[this.comment.resizedY?"resized":"default"]+this.comment.fontSize*this.comment.lineHeight*D.commentYOffset[this.comment.size][this.comment.resizedY?"resized":"default"];K.strokeText(x1,X,T1),K.fillText(x1,X,T1),i1<n1.length-1?(X=0,o1+=1):X+=f1.width[i1]||0}}}return this.image=R,window.setTimeout(function(){delete M.image},this.comment.long*10+D.cacheAge),W2[S]={timeout:window.setTimeout(function(){delete W2[S]},this.comment.long*10+D.cacheAge),image:R},R},x}(),cr=[],sr=function(x){cr=x},W0=[],G2={seekDisable:0,seekEnable:0,commentDisable:0,commentEnable:0,jump:0},vr=function(x,M){W0.push({eventName:x,handler:M}),G0()},dr=function(x,M){W0=W0.filter(function(S){return S.eventName!==x||S.handler!==M}),G0()},G0=function(){var x=function(S){var E=S;G2[E]=W0.filter(function(R){return R.eventName===E}).length};for(var M in G2)x(M)},ur=function(x,M){C5(x,M),S5(x,M),_5(x,M)},C5=function(x,M){if(!(G2.commentDisable<1&&G2.commentEnable<1))for(var S=0,E=F.ban;S<E.length;S++){var R=E[S],K=R.start<x&&x<R.end,N=R.start<M&&M<R.end;K&&!N?I1("commentDisable",{type:"commentDisable",timeStamp:new Date().getTime(),vpos:x}):!K&&N&&I1("commentEnable",{type:"commentEnable",timeStamp:new Date().getTime(),vpos:x})}},S5=function(x,M){if(!(G2.seekDisable<1&&G2.seekEnable<1))for(var S=0,E=F.seekDisable;S<E.length;S++){var R=E[S],K=R.start<x&&x<R.end,N=R.start<M&&M<R.end;K&&!N?I1("seekDisable",{type:"seekDisable",timeStamp:new Date().getTime(),vpos:x}):!K&&N&&I1("seekEnable",{type:"seekEnable",timeStamp:new Date().getTime(),vpos:x})}},_5=function(x,M){if(!(G2.jump<1))for(var S=0,E=F.jump;S<E.length;S++){var R=E[S],K=R.start<x&&(!R.end||x<R.end),N=R.start<M&&(!R.end||M<R.end);K&&!N&&I1("jump",{type:"jump",timeStamp:new Date().getTime(),vpos:x,to:R.to,message:R.message})}},I1=function(x,M){for(var S=0,E=W0;S<E.length;S++){var R=E[S];x===R.eventName&&R.handler(M)}},gr=!1,P4=function(){function x(M,S,E){E===void 0&&(E={});var R=performance.now();if(U(),!n.config.initOptions(E))throw new Error("Please see document: https://xpadev-net.github.io/niconicomments/#p_options");Z(Object.assign(q,E)),t1(Object.assign(j,J.config)),gr=J.debug,ue(),c1(),this.canvas=M;var K=M.getContext("2d");if(!K)throw new Error("Fail to get CanvasRenderingContext2D");this.context=K,this.context.strokeStyle="rgba(".concat(O1(D.contextStrokeColor).join(","),",").concat(D.contextStrokeOpacity,")"),this.context.textAlign="start",this.context.textBaseline="alphabetic",this.context.lineWidth=D.contextLineWidth;var N=J.format;J.formatted&&console.warn("Deprecated: options.formatted is no longer recommended. Please use options.format. https://xpadev-net.github.io/niconicomments/#p_format"),N==="default"&&(N=J.formatted?"formatted":"legacy"),J.useLegacy&&console.warn("Deprecated: options.useLegacy is no longer recommended. Please use options.mode. https://xpadev-net.github.io/niconicomments/#p_mode"),J.mode==="default"&&J.useLegacy&&(J.mode="html5");var W=l(S,N);sr(D.plugins.map(function(X){return new X(M,W)})),this.video=J.video||void 0,this.showCollision=J.showCollision,this.showFPS=J.showFPS,this.showCommentCount=J.showCommentCount,this.enableLegacyPiP=J.enableLegacyPiP,this.timeline={},this.collision=["ue","shita","right","left"].reduce(function(X,o1){return X[o1]=[],X},{}),this.lastVpos=-1,this.preRendering(W),q0("constructor complete: ".concat(performance.now()-R,"ms"))}return x.prototype.preRendering=function(M){var S=this,E=performance.now();J.keepCA&&(M=q1(M)),this.getCommentPos(M.reduce(function(R,K){return Mt(K)?R.push(new P1(K,S.context)):R.push(new k4(K,S.context)),R},[])),this.sortComment(),q0("preRendering complete: ".concat(performance.now()-E,"ms"))},x.prototype.getCommentPos=function(M){var S=this,E=performance.now();return M.forEach(function(R){if(!R.invisible)if(R.loc==="naka"){var K=0,N=Math.round(-288/((1632+R.width)/(R.long+125)))-100;if(D.canvasHeight<R.height)K=(R.height-D.canvasHeight)/-2;else for(var W=!1,X=!0,o1=0;X&&o1<10;){X=!1,o1++;for(var r1=N;r1<R.long+125;r1++){var u1=R.vpos+r1,f1=l1(R.width,r1,R.long);if(f1+R.width>=D.collisionRange.right&&f1<=D.collisionRange.right){var n1=a1(K,R,S.collision.right[u1]);if(K=n1.currentPos,X=n1.isChanged,W=n1.isBreak,W)break}if(f1+R.width>=D.collisionRange.left&&f1<=D.collisionRange.left){var n1=a1(K,R,S.collision.left[u1]);if(K=n1.currentPos,X=n1.isChanged,W=n1.isBreak,W)break}}if(W)break}for(var r1=N;r1<R.long+125;r1++){var u1=R.vpos+r1,f1=l1(R.width,r1,R.long);m1(S.timeline,u1,R),f1+R.width>=D.collisionRange.right&&f1<=D.collisionRange.right&&m1(S.collision.right,u1,R),f1+R.width>=D.collisionRange.left&&f1<=D.collisionRange.left&&m1(S.collision.left,u1,R)}R.posY=K}else{var K=0,X=!0,o1=0,i1=void 0;for(R.loc==="ue"?i1=S.collision.ue:i1=S.collision.shita;X&&o1<10;){X=!1,o1++;for(var r1=0;r1<R.long;r1++){var n1=a1(K,R,i1[R.vpos+r1]);if(K=n1.currentPos,X=n1.isChanged,n1.isBreak)break}}for(var r1=0;r1<R.long;r1++){var u1=R.vpos+r1;m1(S.timeline,u1,R),!(r1>R.long-20)&&(R.loc==="ue"?m1(S.collision.ue,u1,R):m1(S.collision.shita,u1,R))}R.posY=K}}),q0("getCommentPos complete: ".concat(performance.now()-E,"ms")),M},x.prototype.sortComment=function(){for(var M=performance.now(),S=0,E=Object.keys(this.timeline);S<E.length;S++){var R=E[S],K=this.timeline[Number(R)];if(K){for(var N=[],W=[],X=0,o1=K;X<o1.length;X++){var r1=o1[X];r1?.owner?N.push(r1):W.push(r1)}this.timeline[Number(R)]=W.concat(N)}}q0("parseData complete: ".concat(performance.now()-M,"ms"))},x.prototype.addComments=function(){for(var M=this,S,E,R,K=[],N=0;N<arguments.length;N++)K[N]=arguments[N];cr.forEach(function(n1){return n1.addComments(K)});for(var W=K.reduce(function(n1,i1){return Mt(i1)?n1.push(new P1(i1,M.context)):n1.push(new k4(i1,M.context)),n1},[]),X=function(n1){if(n1.invisible)return"continue";if(n1.loc==="naka"){var i1=0,x1=Math.round(-288/((1632+n1.width)/(n1.long+125)))-100;if(D.canvasHeight<n1.height)i1=(n1.height-D.canvasHeight)/-2;else for(var T1=!1,D1=!0,C1=0;D1&&C1<10;){D1=!1,C1++;for(var g1=x1;g1<n1.long+125;g1++){var $1=n1.vpos+g1,et=l1(n1.width,g1,n1.long);if(et+n1.width>=D.collisionRange.right&&et<=D.collisionRange.right){var at=(S=o1.collision.right[$1])===null||S===void 0?void 0:S.filter(function(Ht){return Ht.vpos<=n1.vpos}),R1=a1(i1,n1,at);if(i1=R1.currentPos,D1=R1.isChanged,T1=R1.isBreak,T1)break}if(et+n1.width>=D.collisionRange.left&&et<=D.collisionRange.left){var at=(E=o1.collision.left[$1])===null||E===void 0?void 0:E.filter(function(st){return st.vpos<=n1.vpos}),R1=a1(i1,n1,at);if(i1=R1.currentPos,D1=R1.isChanged,T1=R1.isBreak,T1)break}}if(T1)break}for(var g1=x1;g1<n1.long+125;g1++){var $1=n1.vpos+g1,et=l1(n1.width,g1,n1.long);m1(o1.timeline,$1,n1),et+n1.width>=D.collisionRange.right&&et<=D.collisionRange.right&&m1(o1.collision.right,$1,n1),et+n1.width>=D.collisionRange.left&&et<=D.collisionRange.left&&m1(o1.collision.left,$1,n1)}n1.posY=i1}else{var i1=0,D1=!0,C1=0,at=void 0;for(n1.loc==="ue"?at=o1.collision.ue:at=o1.collision.shita;D1&&C1<10;){D1=!1,C1++;for(var g1=0;g1<n1.long;g1++){var R1=a1(i1,n1,(R=at[n1.vpos+g1])===null||R===void 0?void 0:R.filter(function(Pe){return Pe.vpos<=n1.vpos}));if(i1=R1.currentPos,D1=R1.isChanged,R1.isBreak)break}}for(var g1=0;g1<n1.long;g1++){var $1=n1.vpos+g1;m1(o1.timeline,$1,n1),!(g1>n1.long-20)&&(n1.loc==="ue"?m1(o1.collision.ue,$1,n1):m1(o1.collision.shita,$1,n1))}n1.posY=i1}},o1=this,r1=0,u1=W;r1<u1.length;r1++){var f1=u1[r1];X(f1)}},x.prototype.drawCanvas=function(M,S){var E,R,K;S===void 0&&(S=!1);var N=performance.now();if(this.lastVpos===M&&!S)return!1;ur(M,this.lastVpos);var W=this.timeline[M];if(!S&&W?.filter(function(st){return st.loc==="naka"}).length===0&&((R=(E=this.timeline[this.lastVpos])===null||E===void 0?void 0:E.filter(function(st){return st.loc==="naka"}))===null||R===void 0?void 0:R.length)===0){var X=W.filter(function(st){return st.loc!=="naka"}),o1=((K=this.timeline[this.lastVpos])===null||K===void 0?void 0:K.filter(function(st){return st.loc!=="naka"}))||[];if(C2(X,o1))return!1}if(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.lastVpos=M,this.video){var r1=void 0,u1=this.canvas.height/this.video.videoHeight,f1=this.canvas.width/this.video.videoWidth;(this.enableLegacyPiP?u1>f1:u1<f1)?r1=f1:r1=u1;var n1=(this.canvas.width-this.video.videoWidth*r1)*.5,i1=(this.canvas.height-this.video.videoHeight*r1)*.5;this.context.drawImage(this.video,n1,i1,this.video.videoWidth*r1,this.video.videoHeight*r1)}if(this.showCollision){var x1=this.collision.left[M],T1=this.collision.right[M];if(this.context.fillStyle="red",x1)for(var D1=0,C1=x1;D1<C1.length;D1++){var g1=C1[D1];this.context.fillRect(D.collisionRange.left,g1.posY,D.contextLineWidth,g1.height)}if(T1)for(var $1=0,et=T1;$1<et.length;$1++){var g1=et[$1];this.context.fillRect(D.collisionRange.right,g1.posY,D.contextLineWidth*-1,g1.height)}}if(W)for(var at=0,R1=W;at<R1.length;at++){var g1=R1[at];g1.invisible||g1.draw(M,this.showCollision,gr)}if(cr.forEach(function(st){return st.draw(M)}),this.showFPS){this.context.font=s1("defont",60),this.context.fillStyle="#00FF00",this.context.strokeStyle="rgba(".concat(O1(D.contextStrokeColor).join(","),",").concat(D.contextStrokeOpacity,")");var Ht=Math.floor(performance.now()-N),B1=Math.floor(1e3/(Ht===0?1:Ht));this.context.strokeText("FPS:".concat(B1,"(").concat(Ht,"ms)"),100,100),this.context.fillText("FPS:".concat(B1,"(").concat(Ht,"ms)"),100,100)}return this.showCommentCount&&(this.context.font=s1("defont",60),this.context.fillStyle="#00FF00",this.context.strokeStyle="rgba(".concat(O1(D.contextStrokeColor).join(","),",").concat(D.contextStrokeOpacity,")"),W?(this.context.strokeText("Count:".concat(W.length),100,200),this.context.fillText("Count:".concat(W.length),100,200)):(this.context.strokeText("Count:0",100,200),this.context.fillText("Count:0",100,200))),q0("drawCanvas complete: ".concat(performance.now()-N,"ms")),!0},x.prototype.addEventListener=function(M,S){vr(M,S)},x.prototype.removeEventListener=function(M,S){dr(M,S)},x.prototype.clear=function(){this.context.clearRect(0,0,D.canvasWidth,D.canvasHeight)},x.typeGuard=n,x.default=x,x}(),q0=function(x){gr&&console.debug(x)};return P4})});var BM=S1((O6,A6)=>{(function(e,t){typeof O6=="object"&&typeof A6<"u"?A6.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t()})(O6,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(r,n,i){var h=n.prototype;i.utc=function(L){var V={date:L,utc:!0,args:arguments};return new n(V)},h.utc=function(L){var V=i(this.toDate(),{locale:this.$L,utc:!0});return L?V.add(this.utcOffset(),e):V},h.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var l=h.parse;h.parse=function(L){L.utc&&(this.$u=!0),this.$utils().u(L.$offset)||(this.$offset=L.$offset),l.call(this,L)};var c=h.init;h.init=function(){if(this.$u){var L=this.$d;this.$y=L.getUTCFullYear(),this.$M=L.getUTCMonth(),this.$D=L.getUTCDate(),this.$W=L.getUTCDay(),this.$H=L.getUTCHours(),this.$m=L.getUTCMinutes(),this.$s=L.getUTCSeconds(),this.$ms=L.getUTCMilliseconds()}else c.call(this)};var v=h.utcOffset;h.utcOffset=function(L,V){var b=this.$utils().u;if(b(L))return this.$u?0:b(this.$offset)?v.call(this):this.$offset;if(typeof L=="string"&&(L=function(y){y===void 0&&(y="");var B=y.match(t);if(!B)return null;var _=(""+B[0]).match(a)||["-",0,0],j=_[0],U=60*+_[1]+ +_[2];return U===0?0:j==="+"?U:-U}(L),L===null))return this;var k=Math.abs(L)<=16?60*L:L,m=this;if(V)return m.$offset=k,m.$u=L===0,m;if(L!==0){var H=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(m=this.local().add(k+H,e)).$offset=k,m.$x.$localOffset=H}else m=this.utc();return m};var g=h.format;h.format=function(L){var V=L||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,V)},h.valueOf=function(){var L=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*L},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var z=h.toDate;h.toDate=function(L){return L==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():z.call(this)};var w=h.diff;h.diff=function(L,V,b){if(L&&this.$u===L.$u)return w.call(this,L,V,b);var k=this.local(),m=i(L).local();return w.call(k,m,V,b)}}})});var CM=S1((E6,k6)=>{(function(e,t){typeof E6=="object"&&typeof k6<"u"?k6.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_duration=t()})(E6,function(){"use strict";var e,t,a=1e3,r=6e4,n=36e5,i=864e5,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,c=2592e6,v=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,g={years:l,months:c,days:i,hours:n,minutes:r,seconds:a,milliseconds:1,weeks:6048e5},z=function(y){return y instanceof H},w=function(y,B,_){return new H(y,_,B.$l)},L=function(y){return t.p(y)+"s"},V=function(y){return y<0},b=function(y){return V(y)?Math.ceil(y):Math.floor(y)},k=function(y){return Math.abs(y)},m=function(y,B){return y?V(y)?{negative:!0,format:""+k(y)+B}:{negative:!1,format:""+y+B}:{negative:!1,format:""}},H=function(){function y(_,j,U){var q=this;if(this.$d={},this.$l=U,_===void 0&&(this.$ms=0,this.parseFromMilliseconds()),j)return w(_*g[L(j)],this);if(typeof _=="number")return this.$ms=_,this.parseFromMilliseconds(),this;if(typeof _=="object")return Object.keys(_).forEach(function(t1){q.$d[L(t1)]=_[t1]}),this.calMilliseconds(),this;if(typeof _=="string"){var D=_.match(v);if(D){var J=D.slice(2).map(function(t1){return t1!=null?Number(t1):0});return this.$d.years=J[0],this.$d.months=J[1],this.$d.weeks=J[2],this.$d.days=J[3],this.$d.hours=J[4],this.$d.minutes=J[5],this.$d.seconds=J[6],this.calMilliseconds(),this}}return this}var B=y.prototype;return B.calMilliseconds=function(){var _=this;this.$ms=Object.keys(this.$d).reduce(function(j,U){return j+(_.$d[U]||0)*g[U]},0)},B.parseFromMilliseconds=function(){var _=this.$ms;this.$d.years=b(_/l),_%=l,this.$d.months=b(_/c),_%=c,this.$d.days=b(_/i),_%=i,this.$d.hours=b(_/n),_%=n,this.$d.minutes=b(_/r),_%=r,this.$d.seconds=b(_/a),_%=a,this.$d.milliseconds=_},B.toISOString=function(){var _=m(this.$d.years,"Y"),j=m(this.$d.months,"M"),U=+this.$d.days||0;this.$d.weeks&&(U+=7*this.$d.weeks);var q=m(U,"D"),D=m(this.$d.hours,"H"),J=m(this.$d.minutes,"M"),t1=this.$d.seconds||0;this.$d.milliseconds&&(t1+=this.$d.milliseconds/1e3);var Z=m(t1,"S"),F=_.negative||j.negative||q.negative||D.negative||J.negative||Z.negative,c1=D.format||J.format||Z.format?"T":"",a1=(F?"-":"")+"P"+_.format+j.format+q.format+c1+D.format+J.format+Z.format;return a1==="P"||a1==="-P"?"P0D":a1},B.toJSON=function(){return this.toISOString()},B.format=function(_){var j=_||"YYYY-MM-DDTHH:mm:ss",U={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return j.replace(h,function(q,D){return D||String(U[q])})},B.as=function(_){return this.$ms/g[L(_)]},B.get=function(_){var j=this.$ms,U=L(_);return U==="milliseconds"?j%=1e3:j=U==="weeks"?b(j/g[U]):this.$d[U],j===0?0:j},B.add=function(_,j,U){var q;return q=j?_*g[L(j)]:z(_)?_.$ms:w(_,this).$ms,w(this.$ms+q*(U?-1:1),this)},B.subtract=function(_,j){return this.add(_,j,!0)},B.locale=function(_){var j=this.clone();return j.$l=_,j},B.clone=function(){return w(this.$ms,this)},B.humanize=function(_){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!_)},B.valueOf=function(){return this.asMilliseconds()},B.milliseconds=function(){return this.get("milliseconds")},B.asMilliseconds=function(){return this.as("milliseconds")},B.seconds=function(){return this.get("seconds")},B.asSeconds=function(){return this.as("seconds")},B.minutes=function(){return this.get("minutes")},B.asMinutes=function(){return this.as("minutes")},B.hours=function(){return this.get("hours")},B.asHours=function(){return this.as("hours")},B.days=function(){return this.get("days")},B.asDays=function(){return this.as("days")},B.weeks=function(){return this.get("weeks")},B.asWeeks=function(){return this.as("weeks")},B.months=function(){return this.get("months")},B.asMonths=function(){return this.as("months")},B.years=function(){return this.get("years")},B.asYears=function(){return this.as("years")},y}();return function(y,B,_){e=_,t=_().$utils(),_.duration=function(q,D){var J=_.locale();return w(q,{$l:J},D)},_.isDuration=z;var j=B.prototype.add,U=B.prototype.subtract;B.prototype.add=function(q,D){return z(q)&&(q=q.asMilliseconds()),j.bind(this)(q,D)},B.prototype.subtract=function(q,D){return z(q)&&(q=q.asMilliseconds()),U.bind(this)(q,D)}}})});var DM=z1(cu());var y5=z1(At());var su=z1(Qc());function UV(e){let a=(0,su.default)(new Date).format();console.log("\x1B[31m[KIITE CAFE PlUS]\x1B[32m "+a,e)}var Ve=UV;async function Jc(e){let t=await fetch(`https://embed.nicovideo.jp/watch/${e}?jsapi=1&playerId=2&noRelatedVideo=0&autoplay=1&mute=0&defaultNoComment=1&noLinkToNiconico=0&noController=0&noHeader=0&noTags=0&noShare=1&noVideoDetail=0&allowProgrammaticFullScreen=1&noIncrementViewCount=0&persistence=1&disableAdCheck=0`),a=document.createElement("div");a.innerHTML=await t.text();let n=a.querySelector("#ext-player")?.getAttribute("data-props");if(n!=null){let i=JSON.parse(n),l=await(await fetch(`https://www.nicovideo.jp/api/watch/v3_guest/${e}?_frontendId=70&_frontendVersion=0&actionTrackId=${i.actionTrackId}&skips=harmful&noSideEffect=false&i18nLanguage=ja-jp&t=1685257525946`)).text();return JSON.parse(l)}else return null}async function Zc(e){let a=await(await fetch("https://api.dmc.nico/api/sessions?_format=json",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify($V(e))})).text();return JSON.parse(a)}function $V(e){let t=e.data.media.delivery.movie.videos.filter(({isAvailable:r})=>{if(r)return!0}).map(({id:r})=>r),a=e.data.media.delivery.movie.audios.filter(({isAvailable:r})=>{if(r)return!0}).map(({id:r})=>r);return{session:{recipe_id:"nicovideo-"+e.data.video.id,content_id:"out1",content_type:"movie",content_src_id_sets:[{content_src_ids:[{src_id_to_mux:{audio_src_ids:a,video_src_ids:t}},{src_id_to_mux:{audio_src_ids:[a[a.length-1]],video_src_ids:[t[t.length-1]]}}]}],timing_constraint:"unlimited",keep_method:{heartbeat:{lifetime:12e4}},protocol:{name:"http",parameters:{http_parameters:{parameters:{hls_parameters:{use_well_known_port:"yes",use_ssl:"yes",transfer_preset:"",segment_duration:6e3}}}}},content_uri:"",session_operation_auth:{session_operation_auth_by_signature:{token:e.data.media.delivery.movie.session.token,signature:e.data.media.delivery.movie.session.signature}},content_auth:{auth_type:"ht2",content_key_timeout:6e5,service_id:"nicovideo",service_user_id:e.data.media.delivery.movie.session.serviceUserId},client_info:{player_id:e.data.media.delivery.movie.session.playerId},priority:e.data.media.delivery.movie.session.priority}}}var P2=z1(At());async function ts(e){await fetch(`https://api.dmc.nico/api/sessions/${e.data.session.id}?_format=json&_method=PUT`,{method:"POST",body:JSON.stringify({session:e.data.session})})}var fu=z1(G1()),QV=({children:e,videoId:t})=>{let[a,r]=(0,P2.useState)(!1),n=(0,P2.useRef)(),i=(0,P2.useRef)(),h=(0,P2.useRef)(null);return(0,P2.useEffect)(()=>{r(!1),h.current!==null&&clearInterval(h.current),Jc(t).then(l=>{l!==null&&Zc(l).then(c=>{n.current=l,i.current=c,r(!0),h.current=setInterval(()=>{ts(c)},4e4)}).catch(c=>{console.error(c)})}).catch(l=>{console.error(l)})},[t]),(0,fu.jsx)(pu.Provider,{value:{ready:a,initialWatchData:n.current,session:i.current},children:e})},gu=QV,pu=(0,P2.createContext)({ready:!1}),zh=()=>(0,P2.useContext)(pu);document.getElementById("bd8dc0500fffd19a8cef3449feba9a50d905282c8638a975b3c67b50807480b6")||(Mh=document.createElement("style"),Mh.id="bd8dc0500fffd19a8cef3449feba9a50d905282c8638a975b3c67b50807480b6",Mh.textContent="body{width:100vw;height:100vh}body #root{width:100%;height:100%}body #root .embed-wrapper{width:100%;height:100%}body #root .embed-wrapper .nico-player-outer{width:100%;height:100%;position:relative}body #root .embed-wrapper .nico-player-outer #nico-player{width:100%;height:100%}body #root .embed-wrapper .nico-player-outer #comment-layer{width:100%;height:100%;position:absolute;top:0;left:0;touch-action:none;pointer-events:none}body #root .embed-wrapper .nico-player-outer .comment-layer-hide{opacity:0}",document.head.appendChild(Mh));var Mh;var Ma=z1(At());var za=class{messageHandlers=[];constructor(t){window.addEventListener("message",a=>{if(a.origin===t){let r=a.data;this.messageHandlers.forEach(n=>{n.type===r.type&&n.callback(r),n.type==="*"&&n.callback(r)})}})}addMessageListener(t,a){this.messageHandlers.push({type:t,callback:a})}removeMessageListener(t,a){this.messageHandlers.forEach((r,n)=>{r.type===t&&r.callback===a&&this.messageHandlers.splice(n,1)})}one(t,a){let r=n=>{a(n),this.removeMessageListener(t,r)};this.messageHandlers.push({type:t,callback:r})}dispatch(t,a){this.messageHandlers.forEach(r=>{r.type===t&&r.callback({type:t,value:a})})}sendParent(t,a,r="*"){window.parent.postMessage({type:t,value:a},r)}};var mu=z1(G1()),JV=({children:e,origin:t})=>{let a=(0,Ma.useRef)(null);return a.current=new za(t),(0,mu.jsx)(Mu.Provider,{value:a.current,children:a.current!==null&&e})},zu=JV,Mu=(0,Ma.createContext)(null),ma=()=>(0,Ma.useContext)(Mu);var P=z1(D2()),h1=z1(es()),L1=z1(Cu()),_f=z1(_u()),o6=z1(Iu()),f9=z1(Ju());var vs=z1(ss()),Qe=z1(D2()),Zu="http://example.com",Ew=function(t,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(t)&&(t=Qe.default.location&&Qe.default.location.href||"");var r=typeof Qe.default.URL=="function",n=/^\/\//.test(t),i=!Qe.default.location&&!/\/\//i.test(t);if(r?t=new Qe.default.URL(t,Qe.default.location||Zu):/\/\//i.test(t)||(t=vs.default.buildAbsoluteURL(Qe.default.location&&Qe.default.location.href||"",t)),r){var h=new URL(a,t);return i?h.href.slice(Zu.length):n?h.href.slice(h.protocol.length):h.href}return vs.default.buildAbsoluteURL(t,a)},tg=Ew;function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},re.apply(this,arguments)}var Vh=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(r,n){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n)},t.off=function(r,n){if(!this.listeners[r])return!1;var i=this.listeners[r].indexOf(n);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(i,1),i>-1},t.trigger=function(r){var n=this.listeners[r];if(n)if(arguments.length===2)for(var i=n.length,h=0;h<i;++h)n[h].call(this,arguments[1]);else for(var l=Array.prototype.slice.call(arguments,1),c=n.length,v=0;v<c;++v)n[v].apply(this,l)},t.dispose=function(){this.listeners={}},t.pipe=function(r){this.on("data",function(n){r.push(n)})},e}();var ds=z1(D2()),kw=function(t){return ds.default.atob?ds.default.atob(t):Buffer.from(t,"base64").toString("binary")};function us(e){for(var t=kw(e),a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return a}var fs=class extends Vh{constructor(){super(),this.buffer=""}push(t){let a;for(this.buffer+=t,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)}},Pw=String.fromCharCode(9),gs=function(e){let t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),a={};return t[1]&&(a.length=parseInt(t[1],10)),t[2]&&(a.offset=parseInt(t[2],10)),a},Dw=function(){let e="[^=]*",t='"[^"]*"|[^,]*',a="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+a+")")},I2=function(e){let t={};if(!e)return t;let a=e.split(Dw()),r=a.length,n;for(;r--;)a[r]!==""&&(n=/([^=]*)=(.*)/.exec(a[r]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),t[n[0]]=n[1]);return t},zs=class extends Vh{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let a,r;if(t=t.trim(),t.length===0)return;if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}this.tagMappers.reduce((i,h)=>{let l=h(t);return l===t?i:i.concat([l])},[t]).forEach(i=>{for(let h=0;h<this.customParsers.length;h++)if(this.customParsers[h].call(this,i))return;if(i.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:i.slice(1)});return}if(i=i.replace("\r",""),a=/^#EXTM3U/.exec(i),a){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(i),a){r={type:"tag",tagType:"inf"},a[1]&&(r.duration=parseFloat(a[1])),a[2]&&(r.title=a[2]),this.trigger("data",r);return}if(a=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"targetduration"},a[1]&&(r.duration=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-VERSION:([0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"version"},a[1]&&(r.version=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"media-sequence"},a[1]&&(r.number=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(i),a){r={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(r.number=parseInt(a[1],10)),this.trigger("data",r);return}if(a=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(i),a){r={type:"tag",tagType:"playlist-type"},a[1]&&(r.playlistType=a[1]),this.trigger("data",r);return}if(a=/^#EXT-X-BYTERANGE:(.*)?$/.exec(i),a){r=re(gs(a[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",r);return}if(a=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(i),a){r={type:"tag",tagType:"allow-cache"},a[1]&&(r.allowed=!/NO/.test(a[1])),this.trigger("data",r);return}if(a=/^#EXT-X-MAP:(.*)$/.exec(i),a){if(r={type:"tag",tagType:"map"},a[1]){let h=I2(a[1]);h.URI&&(r.uri=h.URI),h.BYTERANGE&&(r.byterange=gs(h.BYTERANGE))}this.trigger("data",r);return}if(a=/^#EXT-X-STREAM-INF:(.*)$/.exec(i),a){if(r={type:"tag",tagType:"stream-inf"},a[1]){if(r.attributes=I2(a[1]),r.attributes.RESOLUTION){let h=r.attributes.RESOLUTION.split("x"),l={};h[0]&&(l.width=parseInt(h[0],10)),h[1]&&(l.height=parseInt(h[1],10)),r.attributes.RESOLUTION=l}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r);return}if(a=/^#EXT-X-MEDIA:(.*)$/.exec(i),a){r={type:"tag",tagType:"media"},a[1]&&(r.attributes=I2(a[1])),this.trigger("data",r);return}if(a=/^#EXT-X-ENDLIST/.exec(i),a){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(i),a){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(i),a){r={type:"tag",tagType:"program-date-time"},a[1]&&(r.dateTimeString=a[1],r.dateTimeObject=new Date(a[1])),this.trigger("data",r);return}if(a=/^#EXT-X-KEY:(.*)$/.exec(i),a){r={type:"tag",tagType:"key"},a[1]&&(r.attributes=I2(a[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}if(a=/^#EXT-X-START:(.*)$/.exec(i),a){r={type:"tag",tagType:"start"},a[1]&&(r.attributes=I2(a[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),this.trigger("data",r);return}if(a=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(i),a){r={type:"tag",tagType:"cue-out-cont"},a[1]?r.data=a[1]:r.data="",this.trigger("data",r);return}if(a=/^#EXT-X-CUE-OUT:(.*)?$/.exec(i),a){r={type:"tag",tagType:"cue-out"},a[1]?r.data=a[1]:r.data="",this.trigger("data",r);return}if(a=/^#EXT-X-CUE-IN:(.*)?$/.exec(i),a){r={type:"tag",tagType:"cue-in"},a[1]?r.data=a[1]:r.data="",this.trigger("data",r);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"skip"},r.attributes=I2(a[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(Pw)),this.trigger("data",r);return}if(a=/^#EXT-X-PART:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"part"},r.attributes=I2(a[1]),["DURATION"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseFloat(r.attributes[h]))}),["INDEPENDENT","GAP"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=/YES/.test(r.attributes[h]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=gs(r.attributes.BYTERANGE)),this.trigger("data",r);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"server-control"},r.attributes=I2(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseFloat(r.attributes[h]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=/YES/.test(r.attributes[h]))}),this.trigger("data",r);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"part-inf"},r.attributes=I2(a[1]),["PART-TARGET"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseFloat(r.attributes[h]))}),this.trigger("data",r);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"preload-hint"},r.attributes=I2(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(h){if(r.attributes.hasOwnProperty(h)){r.attributes[h]=parseInt(r.attributes[h],10);let l=h==="BYTERANGE-LENGTH"?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[l]=r.attributes[h],delete r.attributes[h]}}),this.trigger("data",r);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"rendition-report"},r.attributes=I2(a[1]),["LAST-MSN","LAST-PART"].forEach(function(h){r.attributes.hasOwnProperty(h)&&(r.attributes[h]=parseInt(r.attributes[h],10))}),this.trigger("data",r);return}if(a=/^#EXT-X-DATERANGE:(.*)$/.exec(i),a&&a[1]){r={type:"tag",tagType:"daterange"},r.attributes=I2(a[1]),["ID","CLASS"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=String(r.attributes[l]))}),["START-DATE","END-DATE"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=new Date(r.attributes[l]))}),["DURATION","PLANNED-DURATION"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),["END-ON-NEXT"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=/YES/i.test(r.attributes[l]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=r.attributes[l].toString(16))});let h=/^X-([A-Z]+-)+[A-Z]+$/;for(let l in r.attributes){if(!h.test(l))continue;let c=/[0-9A-Fa-f]{6}/g.test(r.attributes[l]),v=/^\d+(\.\d+)?$/.test(r.attributes[l]);r.attributes[l]=c?r.attributes[l].toString(16):v?parseFloat(r.attributes[l]):String(r.attributes[l])}this.trigger("data",r);return}if(a=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(i),a){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}this.trigger("data",{type:"tag",data:i.slice(4)})})}addParser({expression:t,customType:a,dataParser:r,segment:n}){typeof r!="function"&&(r=i=>i),this.customParsers.push(i=>{if(t.exec(i))return this.trigger("data",{type:"custom",data:r(i),customType:a,segment:n}),!0})}addTagMapper({expression:t,map:a}){let r=n=>t.test(n)?a(n):n;this.tagMappers.push(r)}},Iw=e=>e.toLowerCase().replace(/-(\w)/g,t=>t[1].toUpperCase()),p4=function(e){let t={};return Object.keys(e).forEach(function(a){t[Iw(a)]=e[a]}),t},ps=function(e){let{serverControl:t,targetDuration:a,partTargetDuration:r}=e;if(!t)return;let n="#EXT-X-SERVER-CONTROL",i="holdBack",h="partHoldBack",l=a&&a*3,c=r&&r*2;a&&!t.hasOwnProperty(i)&&(t[i]=l,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${l}).`})),l&&t[i]<l&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${t[i]}) to targetDuration * 3 (${l})`}),t[i]=l),r&&!t.hasOwnProperty(h)&&(t[h]=r*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[h]}).`})),r&&t[h]<c&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${t[h]}) to partTargetDuration * 2 (${c}).`}),t[h]=c)},wh=class extends Vh{constructor(){super(),this.lineStream=new fs,this.parseStream=new zs,this.lineStream.pipe(this.parseStream);let t=this,a=[],r={},n,i,h=!1,l=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},v="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",g=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let z=0,w=0,L={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&n&&(r.map=n),!r.key&&i&&(r.key=i),!r.timeline&&typeof g=="number"&&(r.timeline=g),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(V){let b,k;({tag(){({version(){V.version&&(this.manifest.version=V.version)},"allow-cache"(){this.manifest.allowCache=V.allowed,"allowed"in V||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){let m={};"length"in V&&(r.byterange=m,m.length=V.length,"offset"in V||(V.offset=z)),"offset"in V&&(r.byterange=m,m.offset=V.offset),z=m.offset+m.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),V.duration>0&&(r.duration=V.duration),V.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key(){if(!V.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(V.attributes.METHOD==="NONE"){i=null;return}if(!V.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(V.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:V.attributes};return}if(V.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:V.attributes.URI};return}if(V.attributes.KEYFORMAT===v){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(V.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(V.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),V.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(V.attributes.KEYID&&V.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:V.attributes.KEYFORMAT,keyId:V.attributes.KEYID.substring(2)},pssh:us(V.attributes.URI.split(",")[1])};return}V.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:V.attributes.METHOD||"AES-128",uri:V.attributes.URI},typeof V.attributes.IV<"u"&&(i.iv=V.attributes.IV)},"media-sequence"(){if(!isFinite(V.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+V.number});return}this.manifest.mediaSequence=V.number},"discontinuity-sequence"(){if(!isFinite(V.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+V.number});return}this.manifest.discontinuitySequence=V.number,g=V.number},"playlist-type"(){if(!/VOD|EVENT/.test(V.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+V.playlist});return}this.manifest.playlistType=V.playlistType},map(){n={},V.uri&&(n.uri=V.uri),V.byterange&&(n.byterange=V.byterange),i&&(n.key=i)},"stream-inf"(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||c,!V.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),re(r.attributes,V.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,!(V.attributes&&V.attributes.TYPE&&V.attributes["GROUP-ID"]&&V.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}let m=this.manifest.mediaGroups[V.attributes.TYPE];m[V.attributes["GROUP-ID"]]=m[V.attributes["GROUP-ID"]]||{},b=m[V.attributes["GROUP-ID"]],k={default:/yes/i.test(V.attributes.DEFAULT)},k.default?k.autoselect=!0:k.autoselect=/yes/i.test(V.attributes.AUTOSELECT),V.attributes.LANGUAGE&&(k.language=V.attributes.LANGUAGE),V.attributes.URI&&(k.uri=V.attributes.URI),V.attributes["INSTREAM-ID"]&&(k.instreamId=V.attributes["INSTREAM-ID"]),V.attributes.CHARACTERISTICS&&(k.characteristics=V.attributes.CHARACTERISTICS),V.attributes.FORCED&&(k.forced=/yes/i.test(V.attributes.FORCED)),b[V.attributes.NAME]=k},discontinuity(){g+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=V.dateTimeString,this.manifest.dateTimeObject=V.dateTimeObject),r.dateTimeString=V.dateTimeString,r.dateTimeObject=V.dateTimeObject},targetduration(){if(!isFinite(V.duration)||V.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+V.duration});return}this.manifest.targetDuration=V.duration,ps.call(this,this.manifest)},start(){if(!V.attributes||isNaN(V.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:V.attributes["TIME-OFFSET"],precise:V.attributes.PRECISE}},"cue-out"(){r.cueOut=V.data},"cue-out-cont"(){r.cueOutCont=V.data},"cue-in"(){r.cueIn=V.data},skip(){this.manifest.skip=p4(V.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",V.attributes,["SKIPPED-SEGMENTS"])},part(){h=!0;let m=this.manifest.segments.length,H=p4(V.attributes);r.parts=r.parts||[],r.parts.push(H),H.byterange&&(H.byterange.hasOwnProperty("offset")||(H.byterange.offset=w),w=H.byterange.offset+H.byterange.length);let y=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${y} for segment #${m}`,V.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((B,_)=>{B.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${_} lacks required attribute(s): LAST-PART`})})},"server-control"(){let m=this.manifest.serverControl=p4(V.attributes);m.hasOwnProperty("canBlockReload")||(m.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ps.call(this,this.manifest),m.canSkipDateranges&&!m.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){let m=this.manifest.segments.length,H=p4(V.attributes),y=H.type&&H.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(H),H.byterange&&(H.byterange.hasOwnProperty("offset")||(H.byterange.offset=y?w:0,y&&(w=H.byterange.offset+H.byterange.length)));let B=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${B} for segment #${m}`,V.attributes,["TYPE","URI"]),!!H.type)for(let _=0;_<r.preloadHints.length-1;_++){let j=r.preloadHints[_];j.type&&j.type===H.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${B} for segment #${m} has the same TYPE ${H.type} as preload hint #${_}`})}},"rendition-report"(){let m=p4(V.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(m);let H=this.manifest.renditionReports.length-1,y=["LAST-MSN","URI"];h&&y.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${H}`,V.attributes,y)},"part-inf"(){this.manifest.partInf=p4(V.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",V.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ps.call(this,this.manifest)},daterange(){this.manifest.daterange=this.manifest.daterange||[],this.manifest.daterange.push(p4(V.attributes));let m=this.manifest.daterange.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${m}`,V.attributes,["ID","START-DATE"]);let H=this.manifest.daterange[m];H.endDate&&H.startDate&&new Date(H.endDate)<new Date(H.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),H.duration&&H.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),H.plannedDuration&&H.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});let y=!!H.endOnNext;if(y&&!H.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),y&&(H.duration||H.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),H.duration&&H.endDate){let B=H.startDate,_=B.setSeconds(B.getSeconds()+H.duration);this.manifest.daterange[m].endDate=new Date(_)}if(H&&!this.manifest.dateTimeString&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),!L[H.id])L[H.id]=H;else for(let B in L[H.id])if(L[H.id][B]!==H[B]){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes and same attribute values"});break}},"independent-segments"(){this.manifest.independentSegments=!0}}[V.tagType]||l).call(t)},uri(){r.uri=V.uri,a.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),i&&(r.key=i),r.timeline=g,n&&(r.map=n),w=0,r={}},comment(){},custom(){V.segment?(r.custom=r.custom||{},r.custom[V.customType]=V.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[V.customType]=V.data)}})[V.type].call(t)})}warnOnMissingAttributes_(t,a,r){let n=[];r.forEach(function(i){a.hasOwnProperty(i)||n.push(i)}),n.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${n.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push(`
`),this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}};var Lh=z1(D2()),f4={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Rw=["video","audio","text"],eg=["Video","Audio","Text"],Ms=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(a,r,n){var i=("00"+Number(r).toString(16)).slice(-2),h=("00"+Number(n).toString(16)).slice(-2);return"avc1."+i+"00"+h})};var ne=function(t){t===void 0&&(t="");var a=t.split(","),r=[];return a.forEach(function(n){n=n.trim();var i;Rw.forEach(function(h){var l=f4[h].exec(n.toLowerCase());if(!(!l||l.length<=1)){i=h;var c=n.substring(0,l[1].length),v=n.replace(c,"");r.push({type:c,details:v,mediaType:h})}}),i||r.push({type:n,details:"",mediaType:"unknown"})}),r},ag=function(t,a){if(!t.mediaGroups.AUDIO||!a)return null;var r=t.mediaGroups.AUDIO[a];if(!r)return null;for(var n in r){var i=r[n];if(i.default&&i.playlists)return ne(i.playlists[0].attributes.CODECS)}return null};var ms=function(t){return t===void 0&&(t=""),f4.audio.test(t.trim().toLowerCase())},jw=function(t){return t===void 0&&(t=""),f4.text.test(t.trim().toLowerCase())},xa=function(t){if(!(!t||typeof t!="string")){var a=t.toLowerCase().split(",").map(function(i){return Ms(i.trim())}),r="video";a.length===1&&ms(a[0])?r="audio":a.length===1&&jw(a[0])&&(r="application");var n="mp4";return a.every(function(i){return f4.mp4.test(i)})?n="mp4":a.every(function(i){return f4.webm.test(i)})?n="webm":a.every(function(i){return f4.ogg.test(i)})&&(n="ogg"),r+"/"+n+';codecs="'+t+'"'}},Bn=function(t){return t===void 0&&(t=""),Lh.default.MediaSource&&Lh.default.MediaSource.isTypeSupported&&Lh.default.MediaSource.isTypeSupported(xa(t))||!1},yh=function(t){return t===void 0&&(t=""),t.toLowerCase().split(",").every(function(a){a=a.trim();for(var r=0;r<eg.length;r++){var n=eg[r];if(f4["muxer"+n].test(a))return!0}return!1})},Hs="mp4a.40.2",rg="avc1.4d400d";var Nw=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Fw=/^application\/dash\+xml/i,xs=function(t){return Nw.test(t)?"hls":Fw.test(t)?"dash":t==="application/vnd.videojs.vhs+json"?"vhs-json":null};var ng=z1(D2());var Uw=function(t){return t.toString(2).length},$w=function(t){return Math.ceil(Uw(t)/8)};var ws=function(t){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},Ww=function(t){return ws(t)},M1=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!Ww(t)&&!(t instanceof ArrayBuffer)&&(typeof t!="number"||typeof t=="number"&&t!==t?t=0:t=[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))};var Ot=ng.default.BigInt||Number,Vs=[Ot("0x1"),Ot("0x100"),Ot("0x10000"),Ot("0x1000000"),Ot("0x100000000"),Ot("0x10000000000"),Ot("0x1000000000000"),Ot("0x100000000000000"),Ot("0x10000000000000000")],eT=function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return t[0]===255?"big":t[0]===204?"little":"unknown"}();var Ls=function(t,a){var r=a===void 0?{}:a,n=r.signed,i=n===void 0?!1:n,h=r.le,l=h===void 0?!1:h;t=M1(t);var c=l?"reduce":"reduceRight",v=t[c]?t[c]:Array.prototype[c],g=v.call(t,function(w,L,V){var b=l?V:Math.abs(V+1-t.length);return w+Ot(L)*Vs[b]},Ot(0));if(i){var z=Vs[t.length]/Ot(2)-Ot(1);g=Ot(g),g>z&&(g-=z,g-=z,g-=Ot(2))}return Number(g)},ig=function(t,a){var r=a===void 0?{}:a,n=r.le,i=n===void 0?!1:n;(typeof t!="bigint"&&typeof t!="number"||typeof t=="number"&&t!==t)&&(t=0),t=Ot(t);for(var h=$w(t),l=new Uint8Array(new ArrayBuffer(h)),c=0;c<h;c++){var v=i?c:Math.abs(c+1-l.length);l[v]=Number(t/Vs[c]&Ot(255)),t<0&&(l[v]=Math.abs(~l[v]),l[v]-=c===0?1:2)}return l},ys=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var a=String.fromCharCode.apply(null,M1(t));try{return decodeURIComponent(escape(a))}catch{}return a},Bh=function(t,a){if(typeof t!="string"&&t&&typeof t.toString=="function"&&(t=t.toString()),typeof t!="string")return new Uint8Array;a||(t=unescape(encodeURIComponent(t)));for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},hg=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];if(a=a.filter(function(l){return l&&(l.byteLength||l.length)&&typeof l!="string"}),a.length<=1)return M1(a[0]);var n=a.reduce(function(l,c,v){return l+(c.byteLength||c.length)},0),i=new Uint8Array(n),h=0;return a.forEach(function(l){l=M1(l),i.set(l,h),h+=l.byteLength}),i},F1=function(t,a,r){var n=r===void 0?{}:r,i=n.offset,h=i===void 0?0:i,l=n.mask,c=l===void 0?[]:l;t=M1(t),a=M1(a);var v=a.every?a.every:Array.prototype.every;return a.length&&t.length-h>=a.length&&v.call(a,function(g,z){var w=c[z]?c[z]&t[h+z]:t[h+z];return g===w})};var Bs=z1(ss()),Je=z1(D2()),lg="http://example.com",Gw=function(t,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(t)&&(t=Je.default.location&&Je.default.location.href||"");var r=typeof Je.default.URL=="function",n=/^\/\//.test(t),i=!Je.default.location&&!/\/\//i.test(t);if(r?t=new Je.default.URL(t,Je.default.location||lg):/\/\//i.test(t)||(t=Bs.default.buildAbsoluteURL(Je.default.location&&Je.default.location.href||"",t)),r){var h=new URL(a,t);return i?h.href.slice(lg.length):n?h.href.slice(h.protocol.length):h.href}return Bs.default.buildAbsoluteURL(t,a)},Ch=Gw;var Yt=z1(D2());var og=function(t,a,r){a.forEach(function(n){for(var i in t.mediaGroups[n])for(var h in t.mediaGroups[n][i]){var l=t.mediaGroups[n][i][h];r(l,n,i,h)}})};var Cs=z1(D2()),qw=function(t){return Cs.default.atob?Cs.default.atob(t):Buffer.from(t,"base64").toString("binary")};function Ss(e){for(var t=qw(e),a=new Uint8Array(t.length),r=0;r<t.length;r++)a[r]=t.charCodeAt(r);return a}var sp=z1(ap());var rp=e=>!!e&&typeof e=="object",jt=(...e)=>e.reduce((t,a)=>(typeof a!="object"||Object.keys(a).forEach(r=>{Array.isArray(t[r])&&Array.isArray(a[r])?t[r]=t[r].concat(a[r]):rp(t[r])&&rp(a[r])?t[r]=jt(t[r],a[r]):t[r]=a[r]}),t),{}),vp=e=>Object.keys(e).map(t=>e[t]),xL=(e,t)=>{let a=[];for(let r=e;r<t;r++)a.push(r);return a},Oa=e=>e.reduce((t,a)=>t.concat(a),[]),dp=e=>{if(!e.length)return[];let t=[];for(let a=0;a<e.length;a++)t.push(e[a]);return t},VL=(e,t)=>e.reduce((a,r,n)=>(r[t]&&a.push(n),a),[]),wL=(e,t)=>vp(e.reduce((a,r)=>(r.forEach(n=>{a[t(n)]=n}),a),{})),Aa={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Rn=({baseUrl:e="",source:t="",range:a="",indexRange:r=""})=>{let n={uri:t,resolvedUri:Ch(e||"",t)};if(a||r){let h=(a||r).split("-"),l=Yt.default.BigInt?Yt.default.BigInt(h[0]):parseInt(h[0],10),c=Yt.default.BigInt?Yt.default.BigInt(h[1]):parseInt(h[1],10);l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l)),c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c));let v;typeof c=="bigint"||typeof l=="bigint"?v=Yt.default.BigInt(c)-Yt.default.BigInt(l)+Yt.default.BigInt(1):v=c-l+1,typeof v=="bigint"&&v<Number.MAX_SAFE_INTEGER&&(v=Number(v)),n.byterange={length:v,offset:l}}return n},LL=e=>{let t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=Yt.default.BigInt(e.offset)+Yt.default.BigInt(e.length)-Yt.default.BigInt(1):t=e.offset+e.length-1,`${e.offset}-${t}`},np=e=>(e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e),yL={static(e){let{duration:t,timescale:a=1,sourceDuration:r,periodDuration:n}=e,i=np(e.endNumber),h=t/a;return typeof i=="number"?{start:0,end:i}:typeof n=="number"?{start:0,end:n/h}:{start:0,end:r/h}},dynamic(e){let{NOW:t,clientOffset:a,availabilityStartTime:r,timescale:n=1,duration:i,periodStart:h=0,minimumUpdatePeriod:l=0,timeShiftBufferDepth:c=1/0}=e,v=np(e.endNumber),g=(t+a)/1e3,z=r+h,L=g+l-z,V=Math.ceil(L*n/i),b=Math.floor((g-z-c)*n/i),k=Math.floor((g-z)*n/i);return{start:Math.max(0,b),end:typeof v=="number"?v:Math.min(V,k)}}},BL=e=>t=>{let{duration:a,timescale:r=1,periodStart:n,startNumber:i=1}=e;return{number:i+t,duration:a/r,timeline:n,time:t*a}},Ws=e=>{let{type:t,duration:a,timescale:r=1,periodDuration:n,sourceDuration:i}=e,{start:h,end:l}=yL[t](e),c=xL(h,l).map(BL(e));if(t==="static"){let v=c.length-1,g=typeof n=="number"?n:i;c[v].duration=g-a/r*v}return c},up=e=>{let{baseUrl:t,initialization:a={},sourceDuration:r,indexRange:n="",periodStart:i,presentationTime:h,number:l=0,duration:c}=e;if(!t)throw new Error(Aa.NO_BASE_URL);let v=Rn({baseUrl:t,source:a.sourceURL,range:a.range}),g=Rn({baseUrl:t,source:t,indexRange:n});if(g.map=v,c){let z=Ws(e);z.length&&(g.duration=z[0].duration,g.timeline=z[0].timeline)}else r&&(g.duration=r,g.timeline=i);return g.presentationTime=h||i,g.number=l,[g]},Ih=(e,t,a)=>{let r=e.sidx.map?e.sidx.map:null,n=e.sidx.duration,i=e.timeline||0,h=e.sidx.byterange,l=h.offset+h.length,c=t.timescale,v=t.references.filter(k=>k.referenceType!==1),g=[],z=e.endList?"static":"dynamic",w=e.sidx.timeline,L=w,V=e.mediaSequence||0,b;typeof t.firstOffset=="bigint"?b=Yt.default.BigInt(l)+t.firstOffset:b=l+t.firstOffset;for(let k=0;k<v.length;k++){let m=t.references[k],H=m.referencedSize,y=m.subsegmentDuration,B;typeof b=="bigint"?B=b+Yt.default.BigInt(H)-Yt.default.BigInt(1):B=b+H-1;let _=`${b}-${B}`,U=up({baseUrl:a,timescale:c,timeline:i,periodStart:w,presentationTime:L,number:V,duration:y,sourceDuration:n,indexRange:_,type:z})[0];r&&(U.map=r),g.push(U),typeof b=="bigint"?b+=Yt.default.BigInt(H):b+=H,L+=y/c,V++}return e.segments=g,e},CL=["AUDIO","SUBTITLES"],SL=1/60,gp=e=>wL(e,({timeline:t})=>t).sort((t,a)=>t.timeline>a.timeline?1:-1),_L=(e,t)=>{for(let a=0;a<e.length;a++)if(e[a].attributes.NAME===t)return e[a];return null},ip=e=>{let t=[];return og(e,CL,(a,r,n,i)=>{t=t.concat(a.playlists||[])}),t},hp=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach((a,r)=>{a.number=e.mediaSequence+r})},TL=({oldPlaylists:e,newPlaylists:t,timelineStarts:a})=>{t.forEach(r=>{r.discontinuitySequence=a.findIndex(function({timeline:c}){return c===r.timeline});let n=_L(e,r.attributes.NAME);if(!n||r.sidx)return;let i=r.segments[0],h=n.segments.findIndex(function(c){return Math.abs(c.presentationTime-i.presentationTime)<SL});if(h===-1){hp({playlist:r,mediaSequence:n.mediaSequence+n.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),(!n.segments.length&&r.timeline>n.timeline||n.segments.length&&r.timeline>n.segments[n.segments.length-1].timeline)&&r.discontinuitySequence--;return}n.segments[h].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),hp({playlist:r,mediaSequence:n.segments[h].number})})},bL=({oldManifest:e,newManifest:t})=>{let a=e.playlists.concat(ip(e)),r=t.playlists.concat(ip(t));return t.timelineStarts=gp([e.timelineStarts,t.timelineStarts]),TL({oldPlaylists:a,newPlaylists:r,timelineStarts:t.timelineStarts}),t},jn=e=>e&&e.uri+"-"+LL(e.byterange),$s=e=>vp(e.reduce((a,r)=>{let n=r.attributes.id+(r.attributes.lang||"");return a[n]?(r.segments&&(r.segments[0]&&(r.segments[0].discontinuity=!0),a[n].segments.push(...r.segments)),r.attributes.contentProtection&&(a[n].attributes.contentProtection=r.attributes.contentProtection)):(a[n]=r,a[n].attributes.timelineStarts=[]),a[n].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),a},{})).map(a=>(a.discontinuityStarts=VL(a.segments||[],"discontinuity"),a)),Gs=(e,t)=>{let a=jn(e.sidx),r=a&&t[a]&&t[a].sidx;return r&&Ih(e,r,e.sidx.resolvedUri),e},OL=(e,t={})=>{if(!Object.keys(t).length)return e;for(let a in e)e[a]=Gs(e[a],t);return e},AL=({attributes:e,segments:t,sidx:a,mediaSequence:r,discontinuitySequence:n,discontinuityStarts:i},h)=>{let l={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,["PROGRAM-ID"]:1},uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:n,discontinuityStarts:i,timelineStarts:e.timelineStarts,mediaSequence:r,segments:t};return e.contentProtection&&(l.contentProtection=e.contentProtection),a&&(l.sidx=a),h&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l},EL=({attributes:e,segments:t,mediaSequence:a,discontinuityStarts:r,discontinuitySequence:n})=>{typeof t>"u"&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);let i={NAME:e.id,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1};return e.codecs&&(i.CODECS=e.codecs),{attributes:i,uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:r,discontinuitySequence:n,mediaSequence:a,segments:t}},kL=(e,t={},a=!1)=>{let r,n=e.reduce((i,h)=>{let l=h.attributes.role&&h.attributes.role.value||"",c=h.attributes.lang||"",v=h.attributes.label||"main";if(c&&!h.attributes.label){let z=l?` (${l})`:"";v=`${h.attributes.lang}${z}`}i[v]||(i[v]={language:c,autoselect:!0,default:l==="main",playlists:[],uri:""});let g=Gs(AL(h,a),t);return i[v].playlists.push(g),typeof r>"u"&&l==="main"&&(r=h,r.default=!0),i},{});if(!r){let i=Object.keys(n)[0];n[i].default=!0}return n},PL=(e,t={})=>e.reduce((a,r)=>{let n=r.attributes.label||r.attributes.lang||"text";return a[n]||(a[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),a[n].playlists.push(Gs(EL(r),t)),a},{}),DL=e=>e.reduce((t,a)=>(a&&a.forEach(r=>{let{channel:n,language:i}=r;t[i]={autoselect:!1,default:!1,instreamId:n,language:i},r.hasOwnProperty("aspectRatio")&&(t[i].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(t[i].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(t[i]["3D"]=r["3D"])}),t),{}),IL=({attributes:e,segments:t,sidx:a,discontinuityStarts:r})=>{let n={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuityStarts:r,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(n.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(n.contentProtection=e.contentProtection),a&&(n.sidx=a),n},RL=({attributes:e})=>e.mimeType==="video/mp4"||e.mimeType==="video/webm"||e.contentType==="video",jL=({attributes:e})=>e.mimeType==="audio/mp4"||e.mimeType==="audio/webm"||e.contentType==="audio",NL=({attributes:e})=>e.mimeType==="text/vtt"||e.contentType==="text",FL=(e,t)=>{e.forEach(a=>{a.mediaSequence=0,a.discontinuitySequence=t.findIndex(function({timeline:r}){return r===a.timeline}),a.segments&&a.segments.forEach((r,n)=>{r.number=n})})},lp=e=>e?Object.keys(e).reduce((t,a)=>{let r=e[a];return t.concat(r.playlists)},[]):[],UL=({dashPlaylists:e,locations:t,sidxMapping:a={},previousManifest:r,eventStream:n})=>{if(!e.length)return{};let{sourceDuration:i,type:h,suggestedPresentationDelay:l,minimumUpdatePeriod:c}=e[0].attributes,v=$s(e.filter(RL)).map(IL),g=$s(e.filter(jL)),z=$s(e.filter(NL)),w=e.map(y=>y.attributes.captionServices).filter(Boolean),L={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:i,playlists:OL(v,a)};c>=0&&(L.minimumUpdatePeriod=c*1e3),t&&(L.locations=t),h==="dynamic"&&(L.suggestedPresentationDelay=l),n&&n.length>0&&(L.eventStream=n);let V=L.playlists.length===0,b=g.length?kL(g,a,V):null,k=z.length?PL(z,a):null,m=v.concat(lp(b),lp(k)),H=m.map(({timelineStarts:y})=>y);return L.timelineStarts=gp(H),FL(m,L.timelineStarts),b&&(L.mediaGroups.AUDIO.audio=b),k&&(L.mediaGroups.SUBTITLES.subs=k),w.length&&(L.mediaGroups["CLOSED-CAPTIONS"].cc=DL(w)),r?bL({oldManifest:r,newManifest:L}):L},$L=(e,t,a)=>{let{NOW:r,clientOffset:n,availabilityStartTime:i,timescale:h=1,periodStart:l=0,minimumUpdatePeriod:c=0}=e,v=(r+n)/1e3,g=i+l,w=v+c-g;return Math.ceil((w*h-t)/a)},pp=(e,t)=>{let{type:a,minimumUpdatePeriod:r=0,media:n="",sourceDuration:i,timescale:h=1,startNumber:l=1,periodStart:c}=e,v=[],g=-1;for(let z=0;z<t.length;z++){let w=t[z],L=w.d,V=w.r||0,b=w.t||0;g<0&&(g=b),b&&b>g&&(g=b);let k;if(V<0){let y=z+1;y===t.length?a==="dynamic"&&r>0&&n.indexOf("$Number$")>0?k=$L(e,g,L):k=(i*h-g)/L:k=(t[y].t-g)/L}else k=V+1;let m=l+v.length+k,H=l+v.length;for(;H<m;)v.push({number:H,duration:L/h,time:g,timeline:c}),g+=L,H++}return v},WL=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,GL=e=>(t,a,r,n)=>{if(t==="$$")return"$";if(typeof e[a]>"u")return t;let i=""+e[a];return a==="RepresentationID"||(r?n=parseInt(n,10):n=1,i.length>=n)?i:`${new Array(n-i.length+1).join("0")}${i}`},op=(e,t)=>e.replace(WL,GL(t)),qL=(e,t)=>!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?Ws(e):pp(e,t),KL=(e,t)=>{let a={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=e,n=Rn({baseUrl:e.baseUrl,source:op(r.sourceURL,a),range:r.range});return qL(e,t).map(h=>{a.Number=h.number,a.Time=h.time;let l=op(e.media||"",a),c=e.timescale||1,v=e.presentationTimeOffset||0,g=e.periodStart+(h.time-v)/c;return{uri:l,timeline:h.timeline,duration:h.duration,resolvedUri:Ch(e.baseUrl||"",l),map:n,number:h.number,presentationTime:g}})},XL=(e,t)=>{let{baseUrl:a,initialization:r={}}=e,n=Rn({baseUrl:a,source:r.sourceURL,range:r.range}),i=Rn({baseUrl:a,source:t.media,range:t.mediaRange});return i.map=n,i},YL=(e,t)=>{let{duration:a,segmentUrls:r=[],periodStart:n}=e;if(!a&&!t||a&&t)throw new Error(Aa.SEGMENT_TIME_UNSPECIFIED);let i=r.map(c=>XL(e,c)),h;return a&&(h=Ws(e)),t&&(h=pp(e,t)),h.map((c,v)=>{if(i[v]){let g=i[v],z=e.timescale||1,w=e.presentationTimeOffset||0;return g.timeline=c.timeline,g.duration=c.duration,g.number=c.number,g.presentationTime=n+(c.time-w)/z,g}}).filter(c=>c)},QL=({attributes:e,segmentInfo:t})=>{let a,r;t.template?(r=KL,a=jt(e,t.template)):t.base?(r=up,a=jt(e,t.base)):t.list&&(r=YL,a=jt(e,t.list));let n={attributes:e};if(!r)return n;let i=r(a,t.segmentTimeline);if(a.duration){let{duration:h,timescale:l=1}=a;a.duration=h/l}else i.length?a.duration=i.reduce((h,l)=>Math.max(h,Math.ceil(l.duration)),0):a.duration=0;return n.attributes=a,n.segments=i,t.base&&a.indexRange&&(n.sidx=i[0],n.segments=[]),n},JL=e=>e.map(QL),ct=(e,t)=>dp(e.childNodes).filter(({tagName:a})=>a===t),Rh=e=>e.textContent.trim(),ZL=e=>parseFloat(e.split("/").reduce((t,a)=>t/a)),ba=e=>{let l=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!l)return 0;let[c,v,g,z,w,L]=l.slice(1);return parseFloat(c||0)*31536e3+parseFloat(v||0)*2592e3+parseFloat(g||0)*86400+parseFloat(z||0)*3600+parseFloat(w||0)*60+parseFloat(L||0)},ty=e=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)),cp={mediaPresentationDuration(e){return ba(e)},availabilityStartTime(e){return ty(e)/1e3},minimumUpdatePeriod(e){return ba(e)},suggestedPresentationDelay(e){return ba(e)},type(e){return e},timeShiftBufferDepth(e){return ba(e)},start(e){return ba(e)},width(e){return parseInt(e,10)},height(e){return parseInt(e,10)},bandwidth(e){return parseInt(e,10)},frameRate(e){return ZL(e)},startNumber(e){return parseInt(e,10)},timescale(e){return parseInt(e,10)},presentationTimeOffset(e){return parseInt(e,10)},duration(e){let t=parseInt(e,10);return isNaN(t)?ba(e):t},d(e){return parseInt(e,10)},t(e){return parseInt(e,10)},r(e){return parseInt(e,10)},presentationTime(e){return parseInt(e,10)},DEFAULT(e){return e}},Ct=e=>e&&e.attributes?dp(e.attributes).reduce((t,a)=>{let r=cp[a.name]||cp.DEFAULT;return t[a.name]=r(a.value),t},{}):{},ey={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},jh=(e,t)=>t.length?Oa(e.map(function(a){return t.map(function(r){return Ch(a,Rh(r))})})):e,qs=e=>{let t=ct(e,"SegmentTemplate")[0],a=ct(e,"SegmentList")[0],r=a&&ct(a,"SegmentURL").map(z=>jt({tag:"SegmentURL"},Ct(z))),n=ct(e,"SegmentBase")[0],i=a||t,h=i&&ct(i,"SegmentTimeline")[0],l=a||n||t,c=l&&ct(l,"Initialization")[0],v=t&&Ct(t);v&&c?v.initialization=c&&Ct(c):v&&v.initialization&&(v.initialization={sourceURL:v.initialization});let g={template:v,segmentTimeline:h&&ct(h,"S").map(z=>Ct(z)),list:a&&jt(Ct(a),{segmentUrls:r,initialization:Ct(c)}),base:n&&jt(Ct(n),{initialization:Ct(c)})};return Object.keys(g).forEach(z=>{g[z]||delete g[z]}),g},ay=(e,t,a)=>r=>{let n=ct(r,"BaseURL"),i=jh(t,n),h=jt(e,Ct(r)),l=qs(r);return i.map(c=>({segmentInfo:jt(a,l),attributes:jt(h,{baseUrl:c})}))},ry=e=>e.reduce((t,a)=>{let r=Ct(a);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());let n=ey[r.schemeIdUri];if(n){t[n]={attributes:r};let i=ct(a,"cenc:pssh")[0];if(i){let h=Rh(i);t[n].pssh=h&&Ss(h)}}return t},{}),ny=e=>{if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof e.value!="string"?[]:e.value.split(";")).map(a=>{let r,n;return n=a,/^CC\d=/.test(a)?[r,n]=a.split("="):/^CC\d$/.test(a)&&(r=a),{channel:r,language:n}});if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof e.value!="string"?[]:e.value.split(";")).map(a=>{let r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(a)){let[n,i=""]=a.split("=");r.channel=n,r.language=a,i.split(",").forEach(h=>{let[l,c]=h.split(":");l==="lang"?r.language=c:l==="er"?r.easyReader=Number(c):l==="war"?r.aspectRatio=Number(c):l==="3D"&&(r["3D"]=Number(c))})}else r.language=a;return r.channel&&(r.channel="SERVICE"+r.channel),r})},iy=e=>Oa(ct(e.node,"EventStream").map(t=>{let a=Ct(t),r=a.schemeIdUri;return ct(t,"Event").map(n=>{let i=Ct(n),h=i.presentationTime||0,l=a.timescale||1,c=i.duration||0,v=h/l+e.attributes.start;return{schemeIdUri:r,value:a.value,id:i.id,start:v,end:v+c/l,messageData:Rh(n)||i.messageData,contentEncoding:a.contentEncoding,presentationTimeOffset:a.presentationTimeOffset||0}})})),hy=(e,t,a)=>r=>{let n=Ct(r),i=jh(t,ct(r,"BaseURL")),h=ct(r,"Role")[0],l={role:Ct(h)},c=jt(e,n,l),v=ct(r,"Accessibility")[0],g=ny(Ct(v));g&&(c=jt(c,{captionServices:g}));let z=ct(r,"Label")[0];if(z&&z.childNodes.length){let k=z.childNodes[0].nodeValue.trim();c=jt(c,{label:k})}let w=ry(ct(r,"ContentProtection"));Object.keys(w).length&&(c=jt(c,{contentProtection:w}));let L=qs(r),V=ct(r,"Representation"),b=jt(a,L);return Oa(V.map(ay(c,i,b)))},ly=(e,t)=>(a,r)=>{let n=jh(t,ct(a.node,"BaseURL")),i=jt(e,{periodStart:a.attributes.start});typeof a.attributes.duration=="number"&&(i.periodDuration=a.attributes.duration);let h=ct(a.node,"AdaptationSet"),l=qs(a.node);return Oa(h.map(hy(i,n,l)))},oy=({attributes:e,priorPeriodAttributes:t,mpdType:a})=>typeof e.start=="number"?e.start:t&&typeof t.start=="number"&&typeof t.duration=="number"?t.start+t.duration:!t&&a==="static"?0:null,cy=(e,t={})=>{let{manifestUri:a="",NOW:r=Date.now(),clientOffset:n=0}=t,i=ct(e,"Period");if(!i.length)throw new Error(Aa.INVALID_NUMBER_OF_PERIOD);let h=ct(e,"Location"),l=Ct(e),c=jh([a],ct(e,"BaseURL"));l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=r,l.clientOffset=n,h.length&&(l.locations=h.map(Rh));let v=[];return i.forEach((g,z)=>{let w=Ct(g),L=v[z-1];w.start=oy({attributes:w,priorPeriodAttributes:L?L.attributes:null,mpdType:l.type}),v.push({node:g,attributes:w})}),{locations:l.locations,representationInfo:Oa(v.map(ly(l,c))),eventStream:Oa(v.map(iy))}},fp=e=>{if(e==="")throw new Error(Aa.DASH_EMPTY_MANIFEST);let t=new sp.DOMParser,a,r;try{a=t.parseFromString(e,"application/xml"),r=a&&a.documentElement.tagName==="MPD"?a.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(Aa.DASH_INVALID_XML);return r},sy=e=>{let t=ct(e,"UTCTiming")[0];if(!t)return null;let a=Ct(t);switch(a.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":a.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":a.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":a.method="DIRECT",a.value=Date.parse(a.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Aa.UNSUPPORTED_UTC_TIMING_SCHEME)}return a};var zp=(e,t={})=>{let a=cy(fp(e),t),r=JL(a.representationInfo);return UL({dashPlaylists:r,locations:a.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:a.eventStream})},Mp=e=>sy(fp(e));var Tf=z1(Lp());var uy=M1([73,68,51]),gy=function(t,a){a===void 0&&(a=0),t=M1(t);var r=t[a+5],n=t[a+6]<<21|t[a+7]<<14|t[a+8]<<7|t[a+9],i=(r&16)>>4;return i?n+20:n+10},M4=function e(t,a){return a===void 0&&(a=0),t=M1(t),t.length-a<10||!F1(t,uy,{offset:a})?a:(a+=gy(t,a),e(t,a))};var PT=new Uint8Array([79,112,117,115,72,101,97,100]);var Bp=function(t){return typeof t=="string"?Bh(t):t},my=function(t){return Array.isArray(t)?t.map(function(a){return Bp(a)}):[Bp(t)]},Ks,Cp=function(t){t=M1(t);for(var a=[],r=0;t.length>r;){var n=t[r],i=0,h=0;h++;var l=t[h];for(h++;l&128;)i=(l&127)<<7,l=t[h],h++;i+=l&127;for(var c=0;c<Ks.length;c++){var v=Ks[c],g=v.id,z=v.parser;if(n===g){a.push(z(t.subarray(h,h+i)));break}}r+=i+h}return a};Ks=[{id:3,parser:function(t){var a={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(a.flags&128&&(a.dependsOnEsId=t[a.size]<<8|t[a.size+1],a.size+=2),a.flags&64){var r=t[a.size];a.url=ys(t.subarray(a.size+1,a.size+1+r)),a.size+=r}return a.flags&32&&(a.ocrEsId=t[a.size]<<8|t[a.size+1],a.size+=2),a.descriptors=Cp(t.subarray(a.size))||[],a}},{id:4,parser:function(t){var a={tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:Cp(t.subarray(13))};return a}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var Sp=function e(t,a,r){r===void 0&&(r=!1),a=my(a),t=M1(t);var n=[];if(!a.length)return n;for(var i=0;i<t.length;){var h=(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0,l=t.subarray(i+4,i+8);if(h===0)break;var c=i+h;if(c>t.length){if(r)break;c=t.length}var v=t.subarray(i+8,c);F1(l,a[0])&&(a.length===1?n.push(v):n.push.apply(n,e(v,a.slice(1),r))),i=c}return n};var Nn={EBML:M1([26,69,223,163]),DocType:M1([66,130]),Segment:M1([24,83,128,103]),SegmentInfo:M1([21,73,169,102]),Tracks:M1([22,84,174,107]),Track:M1([174]),TrackNumber:M1([215]),DefaultDuration:M1([35,227,131]),TrackEntry:M1([174]),TrackType:M1([131]),FlagDefault:M1([136]),CodecID:M1([134]),CodecPrivate:M1([99,162]),VideoTrack:M1([224]),AudioTrack:M1([225]),Cluster:M1([31,67,182,117]),Timestamp:M1([231]),TimestampScale:M1([42,215,177]),BlockGroup:M1([160]),BlockDuration:M1([155]),Block:M1([161]),SimpleBlock:M1([163])},Xs=[128,64,32,16,8,4,2,1],Hy=function(t){for(var a=1,r=0;r<Xs.length&&!(t&Xs[r]);r++)a++;return a},Nh=function(t,a,r,n){r===void 0&&(r=!0),n===void 0&&(n=!1);var i=Hy(t[a]),h=t.subarray(a,a+i);return r&&(h=Array.prototype.slice.call(t,a,a+i),h[0]^=Xs[i-1]),{length:i,value:Ls(h,{signed:n}),bytes:h}},_p=function e(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(a){return e(a)}):typeof t=="number"?ig(t):t},xy=function(t){return Array.isArray(t)?t.map(function(a){return _p(a)}):[_p(t)]},Vy=function e(t,a,r){if(r>=a.length)return a.length;var n=Nh(a,r,!1);if(F1(t.bytes,n.bytes))return r;var i=Nh(a,r+n.length);return e(t,a,r+i.length+i.value+n.length)},Ys=function e(t,a){a=xy(a),t=M1(t);var r=[];if(!a.length)return r;for(var n=0;n<t.length;){var i=Nh(t,n,!1),h=Nh(t,n+i.length),l=n+i.length+h.length;h.value===127&&(h.value=Vy(i,t,l),h.value!==t.length&&(h.value-=l));var c=l+h.value>t.length?t.length:l+h.value,v=t.subarray(l,c);F1(a[0],i.bytes)&&(a.length===1?r.push(v):r=r.concat(e(v,a.slice(1))));var g=i.length+h.length+v.length;n+=g}return r};var wy=M1([0,0,0,1]),Ly=M1([0,0,1]),yy=M1([0,0,3]),By=function(t){for(var a=[],r=1;r<t.length-2;)F1(t.subarray(r,r+3),yy)&&(a.push(r+2),r++),r++;if(a.length===0)return t;var n=t.length-a.length,i=new Uint8Array(n),h=0;for(r=0;r<n;h++,r++)h===a[0]&&(h++,a.shift()),i[r]=t[h];return i},Tp=function(t,a,r,n){n===void 0&&(n=1/0),t=M1(t),r=[].concat(r);for(var i=0,h,l=0;i<t.length&&(l<n||h);){var c=void 0;if(F1(t.subarray(i),wy)?c=4:F1(t.subarray(i),Ly)&&(c=3),!c){i++;continue}if(l++,h)return By(t.subarray(h,i));var v=void 0;a==="h264"?v=t[i+c]&31:a==="h265"&&(v=t[i+c]>>1&63),r.indexOf(v)!==-1&&(h=i+c),i+=c+(a==="h264"?1:2)}return t.subarray(0,0)},bp=function(t,a,r){return Tp(t,"h264",a,r)},Op=function(t,a,r){return Tp(t,"h265",a,r)};var Qt={webm:M1([119,101,98,109]),matroska:M1([109,97,116,114,111,115,107,97]),flac:M1([102,76,97,67]),ogg:M1([79,103,103,83]),ac3:M1([11,119]),riff:M1([82,73,70,70]),avi:M1([65,86,73]),wav:M1([87,65,86,69]),"3gp":M1([102,116,121,112,51,103]),mp4:M1([102,116,121,112]),fmp4:M1([115,116,121,112]),mov:M1([102,116,121,112,113,116]),moov:M1([109,111,111,118]),moof:M1([109,111,111,102])},Ea={aac:function(t){var a=M4(t);return F1(t,[255,16],{offset:a,mask:[255,22]})},mp3:function(t){var a=M4(t);return F1(t,[255,2],{offset:a,mask:[255,6]})},webm:function(t){var a=Ys(t,[Nn.EBML,Nn.DocType])[0];return F1(a,Qt.webm)},mkv:function(t){var a=Ys(t,[Nn.EBML,Nn.DocType])[0];return F1(a,Qt.matroska)},mp4:function(t){if(Ea["3gp"](t)||Ea.mov(t))return!1;if(F1(t,Qt.mp4,{offset:4})||F1(t,Qt.fmp4,{offset:4})||F1(t,Qt.moof,{offset:4})||F1(t,Qt.moov,{offset:4}))return!0},mov:function(t){return F1(t,Qt.mov,{offset:4})},"3gp":function(t){return F1(t,Qt["3gp"],{offset:4})},ac3:function(t){var a=M4(t);return F1(t,Qt.ac3,{offset:a})},ts:function(t){if(t.length<189&&t.length>=1)return t[0]===71;for(var a=0;a+188<t.length&&a<188;){if(t[a]===71&&t[a+188]===71)return!0;a+=1}return!1},flac:function(t){var a=M4(t);return F1(t,Qt.flac,{offset:a})},ogg:function(t){return F1(t,Qt.ogg)},avi:function(t){return F1(t,Qt.riff)&&F1(t,Qt.avi,{offset:8})},wav:function(t){return F1(t,Qt.riff)&&F1(t,Qt.wav,{offset:8})},h264:function(t){return bp(t,7,3).length},h265:function(t){return Op(t,[32,33],3).length}},Qs=Object.keys(Ea).filter(function(e){return e!=="ts"&&e!=="h264"&&e!=="h265"}).concat(["ts","h264","h265"]);Qs.forEach(function(e){var t=Ea[e];Ea[e]=function(a){return t(M1(a))}});var Cy=Ea,Fh=function(t){t=M1(t);for(var a=0;a<Qs.length;a++){var r=Qs[a];if(Cy[r](t))return r}return""},Ap=function(t){return Sp(t,["moof"]).length>0};var Jn=z1(Ip());var bf="8.3.0",r0={},E0=function(e,t){return r0[e]=r0[e]||[],t&&(r0[e]=r0[e].concat(t)),r0[e]},Sy=function(e,t){E0(e,t)},Of=function(e,t){let a=E0(e).indexOf(t);return a<=-1?!1:(r0[e]=r0[e].slice(),r0[e].splice(a,1),!0)},_y=function(e,t){E0(e,[].concat(t).map(a=>{let r=(...n)=>(Of(e,r),a(...n));return r}))},Jh={prefixed:!0},Xh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Rp=Xh[0],Wn;for(let e=0;e<Xh.length;e++)if(Xh[e][1]in h1.default){Wn=Xh[e];break}if(Wn){for(let e=0;e<Wn.length;e++)Jh[Rp[e]]=Wn[e];Jh.prefixed=Wn[0]!==Rp[0]}var d2=[],Ty=(e,t)=>(a,r,n)=>{let i=t.levels[r],h=new RegExp(`^(${i})$`);if(a!=="log"&&n.unshift(a.toUpperCase()+":"),n.unshift(e+":"),d2){d2.push([].concat(n));let c=d2.length-1e3;d2.splice(0,c>0?c:0)}if(!P.default.console)return;let l=P.default.console[a];!l&&a==="debug"&&(l=P.default.console.info||P.default.console.log),!(!l||!i||!h.test(a))&&l[Array.isArray(n)?"apply":"call"](P.default.console,n)};function Af(e){let t="info",a,r=function(...n){a("log",t,n)};return a=Ty(e,r),r.createLogger=n=>Af(e+": "+n),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},r.level=n=>{if(typeof n=="string"){if(!r.levels.hasOwnProperty(n))throw new Error(`"${n}" in not a valid log level`);t=n}return t},r.history=()=>d2?[].concat(d2):[],r.history.filter=n=>(d2||[]).filter(i=>new RegExp(`.*${n}.*`).test(i[0])),r.history.clear=()=>{d2&&(d2.length=0)},r.history.disable=()=>{d2!==null&&(d2.length=0,d2=null)},r.history.enable=()=>{d2===null&&(d2=[])},r.error=(...n)=>a("error",t,n),r.warn=(...n)=>a("warn",t,n),r.debug=(...n)=>a("debug",t,n),r}var b1=Af("VIDEOJS"),Ef=b1.createLogger,by=Object.prototype.toString,kf=function(e){return be(e)?Object.keys(e):[]};function Ra(e,t){kf(e).forEach(a=>t(e[a],a))}function Pf(e,t,a=0){return kf(e).reduce((r,n)=>t(r,e[n],n),a)}function be(e){return!!e&&typeof e=="object"}function Wa(e){return be(e)&&by.call(e)==="[object Object]"&&e.constructor===Object}function Y1(...e){let t={};return e.forEach(a=>{a&&Ra(a,(r,n)=>{if(!Wa(r)){t[n]=r;return}Wa(t[n])||(t[n]={}),t[n]=Y1(t[n],r)})}),t}function N3(e,t,a,r=!0){let n=h=>Object.defineProperty(e,t,{value:h,enumerable:!0,writable:!0}),i={configurable:!0,enumerable:!0,get(){let h=a();return n(h),h}};return r&&(i.set=n),Object.defineProperty(e,t,i)}var Oy=Object.freeze({__proto__:null,each:Ra,reduce:Pf,isObject:be,isPlain:Wa,merge:Y1,defineLazyProperty:N3}),c6=!1,Df=null,Oe=!1,If,Rf=!1,ja=!1,Na=!1,Ae=!1,s6=null,F3=null,jf=null,Zh=!1,U3=!1,t3=!1,$3=!1,Zn=!!(er()&&("ontouchstart"in P.default||P.default.navigator.maxTouchPoints||P.default.DocumentTouch&&P.default.document instanceof P.default.DocumentTouch)),ka=P.default.navigator&&P.default.navigator.userAgentData;ka&&(Oe=ka.platform==="Android",ja=!!ka.brands.find(e=>e.brand==="Microsoft Edge"),Na=!!ka.brands.find(e=>e.brand==="Chromium"),Ae=!ja&&Na,s6=F3=(ka.brands.find(e=>e.brand==="Chromium")||{}).version||null,U3=ka.platform==="Windows");if(!Na){let e=P.default.navigator&&P.default.navigator.userAgent||"";c6=/iPod/i.test(e),Df=function(){let t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Oe=/Android/i.test(e),If=function(){let t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;let a=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return a&&r?parseFloat(t[1]+"."+t[2]):a||null}(),Rf=/Firefox/i.test(e),ja=/Edg/i.test(e),Na=/Chrome/i.test(e)||/CriOS/i.test(e),Ae=!ja&&Na,s6=F3=function(){let t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),jf=function(){let t=/MSIE\s(\d+)\.\d/.exec(e),a=t&&parseFloat(t[1]);return!a&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(a=11),a}(),Zh=/Safari/i.test(e)&&!Ae&&!Oe&&!ja,U3=/Windows/i.test(e),t3=/iPad/i.test(e)||Zh&&Zn&&!/iPhone/i.test(e),$3=/iPhone/i.test(e)&&!t3}var a2=$3||t3||c6,W3=(Zh||a2)&&!Ae,Ay=Object.freeze({__proto__:null,get IS_IPOD(){return c6},get IOS_VERSION(){return Df},get IS_ANDROID(){return Oe},get ANDROID_VERSION(){return If},get IS_FIREFOX(){return Rf},get IS_EDGE(){return ja},get IS_CHROMIUM(){return Na},get IS_CHROME(){return Ae},get CHROMIUM_VERSION(){return s6},get CHROME_VERSION(){return F3},get IE_VERSION(){return jf},get IS_SAFARI(){return Zh},get IS_WINDOWS(){return U3},get IS_IPAD(){return t3},get IS_IPHONE(){return $3},TOUCH_ENABLED:Zn,IS_IOS:a2,IS_ANY_SAFARI:W3});function jp(e){return typeof e=="string"&&!!e.trim()}function Ey(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function er(){return h1.default===P.default.document}function ar(e){return be(e)&&e.nodeType===1}function Nf(){try{return P.default.parent!==P.default.self}catch{return!0}}function Ff(e){return function(t,a){if(!jp(t))return h1.default[e](null);jp(a)&&(a=h1.default.querySelector(a));let r=ar(a)?a:h1.default;return r[e]&&r[e](t)}}function y1(e="div",t={},a={},r){let n=h1.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(i){let h=t[i];i==="textContent"?N0(n,h):(n[i]!==h||i==="tabIndex")&&(n[i]=h)}),Object.getOwnPropertyNames(a).forEach(function(i){n.setAttribute(i,a[i])}),r&&v6(n,r),n}function N0(e,t){return typeof e.textContent>"u"?e.innerText=t:e.textContent=t,e}function z9(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function qn(e,t){return Ey(t),e.classList.contains(t)}function w4(e,...t){return e.classList.add(...t.reduce((a,r)=>a.concat(r.split(/\s+/)),[])),e}function G3(e,...t){return e?(e.classList.remove(...t.reduce((a,r)=>a.concat(r.split(/\s+/)),[])),e):(b1.warn("removeClass was called with an element that doesn't exist"),null)}function Uf(e,t,a){return typeof a=="function"&&(a=a(e,t)),typeof a!="boolean"&&(a=void 0),t.split(/\s+/).forEach(r=>e.classList.toggle(r,a)),e}function $f(e,t){Object.getOwnPropertyNames(t).forEach(function(a){let r=t[a];r===null||typeof r>"u"||r===!1?e.removeAttribute(a):e.setAttribute(a,r===!0?"":r)})}function O0(e){let t={},a=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0){let r=e.attributes;for(let n=r.length-1;n>=0;n--){let i=r[n].name,h=r[n].value;(typeof e[i]=="boolean"||a.indexOf(","+i+",")!==-1)&&(h=h!==null),t[i]=h}}return t}function Wf(e,t){return e.getAttribute(t)}function Ga(e,t,a){e.setAttribute(t,a)}function q3(e,t){e.removeAttribute(t)}function Gf(){h1.default.body.focus(),h1.default.onselectstart=function(){return!1}}function qf(){h1.default.onselectstart=function(){return!0}}function qa(e){if(e&&e.getBoundingClientRect&&e.parentNode){let t=e.getBoundingClientRect(),a={};return["bottom","height","left","right","top","width"].forEach(r=>{t[r]!==void 0&&(a[r]=t[r])}),a.height||(a.height=parseFloat(Ka(e,"height"))),a.width||(a.width=parseFloat(Ka(e,"width"))),a}}function t5(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};let t=e.offsetWidth,a=e.offsetHeight,r=0,n=0;for(;e.offsetParent&&e!==h1.default[Jh.fullscreenElement];)r+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:r,top:n,width:t,height:a}}function K3(e,t){let a={x:0,y:0};if(a2){let g=e;for(;g&&g.nodeName.toLowerCase()!=="html";){let z=Ka(g,"transform");if(/^matrix/.test(z)){let w=z.slice(7,-1).split(/,\s/).map(Number);a.x+=w[4],a.y+=w[5]}else if(/^matrix3d/.test(z)){let w=z.slice(9,-1).split(/,\s/).map(Number);a.x+=w[12],a.y+=w[13]}g=g.parentNode}}let r={},n=t5(t.target),i=t5(e),h=i.width,l=i.height,c=t.offsetY-(i.top-n.top),v=t.offsetX-(i.left-n.left);return t.changedTouches&&(v=t.changedTouches[0].pageX-i.left,c=t.changedTouches[0].pageY+i.top,a2&&(v-=a.x,c-=a.y)),r.y=1-Math.max(0,Math.min(1,c/l)),r.x=Math.max(0,Math.min(1,v/h)),r}function Kf(e){return be(e)&&e.nodeType===3}function X3(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Xf(e){return typeof e=="function"&&(e=e()),(Array.isArray(e)?e:[e]).map(t=>{if(typeof t=="function"&&(t=t()),ar(t)||Kf(t))return t;if(typeof t=="string"&&/\S/.test(t))return h1.default.createTextNode(t)}).filter(t=>t)}function v6(e,t){return Xf(t).forEach(a=>e.appendChild(a)),e}function Yf(e,t){return v6(X3(e),t)}function e5(e){return e.button===void 0&&e.buttons===void 0||e.button===0&&e.buttons===void 0||e.type==="mouseup"&&e.button===0&&e.buttons===0?!0:!(e.button!==0||e.buttons!==1)}var k0=Ff("querySelector"),Qf=Ff("querySelectorAll");function Ka(e,t){if(!e||!t)return"";if(typeof P.default.getComputedStyle=="function"){let a;try{a=P.default.getComputedStyle(e)}catch{return""}return a?a.getPropertyValue(t)||a[t]:""}return""}var Jf=Object.freeze({__proto__:null,isReal:er,isEl:ar,isInFrame:Nf,createEl:y1,textContent:N0,prependTo:z9,hasClass:qn,addClass:w4,removeClass:G3,toggleClass:Uf,setAttributes:$f,getAttributes:O0,getAttribute:Wf,setAttribute:Ga,removeAttribute:q3,blockTextSelection:Gf,unblockTextSelection:qf,getBoundingClientRect:qa,findPosition:t5,getPointerPosition:K3,isTextNode:Kf,emptyEl:X3,normalizeContent:Xf,appendContent:v6,insertContent:Yf,isSingleLeftClick:e5,$:k0,$$:Qf,computedStyle:Ka}),Zf=!1,M9,ky=function(){if(M9.options.autoSetup===!1)return;let e=Array.prototype.slice.call(h1.default.getElementsByTagName("video")),t=Array.prototype.slice.call(h1.default.getElementsByTagName("audio")),a=Array.prototype.slice.call(h1.default.getElementsByTagName("video-js")),r=e.concat(t,a);if(r&&r.length>0)for(let n=0,i=r.length;n<i;n++){let h=r[n];if(h&&h.getAttribute)h.player===void 0&&h.getAttribute("data-setup")!==null&&M9(h);else{m9(1);break}}else Zf||m9(1)};function m9(e,t){er()&&(t&&(M9=t),P.default.setTimeout(ky,e))}function H9(){Zf=!0,P.default.removeEventListener("load",H9)}er()&&(h1.default.readyState==="complete"?H9():P.default.addEventListener("load",H9));var tz=function(e){let t=h1.default.createElement("style");return t.className=e,t},ez=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Zt=new WeakMap,Py=3,Dy=Py;function Ee(){return Dy++}function Np(e,t){if(!Zt.has(e))return;let a=Zt.get(e);a.handlers[t].length===0&&(delete a.handlers[t],e.removeEventListener?e.removeEventListener(t,a.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,a.dispatcher)),Object.getOwnPropertyNames(a.handlers).length<=0&&(delete a.handlers,delete a.dispatcher,delete a.disabled),Object.getOwnPropertyNames(a).length===0&&Zt.delete(e)}function d6(e,t,a,r){a.forEach(function(n){e(t,n,r)})}function Y3(e){if(e.fixed_)return e;function t(){return!0}function a(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){let r=e||P.default.event;e={};for(let n in r)n!=="layerX"&&n!=="layerY"&&n!=="keyLocation"&&n!=="webkitMovementX"&&n!=="webkitMovementY"&&n!=="path"&&(n==="returnValue"&&r.preventDefault||(e[n]=r[n]));if(e.target||(e.target=e.srcElement||h1.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=a,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=a,e.clientX!==null&&e.clientX!==void 0){let n=h1.default.documentElement,i=h1.default.body;e.pageX=e.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)}e.which=e.charCode||e.keyCode,e.button!==null&&e.button!==void 0&&(e.button=e.button&1?0:e.button&4?1:e.button&2?2:0)}return e.fixed_=!0,e}var $h,Iy=function(){if(typeof $h!="boolean"){$h=!1;try{let e=Object.defineProperty({},"passive",{get(){$h=!0}});P.default.addEventListener("test",null,e),P.default.removeEventListener("test",null,e)}catch{}}return $h},Ry=["touchstart","touchmove"];function y2(e,t,a){if(Array.isArray(t))return d6(y2,e,t,a);Zt.has(e)||Zt.set(e,{});let r=Zt.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),a.guid||(a.guid=Ee()),r.handlers[t].push(a),r.dispatcher||(r.disabled=!1,r.dispatcher=function(n,i){if(r.disabled)return;n=Y3(n);let h=r.handlers[n.type];if(h){let l=h.slice(0);for(let c=0,v=l.length;c<v&&!n.isImmediatePropagationStopped();c++)try{l[c].call(e,n,i)}catch(g){b1.error(g)}}}),r.handlers[t].length===1)if(e.addEventListener){let n=!1;Iy()&&Ry.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,r.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function Ft(e,t,a){if(!Zt.has(e))return;let r=Zt.get(e);if(!r.handlers)return;if(Array.isArray(t))return d6(Ft,e,t,a);let n=function(h,l){r.handlers[l]=[],Np(h,l)};if(t===void 0){for(let h in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},h)&&n(e,h);return}let i=r.handlers[t];if(i){if(!a){n(e,t);return}if(a.guid)for(let h=0;h<i.length;h++)i[h].guid===a.guid&&i.splice(h--,1);Np(e,t)}}function rr(e,t,a){let r=Zt.has(e)?Zt.get(e):{},n=e.parentNode||e.ownerDocument;if(typeof t=="string"?t={type:t,target:e}:t.target||(t.target=e),t=Y3(t),r.dispatcher&&r.dispatcher.call(e,t,a),n&&!t.isPropagationStopped()&&t.bubbles===!0)rr.call(null,n,t,a);else if(!n&&!t.defaultPrevented&&t.target&&t.target[t.type]){Zt.has(t.target)||Zt.set(t.target,{});let i=Zt.get(t.target);t.target[t.type]&&(i.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),i.disabled=!1)}return!t.defaultPrevented}function Q3(e,t,a){if(Array.isArray(t))return d6(Q3,e,t,a);let r=function(){Ft(e,t,r),a.apply(this,arguments)};r.guid=a.guid=a.guid||Ee(),y2(e,t,r)}function u6(e,t,a){let r=function(){Ft(e,t,r),a.apply(this,arguments)};r.guid=a.guid=a.guid||Ee(),y2(e,t,r)}var jy=Object.freeze({__proto__:null,fixEvent:Y3,on:y2,off:Ft,trigger:rr,one:Q3,any:u6}),N2=30,Q1=function(e,t,a){t.guid||(t.guid=Ee());let r=t.bind(e);return r.guid=a?a+"_"+t.guid:t.guid,r},ke=function(e,t){let a=P.default.performance.now();return function(...n){let i=P.default.performance.now();i-a>=t&&(e(...n),a=i)}},az=function(e,t,a,r=P.default){let n,i=()=>{r.clearTimeout(n),n=null},h=function(){let l=this,c=arguments,v=function(){n=null,v=null,a||e.apply(l,c)};!n&&a&&e.apply(l,c),r.clearTimeout(n),n=r.setTimeout(v,t)};return h.cancel=i,h},Ny=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:N2,bind_:Q1,throttle:ke,debounce:az}),Fn,g2=class{on(t,a){let r=this.addEventListener;this.addEventListener=()=>{},y2(this,t,a),this.addEventListener=r}off(t,a){Ft(this,t,a)}one(t,a){let r=this.addEventListener;this.addEventListener=()=>{},Q3(this,t,a),this.addEventListener=r}any(t,a){let r=this.addEventListener;this.addEventListener=()=>{},u6(this,t,a),this.addEventListener=r}trigger(t){let a=t.type||t;typeof t=="string"&&(t={type:a}),t=Y3(t),this.allowedEvents_[a]&&this["on"+a]&&this["on"+a](t),rr(this,t)}queueTrigger(t){Fn||(Fn=new Map);let a=t.type||t,r=Fn.get(this);r||(r=new Map,Fn.set(this,r));let n=r.get(a);r.delete(a),P.default.clearTimeout(n);let i=P.default.setTimeout(()=>{r.delete(a),r.size===0&&(r=null,Fn.delete(this)),this.trigger(t)},0);r.set(a,i)}};g2.prototype.allowedEvents_={};g2.prototype.addEventListener=g2.prototype.on;g2.prototype.removeEventListener=g2.prototype.off;g2.prototype.dispatchEvent=g2.prototype.trigger;var J3=e=>typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,i0=e=>e instanceof g2||!!e.eventBusEl_&&["on","one","off","trigger"].every(t=>typeof e[t]=="function"),Fy=(e,t)=>{i0(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},x9=e=>typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length,e3=(e,t,a)=>{if(!e||!e.nodeName&&!i0(e))throw new Error(`Invalid target for ${J3(t)}#${a}; must be a DOM node or evented object.`)},rz=(e,t,a)=>{if(!x9(e))throw new Error(`Invalid event type for ${J3(t)}#${a}; must be a non-empty string or array.`)},nz=(e,t,a)=>{if(typeof e!="function")throw new Error(`Invalid listener for ${J3(t)}#${a}; must be a function.`)},a9=(e,t,a)=>{let r=t.length<3||t[0]===e||t[0]===e.eventBusEl_,n,i,h;return r?(n=e.eventBusEl_,t.length>=3&&t.shift(),[i,h]=t):[n,i,h]=t,e3(n,e,a),rz(i,e,a),nz(h,e,a),h=Q1(e,h),{isTargetingSelf:r,target:n,type:i,listener:h}},m4=(e,t,a,r)=>{e3(e,e,t),e.nodeName?jy[t](e,a,r):e[t](a,r)},Uy={on(...e){let{isTargetingSelf:t,target:a,type:r,listener:n}=a9(this,e,"on");if(m4(a,"on",r,n),!t){let i=()=>this.off(a,r,n);i.guid=n.guid;let h=()=>this.off("dispose",i);h.guid=n.guid,m4(this,"on","dispose",i),m4(a,"on","dispose",h)}},one(...e){let{isTargetingSelf:t,target:a,type:r,listener:n}=a9(this,e,"one");if(t)m4(a,"one",r,n);else{let i=(...h)=>{this.off(a,r,i),n.apply(null,h)};i.guid=n.guid,m4(a,"one",r,i)}},any(...e){let{isTargetingSelf:t,target:a,type:r,listener:n}=a9(this,e,"any");if(t)m4(a,"any",r,n);else{let i=(...h)=>{this.off(a,r,i),n.apply(null,h)};i.guid=n.guid,m4(a,"any",r,i)}},off(e,t,a){if(!e||x9(e))Ft(this.eventBusEl_,e,t);else{let r=e,n=t;e3(r,this,"off"),rz(n,this,"off"),nz(a,this,"off"),a=Q1(this,a),this.off("dispose",a),r.nodeName?(Ft(r,n,a),Ft(r,"dispose",a)):i0(r)&&(r.off(n,a),r.off("dispose",a))}},trigger(e,t){e3(this.eventBusEl_,this,"trigger");let a=e&&typeof e!="string"?e.type:e;if(!x9(a))throw new Error(`Invalid event type for ${J3(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return rr(this.eventBusEl_,e,t)}};function g6(e,t={}){let{eventBusKey:a}=t;if(a){if(!e[a].nodeName)throw new Error(`The eventBusKey "${a}" does not refer to an element.`);e.eventBusEl_=e[a]}else e.eventBusEl_=y1("span",{className:"vjs-event-bus"});return Object.assign(e,Uy),e.eventedCallbacks&&e.eventedCallbacks.forEach(r=>{r()}),e.on("dispose",()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach(function(r){r&&Zt.has(r)&&Zt.delete(r)}),P.default.setTimeout(()=>{e.eventBusEl_=null},0)}),e}var $y={state:{},setState(e){typeof e=="function"&&(e=e());let t;return Ra(e,(a,r)=>{this.state[r]!==a&&(t=t||{},t[r]={from:this.state[r],to:a}),this.state[r]=a}),t&&i0(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function iz(e,t){return Object.assign(e,$y),e.state=Object.assign({},e.state,t),typeof e.handleStateChanged=="function"&&i0(e)&&e.on("statechanged",e.handleStateChanged),e}var Kn=function(e){return typeof e!="string"?e:e.replace(/./,t=>t.toLowerCase())},dt=function(e){return typeof e!="string"?e:e.replace(/./,t=>t.toUpperCase())},hz=function(e,t){return dt(e)===dt(t)},Wy=Object.freeze({__proto__:null,toLowerCase:Kn,toTitleCase:dt,titleCaseEquals:hz}),Y=class{constructor(t,a,r){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Y1({},this.options_),a=this.options_=Y1(this.options_,a),this.id_=a.id||a.el&&a.el.id,!this.id_){let n=t&&t.id&&t.id()||"no_player";this.id_=`${n}_component_${Ee()}`}this.name_=a.name||null,a.el?this.el_=a.el:a.createEl!==!1&&(this.el_=this.createEl()),a.className&&this.el_&&a.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),a.evented!==!1&&(g6(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),iz(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,a.initChildren!==!1&&this.initChildren(),this.ready(r),a.reportTouchActivity!==!1&&this.enableTouchActivity()}on(t,a){}off(t,a){}one(t,a){}any(t,a){}trigger(t){}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t?(this.options_=Y1(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,a,r){return y1(t,a,r)}localize(t,a,r=t){let n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),h=i&&i[n],l=n&&n.split("-")[0],c=i&&i[l],v=r;return h&&h[t]?v=h[t]:c&&c[t]&&(v=c[t]),a&&(v=v.replace(/\{(\d+)\}/g,function(g,z){let w=a[z-1],L=w;return typeof w>"u"&&(L=g),L})),v}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((r,n)=>r.concat(n),[]);let a=this;for(let r=0;r<t.length;r++)if(a=a.getChild(t[r]),!a||!a.getChild)return;return a}addChild(t,a={},r=this.children_.length){let n,i;if(typeof t=="string"){i=dt(t);let h=a.componentClass||i;a.name=i;let l=Y.getComponent(h);if(!l)throw new Error(`Component ${h} does not exist`);if(typeof l!="function")return null;n=new l(this.player_||this,a)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(r,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),i=i||n.name&&dt(n.name()),i&&(this.childNameIndex_[i]=n,this.childNameIndex_[Kn(i)]=n),typeof n.el=="function"&&n.el()){let h=null;this.children_[r+1]&&(this.children_[r+1].el_?h=this.children_[r+1].el_:ar(this.children_[r+1])&&(h=this.children_[r+1])),this.contentEl().insertBefore(n.el(),h)}return n}removeChild(t){if(typeof t=="string"&&(t=this.getChild(t)),!t||!this.children_)return;let a=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){a=!0,this.children_.splice(n,1);break}if(!a)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[dt(t.name())]=null,this.childNameIndex_[Kn(t.name())]=null;let r=t.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){let t=this.options_.children;if(t){let a=this.options_,r=h=>{let l=h.name,c=h.opts;if(a[l]!==void 0&&(c=a[l]),c===!1)return;c===!0&&(c={}),c.playerOptions=this.options_.playerOptions;let v=this.addChild(l,c);v&&(this[l]=v)},n,i=Y.getComponent("Tech");Array.isArray(t)?n=t:n=Object.keys(t),n.concat(Object.keys(this.options_).filter(function(h){return!n.some(function(l){return typeof l=="string"?h===l:h===l.name})})).map(h=>{let l,c;return typeof h=="string"?(l=h,c=t[l]||this.options_[l]||{}):(l=h.name,c=h),{name:l,opts:c}}).filter(h=>{let l=Y.getComponent(h.opts.componentClass||dt(h.name));return l&&!i.isTech(l)}).forEach(r)}}buildCSSClass(){return""}ready(t,a=!1){if(t){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t);return}a?t.call(this):this.setTimeout(t,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){let t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)}$(t,a){return k0(t,a||this.contentEl())}$$(t,a){return Qf(t,a||this.contentEl())}hasClass(t){return qn(this.el_,t)}addClass(...t){w4(this.el_,...t)}removeClass(...t){G3(this.el_,...t)}toggleClass(t,a){Uf(this.el_,t,a)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return Wf(this.el_,t)}setAttribute(t,a){Ga(this.el_,t,a)}removeAttribute(t){q3(this.el_,t)}width(t,a){return this.dimension("width",t,a)}height(t,a){return this.dimension("height",t,a)}dimensions(t,a){this.width(t,!0),this.height(a)}dimension(t,a,r){if(a!==void 0){(a===null||a!==a)&&(a=0),(""+a).indexOf("%")!==-1||(""+a).indexOf("px")!==-1?this.el_.style[t]=a:a==="auto"?this.el_.style[t]="":this.el_.style[t]=a+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;let n=this.el_.style[t],i=n.indexOf("px");return parseInt(i!==-1?n.slice(0,i):this.el_["offset"+dt(t)],10)}currentDimension(t){let a=0;if(t!=="width"&&t!=="height")throw new Error("currentDimension only accepts width or height value");if(a=Ka(this.el_,t),a=parseFloat(a),a===0||isNaN(a)){let r=`offset${dt(t)}`;a=this.el_[r]}return a}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(L1.default.isEventKey(t,"Tab")||t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t=0,a=null,r=10,n=200,i;this.on("touchstart",function(l){l.touches.length===1&&(a={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},t=P.default.performance.now(),i=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)i=!1;else if(a){let c=l.touches[0].pageX-a.pageX,v=l.touches[0].pageY-a.pageY;Math.sqrt(c*c+v*v)>r&&(i=!1)}});let h=function(){i=!1};this.on("touchleave",h),this.on("touchcancel",h),this.on("touchend",function(l){a=null,i===!0&&P.default.performance.now()-t<n&&(l.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;let t=Q1(this.player(),this.player().reportUserActivity),a;this.on("touchstart",function(){t(),this.clearInterval(a),a=this.setInterval(t,250)});let r=function(n){t(),this.clearInterval(a)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(t,a){var r;return t=Q1(this,t),this.clearTimersOnDispose_(),r=P.default.setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),t()},a),this.setTimeoutIds_.add(r),r}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),P.default.clearTimeout(t)),t}setInterval(t,a){t=Q1(this,t),this.clearTimersOnDispose_();let r=P.default.setInterval(t,a);return this.setIntervalIds_.add(r),r}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),P.default.clearInterval(t)),t}requestAnimationFrame(t){this.clearTimersOnDispose_();var a;return t=Q1(this,t),a=P.default.requestAnimationFrame(()=>{this.rafIds_.has(a)&&this.rafIds_.delete(a),t()}),this.rafIds_.add(a),a}requestNamedAnimationFrame(t,a){if(this.namedRafs_.has(t))return;this.clearTimersOnDispose_(),a=Q1(this,a);let r=this.requestAnimationFrame(()=>{a(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,r),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),P.default.cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,a])=>{this[t].forEach((r,n)=>this[a](n))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(t,a){if(typeof t!="string"||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);let r=Y.getComponent("Tech"),n=r&&r.isTech(a),i=Y===a||Y.prototype.isPrototypeOf(a.prototype);if(n||!i){let l;throw n?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error(`Illegal component, "${t}"; ${l}.`)}t=dt(t),Y.components_||(Y.components_={});let h=Y.getComponent("Player");if(t==="Player"&&h&&h.players){let l=h.players,c=Object.keys(l);if(l&&c.length>0&&c.map(v=>l[v]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Y.components_[t]=a,Y.components_[Kn(t)]=a,a}static getComponent(t){if(!(!t||!Y.components_))return Y.components_[t]}};Y.registerComponent("Component",Y);function Gy(e,t,a){if(typeof t!="number"||t<0||t>a)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${a}).`)}function Fp(e,t,a,r){return Gy(e,r,a.length-1),a[r][t]}function r9(e){let t;return e===void 0||e.length===0?t={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:t={length:e.length,start:Fp.bind(null,"start",0,e),end:Fp.bind(null,"end",1,e)},P.default.Symbol&&P.default.Symbol.iterator&&(t[P.default.Symbol.iterator]=()=>(e||[]).values()),t}function Te(e,t){return Array.isArray(e)?r9(e):e===void 0||t===void 0?r9():r9([[e,t]])}var lz=function(e,t){e=e<0?0:e;let a=Math.floor(e%60),r=Math.floor(e/60%60),n=Math.floor(e/3600),i=Math.floor(t/60%60),h=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(n=r=a="-"),n=n>0||h>0?n+":":"",r=((n||i>=10)&&r<10?"0"+r:r)+":",a=a<10?"0"+a:a,n+r+a},p6=lz;function oz(e){p6=e}function cz(){p6=lz}function y4(e,t=e){return p6(e,t)}var qy=Object.freeze({__proto__:null,createTimeRanges:Te,createTimeRange:Te,setFormatTime:oz,resetFormatTime:cz,formatTime:y4});function sz(e,t){let a=0,r,n;if(!t)return 0;(!e||!e.length)&&(e=Te(0,0));for(let i=0;i<e.length;i++)r=e.start(i),n=e.end(i),n>t&&(n=t),a+=n-r;return a/t}function t2(e){if(e instanceof t2)return e;typeof e=="number"?this.code=e:typeof e=="string"?this.message=e:be(e)&&(typeof e.code=="number"&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=t2.defaultMessages[this.code]||"")}t2.prototype.code=0;t2.prototype.message="";t2.prototype.status=null;t2.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];t2.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let e=0;e<t2.errorTypes.length;e++)t2[t2.errorTypes[e]]=e,t2.prototype[t2.errorTypes[e]]=e;function Xn(e){return e!=null&&typeof e.then=="function"}function Ce(e){Xn(e)&&e.then(null,t=>{})}var V9=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((a,r,n)=>(e[r]&&(a[r]=e[r]),a),{cues:e.cues&&Array.prototype.map.call(e.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})})},Ky=function(e){let t=e.$$("track"),a=Array.prototype.map.call(t,n=>n.track);return Array.prototype.map.call(t,function(n){let i=V9(n.track);return n.src&&(i.src=n.src),i}).concat(Array.prototype.filter.call(e.textTracks(),function(n){return a.indexOf(n)===-1}).map(V9))},Xy=function(e,t){return e.forEach(function(a){let r=t.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(n=>r.addCue(n))}),t.textTracks()},Up={textTracksToJson:Ky,jsonToTextTracks:Xy,trackToJson_:V9},n9="vjs-modal-dialog",P0=class extends Y{constructor(t,a){super(t,a),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=y1("div",{className:`${n9}-content`},{role:"document"}),this.descEl_=y1("p",{className:`${n9}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),N0(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${n9} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(!this.opened_){let t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;let t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if(typeof t=="boolean"){let a=this.closeable_=!!t,r=this.getChild("closeButton");if(a&&!r){let n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close_)}!a&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){let a=this.contentEl(),r=a.parentNode,n=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(a),this.empty(),Yf(a,t),this.trigger("modalfill"),n?r.insertBefore(a,n):r.appendChild(a);let i=this.getChild("closeButton");i&&r.appendChild(i.el_)}empty(){this.trigger("beforemodalempty"),X3(this.contentEl()),this.trigger("modalempty")}content(t){return typeof t<"u"&&(this.content_=t),this.content_}conditionalFocus_(){let t=h1.default.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(t)||a===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(t.stopPropagation(),L1.default.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault(),this.close();return}if(!L1.default.isEventKey(t,"Tab"))return;let a=this.focusableEls_(),r=this.el_.querySelector(":focus"),n;for(let i=0;i<a.length;i++)if(r===a[i]){n=i;break}h1.default.activeElement===this.el_&&(n=0),t.shiftKey&&n===0?(a[a.length-1].focus(),t.preventDefault()):!t.shiftKey&&n===a.length-1&&(a[0].focus(),t.preventDefault())}focusableEls_(){let t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,a=>(a instanceof P.default.HTMLAnchorElement||a instanceof P.default.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof P.default.HTMLInputElement||a instanceof P.default.HTMLSelectElement||a instanceof P.default.HTMLTextAreaElement||a instanceof P.default.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof P.default.HTMLIFrameElement||a instanceof P.default.HTMLObjectElement||a instanceof P.default.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable"))}};P0.prototype.options_={pauseOnOpen:!0,temporary:!0};Y.registerComponent("ModalDialog",P0);var D0=class extends g2{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let a=0;a<t.length;a++)this.addTrack(t[a])}addTrack(t){let a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get(){return this.tracks_[a]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},i0(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let a;for(let r=0,n=this.length;r<n;r++)if(this[r]===t){a=this[r],a.off&&a.off(),this.tracks_.splice(r,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})}getTrackById(t){let a=null;for(let r=0,n=this.length;r<n;r++){let i=this[r];if(i.id===t){a=i;break}}return a}};D0.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(let e in D0.prototype.allowedEvents_)D0.prototype["on"+e]=null;var i9=function(e,t){for(let a=0;a<e.length;a++)!Object.keys(e[a]).length||t.id===e[a].id||(e[a].enabled=!1)},w9=class extends D0{constructor(t=[]){for(let a=t.length-1;a>=0;a--)if(t[a].enabled){i9(t,t[a]);break}super(t),this.changing_=!1}addTrack(t){t.enabled&&i9(this,t),super.addTrack(t),t.addEventListener&&(t.enabledChange_=()=>{this.changing_||(this.changing_=!0,i9(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}},h9=function(e,t){for(let a=0;a<e.length;a++)!Object.keys(e[a]).length||t.id===e[a].id||(e[a].selected=!1)},L9=class extends D0{constructor(t=[]){for(let a=t.length-1;a>=0;a--)if(t[a].selected){h9(t,t[a]);break}super(t),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set(){}})}addTrack(t){t.selected&&h9(this,t),super.addTrack(t),t.addEventListener&&(t.selectedChange_=()=>{this.changing_||(this.changing_=!0,h9(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)}},a3=class extends D0{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}},y9=class{constructor(t=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let a=0,r=t.length;a<r;a++)this.addTrackElement_(t[a])}addTrackElement_(t){let a=this.trackElements_.length;""+a in this||Object.defineProperty(this,a,{get(){return this.trackElements_[a]}}),this.trackElements_.indexOf(t)===-1&&this.trackElements_.push(t)}getTrackElementByTrack_(t){let a;for(let r=0,n=this.trackElements_.length;r<n;r++)if(t===this.trackElements_[r].track){a=this.trackElements_[r];break}return a}removeTrackElement_(t){for(let a=0,r=this.trackElements_.length;a<r;a++)if(t===this.trackElements_[a]){this.trackElements_[a].track&&typeof this.trackElements_[a].track.off=="function"&&this.trackElements_[a].track.off(),typeof this.trackElements_[a].off=="function"&&this.trackElements_[a].off(),this.trackElements_.splice(a,1);break}}},Xa=class{constructor(t){Xa.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){let a=this.length||0,r=0,n=t.length;this.cues_=t,this.length_=t.length;let i=function(h){""+h in this||Object.defineProperty(this,""+h,{get(){return this.cues_[h]}})};if(a<n)for(r=a;r<n;r++)i.call(this,r)}getCueById(t){let a=null;for(let r=0,n=this.length;r<n;r++){let i=this[r];if(i.id===t){a=i;break}}return a}},Yy={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Qy={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Jy={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},$p={disabled:"disabled",hidden:"hidden",showing:"showing"},a5=class extends g2{constructor(t={}){super();let a={id:t.id||"vjs_track_"+Ee(),kind:t.kind||"",language:t.language||""},r=t.label||"";for(let n in a)Object.defineProperty(this,n,{get(){return a[n]},set(){}});Object.defineProperty(this,"label",{get(){return r},set(n){n!==r&&(r=n,this.trigger("labelchange"))}})}},f6=function(e){let t=["protocol","hostname","port","pathname","search","hash","host"],a=h1.default.createElement("a");a.href=e;let r={};for(let n=0;n<t.length;n++)r[t[n]]=a[t[n]];return r.protocol==="http:"&&(r.host=r.host.replace(/:80$/,"")),r.protocol==="https:"&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=P.default.location.protocol),r.host||(r.host=P.default.location.host),r},vz=function(e){if(!e.match(/^https?:\/\//)){let t=h1.default.createElement("a");t.href=e,e=t.href}return e},z6=function(e){if(typeof e=="string"){let a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(a)return a.pop().toLowerCase()}return""},Z3=function(e,t=P.default.location){let a=f6(e);return(a.protocol===":"?t.protocol:a.protocol)+a.host!==t.protocol+t.host},Zy=Object.freeze({__proto__:null,parseUrl:f6,getAbsoluteURL:vz,getFileExtension:z6,isCrossOrigin:Z3}),Wp=function(e,t){let a=new P.default.WebVTT.Parser(P.default,P.default.vttjs,P.default.WebVTT.StringDecoder()),r=[];a.oncue=function(n){t.addCue(n)},a.onparsingerror=function(n){r.push(n)},a.onflush=function(){t.trigger({type:"loadeddata",target:t})},a.parse(e),r.length>0&&(P.default.console&&P.default.console.groupCollapsed&&P.default.console.groupCollapsed(`Text Track parsing errors for ${t.src}`),r.forEach(n=>b1.error(n)),P.default.console&&P.default.console.groupEnd&&P.default.console.groupEnd()),a.flush()},Gp=function(e,t){let a={uri:e},r=Z3(e);r&&(a.cors=r);let n=t.tech_.crossOrigin()==="use-credentials";n&&(a.withCredentials=n),(0,o6.default)(a,Q1(this,function(i,h,l){if(i)return b1.error(i,h);t.loaded_=!0,typeof P.default.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],c=>{if(c.type==="vttjserror"){b1.error(`vttjs failed to load, stopping trying to process ${t.src}`);return}return Wp(l,t)}):Wp(l,t)}))},B4=class extends a5{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");let a=Y1(t,{kind:Jy[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=$p[a.mode]||"disabled",n=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(r="hidden"),super(a),this.tech_=a.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;let i=new Xa(this.cues_),h=new Xa(this.activeCues_),l=!1;this.timeupdateHandler=Q1(this,function(v={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){v.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),v.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});let c=()=>{this.stopTracking()};this.tech_.one("dispose",c),r!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return r},set(v){$p[v]&&r!==v&&(r=v,!this.preload_&&r!=="disabled"&&this.cues.length===0&&Gp(this.src,this),this.stopTracking(),r!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?i:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return h;let v=this.tech_.currentTime(),g=[];for(let z=0,w=this.cues.length;z<w;z++){let L=this.cues[z];L.startTime<=v&&L.endTime>=v&&g.push(L)}if(l=!1,g.length!==this.activeCues_.length)l=!0;else for(let z=0;z<g.length;z++)this.activeCues_.indexOf(g[z])===-1&&(l=!0);return this.activeCues_=g,h.setCues_(this.activeCues_),h},set(){}}}),a.src?(this.src=a.src,this.preload_||(this.loaded_=!0),(this.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&Gp(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let a=t;if(P.default.vttjs&&!(t instanceof P.default.vttjs.VTTCue)){a=new P.default.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(let n in t)n in a||(a[n]=t[n]);a.id=t.id,a.originalCue_=t}let r=this.tech_.textTracks();for(let n=0;n<r.length;n++)r[n]!==this&&r[n].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)}removeCue(t){let a=this.cues_.length;for(;a--;){let r=this.cues_[a];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}}};B4.prototype.allowedEvents_={cuechange:"cuechange"};var r3=class extends a5{constructor(t={}){let a=Y1(t,{kind:Qy[t.kind]||""});super(a);let r=!1;Object.defineProperty(this,"enabled",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("enabledchange"))}}),a.enabled&&(this.enabled=a.enabled),this.loaded_=!0}},n3=class extends a5{constructor(t={}){let a=Y1(t,{kind:Yy[t.kind]||""});super(a);let r=!1;Object.defineProperty(this,"selected",{get(){return r},set(n){typeof n!="boolean"||n===r||(r=n,this.trigger("selectedchange"))}}),a.selected&&(this.selected=a.selected)}},le=class extends g2{constructor(t={}){super();let a,r=new B4(t);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get(){return a}},track:{get(){return r}}}),a=le.NONE,r.addEventListener("loadeddata",()=>{a=le.LOADED,this.trigger({type:"load",target:this})})}};le.prototype.allowedEvents_={load:"load"};le.NONE=0;le.LOADING=1;le.LOADED=2;le.ERROR=3;var j2={audio:{ListClass:w9,TrackClass:r3,capitalName:"Audio"},video:{ListClass:L9,TrackClass:n3,capitalName:"Video"},text:{ListClass:a3,TrackClass:B4,capitalName:"Text"}};Object.keys(j2).forEach(function(e){j2[e].getterName=`${e}Tracks`,j2[e].privateName=`${e}Tracks_`});var Ya={remoteText:{ListClass:a3,TrackClass:B4,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:y9,TrackClass:le,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Jt=Object.assign({},j2,Ya);Ya.names=Object.keys(Ya);j2.names=Object.keys(j2);Jt.names=[].concat(Ya.names).concat(j2.names);function tB(e,t,a,r,n={}){let i=e.textTracks();n.kind=t,a&&(n.label=a),r&&(n.language=r),n.tech=e;let h=new Jt.text.TrackClass(n);return i.addTrack(h),h}var w1=class extends Y{constructor(t={},a=function(){}){t.reportTouchActivity=!1,super(null,t,a),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Jt.names.forEach(r=>{let n=Jt[r];t&&t[n.getterName]&&(this[n.privateName]=t[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{t[`native${r}Tracks`]===!1&&(this[`featuresNative${r}Tracks`]=!1)}),t.nativeCaptions===!1||t.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(t.nativeCaptions===!0||t.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=t.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Jt.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Q1(this,function(){let a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return Te(0,0)}bufferedPercent(){return sz(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(j2.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){t=[].concat(t),t.forEach(a=>{let r=this[`${a}Tracks`]()||[],n=r.length;for(;n--;){let i=r[n];a==="text"&&this.removeRemoteTextTrack(i),r.removeTrack(i)}})}cleanupAutoTextTracks(){let t=this.autoRemoteTextTracks_||[],a=t.length;for(;a--;){let r=t[a];this.removeRemoteTextTrack(r)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return t!==void 0&&(this.error_=new t2(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?Te(0,0):Te()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){j2.names.forEach(t=>{let a=j2[t],r=()=>{this.trigger(`${t}trackchange`)},n=this[a.getterName]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),this.on("dispose",()=>{n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!P.default.WebVTT)if(h1.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&Wa(f9.default)&&Object.keys(f9.default).length>0){this.trigger("vttjsloaded");return}let t=h1.default.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),P.default.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let t=this.textTracks(),a=this.remoteTextTracks(),r=l=>t.addTrack(l.track),n=l=>t.removeTrack(l.track);a.on("addtrack",r),a.on("removetrack",n),this.addWebVttScript_();let i=()=>this.trigger("texttrackchange"),h=()=>{i();for(let l=0;l<t.length;l++){let c=t[l];c.removeEventListener("cuechange",i),c.mode==="showing"&&c.addEventListener("cuechange",i)}};h(),t.addEventListener("change",h),t.addEventListener("addtrack",h),t.addEventListener("removetrack",h),this.on("dispose",function(){a.off("addtrack",r),a.off("removetrack",n),t.removeEventListener("change",h),t.removeEventListener("addtrack",h),t.removeEventListener("removetrack",h);for(let l=0;l<t.length;l++)t[l].removeEventListener("cuechange",i)})}addTextTrack(t,a,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return tB(this,t,a,r)}createRemoteTextTrack(t){let a=Y1(t,{tech:this});return new Ya.remoteTextEl.TrackClass(a)}addRemoteTextTrack(t={},a){let r=this.createRemoteTextTrack(t);return typeof a!="boolean"&&(a=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),a===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(t){let a=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){let a=Ee();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",()=>{this.queuedHanders_.has(a)&&(this.queuedHanders_.delete(a),t())})):this.requestNamedAnimationFrame(a,t),a}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,a){return w1.canPlayType(t.type)}static isTech(t){return t.prototype instanceof w1||t instanceof w1||t===w1}static registerTech(t,a){if(w1.techs_||(w1.techs_={}),!w1.isTech(a))throw new Error(`Tech ${t} must be a Tech`);if(!w1.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!w1.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=dt(t),w1.techs_[t]=a,w1.techs_[Kn(t)]=a,t!=="Tech"&&w1.defaultTechOrder_.push(t),a}static getTech(t){if(t){if(w1.techs_&&w1.techs_[t])return w1.techs_[t];if(t=dt(t),P.default&&P.default.videojs&&P.default.videojs[t])return b1.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),P.default.videojs[t]}}};Jt.names.forEach(function(e){let t=Jt[e];w1.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}});w1.prototype.featuresVolumeControl=!0;w1.prototype.featuresMuteControl=!0;w1.prototype.featuresFullscreenResize=!1;w1.prototype.featuresPlaybackRate=!1;w1.prototype.featuresProgressEvents=!1;w1.prototype.featuresSourceset=!1;w1.prototype.featuresTimeupdateEvents=!1;w1.prototype.featuresNativeTextTracks=!1;w1.prototype.featuresVideoFrameCallback=!1;w1.withSourceHandlers=function(e){e.registerSourceHandler=function(a,r){let n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),r===void 0&&(r=n.length),n.splice(r,0,a)},e.canPlayType=function(a){let r=e.sourceHandlers||[],n;for(let i=0;i<r.length;i++)if(n=r[i].canPlayType(a),n)return n;return""},e.selectSourceHandler=function(a,r){let n=e.sourceHandlers||[],i;for(let h=0;h<n.length;h++)if(i=n[h].canHandleSource(a,r),i)return n[h];return null},e.canPlaySource=function(a,r){let n=e.selectSourceHandler(a,r);return n?n.canHandleSource(a,r):""},["seekable","seeking","duration"].forEach(function(a){let r=this[a];typeof r=="function"&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(a){let r=e.selectSourceHandler(a,this.options_);r||(e.nativeSourceHandler?r=e.nativeSourceHandler:b1.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==e.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=r.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Y.registerComponent("Tech",w1);w1.registerTech("Tech",w1);w1.defaultTechOrder_=[];var L4={},B9={},i3={};function eB(e,t){L4[e]=L4[e]||[],L4[e].push(t)}function aB(e,t,a){e.setTimeout(()=>H4(t,L4[t.type],a,e),1)}function rB(e,t){e.forEach(a=>a.setTech&&a.setTech(t))}function nB(e,t,a){return e.reduceRight(M6(a),t[a]())}function iB(e,t,a,r){return t[a](e.reduce(M6(a),r))}function qp(e,t,a,r=null){let n="call"+dt(a),i=e.reduce(M6(n),r),h=i===i3,l=h?null:t[a](i);return oB(e,a,l,h),l}var hB={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},lB={setCurrentTime:1,setMuted:1,setVolume:1},Kp={play:1,pause:1};function M6(e){return(t,a)=>t===i3?i3:a[e]?a[e](t):t}function oB(e,t,a,r){for(let n=e.length-1;n>=0;n--){let i=e[n];i[t]&&i[t](r,a)}}function cB(e){B9[e.id()]=null}function sB(e,t){let a=B9[e.id()],r=null;if(a==null)return r=t(e),B9[e.id()]=[[t,r]],r;for(let n=0;n<a.length;n++){let[i,h]=a[n];i===t&&(r=h)}return r===null&&(r=t(e),a.push([t,r])),r}function H4(e={},t=[],a,r,n=[],i=!1){let[h,...l]=t;if(typeof h=="string")H4(e,L4[h],a,r,n,i);else if(h){let c=sB(r,h);if(!c.setSource)return n.push(c),H4(e,l,a,r,n,i);c.setSource(Object.assign({},e),function(v,g){if(v)return H4(e,l,a,r,n,i);n.push(c),H4(g,e.type===g.type?l:L4[g.type],a,r,n,i)})}else l.length?H4(e,l,a,r,n,i):i?a(e,n):H4(e,L4["*"],a,r,n,!0)}var vB={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},h3=function(e=""){let t=z6(e);return vB[t.toLowerCase()]||""},dB=(e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;let a=e.cache_.sources.filter(n=>n.src===t);if(a.length)return a[0].type;let r=e.$$("source");for(let n=0;n<r.length;n++){let i=r[n];if(i.type&&i.src&&i.src===t)return i.type}return h3(t)},dz=function(e){if(Array.isArray(e)){let t=[];e.forEach(function(a){a=dz(a),Array.isArray(a)?t=t.concat(a):be(a)&&t.push(a)}),e=t}else typeof e=="string"&&e.trim()?e=[Xp({src:e})]:be(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[Xp(e)]:e=[];return e};function Xp(e){if(!e.type){let t=h3(e.src);t&&(e.type=t)}return e}var C9=class extends Y{constructor(t,a,r){let n=Y1({createEl:!1},a);if(super(t,n,r),!a.playerOptions.sources||a.playerOptions.sources.length===0)for(let i=0,h=a.playerOptions.techOrder;i<h.length;i++){let l=dt(h[i]),c=w1.getTech(l);if(l||(c=Y.getComponent(l)),c&&c.isSupported()){t.loadTech_(l);break}}else t.src(a.playerOptions.sources)}};Y.registerComponent("MediaLoader",C9);var Qa=class extends Y{constructor(t,a){super(t,a),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(t="div",a={},r={}){a=Object.assign({className:this.buildCSSClass(),tabIndex:0},a),t==="button"&&b1.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=a.tabIndex;let n=y1(t,a,r);return n.appendChild(y1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=y1("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,a=this.el()){if(t===void 0)return this.controlText_||"Need Text";let r=this.localize(t);this.controlText_=t,N0(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){L1.default.isEventKey(t,"Space")||L1.default.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}};Y.registerComponent("ClickableComponent",Qa);var r5=class extends Qa{constructor(t,a){super(t,a),this.update(),this.update_=r=>this.update(r),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return y1("div",{className:"vjs-poster"})}crossOrigin(t){if(typeof t>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(t!==null&&t!=="anonymous"&&t!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`);return}this.$("img")&&(this.$("img").crossOrigin=t)}update(t){let a=this.player().poster();this.setSrc(a),a?this.show():this.hide()}setSrc(t){if(!t){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(y1("picture",{className:"vjs-poster",tabIndex:-1},{},y1("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Ce(this.player_.play()):this.player_.pause())}};r5.prototype.crossorigin=r5.prototype.crossOrigin;Y.registerComponent("PosterImage",r5);var R2="#222",Yp="#ccc",uB={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function l9(e,t){let a;if(e.length===4)a=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else if(e.length===7)a=e.slice(1);else throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(a.slice(0,2),16)+","+parseInt(a.slice(2,4),16)+","+parseInt(a.slice(4,6),16)+","+t+")"}function o9(e,t,a){try{e.style[t]=a}catch{return}}var S9=class extends Y{constructor(t,a,r){super(t,a,r);let n=i=>this.updateDisplay(i);t.on("loadstart",i=>this.toggleDisplay(i)),t.on("texttrackchange",n),t.on("loadedmetadata",i=>this.preselectTrack(i)),t.ready(Q1(this,function(){if(t.tech_&&t.tech_.featuresNativeTextTracks){this.hide();return}t.on("fullscreenchange",n),t.on("playerresize",n);let i=P.default.screen.orientation||P.default,h=P.default.screen.orientation?"change":"orientationchange";i.addEventListener(h,n),t.on("dispose",()=>i.removeEventListener(h,n));let l=this.options_.playerOptions.tracks||[];for(let c=0;c<l.length;c++)this.player_.addRemoteTextTrack(l[c],!0);this.preselectTrack()}))}preselectTrack(){let t={captions:1,subtitles:1},a=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,n,i,h;for(let l=0;l<a.length;l++){let c=a[l];r&&r.enabled&&r.language&&r.language===c.language&&c.kind in t?c.kind===r.kind?h=c:h||(h=c):r&&!r.enabled?(h=null,n=null,i=null):c.default&&(c.kind==="descriptions"&&!n?n=c:c.kind in t&&!i&&(i=c))}h?h.mode="showing":i?i.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof P.default.WebVTT=="function"&&P.default.WebVTT.processCues(P.default,[],this.el_)}updateDisplay(){let t=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){let h=[];for(let l=0;l<t.length;++l){let c=t[l];c.mode==="showing"&&h.push(c)}this.updateForTrack(h);return}let r=null,n=null,i=t.length;for(;i--;){let h=t[i];h.mode==="showing"&&(h.kind==="descriptions"?r=h:n=h)}n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):r&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayState(t){let a=this.player_.textTrackSettings.getValues(),r=t.activeCues,n=r.length;for(;n--;){let i=r[n];if(!i)continue;let h=i.displayState;if(a.color&&(h.firstChild.style.color=a.color),a.textOpacity&&o9(h.firstChild,"color",l9(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(h.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&o9(h.firstChild,"backgroundColor",l9(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?o9(h,"backgroundColor",l9(a.windowColor,a.windowOpacity)):h.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?h.firstChild.style.textShadow=`2px 2px 3px ${R2}, 2px 2px 4px ${R2}, 2px 2px 5px ${R2}`:a.edgeStyle==="raised"?h.firstChild.style.textShadow=`1px 1px ${R2}, 2px 2px ${R2}, 3px 3px ${R2}`:a.edgeStyle==="depressed"?h.firstChild.style.textShadow=`1px 1px ${Yp}, 0 1px ${Yp}, -1px -1px ${R2}, 0 -1px ${R2}`:a.edgeStyle==="uniform"&&(h.firstChild.style.textShadow=`0 0 4px ${R2}, 0 0 4px ${R2}, 0 0 4px ${R2}, 0 0 4px ${R2}`)),a.fontPercent&&a.fontPercent!==1){let l=P.default.parseFloat(h.style.fontSize);h.style.fontSize=l*a.fontPercent+"px",h.style.height="auto",h.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?h.firstChild.style.fontVariant="small-caps":h.firstChild.style.fontFamily=uB[a.fontFamily])}}updateForTrack(t){if(Array.isArray(t)||(t=[t]),typeof P.default.WebVTT!="function"||t.every(r=>!r.activeCues))return;let a=[];for(let r=0;r<t.length;++r){let n=t[r];for(let i=0;i<n.activeCues.length;++i)a.push(n.activeCues[i])}P.default.WebVTT.processCues(P.default,a,this.el_);for(let r=0;r<t.length;++r){let n=t[r];for(let i=0;i<n.activeCues.length;++i){let h=n.activeCues[i].displayState;w4(h,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:r)),n.language&&Ga(h,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}};Y.registerComponent("TextTrackDisplay",S9);var _9=class extends Y{createEl(){let t=this.player_.isAudio(),a=this.localize(t?"Audio Player":"Video Player"),r=y1("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(r),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};Y.registerComponent("LoadingSpinner",_9);var r2=class extends Qa{createEl(t,a={},r={}){t="button",a=Object.assign({className:this.buildCSSClass()},a),r=Object.assign({type:"button"},r);let n=y1(t,a,r);return n.appendChild(y1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(t,a={}){let r=this.constructor.name;return b1.warn(`Adding an actionable (user controllable) child to a Button (${r}) is not supported; use a ClickableComponent instead.`),Y.prototype.addChild.call(this,t,a)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){if(L1.default.isEventKey(t,"Space")||L1.default.isEventKey(t,"Enter")){t.stopPropagation();return}super.handleKeyDown(t)}};Y.registerComponent("Button",r2);var l3=class extends r2{constructor(t,a){super(t,a),this.mouseused_=!1,this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){let a=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){Ce(a),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}let r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}let i=()=>n.focus();Xn(a)?a.then(i,()=>{}):this.setTimeout(i,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}};l3.prototype.controlText_="Play Video";Y.registerComponent("BigPlayButton",l3);var T9=class extends r2{constructor(t,a){super(t,a),this.controlText(a&&a.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(t){this.trigger({type:"close",bubbles:!1})}handleKeyDown(t){L1.default.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}};Y.registerComponent("CloseButton",T9);var o3=class extends r2{constructor(t,a={}){super(t,a),a.replay=a.replay===void 0||a.replay,this.on(t,"play",r=>this.handlePlay(r)),this.on(t,"pause",r=>this.handlePause(r)),a.replay&&this.on(t,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?Ce(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",a=>this.handleSeeked(a))}};o3.prototype.controlText_="Play";Y.registerComponent("PlayToggle",o3);var I0=class extends Y{constructor(t,a){super(t,a),this.on(t,["timeupdate","ended"],r=>this.updateContent(r)),this.updateTextNode_()}createEl(){let t=this.buildCSSClass(),a=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),r=y1("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xA0`},{role:"presentation"});return a.appendChild(r),this.contentEl_=y1("span",{className:`${t}-display`},{role:"presentation"}),a.appendChild(this.contentEl_),a}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(t=0){t=y4(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let a=this.textNode_;a&&this.contentEl_.firstChild!==a&&(a=null,b1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=h1.default.createTextNode(this.formattedTime_),this.textNode_&&(a?this.contentEl_.replaceChild(this.textNode_,a):this.contentEl_.appendChild(this.textNode_))}))}updateContent(t){}};I0.prototype.labelText_="Time";I0.prototype.controlText_="Time";Y.registerComponent("TimeDisplay",I0);var n5=class extends I0{buildCSSClass(){return"vjs-current-time"}updateContent(t){let a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)}};n5.prototype.labelText_="Current Time";n5.prototype.controlText_="Current Time";Y.registerComponent("CurrentTimeDisplay",n5);var i5=class extends I0{constructor(t,a){super(t,a);let r=n=>this.updateContent(n);this.on(t,"durationchange",r),this.on(t,"loadstart",r),this.on(t,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(t){let a=this.player_.duration();this.updateTextNode_(a)}};i5.prototype.labelText_="Duration";i5.prototype.controlText_="Duration";Y.registerComponent("DurationDisplay",i5);var b9=class extends Y{createEl(){let t=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return a.appendChild(r),t.appendChild(a),t}};Y.registerComponent("TimeDivider",b9);var h5=class extends I0{constructor(t,a){super(t,a),this.on(t,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){let t=super.createEl();return this.options_.displayNegative!==!1&&t.insertBefore(y1("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if(typeof this.player_.duration()!="number")return;let a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}};h5.prototype.labelText_="Remaining Time";h5.prototype.controlText_="Remaining Time";Y.registerComponent("RemainingTimeDisplay",h5);var O9=class extends Y{constructor(t,a){super(t,a),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){let t=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=y1("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(y1("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xA0`})),this.contentEl_.appendChild(h1.default.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,super.dispose()}updateShowing(t){this.player().duration()===1/0?this.show():this.hide()}};Y.registerComponent("LiveDisplay",O9);var c3=class extends r2{constructor(t,a){super(t,a),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){let t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=y1("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};c3.prototype.controlText_="Seek to live, currently playing live";Y.registerComponent("SeekToLive",c3);function x5(e,t,a){return e=Number(e),Math.min(a,Math.max(t,isNaN(e)?t:e))}var gB=Object.freeze({__proto__:null,clamp:x5}),l5=class extends Y{constructor(t,a){super(t,a),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;let t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,a={},r={}){return a.className=a.className+" vjs-slider",a=Object.assign({tabIndex:0},a),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(t,a,r)}handleMouseDown(t){let a=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type==="touchstart"&&!Ae&&t.preventDefault(),Gf(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){let a=this.bar.el_.ownerDocument;qf(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;let t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{let a=this.vertical()?"height":"width";this.bar.el().style[a]=(t*100).toFixed(2)+"%"})),t}getProgress(){return Number(x5(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){let a=K3(this.el_,t);return this.vertical()?a.y:a.x}handleKeyDown(t){L1.default.isEventKey(t,"Left")||L1.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):L1.default.isEventKey(t,"Right")||L1.default.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};Y.registerComponent("Slider",l5);var c9=(e,t)=>x5(e/t*100,0,100).toFixed(2)+"%",A9=class extends Y{constructor(t,a){super(t,a),this.partEls_=[],this.on(t,"progress",r=>this.update(r))}createEl(){let t=super.createEl("div",{className:"vjs-load-progress"}),a=y1("span",{className:"vjs-control-text"}),r=y1("span",{textContent:this.localize("Loaded")}),n=h1.default.createTextNode(": ");return this.percentageEl_=y1("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(a),a.appendChild(r),a.appendChild(n),a.appendChild(this.percentageEl_),t}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(t){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{let a=this.player_.liveTracker,r=this.player_.buffered(),n=a&&a.isLive()?a.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),h=this.partEls_,l=c9(i,n);this.percent_!==l&&(this.el_.style.width=l,N0(this.percentageEl_,l),this.percent_=l);for(let c=0;c<r.length;c++){let v=r.start(c),g=r.end(c),z=h[c];z||(z=this.el_.appendChild(y1()),h[c]=z),!(z.dataset.start===v&&z.dataset.end===g)&&(z.dataset.start=v,z.dataset.end=g,z.style.left=c9(v,i),z.style.width=c9(g-v,i))}for(let c=h.length;c>r.length;c--)this.el_.removeChild(h[c-1]);h.length=r.length})}};Y.registerComponent("LoadProgressBar",A9);var E9=class extends Y{constructor(t,a){super(t,a),this.update=ke(Q1(this,this.update),N2)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(t,a,r){let n=t5(this.el_),i=qa(this.player_.el()),h=t.width*a;if(!i||!n)return;let l=t.left-i.left+h,c=t.width-h+(i.right-t.right),v=n.width/2;l<v?v+=v-l:c<v&&(v=c),v<0?v=0:v>n.width&&(v=n.width),v=Math.round(v),this.el_.style.right=`-${v}px`,this.write(r)}write(t){N0(this.el_,t)}updateTime(t,a,r,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let i,h=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){let l=this.player_.liveTracker.liveWindow(),c=l-a*l;i=(c<1?"":"-")+y4(c,l)}else i=y4(r,h);this.update(t,a,i),n&&n()})}};Y.registerComponent("TimeTooltip",E9);var o5=class extends Y{constructor(t,a){super(t,a),this.update=ke(Q1(this,this.update),N2)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,a){let r=this.getChild("timeTooltip");if(!r)return;let n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(t,a,n)}};o5.prototype.options_={children:[]};!a2&&!Oe&&o5.prototype.options_.children.push("timeTooltip");Y.registerComponent("PlayProgressBar",o5);var s3=class extends Y{constructor(t,a){super(t,a),this.update=ke(Q1(this,this.update),N2)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,a){let r=a*this.player_.duration();this.getChild("timeTooltip").updateTime(t,a,r,()=>{this.el_.style.left=`${t.width*a}px`})}};s3.prototype.options_={children:["timeTooltip"]};Y.registerComponent("MouseTimeDisplay",s3);var Wh=5,Qp=12,c5=class extends l5{constructor(t,a){super(t,a),this.setEventHandlers_()}setEventHandlers_(){this.update_=Q1(this,this.update),this.update=ke(this.update_,N2),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in h1.default&&"visibilityState"in h1.default&&this.on(h1.default,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){h1.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,N2))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if(h1.default.visibilityState==="hidden")return;let a=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{let r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker,i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==a&&(this.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),this.percent_=a),(this.currentTime_!==r||this.duration_!==i)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[y4(r,i),y4(i,i)],"{1} of {2}")),this.currentTime_=r,this.duration_=i),this.bar&&this.bar.update(qa(this.el()),this.getProgress())}),a}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){let t=this.getCurrentTime_(),a,r=this.player_.liveTracker;return r&&r.isLive()?(a=(t-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(a=1)):a=t/this.player_.duration(),a}handleMouseDown(t){e5(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,a=!1){if(!e5(t))return;!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let r,n=this.calculateDistance(t),i=this.player_.liveTracker;if(!i||!i.isLive())r=n*this.player_.duration(),r===this.player_.duration()&&(r=r-.1);else{if(n>=.99){i.seekToLiveEdge();return}let h=i.seekableStart(),l=i.liveCurrentTime();if(r=h+n*i.liveWindow(),r>=l&&(r=l),r<=h&&(r=h+.1),r===1/0)return}this.userSeek_(r)}enable(){super.enable();let t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();let t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ce(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+Wh)}stepBack(){this.userSeek_(this.player_.currentTime()-Wh)}handleAction(t){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){let a=this.player_.liveTracker;if(L1.default.isEventKey(t,"Space")||L1.default.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(L1.default.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(L1.default.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test((0,L1.default)(t))){t.preventDefault(),t.stopPropagation();let r=(L1.default.codes[(0,L1.default)(t)]-L1.default.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else L1.default.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-Wh*Qp)):L1.default.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+Wh*Qp)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in h1.default&&"visibilityState"in h1.default&&this.off(h1.default,"visibilitychange",this.toggleVisibility_),super.dispose()}};c5.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!a2&&!Oe&&c5.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Y.registerComponent("SeekBar",c5);var v3=class extends Y{constructor(t,a){super(t,a),this.handleMouseMove=ke(Q1(this,this.handleMouseMove),N2),this.throttledHandleMouseSeek=ke(Q1(this,this.handleMouseSeek),N2),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){let a=this.getChild("seekBar");if(!a)return;let r=a.getChild("playProgressBar"),n=a.getChild("mouseTimeDisplay");if(!r&&!n)return;let i=a.el(),h=t5(i),l=K3(i,t).x;l=x5(l,0,1),n&&n.update(h,l),r&&r.update(h,a.getProgress())}handleMouseSeek(t){let a=this.getChild("seekBar");a&&a.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach(t=>t.disable&&t.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){let t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Ce(this.player_.play())}}enable(){this.children().forEach(t=>t.enable&&t.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){let t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){let a=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(t),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){let a=this.getChild("seekBar");a&&a.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}};v3.prototype.options_={children:["seekBar"]};Y.registerComponent("ProgressControl",v3);var d3=class extends r2{constructor(t,a){super(t,a),this.on(t,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{t.currentType().substring(0,5)==="audio"||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){h1.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in P.default?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}};d3.prototype.controlText_="Picture-in-Picture";Y.registerComponent("PictureInPictureToggle",d3);var u3=class extends r2{constructor(t,a){super(t,a),this.on(t,"fullscreenchange",r=>this.handleFullscreenChange(r)),h1.default[t.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};u3.prototype.controlText_="Fullscreen";Y.registerComponent("FullscreenToggle",u3);var pB=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},k9=class extends Y{createEl(){let t=super.createEl("div",{className:"vjs-volume-level"});return t.appendChild(super.createEl("span",{className:"vjs-control-text"})),t}};Y.registerComponent("VolumeLevel",k9);var P9=class extends Y{constructor(t,a){super(t,a),this.update=ke(Q1(this,this.update),N2)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t,a,r,n){if(!r){let i=qa(this.el_),h=qa(this.player_.el()),l=t.width*a;if(!h||!i)return;let c=t.left-h.left+l,v=t.width-l+(h.right-t.right),g=i.width/2;c<g?g+=g-c:v<g&&(g=v),g<0?g=0:g>i.width&&(g=i.width),this.el_.style.right=`-${g}px`}this.write(`${n}%`)}write(t){N0(this.el_,t)}updateVolume(t,a,r,n,i){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(t,a,r,n.toFixed(0)),i&&i()})}};Y.registerComponent("VolumeLevelTooltip",P9);var g3=class extends Y{constructor(t,a){super(t,a),this.update=ke(Q1(this,this.update),N2)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,a,r){let n=100*a;this.getChild("volumeLevelTooltip").updateVolume(t,a,r,n,()=>{r?this.el_.style.bottom=`${t.height*a}px`:this.el_.style.left=`${t.width*a}px`})}};g3.prototype.options_={children:["volumeLevelTooltip"]};Y.registerComponent("MouseVolumeLevelDisplay",g3);var Ja=class extends l5{constructor(t,a){super(t,a),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(t,"volumechange",r=>this.updateARIAAttributes(r)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){e5(t)&&super.handleMouseDown(t)}handleMouseMove(t){let a=this.getChild("mouseVolumeLevelDisplay");if(a){let r=this.el(),n=qa(r),i=this.vertical(),h=K3(r,t);h=i?h.y:h.x,h=x5(h,0,1),a.update(n,h,i)}e5(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){let a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){let t=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(t)})}};Ja.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!a2&&!Oe&&Ja.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Ja.prototype.playerEvent="volumechange";Y.registerComponent("VolumeBar",Ja);var p3=class extends Y{constructor(t,a={}){a.vertical=a.vertical||!1,(typeof a.volumeBar>"u"||Wa(a.volumeBar))&&(a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=a.vertical),super(t,a),pB(this,t),this.throttledHandleMouseMove=ke(Q1(this,this.handleMouseMove),N2),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){let a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){let a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}};p3.prototype.options_={children:["volumeBar"]};Y.registerComponent("VolumeControl",p3);var fB=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},f3=class extends r2{constructor(t,a){super(t,a),fB(this,t),this.on(t,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){let a=this.player_.volume(),r=this.player_.lastVolume_();if(a===0){let n=r<.1?.1:r;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){let t=this.player_.volume(),a=3;a2&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?a=0:t<.33?a=1:t<.67&&(a=2),G3(this.el_,[0,1,2,3].reduce((r,n)=>r+`${n?" ":""}vjs-vol-${n}`,"")),w4(this.el_,`vjs-vol-${a}`)}updateControlText_(){let a=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)}};f3.prototype.controlText_="Mute";Y.registerComponent("MuteToggle",f3);var z3=class extends Y{constructor(t,a={}){typeof a.inline<"u"?a.inline=a.inline:a.inline=!0,(typeof a.volumeControl>"u"||Wa(a.volumeControl))&&(a.volumeControl=a.volumeControl||{},a.volumeControl.vertical=!a.inline),super(t,a),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(t,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){L1.default.isEventKey(t,"Esc")&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),y2(h1.default,"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),Ft(h1.default,"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){L1.default.isEventKey(t,"Esc")&&this.handleMouseOut()}};z3.prototype.options_={children:["muteToggle","volumeControl"]};Y.registerComponent("VolumePanel",z3);var D9=class extends r2{constructor(t,a){super(t,a),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipForwardTime(){let t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(t){let a=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()?r.seekableEnd():this.player_.duration(),i;a+this.skipTime<=n?i=a+this.skipTime:i=n,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}};Y.registerComponent("SkipForward",D9);var M3=class extends r2{constructor(t,a){super(t,a),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime])),this.show()):this.hide()}getSkipBackwardTime(){let t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(t){let a=this.player_.currentTime(),r=this.player_.liveTracker,n=r&&r.isLive()&&r.seekableStart(),i;n&&a-this.skipTime<=n?i=n:a>=this.skipTime?i=a-this.skipTime:i=0,this.player_.currentTime(i)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}};M3.prototype.controlText_="Skip Backward";Y.registerComponent("SkipBackward",M3);var m3=class extends Y{constructor(t,a){super(t,a),a&&(this.menuButton_=a.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(t){t instanceof Y&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof Y&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){let a=this.addChild(t);a&&this.addEventListenerForItem(a)}createEl(){let t=this.options_.contentElType||"ul";this.contentEl_=y1(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");let a=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),y2(a,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),a}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){let a=t.relatedTarget||h1.default.activeElement;if(!this.children().some(r=>r.el()===a)){let r=this.menuButton_;r&&r.buttonPressed_&&a!==r.el().firstChild&&r.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();let a=this.children();if(!Array.isArray(a))return;let r=a.filter(n=>n.el()===t.target)[0];if(!r)return;r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(t){L1.default.isEventKey(t,"Left")||L1.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(L1.default.isEventKey(t,"Right")||L1.default.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){let a=this.children().slice();a.length&&a[0].hasClass("vjs-menu-title")&&a.shift(),a.length>0&&(t<0?t=0:t>=a.length&&(t=a.length-1),this.focusedChild_=t,a[t].el_.focus())}};Y.registerComponent("Menu",m3);var s5=class extends Y{constructor(t,a={}){super(t,a),this.menuButton_=new r2(t,a),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");let r=r2.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;let n=i=>this.handleClick(i);this.handleMenuKeyUp_=i=>this.handleMenuKeyUp(i),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",i=>this.handleKeyDown(i)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),y2(h1.default,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",i=>this.handleMouseLeave(i)),this.on("keydown",i=>this.handleSubmenuKeyDown(i))}update(){let t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){let t=new m3(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){let a=y1("li",{className:"vjs-menu-title",textContent:dt(this.options_.title),tabIndex:-1}),r=new Y(this.player_,{el:a});t.addItem(r)}if(this.items=this.createItems(),this.items)for(let a=0;a<this.items.length;a++)t.addItem(this.items[a]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let t="vjs-menu-button";this.options_.inline===!0?t+="-inline":t+="-popup";let a=r2.prototype.buildCSSClass();return`vjs-menu-button ${t} ${a} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,a=this.menuButton_.el()){return this.menuButton_.controlText(t,a)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),Ft(h1.default,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){L1.default.isEventKey(t,"Esc")||L1.default.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),L1.default.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(L1.default.isEventKey(t,"Up")||L1.default.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))}handleMenuKeyUp(t){(L1.default.isEventKey(t,"Esc")||L1.default.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){(L1.default.isEventKey(t,"Esc")||L1.default.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),L1.default.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),a2&&Nf())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};Y.registerComponent("MenuButton",s5);var v5=class extends s5{constructor(t,a){let r=a.tracks;if(super(t,a),this.items.length<=1&&this.hide(),!r)return;let n=Q1(this,this.update);r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),r.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n),r.removeEventListener("labelchange",n)})}};Y.registerComponent("TrackButton",v5);var zB=["Tab","Esc","Up","Down","Right","Left"],C4=class extends Qa{constructor(t,a){super(t,a),this.selectable=a.selectable,this.isSelected_=a.selected||!1,this.multiSelectable=a.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,a,r){this.nonIconControl=!0;let n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},a),r);return n.replaceChild(y1("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(t){zB.some(a=>L1.default.isEventKey(t,a))||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};Y.registerComponent("MenuItem",C4);var S4=class extends C4{constructor(t,a){let r=a.track,n=t.textTracks();a.label=r.label||r.language||"Unknown",a.selected=r.mode==="showing",super(t,a),this.track=r,this.kinds=(a.kinds||[a.kind||this.track.kind]).filter(Boolean);let i=(...l)=>{this.handleTracksChange.apply(this,l)},h=(...l)=>{this.handleSelectedLanguageChange.apply(this,l)};if(t.on(["loadstart","texttrackchange"],i),n.addEventListener("change",i),n.addEventListener("selectedlanguagechange",h),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],i),n.removeEventListener("change",i),n.removeEventListener("selectedlanguagechange",h)}),n.onchange===void 0){let l;this.on(["tap","click"],function(){if(typeof P.default.Event!="object")try{l=new P.default.Event("change")}catch{}l||(l=h1.default.createEvent("Event"),l.initEvent("change",!0,!0)),n.dispatchEvent(l)})}this.handleTracksChange()}handleClick(t){let a=this.track,r=this.player_.textTracks();if(super.handleClick(t),!!r)for(let n=0;n<r.length;n++){let i=r[n];this.kinds.indexOf(i.kind)!==-1&&(i===a?i.mode!=="showing"&&(i.mode="showing"):i.mode!=="disabled"&&(i.mode="disabled"))}}handleTracksChange(t){let a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(t){if(this.track.mode==="showing"){let a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};Y.registerComponent("TextTrackMenuItem",S4);var H3=class extends S4{constructor(t,a){a.track={player:t,kind:a.kind,kinds:a.kinds,default:!1,mode:"disabled"},a.kinds||(a.kinds=[a.kind]),a.label?a.track.label=a.label:a.track.label=a.kinds.join(" and ")+" off",a.selectable=!0,a.multiSelectable=!1,super(t,a)}handleTracksChange(t){let a=this.player().textTracks(),r=!0;for(let n=0,i=a.length;n<i;n++){let h=a[n];if(this.options_.kinds.indexOf(h.kind)>-1&&h.mode==="showing"){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(t){let a=this.player().textTracks(),r=!0;for(let n=0,i=a.length;n<i;n++){let h=a[n];if(["captions","descriptions","subtitles"].indexOf(h.kind)>-1&&h.mode==="showing"){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}};Y.registerComponent("OffTextTrackMenuItem",H3);var R0=class extends v5{constructor(t,a={}){a.tracks=t.textTracks(),super(t,a)}createItems(t=[],a=S4){let r;this.label_&&(r=`${this.label_} off`),t.push(new H3(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;let n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let i=0;i<n.length;i++){let h=n[i];if(this.kinds_.indexOf(h.kind)>-1){let l=new a(this.player_,{track:h,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});l.addClass(`vjs-${h.kind}-menu-item`),t.push(l)}}return t}};Y.registerComponent("TextTrackButton",R0);var x3=class extends C4{constructor(t,a){let r=a.track,n=a.cue,i=t.currentTime();a.selectable=!0,a.multiSelectable=!1,a.label=n.text,a.selected=n.startTime<=i&&i<n.endTime,super(t,a),this.track=r,this.cue=n}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};Y.registerComponent("ChaptersTrackMenuItem",x3);var d5=class extends R0{constructor(t,a,r){super(t,a,r),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&t.track.kind!=="chapters")return;let a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),super.update()):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){let a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";let a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){let t=this.player_.textTracks()||[];for(let a=t.length-1;a>=0;a--){let r=t[a];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(dt(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){let t=[];if(!this.track_)return t;let a=this.track_.cues;if(!a)return t;for(let r=0,n=a.length;r<n;r++){let i=a[r],h=new x3(this.player_,{track:this.track_,cue:i});t.push(h)}return t}};d5.prototype.kind_="chapters";d5.prototype.controlText_="Chapters";Y.registerComponent("ChaptersButton",d5);var u5=class extends R0{constructor(t,a,r){super(t,a,r);let n=t.textTracks(),i=Q1(this,this.handleTracksChange);n.addEventListener("change",i),this.on("dispose",function(){n.removeEventListener("change",i)})}handleTracksChange(t){let a=this.player().textTracks(),r=!1;for(let n=0,i=a.length;n<i;n++){let h=a[n];if(h.kind!==this.kind_&&h.mode==="showing"){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};u5.prototype.kind_="descriptions";u5.prototype.controlText_="Descriptions";Y.registerComponent("DescriptionsButton",u5);var g5=class extends R0{constructor(t,a,r){super(t,a,r)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};g5.prototype.kind_="subtitles";g5.prototype.controlText_="Subtitles";Y.registerComponent("SubtitlesButton",g5);var p5=class extends S4{constructor(t,a){a.track={player:t,kind:a.kind,label:a.kind+" settings",selectable:!1,default:!1,mode:"disabled"},a.selectable=!1,a.name="CaptionSettingsMenuItem",super(t,a),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+a.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}};Y.registerComponent("CaptionSettingsMenuItem",p5);var f5=class extends R0{constructor(t,a,r){super(t,a,r)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new p5(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}};f5.prototype.kind_="captions";f5.prototype.controlText_="Captions";Y.registerComponent("CaptionsButton",f5);var V3=class extends S4{createEl(t,a,r){let n=super.createEl(t,a,r),i=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(i.appendChild(y1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(y1("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}};Y.registerComponent("SubsCapsMenuItem",V3);var z5=class extends R0{constructor(t,a={}){super(t,a),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(dt(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new p5(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,V3),t}};z5.prototype.kinds_=["captions","subtitles"];z5.prototype.controlText_="Subtitles";Y.registerComponent("SubsCapsButton",z5);var w3=class extends C4{constructor(t,a){let r=a.track,n=t.audioTracks();a.label=r.label||r.language||"Unknown",a.selected=r.enabled,super(t,a),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);let i=(...h)=>{this.handleTracksChange.apply(this,h)};n.addEventListener("change",i),this.on("dispose",()=>{n.removeEventListener("change",i)})}createEl(t,a,r){let n=super.createEl(t,a,r),i=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(i.appendChild(y1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(y1("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){let a=this.player_.audioTracks();for(let r=0;r<a.length;r++){let n=a[r];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}};Y.registerComponent("AudioTrackMenuItem",w3);var L3=class extends v5{constructor(t,a={}){a.tracks=t.audioTracks(),super(t,a)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;let a=this.player_.audioTracks();for(let r=0;r<a.length;r++){let n=a[r];t.push(new w3(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return t}};L3.prototype.controlText_="Audio Track";Y.registerComponent("AudioTrackButton",L3);var M5=class extends C4{constructor(t,a){let r=a.rate,n=parseFloat(r,10);a.label=r,a.selected=n===t.playbackRate(),a.selectable=!0,a.multiSelectable=!1,super(t,a),this.label=r,this.rate=n,this.on(t,"ratechange",i=>this.update(i))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}};M5.prototype.contentElType="button";Y.registerComponent("PlaybackRateMenuItem",M5);var y3=class extends s5{constructor(t,a){super(t,a),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",r=>this.updateVisibility(r)),this.on(t,"ratechange",r=>this.updateLabel(r)),this.on(t,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){let t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=y1("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){let t=this.playbackRates(),a=[];for(let r=t.length-1;r>=0;r--)a.push(new M5(this.player(),{rate:t[r]+"x"}));return a}handlePlaybackRateschange(t){this.update()}playbackRates(){let t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};y3.prototype.controlText_="Playback Rate";Y.registerComponent("PlaybackRateMenuButton",y3);var B3=class extends Y{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",a={},r={}){return a.className||(a.className=this.buildCSSClass()),super.createEl(t,a,r)}};Y.registerComponent("Spacer",B3);var I9=class extends B3{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xA0"})}};Y.registerComponent("CustomControlSpacer",I9);var Za=class extends Y{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};Za.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in h1.default&&Za.prototype.options_.children.splice(Za.prototype.options_.children.length-1,0,"pictureInPictureToggle");Y.registerComponent("ControlBar",Za);var C3=class extends P0{constructor(t,a){super(t,a),this.on(t,"error",r=>this.open(r))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){let t=this.player().error();return t?this.localize(t.message):""}};C3.prototype.options_=Object.assign({},P0.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Y.registerComponent("ErrorDisplay",C3);var s9="vjs-text-track-settings",Jp=["#000","Black"],Zp=["#00F","Blue"],tf=["#0FF","Cyan"],ef=["#0F0","Green"],af=["#F0F","Magenta"],rf=["#F00","Red"],nf=["#FFF","White"],hf=["#FF0","Yellow"],v9=["1","Opaque"],d9=["0.5","Semi-Transparent"],lf=["0","Transparent"],x4={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Jp,nf,rf,ef,Zp,hf,af,tf]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[v9,d9,lf]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[nf,Jp,rf,ef,Zp,hf,af,tf]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>e==="1.00"?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[v9,d9]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[lf,d9,v9]}};x4.windowColor.options=x4.backgroundColor.options;function uz(e,t){if(t&&(e=t(e)),e&&e!=="none")return e}function MB(e,t){let a=e.options[e.options.selectedIndex].value;return uz(a,t)}function mB(e,t,a){if(t){for(let r=0;r<e.options.length;r++)if(uz(e.options[r].value,a)===t){e.selectedIndex=r;break}}}var R9=class extends P0{constructor(t,a){a.temporary=!1,super(t,a),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=y1("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),a.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),Ra(x4,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(t,a="",r="label"){let n=x4[t],i=n.id.replace("%s",this.id_),h=[a,i].join(" ").trim();return[`<${r} id="${i}" class="${r==="label"?"vjs-label":""}">`,this.localize(n.label),`</${r}>`,`<select aria-labelledby="${h}">`].concat(n.options.map(l=>{let c=i+"-"+l[1].replace(/\W+/g,"");return[`<option id="${c}" value="${l[0]}" `,`aria-labelledby="${h} ${c}">`,this.localize(l[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){let t=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg vjs-track-setting">',`<legend id="${t}">`,this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",t),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")}createElBgColor_(){let t=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg vjs-track-setting">',`<legend id="${t}">`,this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",t),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")}createElWinColor_(){let t=`captions-window-${this.id_}`;return['<fieldset class="vjs-window vjs-track-setting">',`<legend id="${t}">`,this.localize("Caption Area Background"),"</legend>",'<span class="vjs-window-color">',this.createElSelect_("windowColor",t),"</span>",'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")}createElColors_(){return y1("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return y1("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){let t=this.localize("restore all settings to the default values");return y1("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${t}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${t}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Pf(x4,(t,a,r)=>{let n=MB(this.$(a.selector),a.parser);return n!==void 0&&(t[r]=n),t},{})}setValues(t){Ra(x4,(a,r)=>{mB(this.$(a.selector),t[r],a.parser)})}setDefaults(){Ra(x4,t=>{let a=t.hasOwnProperty("default")?t.default:0;this.$(t.selector).selectedIndex=a})}restoreSettings(){let t;try{t=JSON.parse(P.default.localStorage.getItem(s9))}catch(a){b1.warn(a)}t&&this.setValues(t)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;let t=this.getValues();try{Object.keys(t).length?P.default.localStorage.setItem(s9,JSON.stringify(t)):P.default.localStorage.removeItem(s9)}catch(a){b1.warn(a)}}updateDisplay(){let t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;let t=this.player_.controlBar,a=t&&t.subsCapsButton,r=t&&t.captionsButton;a?a.focus():r&&r.focus()}handleLanguagechange(){this.fill()}};Y.registerComponent("TextTrackSettings",R9);var j9=class extends Y{constructor(t,a){let r=a.ResizeObserver||P.default.ResizeObserver;a.ResizeObserver===null&&(r=!1);let n=Y1({createEl:!r,reportTouchActivity:!1},a);super(t,n),this.ResizeObserver=a.ResizeObserver||P.default.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=az(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(t.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;let i=this.debouncedHandler_,h=this.unloadListener_=function(){Ft(this,"resize",i),Ft(this,"unload",h),h=null};y2(this.el_.contentWindow,"unload",h),y2(this.el_.contentWindow,"resize",i)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};Y.registerComponent("ResizeManager",j9);var HB={trackingThreshold:20,liveTolerance:15},N9=class extends Y{constructor(t,a){let r=Y1(HB,a,{createEl:!1});super(t,r),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){let t=this.player_.seekable();if(!t||!t.length)return;let a=Number(P.default.performance.now().toFixed(4)),r=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+r;let n=this.liveCurrentTime(),i=this.player_.currentTime(),h=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-i)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(h=!1),h!==this.behindLiveEdge_&&(this.behindLiveEdge_=h,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,N2),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){let t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){let t=this.player_.seekable(),a=[],r=t?t.length:0;for(;r--;)a.push(t.end(r));return a.length?a.sort()[a.length-1]:1/0}seekableStart(){let t=this.player_.seekable(),a=[],r=t?t.length:0;for(;r--;)a.push(t.start(r));return a.length?a.sort()[0]:0}liveWindow(){let t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){let t=this.seekableEnd();return this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};Y.registerComponent("LiveTracker",N9);var F9=class extends Y{constructor(t,a){super(t,a),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:y1("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Ee()}`}),description:y1("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Ee()}`})},y1("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){let t=this.player_.tech_,a=t&&t.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{let i=this.state[n],h=this.els[n],l=r[n];X3(h),i&&N0(h,i),a&&(a.removeAttribute(l),i&&a.setAttribute(l,h.id))}),this.state.title||this.state.description?this.show():this.hide()}update(t){this.setState(t)}dispose(){let t=this.player_.tech_,a=t&&t.el_;a&&(a.removeAttribute("aria-labelledby"),a.removeAttribute("aria-describedby")),super.dispose(),this.els=null}};Y.registerComponent("TitleBar",F9);var U9=e=>{let t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;let a=e.$$("source"),r=[],n="";if(!a.length)return!1;for(let i=0;i<a.length;i++){let h=a[i].src;h&&r.indexOf(h)===-1&&r.push(h)}return r.length?(r.length===1&&(n=r[0]),e.triggerSourceset(n),!0):!1},xB=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){let t=h1.default.createElement(this.nodeName.toLowerCase());t.innerHTML=e;let a=h1.default.createDocumentFragment();for(;t.childNodes.length;)a.appendChild(t.childNodes[0]);return this.innerText="",P.default.Element.prototype.appendChild.call(this,a),this.innerHTML}}),gz=(e,t)=>{let a={};for(let r=0;r<e.length&&(a=Object.getOwnPropertyDescriptor(e[r],t),!(a&&a.set&&a.get));r++);return a.enumerable=!0,a.configurable=!0,a},VB=e=>gz([e.el(),P.default.HTMLMediaElement.prototype,P.default.Element.prototype,xB],"innerHTML"),of=function(e){let t=e.el();if(t.resetSourceWatch_)return;let a={},r=VB(e),n=i=>(...h)=>{let l=i.apply(t,h);return U9(e),l};["append","appendChild","insertAdjacentHTML"].forEach(i=>{t[i]&&(a[i]=t[i],t[i]=n(a[i]))}),Object.defineProperty(t,"innerHTML",Y1(r,{set:n(r.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(a).forEach(i=>{t[i]=a[i]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)},wB=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?vz(P.default.Element.prototype.getAttribute.call(this,"src")):""},set(e){return P.default.Element.prototype.setAttribute.call(this,"src",e),e}}),LB=e=>gz([e.el(),P.default.HTMLMediaElement.prototype,wB],"src"),yB=function(e){if(!e.featuresSourceset)return;let t=e.el();if(t.resetSourceset_)return;let a=LB(e),r=t.setAttribute,n=t.load;Object.defineProperty(t,"src",Y1(a,{set:i=>{let h=a.set.call(t,i);return e.triggerSourceset(t.src),h}})),t.setAttribute=(i,h)=>{let l=r.call(t,i,h);return/src/i.test(i)&&e.triggerSourceset(t.src),l},t.load=()=>{let i=n.call(t);return U9(e)||(e.triggerSourceset(""),of(e)),i},t.currentSrc?e.triggerSourceset(t.currentSrc):U9(e)||of(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=n,t.setAttribute=r,Object.defineProperty(t,"src",a),t.resetSourceWatch_&&t.resetSourceWatch_()}},d1=class extends w1{constructor(t,a){super(t,a);let r=t.source,n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",r&&(this.el_.currentSrc!==r.src||t.tag&&t.tag.initNetworkState_===3)?this.setSource(r):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){let i=this.el_.childNodes,h=i.length,l=[];for(;h--;){let c=i[h];c.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),this.textTracks().addTrack(c.track),!n&&!this.el_.hasAttribute("crossorigin")&&Z3(c.src)&&(n=!0)):l.push(c))}for(let c=0;c<l.length;c++)this.el_.removeChild(l[c])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&b1.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Zn||$3)&&t.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),d1.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){yB(this)}restoreMetadataTracksInIOSNativePlayer_(){let t=this.textTracks(),a,r=()=>{a=[];for(let i=0;i<t.length;i++){let h=t[i];h.kind==="metadata"&&a.push({track:h,storedMode:h.mode})}};r(),t.addEventListener("change",r),this.on("dispose",()=>t.removeEventListener("change",r));let n=()=>{for(let i=0;i<a.length;i++){let h=a[i];h.track.mode==="disabled"&&h.track.mode!==h.storedMode&&(h.track.mode=h.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",r),t.removeEventListener("change",n),t.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",r),t.addEventListener("change",r),t.removeEventListener("change",n)})}overrideNative_(t,a){if(a!==this[`featuresNative${t}Tracks`])return;let r=t.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(n=>{this.el()[`${r}Tracks`].removeEventListener(n,this[`${r}TracksListeners_`][n])}),this[`featuresNative${t}Tracks`]=!a,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){let a=j2[t],r=this.el()[a.getterName],n=this[a.getterName]();if(!this[`featuresNative${a.capitalName}Tracks`]||!r||!r.addEventListener)return;let i={change:l=>{let c={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(c),t==="text"&&this[Ya.remoteText.getterName]().trigger(c)},addtrack(l){n.addTrack(l.track)},removetrack(l){n.removeTrack(l.track)}},h=function(){let l=[];for(let c=0;c<n.length;c++){let v=!1;for(let g=0;g<r.length;g++)if(r[g]===n[c]){v=!0;break}v||l.push(n[c])}for(;l.length;)n.removeTrack(l.shift())};this[a.getterName+"Listeners_"]=i,Object.keys(i).forEach(l=>{let c=i[l];r.addEventListener(l,c),this.on("dispose",v=>r.removeEventListener(l,c))}),this.on("loadstart",h),this.on("dispose",l=>this.off("loadstart",h))}proxyNativeTracks_(){j2.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){let r=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(r,t),d1.disposeMediaElement(t),t=r}else{t=h1.default.createElement("video");let r=this.options_.tag&&O0(this.options_.tag),n=Y1({},r);(!Zn||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,$f(t,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Ga(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);let a=["loop","muted","playsinline","autoplay"];for(let r=0;r<a.length;r++){let n=a[r],i=this.options_[n];typeof i<"u"&&(i?Ga(t,n,n):q3(t,n),t[n]=i)}return t}handleLateInit_(t){if(t.networkState===0||t.networkState===3)return;if(t.readyState===0){let r=!1,n=function(){r=!0};this.on("loadstart",n);let i=function(){r||this.trigger("loadstart")};this.on("loadedmetadata",i),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),r||this.trigger("loadstart")});return}let a=["loadstart"];a.push("loadedmetadata"),t.readyState>=2&&a.push("loadeddata"),t.readyState>=3&&a.push("canplay"),t.readyState>=4&&a.push("canplaythrough"),this.ready(function(){a.forEach(function(r){this.trigger(r)},this)})}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&W3?this.el_.fastSeek(t):this.el_.currentTime=t}catch(a){b1(a,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Oe&&Ae&&this.el_.currentTime===0){let t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;let t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",()=>{this.off("webkitbeginfullscreen",a),this.off("webkitendfullscreen",t)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){let t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Ce(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(t===void 0)return this.el_.src;this.setSrc(t)}reset(){d1.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,a,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,a,r):super.addTextTrack(t,a,r)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);let a=h1.default.createElement("track");return t.kind&&(a.kind=t.kind),t.label&&(a.label=t.label),(t.language||t.srclang)&&(a.srclang=t.language||t.srclang),t.default&&(a.default=t.default),t.id&&(a.id=t.id),t.src&&(a.src=t.src),a}addRemoteTextTrack(t,a){let r=super.addRemoteTextTrack(t,a);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){let a=this.$$("track"),r=a.length;for(;r--;)(t===a[r]||t===a[r].track)&&this.el().removeChild(a[r])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();let t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),P.default.performance&&(t.creationTime=P.default.performance.now()),t}};N3(d1,"TEST_VID",function(){if(!er())return;let e=h1.default.createElement("video"),t=h1.default.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e});d1.isSupported=function(){try{d1.TEST_VID.volume=.5}catch{return!1}return!!(d1.TEST_VID&&d1.TEST_VID.canPlayType)};d1.canPlayType=function(e){return d1.TEST_VID.canPlayType(e)};d1.canPlaySource=function(e,t){return d1.canPlayType(e.type)};d1.canControlVolume=function(){try{let e=d1.TEST_VID.volume;d1.TEST_VID.volume=e/2+.1;let t=e!==d1.TEST_VID.volume;return t&&a2?(P.default.setTimeout(()=>{d1&&d1.prototype&&(d1.prototype.featuresVolumeControl=e!==d1.TEST_VID.volume)}),!1):t}catch{return!1}};d1.canMuteVolume=function(){try{let e=d1.TEST_VID.muted;return d1.TEST_VID.muted=!e,d1.TEST_VID.muted?Ga(d1.TEST_VID,"muted","muted"):q3(d1.TEST_VID,"muted","muted"),e!==d1.TEST_VID.muted}catch{return!1}};d1.canControlPlaybackRate=function(){if(Oe&&Ae&&F3<58)return!1;try{let e=d1.TEST_VID.playbackRate;return d1.TEST_VID.playbackRate=e/2+.1,e!==d1.TEST_VID.playbackRate}catch{return!1}};d1.canOverrideAttributes=function(){try{let e=()=>{};Object.defineProperty(h1.default.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(h1.default.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(h1.default.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(h1.default.createElement("audio"),"innerHTML",{get:e,set:e})}catch{return!1}return!0};d1.supportsNativeTextTracks=function(){return W3||a2&&Ae};d1.supportsNativeVideoTracks=function(){return!!(d1.TEST_VID&&d1.TEST_VID.videoTracks)};d1.supportsNativeAudioTracks=function(){return!!(d1.TEST_VID&&d1.TEST_VID.audioTracks)};d1.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([e,t]){N3(d1.prototype,e,()=>d1[t](),!0)});d1.prototype.featuresVolumeControl=d1.canControlVolume();d1.prototype.movingMediaElementInDOM=!a2;d1.prototype.featuresFullscreenResize=!0;d1.prototype.featuresProgressEvents=!0;d1.prototype.featuresTimeupdateEvents=!0;d1.prototype.featuresVideoFrameCallback=!!(d1.TEST_VID&&d1.TEST_VID.requestVideoFrameCallback);d1.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),typeof e.load=="function"&&function(){try{e.load()}catch{}}()}};d1.resetMediaElement=function(e){if(!e)return;let t=e.querySelectorAll("source"),a=t.length;for(;a--;)e.removeChild(t[a]);e.removeAttribute("src"),typeof e.load=="function"&&function(){try{e.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){d1.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){d1.prototype["set"+dt(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){d1.prototype[e]=function(){return this.el_[e]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){d1.prototype["set"+dt(e)]=function(t){this.el_[e]=t}});["pause","load","play"].forEach(function(e){d1.prototype[e]=function(){return this.el_[e]()}});w1.withSourceHandlers(d1);d1.nativeSourceHandler={};d1.nativeSourceHandler.canPlayType=function(e){try{return d1.TEST_VID.canPlayType(e)}catch{return""}};d1.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return d1.nativeSourceHandler.canPlayType(e.type);if(e.src){let a=z6(e.src);return d1.nativeSourceHandler.canPlayType(`video/${a}`)}return""};d1.nativeSourceHandler.handleSource=function(e,t,a){t.setSrc(e.src)};d1.nativeSourceHandler.dispose=function(){};d1.registerSourceHandler(d1.nativeSourceHandler);w1.registerTech("Html5",d1);var pz=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],u9={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},$9=["tiny","xsmall","small","medium","large","xlarge","huge"],Yh={};$9.forEach(e=>{let t=e.charAt(0)==="x"?`x-${e.substring(1)}`:e;Yh[e]=`vjs-layout-${t}`});var BB={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},W1=class extends Y{constructor(t,a,r){if(t.id=t.id||a.id||`vjs_video_${Ee()}`,a=Object.assign(W1.getTagSettings(t),a),a.initChildren=!1,a.createEl=!1,a.evented=!1,a.reportTouchActivity=!1,!a.language){let h=t.closest("[lang]");h&&(a.language=h.getAttribute("lang"))}if(super(null,a,r),this.boundDocumentFullscreenChange_=h=>this.documentFullscreenChange_(h),this.boundFullWindowOnEscKey_=h=>this.fullWindowOnEscKey(h),this.boundUpdateStyleEl_=h=>this.updateStyleEl_(h),this.boundApplyInitTime_=h=>this.applyInitTime_(h),this.boundUpdateCurrentBreakpoint_=h=>this.updateCurrentBreakpoint_(h),this.boundHandleTechClick_=h=>this.handleTechClick_(h),this.boundHandleTechDoubleClick_=h=>this.handleTechDoubleClick_(h),this.boundHandleTechTouchStart_=h=>this.handleTechTouchStart_(h),this.boundHandleTechTouchMove_=h=>this.handleTechTouchMove_(h),this.boundHandleTechTouchEnd_=h=>this.handleTechTouchEnd_(h),this.boundHandleTechTap_=h=>this.handleTechTap_(h),this.isFullscreen_=!1,this.log=Ef(this.id_),this.fsApi_=Jh,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&O0(t),this.language(this.options_.language),a.languages){let h={};Object.getOwnPropertyNames(a.languages).forEach(function(l){h[l.toLowerCase()]=a.languages[l]}),this.languages_=h}else this.languages_=W1.prototype.options_.languages;this.resetCache_(),this.poster_=a.poster||"",this.controls_=!!a.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),a.plugins&&Object.keys(a.plugins).forEach(h=>{if(typeof this[h]!="function")throw new Error(`plugin "${h}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),g6(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(y2(h1.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);let n=Y1(this.options_);a.plugins&&Object.keys(a.plugins).forEach(h=>{this[h](a.plugins[h])}),a.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(a.playbackRates),this.initChildren(),this.isAudio(t.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Zn&&this.addClass("vjs-touch-enabled"),a2||this.addClass("vjs-workinghover"),W1.players[this.id_]=this;let i=bf.split(".")[0];this.addClass(`vjs-v${i}`),this.userActive(!0),this.reportUserActivity(),this.one("play",h=>this.listenForUserActivity_(h)),this.on("keydown",h=>this.handleKeyDown(h)),this.on("languagechange",h=>this.handleLanguagechange(h)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ft(h1.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ft(h1.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),W1.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),cB(this),Jt.names.forEach(t=>{let a=Jt[t],r=this[a.getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t=this.tag,a,r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),n=this.tag.tagName.toLowerCase()==="video-js";r?a=this.el_=t.parentNode:n||(a=this.el_=super.createEl("div"));let i=O0(t);if(n){for(a=this.el_=t,t=this.tag=h1.default.createElement("video");a.children.length;)t.appendChild(a.firstChild);qn(a,"video-js")||w4(a,"video-js"),a.appendChild(t),r=this.playerElIngest_=a,Object.keys(a).forEach(l=>{try{t[l]=a[l]}catch{}})}if(t.setAttribute("tabindex","-1"),i.tabindex="-1",Ae&&U3&&(t.setAttribute("role","application"),i.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in i&&delete i.width,"height"in i&&delete i.height,Object.getOwnPropertyNames(i).forEach(function(l){n&&l==="class"||a.setAttribute(l,i[l]),n&&t.setAttribute(l,i[l])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=a.player=this,this.addClass("vjs-paused"),P.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=tz("vjs-styles-dimensions");let l=k0(".vjs-styles-defaults"),c=k0("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);let h=t.getElementsByTagName("a");for(let l=0;l<h.length;l++){let c=h.item(l);w4(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!r&&t.parentNode.insertBefore(a,t),z9(t,a),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a}crossOrigin(t){if(typeof t>"u")return this.techGet_("crossOrigin");if(t!==null&&t!=="anonymous"&&t!=="use-credentials"){b1.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`);return}this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,a){let r=t+"_";if(a===void 0)return this[r]||0;if(a===""||a==="auto"){this[r]=void 0,this.updateStyleEl_();return}let n=parseFloat(a);if(isNaN(n)){b1.error(`Improper value "${a}" supplied for for ${t}`);return}this[r]=n,this.updateStyleEl_()}fluid(t){if(t===void 0)return!!this.fluid_;this.fluid_=!!t,i0(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),Fy(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(P.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){let l=typeof this.width_=="number"?this.width_:this.options_.width,c=typeof this.height_=="number"?this.height_:this.options_.height,v=this.tech_&&this.tech_.el();v&&(l>=0&&(v.width=l),c>=0&&(v.height=c));return}let t,a,r,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?r=this.aspectRatio_:this.videoWidth()>0?r=this.videoWidth()+":"+this.videoHeight():r="16:9";let i=r.split(":"),h=i[1]/i[0];this.width_!==void 0?t=this.width_:this.height_!==void 0?t=this.height_/h:t=this.videoWidth()||300,this.height_!==void 0?a=this.height_:a=t*h,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),ez(this.styleEl_,`
      .${n} {
        width: ${t}px;
        height: ${a}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${h*100}%;
      }
    `)}loadTech_(t,a){this.tech_&&this.unloadTech_();let r=dt(t),n=t.charAt(0).toLowerCase()+t.slice(1);r!=="Html5"&&this.tag&&(w1.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let i=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(i=!1);let h={source:a,autoplay:i,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Jt.names.forEach(c=>{let v=Jt[c];h[v.getterName]=this[v.privateName]}),Object.assign(h,this.options_[r]),Object.assign(h,this.options_[n]),Object.assign(h,this.options_[t.toLowerCase()]),this.tag&&(h.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);let l=w1.getTech(t);if(!l)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new l(h),this.tech_.ready(Q1(this,this.handleTechReady_),!0),Up.jsonToTextTracks(this.textTracksJson_||[],this.tech_),pz.forEach(c=>{this.on(this.tech_,c,v=>this[`handleTech${dt(c)}_`](v))}),Object.keys(u9).forEach(c=>{this.on(this.tech_,c,v=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${u9[c]}_`].bind(this),event:v});return}this[`handleTech${u9[c]}_`](v)})}),this.on(this.tech_,"loadstart",c=>this.handleTechLoadStart_(c)),this.on(this.tech_,"sourceset",c=>this.handleTechSourceset_(c)),this.on(this.tech_,"waiting",c=>this.handleTechWaiting_(c)),this.on(this.tech_,"ended",c=>this.handleTechEnded_(c)),this.on(this.tech_,"seeking",c=>this.handleTechSeeking_(c)),this.on(this.tech_,"play",c=>this.handleTechPlay_(c)),this.on(this.tech_,"pause",c=>this.handleTechPause_(c)),this.on(this.tech_,"durationchange",c=>this.handleTechDurationChange_(c)),this.on(this.tech_,"fullscreenchange",(c,v)=>this.handleTechFullscreenChange_(c,v)),this.on(this.tech_,"fullscreenerror",(c,v)=>this.handleTechFullscreenError_(c,v)),this.on(this.tech_,"enterpictureinpicture",c=>this.handleTechEnterPictureInPicture_(c)),this.on(this.tech_,"leavepictureinpicture",c=>this.handleTechLeavePictureInPicture_(c)),this.on(this.tech_,"error",c=>this.handleTechError_(c)),this.on(this.tech_,"posterchange",c=>this.handleTechPosterChange_(c)),this.on(this.tech_,"textdata",c=>this.handleTechTextData_(c)),this.on(this.tech_,"ratechange",c=>this.handleTechRateChange_(c)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(r!=="Html5"||!this.tag)&&z9(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Jt.names.forEach(t=>{let a=Jt[t];this[a.privateName]=this[a.getterName]()}),this.textTracksJson_=Up.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return t===void 0&&b1.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||typeof t!="string")return;let a=()=>{let n=this.muted();this.muted(!0);let i=()=>{this.muted(n)};this.playTerminatedQueue_.push(i);let h=this.play();if(Xn(h))return h.catch(l=>{throw i(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${l||""}`)})},r;if(t==="any"&&!this.muted()?(r=this.play(),Xn(r)&&(r=r.catch(a))):t==="muted"&&!this.muted()?r=a():r=this.play(),!!Xn(r))return r.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})})}updateSourceCaches_(t=""){let a=t,r="";typeof a!="string"&&(a=t.src,r=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!r&&(r=dB(this,a)),this.cache_.source=Y1({},t,{src:a,type:r});let n=this.cache_.sources.filter(c=>c.src&&c.src===a),i=[],h=this.$$("source"),l=[];for(let c=0;c<h.length;c++){let v=O0(h[c]);i.push(v),v.src&&v.src===a&&l.push(v.src)}l.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a}handleTechSourceset_(t){if(!this.changingSrc_){let a=i=>this.updateSourceCaches_(i),r=this.currentSource().src,n=t.src;r&&!/^blob:/.test(r)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==r)&&(a=()=>{}),a(n),t.src||this.tech_.any(["sourceset","loadstart"],i=>{if(i.type==="sourceset")return;let h=this.techGet("currentSrc");this.lastSource_.tech=h,this.updateSourceCaches_(h)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let t=this.currentTime(),a=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",a))};this.on("timeupdate",a)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?Ce(this.play()):this.pause())}handleTechDoubleClick_(t){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(t.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){let a=t.target.player;if(a&&a!==this)return;let r=this.el(),n=h1.default[this.fsApi_.fullscreenElement]===r;!n&&r.matches?n=r.matches(":"+this.fsApi_.fullscreen):!n&&r.msMatchesSelector&&(n=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(t,a){a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))}handleTechFullscreenError_(t,a){this.trigger("fullscreenerror",a)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){let t=this.tech_.error();this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,a){this.ready(function(){if(t in lB)return iB(this.middleware_,this.tech_,t,a);if(t in Kp)return qp(this.middleware_,this.tech_,t,a);try{this.tech_&&this.tech_[t](a)}catch(r){throw b1(r),r}},!0)}techGet_(t){if(!(!this.tech_||!this.tech_.isReady_)){if(t in hB)return nB(this.middleware_,this.tech_,t);if(t in Kp)return qp(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(a){throw this.tech_[t]===void 0?(b1(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,a),a):a.name==="TypeError"?(b1(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,a),this.tech_.isReady_=!1,a):(b1(a),a)}}}play(){return new Promise(t=>{this.play_(t)})}play_(t=Ce){this.playCallbacks_.push(t);let a=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),r=!!(W3||a2);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=h=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&r&&this.load();return}let n=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){let t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(a){a()})}runPlayCallbacks_(t){let a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(r){r(t)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Te(0,0)}scrubbing(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){if(typeof t<"u"){if(t<0&&(t=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",t),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return(!t||!t.length)&&(t=Te(0,0)),t}bufferedPercent(){return sz(this.buffered(),this.duration())}bufferedEnd(){let t=this.buffered(),a=this.duration(),r=t.end(t.length-1);return r>a&&(r=a),r}volume(t){let a;if(t!==void 0){a=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a}muted(t){if(t!==void 0){this.techCall_("setMuted",t);return}return this.techGet_("muted")||!1}defaultMuted(t){return t!==void 0?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1}lastVolume_(t){if(t!==void 0&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(t!==void 0){let a=this.isFullscreen_;this.isFullscreen_=!!t,this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();let a=this;return new Promise((r,n)=>{function i(){a.off("fullscreenerror",l),a.off("fullscreenchange",h)}function h(){i(),r()}function l(v,g){i(),n(g)}a.one("fullscreenchange",h),a.one("fullscreenerror",l);let c=a.requestFullscreenHelper_(t);c&&(c.then(i,i),c.then(r,n))})}requestFullscreenHelper_(t){let a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(a=t)),this.fsApi_.requestFullscreen){let r=this.el_[this.fsApi_.requestFullscreen](a);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let t=this;return new Promise((a,r)=>{function n(){t.off("fullscreenerror",h),t.off("fullscreenchange",i)}function i(){n(),a()}function h(c,v){n(),r(v)}t.one("fullscreenchange",i),t.one("fullscreenerror",h);let l=t.exitFullscreenHelper_();l&&(l.then(n,n),l.then(a,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){let t=h1.default[this.fsApi_.exitFullscreen]();return t&&Ce(t.then(()=>this.isFullscreen(!1))),t}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=h1.default.documentElement.style.overflow,y2(h1.default,"keydown",this.boundFullWindowOnEscKey_),h1.default.documentElement.style.overflow="hidden",w4(h1.default.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){L1.default.isEventKey(t,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ft(h1.default,"keydown",this.boundFullWindowOnEscKey_),h1.default.documentElement.style.overflow=this.docOrigOverflow,G3(h1.default.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){if(t!==void 0){this.isInPictureInPicture_=!!t,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&P.default.documentPictureInPicture){let t=h1.default.createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(y1("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),P.default.documentPictureInPicture.requestWindow({initialAspectRatio:this.videoWidth()/this.videoHeight(),copyStyleSheets:!0}).then(a=>(this.el_.parentNode.insertBefore(t,this.el_),a.document.body.append(this.el_),a.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger("enterpictureinpicture"),a.addEventListener("unload",r=>{let n=r.target.querySelector(".video-js");t.replaceWith(n),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),a))}return"pictureInPictureEnabled"in h1.default&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(P.default.documentPictureInPicture&&P.default.documentPictureInPicture.window)return P.default.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in h1.default)return h1.default.exitPictureInPicture()}handleKeyDown(t){let{userActions:a}=this.options_;!a||!a.hotkeys||(n=>{let i=n.tagName.toLowerCase();if(n.isContentEditable)return!0;let h=["button","checkbox","hidden","radio","reset","submit"];return i==="input"?h.indexOf(n.type)===-1:["textarea"].indexOf(i)!==-1})(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,t):this.handleHotkeys(t))}handleHotkeys(t){let a=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=h=>L1.default.isEventKey(h,"f"),muteKey:n=h=>L1.default.isEventKey(h,"m"),playPauseKey:i=h=>L1.default.isEventKey(h,"k")||L1.default.isEventKey(h,"Space")}=a;if(r.call(this,t)){t.preventDefault(),t.stopPropagation();let h=Y.getComponent("FullscreenToggle");h1.default[this.fsApi_.fullscreenEnabled]!==!1&&h.prototype.handleClick.call(this,t)}else n.call(this,t)?(t.preventDefault(),t.stopPropagation(),Y.getComponent("MuteToggle").prototype.handleClick.call(this,t)):i.call(this,t)&&(t.preventDefault(),t.stopPropagation(),Y.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let a;for(let r=0,n=this.options_.techOrder;r<n.length;r++){let i=n[r],h=w1.getTech(i);if(h||(h=Y.getComponent(i)),!h){b1.error(`The "${i}" tech is undefined. Skipped browser support check for that tech.`);continue}if(h.isSupported()&&(a=h.canPlayType(t),a))return a}return""}selectSource(t){let a=this.options_.techOrder.map(l=>[l,w1.getTech(l)]).filter(([l,c])=>c?c.isSupported():(b1.error(`The "${l}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(l,c,v){let g;return l.some(z=>c.some(w=>{if(g=v(z,w),g)return!0})),g},n,i=l=>(c,v)=>l(v,c),h=([l,c],v)=>{if(c.canPlaySource(v,this.options_[l.toLowerCase()]))return{source:v,tech:l}};return this.options_.sourceOrder?n=r(t,a,i(h)):n=r(a,t,h),n||!1}handleSrc_(t,a){if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let r=dz(t);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),aB(this,r[0],(n,i)=>{if(this.middleware_=i,a||(this.cache_.sources=r),this.updateSourceCaches_(n),this.src_(n)){if(r.length>1)return this.handleSrc_(r.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}rB(i,this.tech_)}),r.length>1){let n=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},i=()=>{this.off("error",n)};this.one("error",n),this.one("playing",i),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",i)}}}src(t){return this.handleSrc_(t,!1)}src_(t){let a=this.selectSource([t]);return a?hz(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{let t=this.play();Ce(t.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),i0(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);let{currentTimeDisplay:t,durationDisplay:a,progressControl:r,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:i}=r||{};t&&t.updateContent(),a&&a.updateContent(),n&&n.updateContent(),i&&(i.update(),i.loadProgressBar&&i.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){let t=this.currentSource(),a=[];return Object.keys(t).length!==0&&a.push(t),this.cache_.sources||a}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){if(t!==void 0){this.techCall_("setPreload",t),this.options_.preload=t;return}return this.techGet_("preload")}autoplay(t){if(t===void 0)return this.options_.autoplay||!1;let a;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),a=!1):t?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)}playsinline(t){return t!==void 0?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")}loop(t){if(t!==void 0){this.techCall_("setLoop",t),this.options_.loop=t;return}return this.techGet_("loop")}poster(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){let t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(t===void 0)return this.error_||null;if(E0("beforeerror").forEach(a=>{let r=a(this,t);if(!(be(r)&&!Array.isArray(r)||typeof r=="string"||typeof r=="number"||r===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}t=r}),this.options_.suppressNotSupportedError&&t&&t.code===4){let a=function(){this.error(t)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(t===null){this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new t2(t),this.addClass("vjs-error"),b1.error(`(CODE:${this.error_.code} ${t2.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),E0("error").forEach(a=>a(this,this.error_))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(t===void 0)return this.userActive_;if(t=!!t,t!==this.userActive_){if(this.userActive_=t,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,a,r,n=Q1(this,this.reportUserActivity),i=function(g){(g.screenX!==a||g.screenY!==r)&&(a=g.screenX,r=g.screenY,n())},h=function(){n(),this.clearInterval(t),t=this.setInterval(n,250)},l=function(g){n(),this.clearInterval(t)};this.on("mousedown",h),this.on("mousemove",i),this.on("mouseup",l),this.on("mouseleave",l);let c=this.getChild("controlBar");c&&!a2&&!Oe&&(c.on("mouseenter",function(g){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),c.on("mouseleave",function(g){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let v;this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(v);let g=this.options_.inactivityTimeout;g<=0||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},g))},250)}playbackRate(t){if(t!==void 0){this.techCall_("setPlaybackRate",t);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(t!==void 0){this.isAudio_=!!t;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");let t=this.children(),a=this.getChild("ControlBar"),r=a&&a.currentHeight();t.forEach(n=>{n!==a&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){let a=[];return this.isInPictureInPicture()&&a.push(this.exitPictureInPicture()),this.isFullscreen()&&a.push(this.exitFullscreen()),this.audioPosterMode()&&a.push(this.audioPosterMode(!1)),Promise.all(a).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return typeof t!="boolean"||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(t,a,r){if(this.tech_)return this.tech_.addTextTrack(t,a,r)}addRemoteTextTrack(t,a){if(this.tech_)return this.tech_.addRemoteTextTrack(t,a)}removeRemoteTextTrack(t={}){let{track:a}=t;if(a||(a=t),this.tech_)return this.tech_.removeRemoteTextTrack(a)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),i0(this)&&this.trigger("languagechange"))}languages(){return Y1(W1.prototype.options_.languages,this.languages_)}toJSON(){let t=Y1(this.options_),a=t.tracks;t.tracks=[];for(let r=0;r<a.length;r++){let n=a[r];n=Y1(n),n.player=void 0,t.tracks[r]=n}return t}createModal(t,a){a=a||{},a.content=t||"";let r=new P0(this,a);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;let t=this.currentBreakpoint(),a=this.currentWidth();for(let r=0;r<$9.length;r++){let n=$9[r],i=this.breakpoints_[n];if(a<=i){if(t===n)return;t&&this.removeClass(Yh[t]),this.addClass(Yh[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){let t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return t===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},BB,t),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(t){if(t===void 0)return this.responsive_;t=!!t;let a=this.responsive_;if(t!==a)return this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Yh[this.breakpoint_]||""}loadMedia(t,a){if(!t||typeof t!="object")return;this.reset(),this.cache_.media=Y1(t);let{artist:r,artwork:n,description:i,poster:h,src:l,textTracks:c,title:v}=this.cache_.media;!n&&h&&(this.cache_.media.artwork=[{src:h,type:h3(h)}]),l&&this.src(l),h&&this.poster(h),Array.isArray(c)&&c.forEach(g=>this.addRemoteTextTrack(g,!1)),this.titleBar&&this.titleBar.update({title:v,description:i||r||""}),this.ready(a)}getMedia(){if(!this.cache_.media){let t=this.poster(),a=this.currentSources(),r=Array.prototype.map.call(this.remoteTextTracks(),i=>({kind:i.kind,label:i.label,language:i.language,src:i.src})),n={src:a,textTracks:r};return t&&(n.poster=t,n.artwork=[{src:n.poster,type:h3(n.poster)}]),n}return Y1(this.cache_.media)}static getTagSettings(t){let a={sources:[],tracks:[]},r=O0(t),n=r["data-setup"];if(qn(t,"vjs-fill")&&(r.fill=!0),qn(t,"vjs-fluid")&&(r.fluid=!0),n!==null){let[i,h]=(0,_f.default)(n||"{}");i&&b1.error(i),Object.assign(r,h)}if(Object.assign(a,r),t.hasChildNodes()){let i=t.childNodes;for(let h=0,l=i.length;h<l;h++){let c=i[h],v=c.nodeName.toLowerCase();v==="source"?a.sources.push(O0(c)):v==="track"&&a.tracks.push(O0(c))}}return a}debug(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(t===void 0)return this.cache_.playbackRates;Array.isArray(t)&&t.every(a=>typeof a=="number")&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}};Jt.names.forEach(function(e){let t=Jt[e];W1.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}});W1.prototype.crossorigin=W1.prototype.crossOrigin;W1.players={};var Un=P.default.navigator;W1.prototype.options_={techOrder:w1.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Un&&(Un.languages&&Un.languages[0]||Un.userLanguage||Un.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){W1.prototype[e]=function(){return this.techGet_(e)}});pz.forEach(function(e){W1.prototype[`handleTech${dt(e)}_`]=function(){return this.trigger(e)}});Y.registerComponent("Player",W1);var S3="plugin",Fa="activePlugins_",Da={},_3=e=>Da.hasOwnProperty(e),Qh=e=>_3(e)?Da[e]:void 0,fz=(e,t)=>{e[Fa]=e[Fa]||{},e[Fa][t]=!0},T3=(e,t,a)=>{let r=(a?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},CB=function(e,t){let a=function(){T3(this,{name:e,plugin:t,instance:null},!0);let r=t.apply(this,arguments);return fz(this,e),T3(this,{name:e,plugin:t,instance:r}),r};return Object.keys(t).forEach(function(r){a[r]=t[r]}),a},cf=(e,t)=>(t.prototype.name=e,function(...a){T3(this,{name:e,plugin:t,instance:null},!0);let r=new t(this,...a);return this[e]=()=>r,T3(this,r.getEventHash()),r}),Ut=class{constructor(t){if(this.constructor===Ut)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),g6(this),delete this.trigger,iz(this,this.constructor.defaultState),fz(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,a={}){return rr(this.eventBusEl_,t,this.getEventHash(a))}handleStateChanged(t){}dispose(){let{name:t,player:a}=this;this.trigger("dispose"),this.off(),a.off("dispose",this.dispose),a[Fa][t]=!1,this.player=this.state=null,a[t]=cf(t,Da[t])}static isBasic(t){let a=typeof t=="string"?Qh(t):t;return typeof a=="function"&&!Ut.prototype.isPrototypeOf(a.prototype)}static registerPlugin(t,a){if(typeof t!="string")throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(_3(t))b1.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(W1.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if(typeof a!="function")throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof a}.`);return Da[t]=a,t!==S3&&(Ut.isBasic(a)?W1.prototype[t]=CB(t,a):W1.prototype[t]=cf(t,a)),a}static deregisterPlugin(t){if(t===S3)throw new Error("Cannot de-register base plugin.");_3(t)&&(delete Da[t],delete W1.prototype[t])}static getPlugins(t=Object.keys(Da)){let a;return t.forEach(r=>{let n=Qh(r);n&&(a=a||{},a[r]=n)}),a}static getPluginVersion(t){let a=Qh(t);return a&&a.VERSION||""}};Ut.getPlugin=Qh;Ut.BASE_PLUGIN_NAME=S3;Ut.registerPlugin(S3,Ut);W1.prototype.usingPlugin=function(e){return!!this[Fa]&&this[Fa][e]===!0};W1.prototype.hasPlugin=function(e){return!!_3(e)};function SB(e,t){let a=!1;return function(...r){return a||b1.warn(e),a=!0,t.apply(this,r)}}function oe(e,t,a,r){return SB(`${t} is deprecated and will be removed in ${e}.0; please use ${a} instead.`,r)}var zz=e=>e.indexOf("#")===0?e.slice(1):e;function $(e,t,a){let r=$.getPlayer(e);if(r)return t&&b1.warn(`Player "${e}" is already initialised. Options will not be applied.`),a&&r.ready(a),r;let n=typeof e=="string"?k0("#"+zz(e)):e;if(!ar(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n))&&b1.warn("The element supplied is not included in the DOM"),t=t||{},t.restoreEl===!0&&(t.restoreEl=(n.parentNode&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),E0("beforesetup").forEach(h=>{let l=h(n,Y1(t));if(!be(l)||Array.isArray(l)){b1.error("please return an object in beforesetup hooks");return}t=Y1(t,l)});let i=Y.getComponent("Player");return r=new i(n,t,a),E0("setup").forEach(h=>h(r)),r}$.hooks_=r0;$.hooks=E0;$.hook=Sy;$.hookOnce=_y;$.removeHook=Of;if(P.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&er()){let e=k0(".vjs-styles-defaults");if(!e){e=tz("vjs-styles-defaults");let t=k0("head");t&&t.insertBefore(e,t.firstChild),ez(e,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}m9(1,$);$.VERSION=bf;$.options=W1.prototype.options_;$.getPlayers=()=>W1.players;$.getPlayer=e=>{let t=W1.players,a;if(typeof e=="string"){let r=zz(e),n=t[r];if(n)return n;a=k0("#"+r)}else a=e;if(ar(a)){let{player:r,playerId:n}=a;if(r||t[n])return r||t[n]}};$.getAllPlayers=()=>Object.keys(W1.players).map(e=>W1.players[e]).filter(Boolean);$.players=W1.players;$.getComponent=Y.getComponent;$.registerComponent=(e,t)=>{w1.isTech(t)&&b1.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Y.registerComponent.call(Y,e,t)};$.getTech=w1.getTech;$.registerTech=w1.registerTech;$.use=eB;Object.defineProperty($,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty($.middleware,"TERMINATOR",{value:i3,writeable:!1,enumerable:!0});$.browser=Ay;$.obj=Oy;$.mergeOptions=oe(9,"videojs.mergeOptions","videojs.obj.merge",Y1);$.defineLazyProperty=oe(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",N3);$.bind=oe(9,"videojs.bind","native Function.prototype.bind",Q1);$.registerPlugin=Ut.registerPlugin;$.deregisterPlugin=Ut.deregisterPlugin;$.plugin=(e,t)=>(b1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Ut.registerPlugin(e,t));$.getPlugins=Ut.getPlugins;$.getPlugin=Ut.getPlugin;$.getPluginVersion=Ut.getPluginVersion;$.addLanguage=function(e,t){return e=(""+e).toLowerCase(),$.options.languages=Y1($.options.languages,{[e]:t}),$.options.languages[e]};$.log=b1;$.createLogger=Ef;$.time=qy;$.createTimeRange=oe(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Te);$.createTimeRanges=oe(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Te);$.formatTime=oe(9,"videojs.formatTime","videojs.time.formatTime",y4);$.setFormatTime=oe(9,"videojs.setFormatTime","videojs.time.setFormatTime",oz);$.resetFormatTime=oe(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",cz);$.parseUrl=oe(9,"videojs.parseUrl","videojs.url.parseUrl",f6);$.isCrossOrigin=oe(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Z3);$.EventTarget=g2;$.any=u6;$.on=y2;$.one=Q3;$.off=Ft;$.trigger=rr;$.xhr=o6.default;$.TextTrack=B4;$.AudioTrack=r3;$.VideoTrack=n3;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(e=>{$[e]=function(){return b1.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),Jf[e].apply(null,arguments)}});$.computedStyle=oe(9,"videojs.computedStyle","videojs.dom.computedStyle",Ka);$.dom=Jf;$.fn=Ny;$.num=gB;$.str=Wy;$.url=Zy;var W9=class{constructor(t){let a=this;return a.id=t.id,a.label=a.id,a.width=t.width,a.height=t.height,a.bitrate=t.bandwidth,a.frameRate=t.frameRate,a.enabled_=t.enabled,Object.defineProperty(a,"enabled",{get(){return a.enabled_()},set(r){a.enabled_(r)}}),a}},tr=class extends $.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get(){return t.selectedIndex_}}),Object.defineProperty(t,"length",{get(){return t.levels_.length}}),t}addQualityLevel(t){let a=this.getQualityLevelById(t.id);if(a)return a;let r=this.levels_.length;return a=new W9(t),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(a),this.trigger({qualityLevel:a,type:"addqualitylevel"}),a}removeQualityLevel(t){let a=null;for(let r=0,n=this.length;r<n;r++)if(this[r]===t){a=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return a&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),a}getQualityLevelById(t){for(let a=0,r=this.length;a<r;a++){let n=this[a];if(n.id===t)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}};tr.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(let e in tr.prototype.allowedEvents_)tr.prototype["on"+e]=null;var Mz="3.0.0",_B=$.registerPlugin||$.plugin,TB=function(e,t){let a=e.qualityLevels,r=new tr,n=function(){r.dispose(),e.qualityLevels=a,e.off("dispose",n)};return e.on("dispose",n),e.qualityLevels=()=>r,e.qualityLevels.VERSION=Mz,r},mz=function(e){return TB(this,$.mergeOptions({},e))};_B("qualityLevels",mz);mz.VERSION=Mz;var he=tg,b3=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,ce=e=>$.log.debug?$.log.debug.bind($,"VHS:",`${e} >`):function(){};function J1(...e){let t=$.obj||$;return(t.merge||t.mergeOptions).apply(t,e)}function Nt(...e){let t=$.time||$;return(t.createTimeRanges||t.createTimeRanges).apply(t,e)}var j0=1/30,Se=j0*3,Hz=function(e,t){let a=[],r;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&a.push([e.start(r),e.end(r)]);return Nt(a)},Ia=function(e,t){return Hz(e,function(a,r){return a-Se<=t&&r+Se>=t})},Gh=function(e,t){return Hz(e,function(a){return a-j0>=t})},bB=function(e){if(e.length<2)return Nt();let t=[];for(let a=1;a<e.length;a++){let r=e.end(a-1),n=e.start(a);t.push([r,n])}return Nt(t)},OB=function(e,t){let a=null,r=null,n=0,i=[],h=[];if(!e||!e.length||!t||!t.length)return Nt();let l=e.length;for(;l--;)i.push({time:e.start(l),type:"start"}),i.push({time:e.end(l),type:"end"});for(l=t.length;l--;)i.push({time:t.start(l),type:"start"}),i.push({time:t.end(l),type:"end"});for(i.sort(function(c,v){return c.time-v.time}),l=0;l<i.length;l++)i[l].type==="start"?(n++,n===2&&(a=i[l].time)):i[l].type==="end"&&(n--,n===1&&(r=i[l].time)),a!==null&&r!==null&&(h.push([a,r]),a=null,r=null);return Nt(h)},xz=e=>{let t=[];if(!e||!e.length)return"";for(let a=0;a<e.length;a++)t.push(e.start(a)+" => "+e.end(a));return t.join(", ")},AB=function(e,t,a=1){return((e.length?e.end(e.length-1):0)-t)/a},V4=e=>{let t=[];for(let a=0;a<e.length;a++)t.push({start:e.start(a),end:e.end(a)});return t},EB=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(let a=0;a<e.length;a++)if(e.start(a)!==t.start(a)||e.end(a)!==t.end(a))return!0;return!1},sf=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},m6=function(e,t){let a=0;if(!e||!e.length)return a;for(let r=0;r<e.length;r++){let n=e.start(r),i=e.end(r);if(!(t>i)){if(t>n&&t<=i){a+=i-t;continue}a+=i-n}}return a},H6=(e,t)=>{if(!t.preload)return t.duration;let a=0;return(t.parts||[]).forEach(function(r){a+=r.duration}),(t.preloadHints||[]).forEach(function(r){r.type==="PART"&&(a+=e.partTargetDuration)}),a},G9=e=>(e.segments||[]).reduce((t,a,r)=>(a.parts?a.parts.forEach(function(n,i){t.push({duration:n.duration,segmentIndex:r,partIndex:i,part:n,segment:a})}):t.push({duration:a.duration,segmentIndex:r,partIndex:null,segment:a,part:null}),t),[]),Vz=e=>{let t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},wz=({preloadSegment:e})=>{if(!e)return;let{parts:t,preloadHints:a}=e,r=(a||[]).reduce((n,i)=>n+(i.type==="PART"?1:0),0);return r+=t&&t.length?t.length:0,r},Lz=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;let a=Vz(t).length>0;return a&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:a&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},kB=function(e,t){let a=0,r=t-e.mediaSequence,n=e.segments[r];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;r--;){if(n=e.segments[r],typeof n.end<"u")return{result:a+n.end,precise:!0};if(a+=H6(e,n),typeof n.start<"u")return{result:a+n.start,precise:!0}}return{result:a,precise:!1}},PB=function(e,t){let a=0,r,n=t-e.mediaSequence;for(;n<e.segments.length;n++){if(r=e.segments[n],typeof r.start<"u")return{result:r.start-a,precise:!0};if(a+=H6(e,r),typeof r.end<"u")return{result:r.end-a,precise:!0}}return{result:-1,precise:!1}},yz=function(e,t,a){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;let r=kB(e,t);if(r.precise)return r.result;let n=PB(e,t);return n.precise?n.result:r.result+a},Bz=function(e,t,a){if(!e)return 0;if(typeof a!="number"&&(a=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return P.default.Infinity}return yz(e,t,a)},Yn=function({defaultDuration:e,durationList:t,startIndex:a,endIndex:r}){let n=0;if(a>r&&([a,r]=[r,a]),a<0){for(let i=a;i<Math.min(0,r);i++)n+=e;a=0}for(let i=a;i<r;i++)n+=t[i].duration;return n},Cz=function(e,t,a,r){if(!e||!e.segments)return null;if(e.endList)return Bz(e);if(t===null)return null;t=t||0;let n=yz(e,e.mediaSequence+e.segments.length,t);return a&&(r=typeof r=="number"?r:Lz(null,e),n-=r),Math.max(0,n)},DB=function(e,t,a){let n=t||0,i=Cz(e,t,!0,a);return i===null?Nt():Nt(n,i)},IB=function({playlist:e,currentTime:t,startingSegmentIndex:a,startingPartIndex:r,startTime:n,exactManifestTimings:i}){let h=t-n,l=G9(e),c=0;for(let v=0;v<l.length;v++){let g=l[v];if(a===g.segmentIndex&&!(typeof r=="number"&&typeof g.partIndex=="number"&&r!==g.partIndex)){c=v;break}}if(h<0){if(c>0)for(let v=c-1;v>=0;v--){let g=l[v];if(h+=g.duration,i){if(h<0)continue}else if(h+j0<=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:n-Yn({defaultDuration:e.targetDuration,durationList:l,startIndex:c,endIndex:v})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:t}}if(c<0){for(let v=c;v<0;v++)if(h-=e.targetDuration,h<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:t};c=0}for(let v=c;v<l.length;v++){let g=l[v];if(h-=g.duration,i){if(h>0)continue}else if(h-j0>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:n+Yn({defaultDuration:e.targetDuration,durationList:l,startIndex:c,endIndex:v})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:t}},Sz=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},x6=function(e){return e.excludeUntil&&e.excludeUntil===1/0},tl=function(e){let t=Sz(e);return!e.disabled&&!t},RB=function(e){return e.disabled},jB=function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},_z=function(e,t){return t.attributes&&t.attributes[e]},NB=function(e,t,a,r=0){return _z("BANDWIDTH",a)?(e*a.attributes.BANDWIDTH-r*8)/t:NaN},q9=(e,t)=>{if(e.playlists.length===1)return!0;let a=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(r=>tl(r)?(r.attributes.BANDWIDTH||0)<a:!1).length===0},V6=(e,t)=>!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri),vf=function(e,t){let a=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(let n in a){for(let i in a[n])if(r=t(a[n][i]),r)break;if(r)break}return!!r},V5=e=>{if(!e||!e.playlists||!e.playlists.length)return vf(e,a=>a.playlists&&a.playlists.length||a.uri);for(let t=0;t<e.playlists.length;t++){let a=e.playlists[t],r=a.attributes&&a.attributes.CODECS;if(!(r&&r.split(",").every(i=>ms(i))||vf(e,i=>V6(a,i))))return!1}return!0},u2={liveEdgeDelay:Lz,duration:Bz,seekable:DB,getMediaInfoForTime:IB,isEnabled:tl,isDisabled:RB,isExcluded:Sz,isIncompatible:x6,playlistEnd:Cz,isAes:jB,hasAttribute:_z,estimateSegmentRequestTime:NB,isLowestEnabledRendition:q9,isAudioOnly:V5,playlistMatch:V6,segmentDurationWithParts:H6},{log:Tz}=$,w6=(e,t)=>`${e}-${t}`,FB=(e,t,a)=>`placeholder-uri-${e}-${t}-${a}`,UB=({onwarn:e,oninfo:t,manifestString:a,customTagParsers:r=[],customTagMappers:n=[],llhls:i})=>{let h=new wh;e&&h.on("warn",e),t&&h.on("info",t),r.forEach(v=>h.addParser(v)),n.forEach(v=>h.addTagMapper(v)),h.push(a),h.end();let l=h.manifest;if(i||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(v){l.hasOwnProperty(v)&&delete l[v]}),l.segments&&l.segments.forEach(function(v){["parts","preloadHints"].forEach(function(g){v.hasOwnProperty(g)&&delete v[g]})})),!l.targetDuration){let v=10;l.segments&&l.segments.length&&(v=l.segments.reduce((g,z)=>Math.max(g,z.duration),0)),e&&e(`manifest has no targetDuration defaulting to ${v}`),l.targetDuration=v}let c=Vz(l);if(c.length&&!l.partTargetDuration){let v=c.reduce((g,z)=>Math.max(g,z.duration),0);e&&(e(`manifest has no partTargetDuration defaulting to ${v}`),Tz.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),l.partTargetDuration=v}return l},nr=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(a=>{if(e.mediaGroups[a])for(let r in e.mediaGroups[a])for(let n in e.mediaGroups[a][r]){let i=e.mediaGroups[a][r][n];t(i,a,r,n)}})},bz=({playlist:e,uri:t,id:a})=>{e.id=a,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},$B=e=>{let t=e.playlists.length;for(;t--;){let a=e.playlists[t];bz({playlist:a,id:w6(t,a.uri)}),a.resolvedUri=he(e.uri,a.uri),e.playlists[a.id]=a,e.playlists[a.uri]=a,a.attributes.BANDWIDTH||Tz.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},WB=e=>{nr(e,t=>{t.uri&&(t.resolvedUri=he(e.uri,t.uri))})},GB=(e,t)=>{let a=w6(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:P.default.location.href,resolvedUri:P.default.location.href,playlists:[{uri:t,id:a,resolvedUri:t,attributes:{}}]};return r.playlists[a]=r.playlists[0],r.playlists[t]=r.playlists[0],r},Oz=(e,t,a=FB)=>{e.uri=t;for(let n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){let i=`placeholder-uri-${n}`;e.playlists[n].uri=i}let r=V5(e);nr(e,(n,i,h,l)=>{if(!n.playlists||!n.playlists.length){if(r&&i==="AUDIO"&&!n.uri)for(let c=0;c<e.playlists.length;c++){let v=e.playlists[c];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===h)return}n.playlists=[re({},n)]}n.playlists.forEach(function(c,v){let g=a(i,h,l,c),z=w6(v,g);c.uri?c.resolvedUri=c.resolvedUri||he(e.uri,c.uri):(c.uri=v===0?g:z,c.resolvedUri=c.uri),c.id=c.id||z,c.attributes=c.attributes||{},e.playlists[c.id]=c,e.playlists[c.uri]=c})}),$B(e),WB(e)},{EventTarget:qB}=$,KB=(e,t)=>{if(t.endList||!t.serverControl)return e;let a={};if(t.serverControl.canBlockReload){let{preloadSegment:r}=t,n=t.mediaSequence+t.segments.length;if(r){let i=r.parts||[],h=wz(t)-1;h>-1&&h!==i.length-1&&(a._HLS_part=h),(h>-1||i.length)&&n--}a._HLS_msn=n}if(t.serverControl&&t.serverControl.canSkipUntil&&(a._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(a).length){let r=new P.default.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){a.hasOwnProperty(n)&&r.searchParams.set(n,a[n])}),e=r.toString()}return e},XB=(e,t)=>{if(!e)return t;let a=J1(e,t);if(e.preloadHints&&!t.preloadHints&&delete a.preloadHints,e.parts&&!t.parts)delete a.parts;else if(e.parts&&t.parts)for(let r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(a.parts[r]=J1(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(a.skipped=!1),e.preload&&!t.preload&&(a.preload=!1),a},YB=(e,t,a)=>{let r=e.slice(),n=t.slice();a=a||0;let i=[],h;for(let l=0;l<n.length;l++){let c=r[l+a],v=n[l];c?(h=c.map||h,i.push(XB(c,v))):(h&&!v.map&&(v.map=h),i.push(v))}return i},Az=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=he(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=he(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=he(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=he(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(a=>{a.resolvedUri||(a.resolvedUri=he(t,a.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(a=>{a.resolvedUri||(a.resolvedUri=he(t,a.uri))})},Ez=function(e){let t=e.segments||[],a=e.preloadSegment;if(a&&a.parts&&a.parts.length){if(a.preloadHints){for(let r=0;r<a.preloadHints.length;r++)if(a.preloadHints[r].type==="MAP")return t}a.duration=e.targetDuration,a.preload=!0,t.push(a)}return t},kz=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,K9=(e,t,a=kz)=>{let r=J1(e,{}),n=r.playlists[t.id];if(!n||a(n,t))return null;t.segments=Ez(t);let i=J1(n,t);if(i.preloadSegment&&!t.preloadSegment&&delete i.preloadSegment,n.segments){if(t.skip){t.segments=t.segments||[];for(let h=0;h<t.skip.skippedSegments;h++)t.segments.unshift({skipped:!0})}i.segments=YB(n.segments,t.segments,t.mediaSequence-n.mediaSequence)}i.segments.forEach(h=>{Az(h,i.resolvedUri)});for(let h=0;h<r.playlists.length;h++)r.playlists[h].id===t.id&&(r.playlists[h]=i);return r.playlists[t.id]=i,r.playlists[t.uri]=i,nr(e,(h,l,c,v)=>{if(h.playlists)for(let g=0;g<h.playlists.length;g++)t.id===h.playlists[g].id&&(h.playlists[g]=i)}),r},X9=(e,t)=>{let a=e.segments||[],r=a[a.length-1],n=r&&r.parts&&r.parts[r.parts.length-1],i=n&&n.duration||r&&r.duration;return t&&i?i*1e3:(e.partTargetDuration||e.targetDuration||10)*500},A0=class extends qB{constructor(t,a,r={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=ce("PlaylistLoader");let{withCredentials:n=!1}=r;this.src=t,this.vhs_=a,this.withCredentials=n;let i=a.options_;this.customTagParsers=i&&i.customTagParsers||[],this.customTagMappers=i&&i.customTagMappers||[],this.llhls=i&&i.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;let t=this.media(),a=he(this.main.uri,t.uri);this.llhls&&(a=KB(a,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},(r,n)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(t,a,r){let{uri:n,id:i}=a;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[i],status:t.status,message:`HLS playlist request error at URL: ${n}.`,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}parseManifest_({url:t,manifestString:a}){return UB({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${t}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${t}: ${r}`),manifestString:a,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:t,playlistObject:a,url:r,id:n}){this.request=null,this.state="HAVE_METADATA";let i=a||this.parseManifest_({url:r,manifestString:t});i.lastRequest=Date.now(),bz({playlist:i,uri:r,id:n});let h=K9(this.main,i);this.targetDuration=i.partTargetDuration||i.targetDuration,this.pendingMedia_=null,h?(this.main=h,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(X9(this.media(),!!h)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),P.default.clearTimeout(this.mediaUpdateTimeout),P.default.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){let t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,a){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(P.default.clearTimeout(this.finalRenditionTimeout),a){let h=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=P.default.setTimeout(this.media.bind(this,t,!1),h);return}let r=this.state,n=!this.media_||t.id!==this.media_.id,i=this.main.playlists[t.id];if(i&&i.endList||t.endList&&t.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,n&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(X9(t,!0)),!!n){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(h,l)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=b3(t.resolvedUri,l),h)return this.playlistRequestError(this.request,t,r);this.haveMetadata({playlistString:l.responseText,url:t.uri,id:t.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);let a=this.media();if(t){let r=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=P.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=P.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=P.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(t,a)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:a.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:a.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=b3(this.src,a);let r=this.parseManifest_({manifestString:a.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists){this.main=t,Oz(this.main,this.srcUri()),t.playlists.forEach(r=>{r.segments=Ez(r),r.segments.forEach(n=>{Az(n,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}let a=this.srcUri()||P.default.location.href;this.main=GB(t,a),this.haveMetadata({playlistObject:t,url:a,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}},{xhr:QB}=$,Y9=function(e,t,a,r){let n=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&n&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=n.byteLength||n.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),a.headers&&(e.responseHeaders=a.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&a.statusCode!==200&&a.statusCode!==206&&a.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(n||e.responseText)))),r(t,e)},Pz=function(){let e=function t(a,r){a=J1({timeout:45e3},a);let n=t.beforeRequest||$.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){let c=n(a);c&&(a=c)}let h=($.Vhs.xhr.original===!0?QB:$.Vhs.xhr)(a,function(c,v){return Y9(h,c,v,r)}),l=h.abort;return h.abort=function(){return h.aborted=!0,l.apply(h,arguments)},h.uri=a.uri,h.requestTime=Date.now(),h};return e.original=!0,e},JB=function(e){let t,a=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=P.default.BigInt(e.offset)+P.default.BigInt(e.length)-P.default.BigInt(1):t=e.offset+e.length-1,"bytes="+a+"-"+t},Q9=function(e){let t={};return e.byterange&&(t.Range=JB(e.byterange)),t},ZB=function(e,t){return e.start(t)+"-"+e.end(t)},tC=function(e,t){let a=e.toString(16);return"00".substring(0,2-a.length)+a+(t%2?" ":"")},eC=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Dz=function(e){let t={};return Object.keys(e).forEach(a=>{let r=e[a];ws(r)?t[a]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[a]=r}),t},O3=function(e){let t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Iz=function(e){return e.resolvedUri},Rz=e=>{let t=Array.prototype.slice.call(e),a=16,r="",n,i;for(let h=0;h<t.length/a;h++)n=t.slice(h*a,h*a+a).map(tC).join(""),i=t.slice(h*a,h*a+a).map(eC).join(""),r+=n+" "+i+`
`;return r},aC=({bytes:e})=>Rz(e),rC=e=>{let t="",a;for(a=0;a<e.length;a++)t+=ZB(e,a)+" ";return t},nC=Object.freeze({__proto__:null,createTransferableMessage:Dz,initSegmentId:O3,segmentKeyId:Iz,hexDump:Rz,tagDump:aC,textRanges:rC}),jz=.25,iC=(e,t)=>{if(!t.dateTimeObject)return null;let a=t.videoTimingInfo.transmuxerPrependedSeconds,n=t.videoTimingInfo.transmuxedPresentationStart+a,i=e-n;return new Date(t.dateTimeObject.getTime()+i*1e3)},hC=e=>e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds,lC=(e,t)=>{let a;try{a=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;let r=t.segments[0];if(a<r.dateTimeObject)return null;for(let c=0;c<t.segments.length-1;c++){r=t.segments[c];let v=t.segments[c+1].dateTimeObject;if(a<v)break}let n=t.segments[t.segments.length-1],i=n.dateTimeObject,h=n.videoTimingInfo?hC(n.videoTimingInfo):n.duration+n.duration*jz,l=new Date(i.getTime()+h*1e3);return a>l?null:(a>i&&(r=n),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:u2.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},oC=(e,t)=>{if(!t||!t.segments||t.segments.length===0)return null;let a=0,r;for(let i=0;i<t.segments.length&&(r=t.segments[i],a=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:a+r.duration,!(e<=a));i++);let n=t.segments[t.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>a){if(e>a+n.duration*jz)return null;r=n}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:a-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},cC=(e,t)=>{let a,r;try{a=new Date(e),r=new Date(t)}catch{}let n=a.getTime();return(r.getTime()-n)/1e3},sC=e=>{if(!e.segments||e.segments.length===0)return!1;for(let t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0},vC=({playlist:e,time:t=void 0,callback:a})=>{if(!a)throw new Error("getProgramTime: callback must be provided");if(!e||t===void 0)return a({message:"getProgramTime: playlist and time must be provided"});let r=oC(t,e);if(!r)return a({message:"valid programTime was not found"});if(r.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});let n={mediaSeconds:t},i=iC(t,r.segment);return i&&(n.programDateTime=i.toISOString()),a(null,n)},Nz=({programTime:e,playlist:t,retryCount:a=2,seekTo:r,pauseAfterSeek:n=!0,tech:i,callback:h})=>{if(!h)throw new Error("seekToProgramTime: callback must be provided");if(typeof e>"u"||!t||!r)return h({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!i.hasStarted_)return h({message:"player must be playing a live stream to start buffering"});if(!sC(t))return h({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});let l=lC(e,t);if(!l)return h({message:`${e} was not found in the stream`});let c=l.segment,v=cC(c.dateTimeObject,e);if(l.type==="estimate"){if(a===0)return h({message:`${e} is not buffered yet. Try again`});r(l.estimatedStart+v),i.one("seeked",()=>{Nz({programTime:e,playlist:t,retryCount:a-1,seekTo:r,pauseAfterSeek:n,tech:i,callback:h})});return}let g=c.start+v,z=()=>h(null,i.currentTime());i.one("seeked",z),n&&i.pause(),r(g)},g9=(e,t)=>{if(e.readyState===4)return t()},dC=(e,t,a)=>{let r=[],n,i=!1,h=function(g,z,w,L){return z.abort(),i=!0,a(g,z,w,L)},l=function(g,z){if(i)return;if(g)return h(g,z,"",r);let w=z.responseText.substring(r&&r.byteLength||0,z.responseText.length);if(r=hg(r,Bh(w,!0)),n=n||M4(r),r.length<10||n&&r.length<n+2)return g9(z,()=>h(g,z,"",r));let L=Fh(r);return L==="ts"&&r.length<188?g9(z,()=>h(g,z,"",r)):!L&&r.length<376?g9(z,()=>h(g,z,"",r)):h(null,z,L,r)},v=t({uri:e,beforeSend(g){g.overrideMimeType("text/plain; charset=x-user-defined"),g.addEventListener("progress",function({total:z,loaded:w}){return Y9(g,null,{statusCode:g.status},l)})}},function(g,z){return Y9(v,g,z,l)});return v},{EventTarget:uC}=$,df=function(e,t){if(!kz(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let a=0;a<e.segments.length;a++){let r=e.segments[a],n=t.segments[a];if(r.uri!==n.uri)return!1;if(!r.byterange&&!n.byterange)continue;let i=r.byterange,h=n.byterange;if(i&&!h||!i&&h||i.offset!==h.offset||i.length!==h.length)return!1}return!0},gC=(e,t,a,r)=>{let n=r.attributes.NAME||a;return`placeholder-uri-${e}-${t}-${n}`},pC=({mainXml:e,srcUrl:t,clientOffset:a,sidxMapping:r,previousManifest:n})=>{let i=zp(e,{manifestUri:t,clientOffset:a,sidxMapping:r,previousManifest:n});return Oz(i,t,gC),i},fC=(e,t)=>{nr(e,(a,r,n,i)=>{i in t.mediaGroups[r][n]||delete e.mediaGroups[r][n][i]})},zC=(e,t,a)=>{let r=!0,n=J1(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let i=0;i<t.playlists.length;i++){let h=t.playlists[i];if(h.sidx){let c=jn(h.sidx);a&&a[c]&&a[c].sidx&&Ih(h,a[c].sidx,h.sidx.resolvedUri)}let l=K9(n,h,df);l&&(n=l,r=!1)}return nr(t,(i,h,l,c)=>{if(i.playlists&&i.playlists.length){let v=i.playlists[0].id,g=K9(n,i.playlists[0],df);g&&(n=g,c in n.mediaGroups[h][l]||(n.mediaGroups[h][l][c]=i),n.mediaGroups[h][l][c].playlists[0]=n.playlists[v],r=!1)}}),fC(n,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:n},MC=(e,t)=>(!e.map&&!t.map||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length,uf=(e,t)=>{let a={};for(let r in e){let i=e[r].sidx;if(i){let h=jn(i);if(!t[h])break;let l=t[h].sidxInfo;MC(l,i)&&(a[h]=t[h])}}return a},mC=(e,t)=>{let r=uf(e.playlists,t);return nr(e,(n,i,h,l)=>{if(n.playlists&&n.playlists.length){let c=n.playlists;r=J1(r,uf(c,t))}}),r},m5=class extends uC{constructor(t,a,r={},n){super(),this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);let{withCredentials:i=!1}=r;if(this.vhs_=a,this.withCredentials=i,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=ce("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}requestErrored_(t,a,r){if(!this.request)return!0;if(this.request=null,t)return this.error=typeof t=="object"&&!(t instanceof Error)?t:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(t,a,r){let n=t.sidx&&jn(t.sidx);if(!t.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){this.mediaRequest_=P.default.setTimeout(()=>r(!1),0);return}let i=b3(t.sidx.resolvedUri),h=(l,c)=>{if(this.requestErrored_(l,c,a))return;let v=this.mainPlaylistLoader_.sidxMapping_,g;try{g=(0,Tf.default)(M1(c.response).subarray(8))}catch(z){this.requestErrored_(z,c,a);return}return v[n]={sidxInfo:t.sidx,sidx:g},Ih(t,g,t.sidx.resolvedUri),r(!0)};this.request=dC(i,this.vhs_.xhr,(l,c,v,g)=>{if(l)return h(l,c);if(!v||v!=="mp4")return h({status:c.status,message:`Unsupported ${v||"unknown"} container type for sidx segment at URL: ${i}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},c);let{offset:z,length:w}=t.sidx.byterange;if(g.length>=w+z)return h(l,{response:g.subarray(z,z+w),status:c.status,uri:c.uri});this.request=this.vhs_.xhr({uri:i,responseType:"arraybuffer",headers:Q9({byterange:t.sidx.byterange})},h)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},P.default.clearTimeout(this.minimumUpdatePeriodTimeout_),P.default.clearTimeout(this.mediaRequest_),P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){let t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);let a=this.state;if(typeof t=="string"){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}let r=!this.media_||t.id!==this.media_.id;if(r&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA",this.media_=t,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,a,n=>{this.haveMetadata({startingState:a,playlist:t})}))}haveMetadata({startingState:t,playlist:a}){this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),t==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(P.default.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(t){P.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;let a=this.media();if(t){let r=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=P.default.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=P.default.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((t,a)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(t){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(a,r)=>{if(this.requestErrored_(a,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}let n=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=b3(this.mainPlaylistLoader_.srcUrl,r),n){this.handleMain_(),this.syncClientServerClock_(()=>t(r,n));return}return t(r,n)})}syncClientServerClock_(t){let a=Mp(this.mainPlaylistLoader_.mainXml_);if(a===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();if(a.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=a.value-Date.now(),t();this.request=this.vhs_.xhr({uri:he(this.mainPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},(r,n)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();let i;a.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?i=this.mainLoaded_:i=Date.parse(n.responseHeaders.date):i=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=i-Date.now(),t()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;let t=this.mainPlaylistLoader_.main,a=pC({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(a=zC(t,a,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=a||t;let r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!t||a&&a.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!a}updateMinimumUpdatePeriodTimeout_(){let t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(P.default.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let a=t.main&&t.main.minimumUpdatePeriod;if(a===0&&(t.media()?a=t.media().targetDuration*1e3:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_(`found invalid minimumUpdatePeriod of ${a}, not setting a timeout`);return}this.createMUPTimeout_(a)}createMUPTimeout_(t){let a=this.mainPlaylistLoader_;a.minimumUpdatePeriodTimeout_=P.default.setTimeout(()=>{a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,a)=>{a&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=mC(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();let a=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==a[t];if(r?this.media_=a[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let n=()=>{this.media().endList||(this.mediaUpdateTimeout=P.default.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},X9(this.media(),!!r)))};n()}this.trigger("loadedplaylist")}},St={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},HC=e=>{let t=new Uint8Array(new ArrayBuffer(e.length));for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t.buffer},Fz=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},xC=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{let a=new BlobBuilder;return a.append(e),URL.createObjectURL(a.getBlob())}},Uz=function(e){return function(){let t=xC(e),a=Fz(new Worker(t));a.objURL=t;let r=a.terminate;return a.on=a.addEventListener,a.off=a.removeEventListener,a.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},a}},$z=function(e){return`var browserWorkerPolyFill = ${Fz.toString()};
browserWorkerPolyFill(self);
`+e},Wz=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},VC=$z(Wz(function(){var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=function(){this.init=function(){var o={};this.on=function(s,u){o[s]||(o[s]=[]),o[s]=o[s].concat(u)},this.off=function(s,u){var d;return o[s]?(d=o[s].indexOf(u),o[s]=o[s].slice(),o[s].splice(d,1),d>-1):!1},this.trigger=function(s){var u,d,p,f;if(u=o[s],!!u)if(arguments.length===2)for(p=u.length,d=0;d<p;++d)u[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(p=u.length,d=0;d<p;++d)u[d].apply(this,f)}},this.dispose=function(){o={}}}};t.prototype.pipe=function(o){return this.on("data",function(s){o.push(s)}),this.on("done",function(s){o.flush(s)}),this.on("partialdone",function(s){o.partialFlush(s)}),this.on("endedtimeline",function(s){o.endTimeline(s)}),this.on("reset",function(s){o.reset(s)}),o},t.prototype.push=function(o){this.trigger("data",o)},t.prototype.flush=function(o){this.trigger("done",o)},t.prototype.partialFlush=function(o){this.trigger("partialdone",o)},t.prototype.endTimeline=function(o){this.trigger("endedtimeline",o)},t.prototype.reset=function(o){this.trigger("reset",o)};var a=t,r=Math.pow(2,32),n=function(o){var s=new DataView(o.buffer,o.byteOffset,o.byteLength),u;return s.getBigUint64?(u=s.getBigUint64(0),u<Number.MAX_SAFE_INTEGER?Number(u):u):s.getUint32(0)*r+s.getUint32(4)},i={getUint64:n,MAX_UINT32:r},h=i.MAX_UINT32,l,c,v,g,z,w,L,V,b,k,m,H,y,B,_,j,U,q,D,J,t1,Z,F,c1,a1,l1,s1,m1,O1,k1,q1,A1,Mt,U2,de,$2;(function(){var o;if(F={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(o in F)F.hasOwnProperty(o)&&(F[o]=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)]);c1=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),l1=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),a1=new Uint8Array([0,0,0,1]),s1=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),m1=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),O1={video:s1,audio:m1},A1=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),q1=new Uint8Array([0,0,0,0,0,0,0,0]),Mt=new Uint8Array([0,0,0,0,0,0,0,0]),U2=Mt,de=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),$2=Mt,k1=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),l=function(o){var s=[],u=0,d,p,f;for(d=1;d<arguments.length;d++)s.push(arguments[d]);for(d=s.length;d--;)u+=s[d].byteLength;for(p=new Uint8Array(u+8),f=new DataView(p.buffer,p.byteOffset,p.byteLength),f.setUint32(0,p.byteLength),p.set(o,4),d=0,u=8;d<s.length;d++)p.set(s[d],u),u+=s[d].byteLength;return p},c=function(){return l(F.dinf,l(F.dref,A1))},v=function(o){return l(F.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,o.audioobjecttype<<3|o.samplingfrequencyindex>>>1,o.samplingfrequencyindex<<7|o.channelcount<<3,6,1,2]))},g=function(){return l(F.ftyp,c1,a1,c1,l1)},j=function(o){return l(F.hdlr,O1[o])},z=function(o){return l(F.mdat,o)},_=function(o){var s=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,o.duration>>>24&255,o.duration>>>16&255,o.duration>>>8&255,o.duration&255,85,196,0,0]);return o.samplerate&&(s[12]=o.samplerate>>>24&255,s[13]=o.samplerate>>>16&255,s[14]=o.samplerate>>>8&255,s[15]=o.samplerate&255),l(F.mdhd,s)},B=function(o){return l(F.mdia,_(o),j(o.type),L(o))},w=function(o){return l(F.mfhd,new Uint8Array([0,0,0,0,(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255]))},L=function(o){return l(F.minf,o.type==="video"?l(F.vmhd,k1):l(F.smhd,q1),c(),q(o))},V=function(o,s){for(var u=[],d=s.length;d--;)u[d]=J(s[d]);return l.apply(null,[F.moof,w(o)].concat(u))},b=function(o){for(var s=o.length,u=[];s--;)u[s]=H(o[s]);return l.apply(null,[F.moov,m(4294967295)].concat(u).concat(k(o)))},k=function(o){for(var s=o.length,u=[];s--;)u[s]=t1(o[s]);return l.apply(null,[F.mvex].concat(u))},m=function(o){var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(F.mvhd,s)},U=function(o){var s=o.samples||[],u=new Uint8Array(4+s.length),d,p;for(p=0;p<s.length;p++)d=s[p].flags,u[p+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy;return l(F.sdtp,u)},q=function(o){return l(F.stbl,D(o),l(F.stts,$2),l(F.stsc,U2),l(F.stsz,de),l(F.stco,Mt))},function(){var o,s;D=function(u){return l(F.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),u.type==="video"?o(u):s(u))},o=function(u){var d=u.sps||[],p=u.pps||[],f=[],C=[],T,O;for(T=0;T<d.length;T++)f.push((d[T].byteLength&65280)>>>8),f.push(d[T].byteLength&255),f=f.concat(Array.prototype.slice.call(d[T]));for(T=0;T<p.length;T++)C.push((p[T].byteLength&65280)>>>8),C.push(p[T].byteLength&255),C=C.concat(Array.prototype.slice.call(p[T]));if(O=[F.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(u.width&65280)>>8,u.width&255,(u.height&65280)>>8,u.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(F.avcC,new Uint8Array([1,u.profileIdc,u.profileCompatibility,u.levelIdc,255].concat([d.length],f,[p.length],C))),l(F.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],u.sarRatio){var A=u.sarRatio[0],I=u.sarRatio[1];O.push(l(F.pasp,new Uint8Array([(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255,(I&4278190080)>>24,(I&16711680)>>16,(I&65280)>>8,I&255])))}return l.apply(null,O)},s=function(u){return l(F.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(u.channelcount&65280)>>8,u.channelcount&255,(u.samplesize&65280)>>8,u.samplesize&255,0,0,0,0,(u.samplerate&65280)>>8,u.samplerate&255,0,0]),v(u))}}(),y=function(o){var s=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(o.id&4278190080)>>24,(o.id&16711680)>>16,(o.id&65280)>>8,o.id&255,0,0,0,0,(o.duration&4278190080)>>24,(o.duration&16711680)>>16,(o.duration&65280)>>8,o.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(o.width&65280)>>8,o.width&255,0,0,(o.height&65280)>>8,o.height&255,0,0]);return l(F.tkhd,s)},J=function(o){var s,u,d,p,f,C,T;return s=l(F.tfhd,new Uint8Array([0,0,0,58,(o.id&4278190080)>>24,(o.id&16711680)>>16,(o.id&65280)>>8,o.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),C=Math.floor(o.baseMediaDecodeTime/h),T=Math.floor(o.baseMediaDecodeTime%h),u=l(F.tfdt,new Uint8Array([1,0,0,0,C>>>24&255,C>>>16&255,C>>>8&255,C&255,T>>>24&255,T>>>16&255,T>>>8&255,T&255])),f=32+20+8+16+8+8,o.type==="audio"?(d=Z(o,f),l(F.traf,s,u,d)):(p=U(o),d=Z(o,p.length+f),l(F.traf,s,u,d,p))},H=function(o){return o.duration=o.duration||4294967295,l(F.trak,y(o),B(o))},t1=function(o){var s=new Uint8Array([0,0,0,0,(o.id&4278190080)>>24,(o.id&16711680)>>16,(o.id&65280)>>8,o.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return o.type!=="video"&&(s[s.length-1]=0),l(F.trex,s)},function(){var o,s,u;u=function(d,p){var f=0,C=0,T=0,O=0;return d.length&&(d[0].duration!==void 0&&(f=1),d[0].size!==void 0&&(C=2),d[0].flags!==void 0&&(T=4),d[0].compositionTimeOffset!==void 0&&(O=8)),[0,0,f|C|T|O,1,(d.length&4278190080)>>>24,(d.length&16711680)>>>16,(d.length&65280)>>>8,d.length&255,(p&4278190080)>>>24,(p&16711680)>>>16,(p&65280)>>>8,p&255]},s=function(d,p){var f,C,T,O,A,I;for(O=d.samples||[],p+=8+12+16*O.length,T=u(O,p),C=new Uint8Array(T.length+O.length*16),C.set(T),f=T.length,I=0;I<O.length;I++)A=O[I],C[f++]=(A.duration&4278190080)>>>24,C[f++]=(A.duration&16711680)>>>16,C[f++]=(A.duration&65280)>>>8,C[f++]=A.duration&255,C[f++]=(A.size&4278190080)>>>24,C[f++]=(A.size&16711680)>>>16,C[f++]=(A.size&65280)>>>8,C[f++]=A.size&255,C[f++]=A.flags.isLeading<<2|A.flags.dependsOn,C[f++]=A.flags.isDependedOn<<6|A.flags.hasRedundancy<<4|A.flags.paddingValue<<1|A.flags.isNonSyncSample,C[f++]=A.flags.degradationPriority&61440,C[f++]=A.flags.degradationPriority&15,C[f++]=(A.compositionTimeOffset&4278190080)>>>24,C[f++]=(A.compositionTimeOffset&16711680)>>>16,C[f++]=(A.compositionTimeOffset&65280)>>>8,C[f++]=A.compositionTimeOffset&255;return l(F.trun,C)},o=function(d,p){var f,C,T,O,A,I;for(O=d.samples||[],p+=8+12+8*O.length,T=u(O,p),f=new Uint8Array(T.length+O.length*8),f.set(T),C=T.length,I=0;I<O.length;I++)A=O[I],f[C++]=(A.duration&4278190080)>>>24,f[C++]=(A.duration&16711680)>>>16,f[C++]=(A.duration&65280)>>>8,f[C++]=A.duration&255,f[C++]=(A.size&4278190080)>>>24,f[C++]=(A.size&16711680)>>>16,f[C++]=(A.size&65280)>>>8,f[C++]=A.size&255;return l(F.trun,f)},Z=function(d,p){return d.type==="audio"?o(d,p):s(d,p)}}();var mt={ftyp:g,mdat:z,moof:V,moov:b,initSegment:function(o){var s=g(),u=b(o),d;return d=new Uint8Array(s.byteLength+u.byteLength),d.set(s),d.set(u,s.byteLength),d}},C2=function(o){var s,u,d=[],p=[];for(p.byteLength=0,p.nalCount=0,p.duration=0,d.byteLength=0,s=0;s<o.length;s++)u=o[s],u.nalUnitType==="access_unit_delimiter_rbsp"?(d.length&&(d.duration=u.dts-d.dts,p.byteLength+=d.byteLength,p.nalCount+=d.length,p.duration+=d.duration,p.push(d)),d=[u],d.byteLength=u.data.byteLength,d.pts=u.pts,d.dts=u.dts):(u.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(d.keyFrame=!0),d.duration=u.dts-d.dts,d.byteLength+=u.data.byteLength,d.push(u));return p.length&&(!d.duration||d.duration<=0)&&(d.duration=p[p.length-1].duration),p.byteLength+=d.byteLength,p.nalCount+=d.length,p.duration+=d.duration,p.push(d),p},$0=function(o){var s,u,d=[],p=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=o[0].pts,d.dts=o[0].dts,p.byteLength=0,p.nalCount=0,p.duration=0,p.pts=o[0].pts,p.dts=o[0].dts,s=0;s<o.length;s++)u=o[s],u.keyFrame?(d.length&&(p.push(d),p.byteLength+=d.byteLength,p.nalCount+=d.nalCount,p.duration+=d.duration),d=[u],d.nalCount=u.length,d.byteLength=u.byteLength,d.pts=u.pts,d.dts=u.dts,d.duration=u.duration):(d.duration+=u.duration,d.nalCount+=u.length,d.byteLength+=u.byteLength,d.push(u));return p.length&&d.duration<=0&&(d.duration=p[p.length-1].duration),p.byteLength+=d.byteLength,p.nalCount+=d.nalCount,p.duration+=d.duration,p.push(d),p},p2=function(o){var s;return!o[0][0].keyFrame&&o.length>1&&(s=o.shift(),o.byteLength-=s.byteLength,o.nalCount-=s.nalCount,o[0][0].dts=s.dts,o[0][0].pts=s.pts,o[0][0].duration+=s.duration),o},sl=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},lr=function(o,s){var u=sl();return u.dataOffset=s,u.compositionTimeOffset=o.pts-o.dts,u.duration=o.duration,u.size=4*o.length,u.size+=o.byteLength,o.keyFrame&&(u.flags.dependsOn=2,u.flags.isNonSyncSample=0),u},vl=function(o,s){var u,d,p,f,C,T=s||0,O=[];for(u=0;u<o.length;u++)for(f=o[u],d=0;d<f.length;d++)C=f[d],p=lr(C,T),T+=p.size,O.push(p);return O},h0=function(o){var s,u,d,p,f,C,T=0,O=o.byteLength,A=o.nalCount,I=O+4*A,G=new Uint8Array(I),v1=new DataView(G.buffer);for(s=0;s<o.length;s++)for(p=o[s],u=0;u<p.length;u++)for(f=p[u],d=0;d<f.length;d++)C=f[d],v1.setUint32(T,C.data.byteLength),T+=4,G.set(C.data,T),T+=C.data.byteLength;return G},dl=function(o,s){var u,d=s||0,p=[];return u=lr(o,d),p.push(u),p},or=function(o){var s,u,d=0,p=o.byteLength,f=o.length,C=p+4*f,T=new Uint8Array(C),O=new DataView(T.buffer);for(s=0;s<o.length;s++)u=o[s],O.setUint32(d,u.data.byteLength),d+=4,T.set(u.data,d),d+=u.data.byteLength;return T},W2={groupNalsIntoFrames:C2,groupFramesIntoGops:$0,extendFirstKeyFrame:p2,generateSampleTable:vl,concatenateNalData:h0,generateSampleTableForFrame:dl,concatenateNalDataForFrame:or},ue=[33,16,5,32,164,27],k4=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],P1=function(o){for(var s=[];o--;)s.push(0);return s},cr=function(o){return Object.keys(o).reduce(function(s,u){return s[u]=new Uint8Array(o[u].reduce(function(d,p){return d.concat(p)},[])),s},{})},sr,W0=function(){if(!sr){var o={96e3:[ue,[227,64],P1(154),[56]],88200:[ue,[231],P1(170),[56]],64e3:[ue,[248,192],P1(240),[56]],48e3:[ue,[255,192],P1(268),[55,148,128],P1(54),[112]],44100:[ue,[255,192],P1(268),[55,163,128],P1(84),[112]],32e3:[ue,[255,192],P1(268),[55,234],P1(226),[112]],24e3:[ue,[255,192],P1(268),[55,255,128],P1(268),[111,112],P1(126),[224]],16e3:[ue,[255,192],P1(268),[55,255,128],P1(268),[111,255],P1(269),[223,108],P1(195),[1,192]],12e3:[k4,P1(268),[3,127,248],P1(268),[6,255,240],P1(268),[13,255,224],P1(268),[27,253,128],P1(259),[56]],11025:[k4,P1(268),[3,127,248],P1(268),[6,255,240],P1(268),[13,255,224],P1(268),[27,255,192],P1(268),[55,175,128],P1(108),[112]],8e3:[k4,P1(268),[3,121,16],P1(47),[7]]};sr=cr(o)}return sr},G2=9e4,vr,dr,G0,ur,C5,S5,_5;vr=function(o){return o*G2},dr=function(o,s){return o*s},G0=function(o){return o/G2},ur=function(o,s){return o/s},C5=function(o,s){return vr(ur(o,s))},S5=function(o,s){return dr(G0(o),s)},_5=function(o,s,u){return G0(u?o:o-s)};var I1={ONE_SECOND_IN_TS:G2,secondsToVideoTs:vr,secondsToAudioTs:dr,videoTsToSeconds:G0,audioTsToSeconds:ur,audioTsToVideoTs:C5,videoTsToAudioTs:S5,metadataTsToSeconds:_5},gr=W0,P4=I1,q0=function(o){var s,u,d=0;for(s=0;s<o.length;s++)u=o[s],d+=u.data.byteLength;return d},x=function(o,s,u,d){var p,f=0,C=0,T=0,O=0,A,I,G;if(s.length&&(p=P4.audioTsToVideoTs(o.baseMediaDecodeTime,o.samplerate),f=Math.ceil(P4.ONE_SECOND_IN_TS/(o.samplerate/1024)),u&&d&&(C=p-Math.max(u,d),T=Math.floor(C/f),O=T*f),!(T<1||O>P4.ONE_SECOND_IN_TS/2))){for(A=gr()[o.samplerate],A||(A=s[0].data),I=0;I<T;I++)G=s[0],s.splice(0,0,{data:A,dts:G.dts-f,pts:G.pts-f});return o.baseMediaDecodeTime-=Math.floor(P4.videoTsToAudioTs(O,o.samplerate)),O}},M=function(o,s,u){return s.minSegmentDts>=u?o:(s.minSegmentDts=1/0,o.filter(function(d){return d.dts>=u?(s.minSegmentDts=Math.min(s.minSegmentDts,d.dts),s.minSegmentPts=s.minSegmentDts,!0):!1}))},S=function(o){var s,u,d=[];for(s=0;s<o.length;s++)u=o[s],d.push({size:u.data.byteLength,duration:1024});return d},E=function(o){var s,u,d=0,p=new Uint8Array(q0(o));for(s=0;s<o.length;s++)u=o[s],p.set(u.data,d),d+=u.data.byteLength;return p},R={prefixWithSilence:x,trimAdtsFramesByEarliestDts:M,generateSampleTable:S,concatenateFrameData:E},K=I1.ONE_SECOND_IN_TS,N=function(o,s){typeof s.pts=="number"&&(o.timelineStartInfo.pts===void 0&&(o.timelineStartInfo.pts=s.pts),o.minSegmentPts===void 0?o.minSegmentPts=s.pts:o.minSegmentPts=Math.min(o.minSegmentPts,s.pts),o.maxSegmentPts===void 0?o.maxSegmentPts=s.pts:o.maxSegmentPts=Math.max(o.maxSegmentPts,s.pts)),typeof s.dts=="number"&&(o.timelineStartInfo.dts===void 0&&(o.timelineStartInfo.dts=s.dts),o.minSegmentDts===void 0?o.minSegmentDts=s.dts:o.minSegmentDts=Math.min(o.minSegmentDts,s.dts),o.maxSegmentDts===void 0?o.maxSegmentDts=s.dts:o.maxSegmentDts=Math.max(o.maxSegmentDts,s.dts))},W=function(o){delete o.minSegmentDts,delete o.maxSegmentDts,delete o.minSegmentPts,delete o.maxSegmentPts},X=function(o,s){var u,d,p=o.minSegmentDts;return s||(p-=o.timelineStartInfo.dts),u=o.timelineStartInfo.baseMediaDecodeTime,u+=p,u=Math.max(0,u),o.type==="audio"&&(d=o.samplerate/K,u*=d,u=Math.floor(u)),u},o1={clearDtsInfo:W,calculateTrackBaseMediaDecodeTime:X,collectDtsInfo:N},r1=4,u1=128,f1=function(o){for(var s=0,u={payloadType:-1,payloadSize:0},d=0,p=0;s<o.byteLength&&o[s]!==u1;){for(;o[s]===255;)d+=255,s++;for(d+=o[s++];o[s]===255;)p+=255,s++;if(p+=o[s++],!u.payload&&d===r1){var f=String.fromCharCode(o[s+3],o[s+4],o[s+5],o[s+6]);if(f==="GA94"){u.payloadType=d,u.payloadSize=p,u.payload=o.subarray(s,s+p);break}else u.payload=void 0}s+=p,d=0,p=0}return u},n1=function(o){return o.payload[0]!==181||(o.payload[1]<<8|o.payload[2])!==49||String.fromCharCode(o.payload[3],o.payload[4],o.payload[5],o.payload[6])!=="GA94"||o.payload[7]!==3?null:o.payload.subarray(8,o.payload.length-1)},i1=function(o,s){var u=[],d,p,f,C;if(!(s[0]&64))return u;for(p=s[0]&31,d=0;d<p;d++)f=d*3,C={type:s[f+2]&3,pts:o},s[f+2]&4&&(C.ccData=s[f+3]<<8|s[f+4],u.push(C));return u},x1=function(o){for(var s=o.byteLength,u=[],d=1,p,f;d<s-2;)o[d]===0&&o[d+1]===0&&o[d+2]===3?(u.push(d+2),d+=2):d++;if(u.length===0)return o;p=s-u.length,f=new Uint8Array(p);var C=0;for(d=0;d<p;C++,d++)C===u[0]&&(C++,u.shift()),f[d]=o[C];return f},T1={parseSei:f1,parseUserData:n1,parseCaptionPackets:i1,discardEmulationPreventionBytes:x1,USER_DATA_REGISTERED_ITU_T_T35:r1},D1=a,C1=T1,g1=function(o){o=o||{},g1.prototype.init.call(this),this.parse708captions_=typeof o.parse708captions=="boolean"?o.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new rt(0,0),new rt(0,1),new rt(1,0),new rt(1,1)],this.parse708captions_&&(this.cc708Stream_=new B1({captionServices:o.captionServices})),this.reset(),this.ccStreams_.forEach(function(s){s.on("data",this.trigger.bind(this,"data")),s.on("partialdone",this.trigger.bind(this,"partialdone")),s.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};g1.prototype=new D1,g1.prototype.push=function(o){var s,u,d;if(o.nalUnitType==="sei_rbsp"&&(s=C1.parseSei(o.escapedRBSP),!!s.payload&&s.payloadType===C1.USER_DATA_REGISTERED_ITU_T_T35&&(u=C1.parseUserData(s),!!u))){if(o.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(o.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}d=C1.parseCaptionPackets(o.pts,u),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==o.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=o.dts}},g1.prototype.flushCCStreams=function(o){this.ccStreams_.forEach(function(s){return o==="flush"?s.flush():s.partialFlush()},this)},g1.prototype.flushStream=function(o){if(!this.captionPackets_.length){this.flushCCStreams(o);return}this.captionPackets_.forEach(function(s,u){s.presortIndex=u}),this.captionPackets_.sort(function(s,u){return s.pts===u.pts?s.presortIndex-u.presortIndex:s.pts-u.pts}),this.captionPackets_.forEach(function(s){s.type<2?this.dispatchCea608Packet(s):this.dispatchCea708Packet(s)},this),this.captionPackets_.length=0,this.flushCCStreams(o)},g1.prototype.flush=function(){return this.flushStream("flush")},g1.prototype.partialFlush=function(){return this.flushStream("partialFlush")},g1.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(o){o.reset()})},g1.prototype.dispatchCea608Packet=function(o){this.setsTextOrXDSActive(o)?this.activeCea608Channel_[o.type]=null:this.setsChannel1Active(o)?this.activeCea608Channel_[o.type]=0:this.setsChannel2Active(o)&&(this.activeCea608Channel_[o.type]=1),this.activeCea608Channel_[o.type]!==null&&this.ccStreams_[(o.type<<1)+this.activeCea608Channel_[o.type]].push(o)},g1.prototype.setsChannel1Active=function(o){return(o.ccData&30720)===4096},g1.prototype.setsChannel2Active=function(o){return(o.ccData&30720)===6144},g1.prototype.setsTextOrXDSActive=function(o){return(o.ccData&28928)===256||(o.ccData&30974)===4138||(o.ccData&30974)===6186},g1.prototype.dispatchCea708Packet=function(o){this.parse708captions_&&this.cc708Stream_.push(o)};var $1={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},et=function(o){var s=$1[o]||o;return o&4096&&o===s?"":String.fromCharCode(s)},at=function(o){return 32<=o&&o<=127||160<=o&&o<=255},R1=function(o){this.windowNum=o,this.reset()};R1.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},R1.prototype.getText=function(){return this.rows.join(`
`)},R1.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},R1.prototype.newLine=function(o){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(o),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},R1.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},R1.prototype.addText=function(o){this.rows[this.rowIdx]+=o},R1.prototype.backspace=function(){if(!this.isEmpty()){var o=this.rows[this.rowIdx];this.rows[this.rowIdx]=o.substr(0,o.length-1)}};var Ht=function(o,s,u){this.serviceNum=o,this.text="",this.currentWindow=new R1(-1),this.windows=[],this.stream=u,typeof s=="string"&&this.createTextDecoder(s)};Ht.prototype.init=function(o,s){this.startPts=o;for(var u=0;u<8;u++)this.windows[u]=new R1(u),typeof s=="function"&&(this.windows[u].beforeRowOverflow=s)},Ht.prototype.setCurrentWindow=function(o){this.currentWindow=this.windows[o]},Ht.prototype.createTextDecoder=function(o){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(o)}catch(s){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+o+" encoding. "+s})}};var B1=function(o){o=o||{},B1.prototype.init.call(this);var s=this,u=o.captionServices||{},d={},p;Object.keys(u).forEach(f=>{p=u[f],/^SERVICE/.test(f)&&(d[f]=p.encoding)}),this.serviceEncodings=d,this.current708Packet=null,this.services={},this.push=function(f){f.type===3?(s.new708Packet(),s.add708Bytes(f)):(s.current708Packet===null&&s.new708Packet(),s.add708Bytes(f))}};B1.prototype=new D1,B1.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},B1.prototype.add708Bytes=function(o){var s=o.ccData,u=s>>>8,d=s&255;this.current708Packet.ptsVals.push(o.pts),this.current708Packet.data.push(u),this.current708Packet.data.push(d)},B1.prototype.push708Packet=function(){var o=this.current708Packet,s=o.data,u=null,d=null,p=0,f=s[p++];for(o.seq=f>>6,o.sizeCode=f&63;p<s.length;p++)f=s[p++],u=f>>5,d=f&31,u===7&&d>0&&(f=s[p++],u=f),this.pushServiceBlock(u,p,d),d>0&&(p+=d-1)},B1.prototype.pushServiceBlock=function(o,s,u){var d,p=s,f=this.current708Packet.data,C=this.services[o];for(C||(C=this.initService(o,p));p<s+u&&p<f.length;p++)d=f[p],at(d)?p=this.handleText(p,C):d===24?p=this.multiByteCharacter(p,C):d===16?p=this.extendedCommands(p,C):128<=d&&d<=135?p=this.setCurrentWindow(p,C):152<=d&&d<=159?p=this.defineWindow(p,C):d===136?p=this.clearWindows(p,C):d===140?p=this.deleteWindows(p,C):d===137?p=this.displayWindows(p,C):d===138?p=this.hideWindows(p,C):d===139?p=this.toggleWindows(p,C):d===151?p=this.setWindowAttributes(p,C):d===144?p=this.setPenAttributes(p,C):d===145?p=this.setPenColor(p,C):d===146?p=this.setPenLocation(p,C):d===143?C=this.reset(p,C):d===8?C.currentWindow.backspace():d===12?C.currentWindow.clearText():d===13?C.currentWindow.pendingNewLine=!0:d===14?C.currentWindow.clearText():d===141&&p++},B1.prototype.extendedCommands=function(o,s){var u=this.current708Packet.data,d=u[++o];return at(d)&&(o=this.handleText(o,s,{isExtended:!0})),o},B1.prototype.getPts=function(o){return this.current708Packet.ptsVals[Math.floor(o/2)]},B1.prototype.initService=function(o,s){var d="SERVICE"+o,u=this,d,p;return d in this.serviceEncodings&&(p=this.serviceEncodings[d]),this.services[o]=new Ht(o,p,u),this.services[o].init(this.getPts(s),function(f){u.flushDisplayed(f,u.services[o])}),this.services[o]},B1.prototype.handleText=function(o,s,u){var d=u&&u.isExtended,p=u&&u.isMultiByte,f=this.current708Packet.data,C=d?4096:0,T=f[o],O=f[o+1],A=s.currentWindow,I,G;return s.textDecoder_&&!d?(p?(G=[T,O],o++):G=[T],I=s.textDecoder_.decode(new Uint8Array(G))):I=et(C|T),A.pendingNewLine&&!A.isEmpty()&&A.newLine(this.getPts(o)),A.pendingNewLine=!1,A.addText(I),o},B1.prototype.multiByteCharacter=function(o,s){var u=this.current708Packet.data,d=u[o+1],p=u[o+2];return at(d)&&at(p)&&(o=this.handleText(++o,s,{isMultiByte:!0})),o},B1.prototype.setCurrentWindow=function(o,s){var u=this.current708Packet.data,d=u[o],p=d&7;return s.setCurrentWindow(p),o},B1.prototype.defineWindow=function(o,s){var u=this.current708Packet.data,d=u[o],p=d&7;s.setCurrentWindow(p);var f=s.currentWindow;return d=u[++o],f.visible=(d&32)>>5,f.rowLock=(d&16)>>4,f.columnLock=(d&8)>>3,f.priority=d&7,d=u[++o],f.relativePositioning=(d&128)>>7,f.anchorVertical=d&127,d=u[++o],f.anchorHorizontal=d,d=u[++o],f.anchorPoint=(d&240)>>4,f.rowCount=d&15,d=u[++o],f.columnCount=d&63,d=u[++o],f.windowStyle=(d&56)>>3,f.penStyle=d&7,f.virtualRowCount=f.rowCount+1,o},B1.prototype.setWindowAttributes=function(o,s){var u=this.current708Packet.data,d=u[o],p=s.currentWindow.winAttr;return d=u[++o],p.fillOpacity=(d&192)>>6,p.fillRed=(d&48)>>4,p.fillGreen=(d&12)>>2,p.fillBlue=d&3,d=u[++o],p.borderType=(d&192)>>6,p.borderRed=(d&48)>>4,p.borderGreen=(d&12)>>2,p.borderBlue=d&3,d=u[++o],p.borderType+=(d&128)>>5,p.wordWrap=(d&64)>>6,p.printDirection=(d&48)>>4,p.scrollDirection=(d&12)>>2,p.justify=d&3,d=u[++o],p.effectSpeed=(d&240)>>4,p.effectDirection=(d&12)>>2,p.displayEffect=d&3,o},B1.prototype.flushDisplayed=function(o,s){for(var u=[],d=0;d<8;d++)s.windows[d].visible&&!s.windows[d].isEmpty()&&u.push(s.windows[d].getText());s.endPts=o,s.text=u.join(`

`),this.pushCaption(s),s.startPts=o},B1.prototype.pushCaption=function(o){o.text!==""&&(this.trigger("data",{startPts:o.startPts,endPts:o.endPts,text:o.text,stream:"cc708_"+o.serviceNum}),o.text="",o.startPts=o.endPts)},B1.prototype.displayWindows=function(o,s){var u=this.current708Packet.data,d=u[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var f=0;f<8;f++)d&1<<f&&(s.windows[f].visible=1);return o},B1.prototype.hideWindows=function(o,s){var u=this.current708Packet.data,d=u[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var f=0;f<8;f++)d&1<<f&&(s.windows[f].visible=0);return o},B1.prototype.toggleWindows=function(o,s){var u=this.current708Packet.data,d=u[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var f=0;f<8;f++)d&1<<f&&(s.windows[f].visible^=1);return o},B1.prototype.clearWindows=function(o,s){var u=this.current708Packet.data,d=u[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var f=0;f<8;f++)d&1<<f&&s.windows[f].clearText();return o},B1.prototype.deleteWindows=function(o,s){var u=this.current708Packet.data,d=u[++o],p=this.getPts(o);this.flushDisplayed(p,s);for(var f=0;f<8;f++)d&1<<f&&s.windows[f].reset();return o},B1.prototype.setPenAttributes=function(o,s){var u=this.current708Packet.data,d=u[o],p=s.currentWindow.penAttr;return d=u[++o],p.textTag=(d&240)>>4,p.offset=(d&12)>>2,p.penSize=d&3,d=u[++o],p.italics=(d&128)>>7,p.underline=(d&64)>>6,p.edgeType=(d&56)>>3,p.fontStyle=d&7,o},B1.prototype.setPenColor=function(o,s){var u=this.current708Packet.data,d=u[o],p=s.currentWindow.penColor;return d=u[++o],p.fgOpacity=(d&192)>>6,p.fgRed=(d&48)>>4,p.fgGreen=(d&12)>>2,p.fgBlue=d&3,d=u[++o],p.bgOpacity=(d&192)>>6,p.bgRed=(d&48)>>4,p.bgGreen=(d&12)>>2,p.bgBlue=d&3,d=u[++o],p.edgeRed=(d&48)>>4,p.edgeGreen=(d&12)>>2,p.edgeBlue=d&3,o},B1.prototype.setPenLocation=function(o,s){var u=this.current708Packet.data,d=u[o],p=s.currentWindow.penLoc;return s.currentWindow.pendingNewLine=!0,d=u[++o],p.row=d&15,d=u[++o],p.column=d&63,o},B1.prototype.reset=function(o,s){var u=this.getPts(o);return this.flushDisplayed(u,s),this.initService(s.serviceNum,o)};var st={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},l0=function(o){return o===null?"":(o=st[o]||o,String.fromCharCode(o))},ge=14,RM=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Pe=function(){for(var o=[],s=ge+1;s--;)o.push("");return o},rt=function(o,s){rt.prototype.init.call(this),this.field_=o||0,this.dataChannel_=s||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(u){var d,p,f,C,T;if(d=u.ccData&32639,d===this.lastControlCode_){this.lastControlCode_=null;return}if((d&61440)===4096?this.lastControlCode_=d:d!==this.PADDING_&&(this.lastControlCode_=null),f=d>>>8,C=d&255,d!==this.PADDING_)if(d===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(d===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(u.pts),this.flushDisplayed(u.pts),p=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=p,this.startPts_=u.pts;else if(d===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(u.pts);else if(d===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(u.pts);else if(d===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(u.pts);else if(d===this.CARRIAGE_RETURN_)this.clearFormatting(u.pts),this.flushDisplayed(u.pts),this.shiftRowsUp_(),this.startPts_=u.pts;else if(d===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(d===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(u.pts),this.displayed_=Pe();else if(d===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Pe();else if(d===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(u.pts),this.displayed_=Pe()),this.mode_="paintOn",this.startPts_=u.pts;else if(this.isSpecialCharacter(f,C))f=(f&3)<<8,T=l0(f|C),this[this.mode_](u.pts,T),this.column_++;else if(this.isExtCharacter(f,C))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),f=(f&3)<<8,T=l0(f|C),this[this.mode_](u.pts,T),this.column_++;else if(this.isMidRowCode(f,C))this.clearFormatting(u.pts),this[this.mode_](u.pts," "),this.column_++,(C&14)===14&&this.addFormatting(u.pts,["i"]),(C&1)===1&&this.addFormatting(u.pts,["u"]);else if(this.isOffsetControlCode(f,C))this.column_+=C&3;else if(this.isPAC(f,C)){var O=RM.indexOf(d&7968);this.mode_==="rollUp"&&(O-this.rollUpRows_+1<0&&(O=this.rollUpRows_-1),this.setRollUp(u.pts,O)),O!==this.row_&&(this.clearFormatting(u.pts),this.row_=O),C&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(u.pts,["u"]),(d&16)===16&&(this.column_=((d&14)>>1)*4),this.isColorPAC(C)&&(C&14)===14&&this.addFormatting(u.pts,["i"])}else this.isNormalChar(f)&&(C===0&&(C=null),T=l0(f),T+=l0(C),this[this.mode_](u.pts,T),this.column_+=T.length)}};rt.prototype=new D1,rt.prototype.flushDisplayed=function(o){var s=this.displayed_.map(function(u,d){try{return u.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+d+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");s.length&&this.trigger("data",{startPts:this.startPts_,endPts:o,text:s,stream:this.name_})},rt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Pe(),this.nonDisplayed_=Pe(),this.lastControlCode_=null,this.column_=0,this.row_=ge,this.rollUpRows_=2,this.formatting_=[]},rt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},rt.prototype.isSpecialCharacter=function(o,s){return o===this.EXT_&&s>=48&&s<=63},rt.prototype.isExtCharacter=function(o,s){return(o===this.EXT_+1||o===this.EXT_+2)&&s>=32&&s<=63},rt.prototype.isMidRowCode=function(o,s){return o===this.EXT_&&s>=32&&s<=47},rt.prototype.isOffsetControlCode=function(o,s){return o===this.OFFSET_&&s>=33&&s<=35},rt.prototype.isPAC=function(o,s){return o>=this.BASE_&&o<this.BASE_+8&&s>=64&&s<=127},rt.prototype.isColorPAC=function(o){return o>=64&&o<=79||o>=96&&o<=127},rt.prototype.isNormalChar=function(o){return o>=32&&o<=127},rt.prototype.setRollUp=function(o,s){if(this.mode_!=="rollUp"&&(this.row_=ge,this.mode_="rollUp",this.flushDisplayed(o),this.nonDisplayed_=Pe(),this.displayed_=Pe()),s!==void 0&&s!==this.row_)for(var u=0;u<this.rollUpRows_;u++)this.displayed_[s-u]=this.displayed_[this.row_-u],this.displayed_[this.row_-u]="";s===void 0&&(s=this.row_),this.topRow_=s-this.rollUpRows_+1},rt.prototype.addFormatting=function(o,s){this.formatting_=this.formatting_.concat(s);var u=s.reduce(function(d,p){return d+"<"+p+">"},"");this[this.mode_](o,u)},rt.prototype.clearFormatting=function(o){if(this.formatting_.length){var s=this.formatting_.reverse().reduce(function(u,d){return u+"</"+d+">"},"");this.formatting_=[],this[this.mode_](o,s)}},rt.prototype.popOn=function(o,s){var u=this.nonDisplayed_[this.row_];u+=s,this.nonDisplayed_[this.row_]=u},rt.prototype.rollUp=function(o,s){var u=this.displayed_[this.row_];u+=s,this.displayed_[this.row_]=u},rt.prototype.shiftRowsUp_=function(){var o;for(o=0;o<this.topRow_;o++)this.displayed_[o]="";for(o=this.row_+1;o<ge+1;o++)this.displayed_[o]="";for(o=this.topRow_;o<this.row_;o++)this.displayed_[o]=this.displayed_[o+1];this.displayed_[this.row_]=""},rt.prototype.paintOn=function(o,s){var u=this.displayed_[this.row_];u+=s,this.displayed_[this.row_]=u};var R6={CaptionStream:g1,Cea608Stream:rt,Cea708Stream:B1},T5={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},jM=a,NM=8589934592,FM=4294967296,j6="shared",ul=function(o,s){var u=1;for(o>s&&(u=-1);Math.abs(s-o)>FM;)o+=u*NM;return o},gl=function(o){var s,u;gl.prototype.init.call(this),this.type_=o||j6,this.push=function(d){this.type_!==j6&&d.type!==this.type_||(u===void 0&&(u=d.dts),d.dts=ul(d.dts,u),d.pts=ul(d.pts,u),s=d.dts,this.trigger("data",d))},this.flush=function(){u=s,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){u=void 0,s=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};gl.prototype=new jM;var N6={TimestampRolloverStream:gl,handleRollover:ul},UM=(o,s,u)=>{if(!o)return-1;for(var d=u;d<o.length;d++)if(o[d]===s)return d;return-1},$M={typedArrayIndexOf:UM},b5=$M.typedArrayIndexOf,O5={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},F6=function(o,s,u){var d,p="";for(d=s;d<u;d++)p+="%"+("00"+o[d].toString(16)).slice(-2);return p},pr=function(o,s,u){return decodeURIComponent(F6(o,s,u))},fr=function(o,s,u){return unescape(F6(o,s,u))},zr=function(o){return o[0]<<21|o[1]<<14|o[2]<<7|o[3]},Mr={APIC:function(o){var s=1,u,d,p="-->";o.data[0]===O5.Utf8&&(u=b5(o.data,0,s),!(u<0)&&(o.mimeType=fr(o.data,s,u),s=u+1,o.pictureType=o.data[s],s++,d=b5(o.data,0,s),!(d<0)&&(o.description=pr(o.data,s,d),s=d+1,o.mimeType===p?o.url=fr(o.data,s,o.data.length):o.pictureData=o.data.subarray(s,o.data.length))))},"T*":function(o){o.data[0]===O5.Utf8&&(o.value=pr(o.data,1,o.data.length).replace(/\0*$/,""),o.values=o.value.split("\0"))},TXXX:function(o){var s;o.data[0]===O5.Utf8&&(s=b5(o.data,0,1),s!==-1&&(o.description=pr(o.data,1,s),o.value=pr(o.data,s+1,o.data.length).replace(/\0*$/,""),o.data=o.value))},"W*":function(o){o.url=fr(o.data,0,o.data.length).replace(/\0.*$/,"")},WXXX:function(o){var s;o.data[0]===O5.Utf8&&(s=b5(o.data,0,1),s!==-1&&(o.description=pr(o.data,1,s),o.url=fr(o.data,s+1,o.data.length).replace(/\0.*$/,"")))},PRIV:function(o){var s;for(s=0;s<o.data.length;s++)if(o.data[s]===0){o.owner=fr(o.data,0,s);break}o.privateData=o.data.subarray(s+1),o.data=o.privateData}},WM=function(o){var s,u,d=10,p=0,f=[];if(!(o.length<10||o[0]!=="I".charCodeAt(0)||o[1]!=="D".charCodeAt(0)||o[2]!=="3".charCodeAt(0))){p=zr(o.subarray(6,10)),p+=10;var C=o[5]&64;C&&(d+=4,d+=zr(o.subarray(10,14)),p-=zr(o.subarray(16,20)));do{if(s=zr(o.subarray(d+4,d+8)),s<1)break;u=String.fromCharCode(o[d],o[d+1],o[d+2],o[d+3]);var T={id:u,data:o.subarray(d+10,d+s+10)};T.key=T.id,Mr[T.id]?Mr[T.id](T):T.id[0]==="T"?Mr["T*"](T):T.id[0]==="W"&&Mr["W*"](T),f.push(T),d+=10,d+=s}while(d<p);return f}},U6={parseId3Frames:WM,parseSyncSafeInteger:zr,frameParsers:Mr},qM=a,KM=T5,o0=U6,A5;A5=function(o){var s={descriptor:o&&o.descriptor},u=0,d=[],p=0,f;if(A5.prototype.init.call(this),this.dispatchType=KM.METADATA_STREAM_TYPE.toString(16),s.descriptor)for(f=0;f<s.descriptor.length;f++)this.dispatchType+=("00"+s.descriptor[f].toString(16)).slice(-2);this.push=function(C){var T,O,A,I,G,v1;if(C.type==="timed-metadata"){if(C.dataAlignmentIndicator&&(p=0,d.length=0),d.length===0&&(C.data.length<10||C.data[0]!=="I".charCodeAt(0)||C.data[1]!=="D".charCodeAt(0)||C.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(d.push(C),p+=C.data.byteLength,d.length===1&&(u=o0.parseSyncSafeInteger(C.data.subarray(6,10)),u+=10),!(p<u)){for(T={data:new Uint8Array(u),frames:[],pts:d[0].pts,dts:d[0].dts},G=0;G<u;)T.data.set(d[0].data.subarray(0,u-G),G),G+=d[0].data.byteLength,p-=d[0].data.byteLength,d.shift();O=10,T.data[5]&64&&(O+=4,O+=o0.parseSyncSafeInteger(T.data.subarray(10,14)),u-=o0.parseSyncSafeInteger(T.data.subarray(16,20)));do{if(A=o0.parseSyncSafeInteger(T.data.subarray(O+4,O+8)),A<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(v1=String.fromCharCode(T.data[O],T.data[O+1],T.data[O+2],T.data[O+3]),I={id:v1,data:T.data.subarray(O+10,O+A+10)},I.key=I.id,o0.frameParsers[I.id]?o0.frameParsers[I.id](I):I.id[0]==="T"?o0.frameParsers["T*"](I):I.id[0]==="W"&&o0.frameParsers["W*"](I),I.owner==="com.apple.streaming.transportStreamTimestamp"){var Q=I.data,H1=(Q[3]&1)<<30|Q[4]<<22|Q[5]<<14|Q[6]<<6|Q[7]>>>2;H1*=4,H1+=Q[7]&3,I.timeStamp=H1,T.pts===void 0&&T.dts===void 0&&(T.pts=I.timeStamp,T.dts=I.timeStamp),this.trigger("timestamp",I)}T.frames.push(I),O+=10,O+=A}while(O<u);this.trigger("data",T)}}}},A5.prototype=new qM;var XM=A5,pl=a,fl=R6,q2=T5,YM=N6.TimestampRolloverStream,E5,mr,k5,D4=188,zl=71;E5=function(){var o=new Uint8Array(D4),s=0;E5.prototype.init.call(this),this.push=function(u){var d=0,p=D4,f;for(s?(f=new Uint8Array(u.byteLength+s),f.set(o.subarray(0,s)),f.set(u,s),s=0):f=u;p<f.byteLength;){if(f[d]===zl&&f[p]===zl){this.trigger("data",f.subarray(d,p)),d+=D4,p+=D4;continue}d++,p++}d<f.byteLength&&(o.set(f.subarray(d),0),s=f.byteLength-d)},this.flush=function(){s===D4&&o[0]===zl&&(this.trigger("data",o),s=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){s=0,this.trigger("reset")}},E5.prototype=new pl,mr=function(){var o,s,u,d;mr.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,o=function(p,f){var C=0;f.payloadUnitStartIndicator&&(C+=p[C]+1),f.type==="pat"?s(p.subarray(C),f):u(p.subarray(C),f)},s=function(p,f){f.section_number=p[7],f.last_section_number=p[8],d.pmtPid=(p[10]&31)<<8|p[11],f.pmtPid=d.pmtPid},u=function(p,f){var C,T,O,A;if(p[5]&1){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},C=(p[1]&15)<<8|p[2],T=3+C-4,O=(p[10]&15)<<8|p[11],A=12+O;A<T;){var I=p[A],G=(p[A+1]&31)<<8|p[A+2];I===q2.H264_STREAM_TYPE&&d.programMapTable.video===null?d.programMapTable.video=G:I===q2.ADTS_STREAM_TYPE&&d.programMapTable.audio===null?d.programMapTable.audio=G:I===q2.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][G]=I),A+=((p[A+3]&15)<<8|p[A+4])+5}f.programMapTable=d.programMapTable}},this.push=function(p){var f={},C=4;if(f.payloadUnitStartIndicator=!!(p[1]&64),f.pid=p[1]&31,f.pid<<=8,f.pid|=p[2],(p[3]&48)>>>4>1&&(C+=p[C]+1),f.pid===0)f.type="pat",o(p.subarray(C),f),this.trigger("data",f);else if(f.pid===this.pmtPid)for(f.type="pmt",o(p.subarray(C),f),this.trigger("data",f);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([p,C,f]):this.processPes_(p,C,f)},this.processPes_=function(p,f,C){C.pid===this.programMapTable.video?C.streamType=q2.H264_STREAM_TYPE:C.pid===this.programMapTable.audio?C.streamType=q2.ADTS_STREAM_TYPE:C.streamType=this.programMapTable["timed-metadata"][C.pid],C.type="pes",C.data=p.subarray(f),this.trigger("data",C)}},mr.prototype=new pl,mr.STREAM_TYPES={h264:27,adts:15},k5=function(){var o=this,s=!1,u={data:[],size:0},d={data:[],size:0},p={data:[],size:0},f,C=function(O,A){var I;let G=O[0]<<16|O[1]<<8|O[2];A.data=new Uint8Array,G===1&&(A.packetLength=6+(O[4]<<8|O[5]),A.dataAlignmentIndicator=(O[6]&4)!==0,I=O[7],I&192&&(A.pts=(O[9]&14)<<27|(O[10]&255)<<20|(O[11]&254)<<12|(O[12]&255)<<5|(O[13]&254)>>>3,A.pts*=4,A.pts+=(O[13]&6)>>>1,A.dts=A.pts,I&64&&(A.dts=(O[14]&14)<<27|(O[15]&255)<<20|(O[16]&254)<<12|(O[17]&255)<<5|(O[18]&254)>>>3,A.dts*=4,A.dts+=(O[18]&6)>>>1)),A.data=O.subarray(9+O[8]))},T=function(O,A,I){var G=new Uint8Array(O.size),v1={type:A},Q=0,H1=0,V1=!1,xt;if(!(!O.data.length||O.size<9)){for(v1.trackId=O.data[0].pid,Q=0;Q<O.data.length;Q++)xt=O.data[Q],G.set(xt.data,H1),H1+=xt.data.byteLength;C(G,v1),V1=A==="video"||v1.packetLength<=O.size,(I||V1)&&(O.size=0,O.data.length=0),V1&&o.trigger("data",v1)}};k5.prototype.init.call(this),this.push=function(O){({pat:function(){},pes:function(){var A,I;switch(O.streamType){case q2.H264_STREAM_TYPE:A=u,I="video";break;case q2.ADTS_STREAM_TYPE:A=d,I="audio";break;case q2.METADATA_STREAM_TYPE:A=p,I="timed-metadata";break;default:return}O.payloadUnitStartIndicator&&T(A,I,!0),A.data.push(O),A.size+=O.data.byteLength},pmt:function(){var A={type:"metadata",tracks:[]};f=O.programMapTable,f.video!==null&&A.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.video,codec:"avc",type:"video"}),f.audio!==null&&A.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.audio,codec:"adts",type:"audio"}),s=!0,o.trigger("data",A)}})[O.type]()},this.reset=function(){u.size=0,u.data.length=0,d.size=0,d.data.length=0,this.trigger("reset")},this.flushStreams_=function(){T(u,"video"),T(d,"audio"),T(p,"timed-metadata")},this.flush=function(){if(!s&&f){var O={type:"metadata",tracks:[]};f.video!==null&&O.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.video,codec:"avc",type:"video"}),f.audio!==null&&O.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+f.audio,codec:"adts",type:"audio"}),o.trigger("data",O)}s=!1,this.flushStreams_(),this.trigger("done")}},k5.prototype=new pl;var $6={PAT_PID:0,MP2T_PACKET_LENGTH:D4,TransportPacketStream:E5,TransportParseStream:mr,ElementaryStream:k5,TimestampRolloverStream:YM,CaptionStream:fl.CaptionStream,Cea608Stream:fl.Cea608Stream,Cea708Stream:fl.Cea708Stream,MetadataStream:XM};for(var Ml in q2)q2.hasOwnProperty(Ml)&&($6[Ml]=q2[Ml]);var QM=$6,JM=a,ZM=I1.ONE_SECOND_IN_TS,P5,W6=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];P5=function(o){var s,u=0;P5.prototype.init.call(this),this.skipWarn_=function(d,p){this.trigger("log",{level:"warn",message:`adts skiping bytes ${d} to ${p} in frame ${u} outside syncword`})},this.push=function(d){var p=0,f,C,T,O,A;if(o||(u=0),d.type==="audio"){s&&s.length?(T=s,s=new Uint8Array(T.byteLength+d.data.byteLength),s.set(T),s.set(d.data,T.byteLength)):s=d.data;for(var I;p+7<s.length;){if(s[p]!==255||(s[p+1]&246)!==240){typeof I!="number"&&(I=p),p++;continue}if(typeof I=="number"&&(this.skipWarn_(I,p),I=null),C=(~s[p+1]&1)*2,f=(s[p+3]&3)<<11|s[p+4]<<3|(s[p+5]&224)>>5,O=((s[p+6]&3)+1)*1024,A=O*ZM/W6[(s[p+2]&60)>>>2],s.byteLength-p<f)break;this.trigger("data",{pts:d.pts+u*A,dts:d.dts+u*A,sampleCount:O,audioobjecttype:(s[p+2]>>>6&3)+1,channelcount:(s[p+2]&1)<<2|(s[p+3]&192)>>>6,samplerate:W6[(s[p+2]&60)>>>2],samplingfrequencyindex:(s[p+2]&60)>>>2,samplesize:16,data:s.subarray(p+7+C,p+f)}),u++,p+=f}typeof I=="number"&&(this.skipWarn_(I,p),I=null),s=s.subarray(p)}},this.flush=function(){u=0,this.trigger("done")},this.reset=function(){s=void 0,this.trigger("reset")},this.endTimeline=function(){s=void 0,this.trigger("endedtimeline")}},P5.prototype=new JM;var tm=P5,G6;G6=function(o){var s=o.byteLength,u=0,d=0;this.length=function(){return 8*s},this.bitsAvailable=function(){return 8*s+d},this.loadWord=function(){var p=o.byteLength-s,f=new Uint8Array(4),C=Math.min(4,s);if(C===0)throw new Error("no bytes available");f.set(o.subarray(p,p+C)),u=new DataView(f.buffer).getUint32(0),d=C*8,s-=C},this.skipBits=function(p){var f;d>p?(u<<=p,d-=p):(p-=d,f=Math.floor(p/8),p-=f*8,s-=f,this.loadWord(),u<<=p,d-=p)},this.readBits=function(p){var f=Math.min(d,p),C=u>>>32-f;return d-=f,d>0?u<<=f:s>0&&this.loadWord(),f=p-f,f>0?C<<f|this.readBits(f):C},this.skipLeadingZeros=function(){var p;for(p=0;p<d;++p)if(u&2147483648>>>p)return u<<=p,d-=p,p;return this.loadWord(),p+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var p=this.skipLeadingZeros();return this.readBits(p+1)-1},this.readExpGolomb=function(){var p=this.readUnsignedExpGolomb();return 1&p?1+p>>>1:-1*(p>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var em=G6,q6=a,am=em,D5,Hr,K6;Hr=function(){var o=0,s,u;Hr.prototype.init.call(this),this.push=function(d){var p;u?(p=new Uint8Array(u.byteLength+d.data.byteLength),p.set(u),p.set(d.data,u.byteLength),u=p):u=d.data;for(var f=u.byteLength;o<f-3;o++)if(u[o+2]===1){s=o+5;break}for(;s<f;)switch(u[s]){case 0:if(u[s-1]!==0){s+=2;break}else if(u[s-2]!==0){s++;break}o+3!==s-2&&this.trigger("data",u.subarray(o+3,s-2));do s++;while(u[s]!==1&&s<f);o=s-2,s+=3;break;case 1:if(u[s-1]!==0||u[s-2]!==0){s+=3;break}this.trigger("data",u.subarray(o+3,s-2)),o=s-2,s+=3;break;default:s+=3;break}u=u.subarray(o),s-=o,o=0},this.reset=function(){u=null,o=0,this.trigger("reset")},this.flush=function(){u&&u.byteLength>3&&this.trigger("data",u.subarray(o+3)),u=null,o=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Hr.prototype=new q6,K6={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},D5=function(){var o=new Hr,s,u,d,p,f,C,T;D5.prototype.init.call(this),s=this,this.push=function(O){O.type==="video"&&(u=O.trackId,d=O.pts,p=O.dts,o.push(O))},o.on("data",function(O){var A={trackId:u,pts:d,dts:p,data:O,nalUnitTypeCode:O[0]&31};switch(A.nalUnitTypeCode){case 5:A.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:A.nalUnitType="sei_rbsp",A.escapedRBSP=f(O.subarray(1));break;case 7:A.nalUnitType="seq_parameter_set_rbsp",A.escapedRBSP=f(O.subarray(1)),A.config=C(A.escapedRBSP);break;case 8:A.nalUnitType="pic_parameter_set_rbsp";break;case 9:A.nalUnitType="access_unit_delimiter_rbsp";break}s.trigger("data",A)}),o.on("done",function(){s.trigger("done")}),o.on("partialdone",function(){s.trigger("partialdone")}),o.on("reset",function(){s.trigger("reset")}),o.on("endedtimeline",function(){s.trigger("endedtimeline")}),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},T=function(O,A){var I=8,G=8,v1,Q;for(v1=0;v1<O;v1++)G!==0&&(Q=A.readExpGolomb(),G=(I+Q+256)%256),I=G===0?I:G},f=function(O){for(var A=O.byteLength,I=[],G=1,v1,Q;G<A-2;)O[G]===0&&O[G+1]===0&&O[G+2]===3?(I.push(G+2),G+=2):G++;if(I.length===0)return O;v1=A-I.length,Q=new Uint8Array(v1);var H1=0;for(G=0;G<v1;H1++,G++)H1===I[0]&&(H1++,I.shift()),Q[G]=O[H1];return Q},C=function(O){var A=0,I=0,G=0,v1=0,Q,H1,V1,xt,S2,Y0,wv,Lv,yv,Sl,Bv,gt=[1,1],Cv,Q0;if(Q=new am(O),H1=Q.readUnsignedByte(),xt=Q.readUnsignedByte(),V1=Q.readUnsignedByte(),Q.skipUnsignedExpGolomb(),K6[H1]&&(S2=Q.readUnsignedExpGolomb(),S2===3&&Q.skipBits(1),Q.skipUnsignedExpGolomb(),Q.skipUnsignedExpGolomb(),Q.skipBits(1),Q.readBoolean()))for(Bv=S2!==3?8:12,Q0=0;Q0<Bv;Q0++)Q.readBoolean()&&(Q0<6?T(16,Q):T(64,Q));if(Q.skipUnsignedExpGolomb(),Y0=Q.readUnsignedExpGolomb(),Y0===0)Q.readUnsignedExpGolomb();else if(Y0===1)for(Q.skipBits(1),Q.skipExpGolomb(),Q.skipExpGolomb(),wv=Q.readUnsignedExpGolomb(),Q0=0;Q0<wv;Q0++)Q.skipExpGolomb();if(Q.skipUnsignedExpGolomb(),Q.skipBits(1),Lv=Q.readUnsignedExpGolomb(),yv=Q.readUnsignedExpGolomb(),Sl=Q.readBits(1),Sl===0&&Q.skipBits(1),Q.skipBits(1),Q.readBoolean()&&(A=Q.readUnsignedExpGolomb(),I=Q.readUnsignedExpGolomb(),G=Q.readUnsignedExpGolomb(),v1=Q.readUnsignedExpGolomb()),Q.readBoolean()&&Q.readBoolean()){switch(Cv=Q.readUnsignedByte(),Cv){case 1:gt=[1,1];break;case 2:gt=[12,11];break;case 3:gt=[10,11];break;case 4:gt=[16,11];break;case 5:gt=[40,33];break;case 6:gt=[24,11];break;case 7:gt=[20,11];break;case 8:gt=[32,11];break;case 9:gt=[80,33];break;case 10:gt=[18,11];break;case 11:gt=[15,11];break;case 12:gt=[64,33];break;case 13:gt=[160,99];break;case 14:gt=[4,3];break;case 15:gt=[3,2];break;case 16:gt=[2,1];break;case 255:{gt=[Q.readUnsignedByte()<<8|Q.readUnsignedByte(),Q.readUnsignedByte()<<8|Q.readUnsignedByte()];break}}gt&&gt[0]/gt[1]}return{profileIdc:H1,levelIdc:V1,profileCompatibility:xt,width:(Lv+1)*16-A*2-I*2,height:(2-Sl)*(yv+1)*16-G*2-v1*2,sarRatio:gt}}},D5.prototype=new q6;var rm={H264Stream:D5,NalByteStream:Hr},nm=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],X6=function(o,s){var u=o[s+6]<<21|o[s+7]<<14|o[s+8]<<7|o[s+9],d=o[s+5],p=(d&16)>>4;return u=u>=0?u:0,p?u+20:u+10},Y6=function(o,s){return o.length-s<10||o[s]!=="I".charCodeAt(0)||o[s+1]!=="D".charCodeAt(0)||o[s+2]!=="3".charCodeAt(0)?s:(s+=X6(o,s),Y6(o,s))},im=function(o){var s=Y6(o,0);return o.length>=s+2&&(o[s]&255)===255&&(o[s+1]&240)===240&&(o[s+1]&22)===16},Q6=function(o){return o[0]<<21|o[1]<<14|o[2]<<7|o[3]},hm=function(o,s,u){var d,p="";for(d=s;d<u;d++)p+="%"+("00"+o[d].toString(16)).slice(-2);return p},lm=function(o,s,u){return unescape(hm(o,s,u))},om=function(o,s){var u=(o[s+5]&224)>>5,d=o[s+4]<<3,p=o[s+3]&6144;return p|d|u},cm=function(o,s){return o[s]==="I".charCodeAt(0)&&o[s+1]==="D".charCodeAt(0)&&o[s+2]==="3".charCodeAt(0)?"timed-metadata":o[s]&!0&&(o[s+1]&240)===240?"audio":null},sm=function(o){for(var s=0;s+5<o.length;){if(o[s]!==255||(o[s+1]&246)!==240){s++;continue}return nm[(o[s+2]&60)>>>2]}return null},vm=function(o){var s,u,d,p;s=10,o[5]&64&&(s+=4,s+=Q6(o.subarray(10,14)));do{if(u=Q6(o.subarray(s+4,s+8)),u<1)return null;if(p=String.fromCharCode(o[s],o[s+1],o[s+2],o[s+3]),p==="PRIV"){d=o.subarray(s+10,s+u+10);for(var f=0;f<d.byteLength;f++)if(d[f]===0){var C=lm(d,0,f);if(C==="com.apple.streaming.transportStreamTimestamp"){var T=d.subarray(f+1),O=(T[3]&1)<<30|T[4]<<22|T[5]<<14|T[6]<<6|T[7]>>>2;return O*=4,O+=T[7]&3,O}break}}s+=10,s+=u}while(s<o.byteLength);return null},ml={isLikelyAacData:im,parseId3TagSize:X6,parseAdtsSize:om,parseType:cm,parseSampleRate:sm,parseAacTimestamp:vm},dm=a,J6=ml,I5;I5=function(){var o=new Uint8Array,s=0;I5.prototype.init.call(this),this.setTimestamp=function(u){s=u},this.push=function(u){var d=0,p=0,f,C,T,O;for(o.length?(O=o.length,o=new Uint8Array(u.byteLength+O),o.set(o.subarray(0,O)),o.set(u,O)):o=u;o.length-p>=3;){if(o[p]==="I".charCodeAt(0)&&o[p+1]==="D".charCodeAt(0)&&o[p+2]==="3".charCodeAt(0)){if(o.length-p<10||(d=J6.parseId3TagSize(o,p),p+d>o.length))break;C={type:"timed-metadata",data:o.subarray(p,p+d)},this.trigger("data",C),p+=d;continue}else if((o[p]&255)===255&&(o[p+1]&240)===240){if(o.length-p<7||(d=J6.parseAdtsSize(o,p),p+d>o.length))break;T={type:"audio",data:o.subarray(p,p+d),pts:s,dts:s},this.trigger("data",T),p+=d;continue}p++}f=o.length-p,f>0?o=o.subarray(p):o=new Uint8Array},this.reset=function(){o=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){o=new Uint8Array,this.trigger("endedtimeline")}},I5.prototype=new dm;var um=I5,gm=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],pm=gm,fm=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],zm=fm,R5=a,xr=mt,Vr=W2,j5=R,K2=o1,De=QM,N5=I1,Z6=tm,Mm=rm.H264Stream,mm=um,Hm=ml.isLikelyAacData,xm=I1.ONE_SECOND_IN_TS,Hl=pm,xl=zm,wr,I4,F5,K0,Vm=function(o,s){s.stream=o,this.trigger("log",s)},tv=function(o,s){for(var u=Object.keys(s),d=0;d<u.length;d++){var p=u[d];p==="headOfPipeline"||!s[p].on||s[p].on("log",Vm.bind(o,p))}},ev=function(o,s){var u;if(o.length!==s.length)return!1;for(u=0;u<o.length;u++)if(o[u]!==s[u])return!1;return!0},Vl=function(o,s,u,d,p,f){var C=u-s,T=d-s,O=p-u;return{start:{dts:o,pts:o+C},end:{dts:o+T,pts:o+O},prependedContentDuration:f,baseMediaDecodeTime:o}};I4=function(o,s){var u=[],d,p=0,f=0,C=1/0;s=s||{},d=s.firstSequenceNumber||0,I4.prototype.init.call(this),this.push=function(T){K2.collectDtsInfo(o,T),o&&Hl.forEach(function(O){o[O]=T[O]}),u.push(T)},this.setEarliestDts=function(T){p=T},this.setVideoBaseMediaDecodeTime=function(T){C=T},this.setAudioAppendStart=function(T){f=T},this.flush=function(){var T,O,A,I,G,v1,Q;if(u.length===0){this.trigger("done","AudioSegmentStream");return}T=j5.trimAdtsFramesByEarliestDts(u,o,p),o.baseMediaDecodeTime=K2.calculateTrackBaseMediaDecodeTime(o,s.keepOriginalTimestamps),Q=j5.prefixWithSilence(o,T,f,C),o.samples=j5.generateSampleTable(T),A=xr.mdat(j5.concatenateFrameData(T)),u=[],O=xr.moof(d,[o]),I=new Uint8Array(O.byteLength+A.byteLength),d++,I.set(O),I.set(A,O.byteLength),K2.clearDtsInfo(o),G=Math.ceil(xm*1024/o.samplerate),T.length&&(v1=T.length*G,this.trigger("segmentTimingInfo",Vl(N5.audioTsToVideoTs(o.baseMediaDecodeTime,o.samplerate),T[0].dts,T[0].pts,T[0].dts+v1,T[0].pts+v1,Q||0)),this.trigger("timingInfo",{start:T[0].pts,end:T[0].pts+v1})),this.trigger("data",{track:o,boxes:I}),this.trigger("done","AudioSegmentStream")},this.reset=function(){K2.clearDtsInfo(o),u=[],this.trigger("reset")}},I4.prototype=new R5,wr=function(o,s){var u,d=[],p=[],f,C;s=s||{},u=s.firstSequenceNumber||0,wr.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(T){K2.collectDtsInfo(o,T),T.nalUnitType==="seq_parameter_set_rbsp"&&!f&&(f=T.config,o.sps=[T.data],xl.forEach(function(O){o[O]=f[O]},this)),T.nalUnitType==="pic_parameter_set_rbsp"&&!C&&(C=T.data,o.pps=[T.data]),d.push(T)},this.flush=function(){for(var T,O,A,I,G,v1,Q=0,H1,V1;d.length&&d[0].nalUnitType!=="access_unit_delimiter_rbsp";)d.shift();if(d.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(T=Vr.groupNalsIntoFrames(d),A=Vr.groupFramesIntoGops(T),A[0][0].keyFrame||(O=this.getGopForFusion_(d[0],o),O?(Q=O.duration,A.unshift(O),A.byteLength+=O.byteLength,A.nalCount+=O.nalCount,A.pts=O.pts,A.dts=O.dts,A.duration+=O.duration):A=Vr.extendFirstKeyFrame(A)),p.length){var xt;if(s.alignGopsAtEnd?xt=this.alignGopsAtEnd_(A):xt=this.alignGopsAtStart_(A),!xt){this.gopCache_.unshift({gop:A.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}K2.clearDtsInfo(o),A=xt}K2.collectDtsInfo(o,A),o.samples=Vr.generateSampleTable(A),G=xr.mdat(Vr.concatenateNalData(A)),o.baseMediaDecodeTime=K2.calculateTrackBaseMediaDecodeTime(o,s.keepOriginalTimestamps),this.trigger("processedGopsInfo",A.map(function(S2){return{pts:S2.pts,dts:S2.dts,byteLength:S2.byteLength}})),H1=A[0],V1=A[A.length-1],this.trigger("segmentTimingInfo",Vl(o.baseMediaDecodeTime,H1.dts,H1.pts,V1.dts+V1.duration,V1.pts+V1.duration,Q)),this.trigger("timingInfo",{start:A[0].pts,end:A[A.length-1].pts+A[A.length-1].duration}),this.gopCache_.unshift({gop:A.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),I=xr.moof(u,[o]),v1=new Uint8Array(I.byteLength+G.byteLength),u++,v1.set(I),v1.set(G,I.byteLength),this.trigger("data",{track:o,boxes:v1}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),d=[],this.gopCache_.length=0,p.length=0,this.trigger("reset")},this.resetStream_=function(){K2.clearDtsInfo(o),f=void 0,C=void 0},this.getGopForFusion_=function(T){var O=45e3,A=1e4,I=1/0,G,v1,Q,H1,V1;for(V1=0;V1<this.gopCache_.length;V1++)H1=this.gopCache_[V1],Q=H1.gop,!(!(o.pps&&ev(o.pps[0],H1.pps[0]))||!(o.sps&&ev(o.sps[0],H1.sps[0])))&&(Q.dts<o.timelineStartInfo.dts||(G=T.dts-Q.dts-Q.duration,G>=-A&&G<=O&&(!v1||I>G)&&(v1=H1,I=G)));return v1?v1.gop:null},this.alignGopsAtStart_=function(T){var O,A,I,G,v1,Q,H1,V1;for(v1=T.byteLength,Q=T.nalCount,H1=T.duration,O=A=0;O<p.length&&A<T.length&&(I=p[O],G=T[A],I.pts!==G.pts);){if(G.pts>I.pts){O++;continue}A++,v1-=G.byteLength,Q-=G.nalCount,H1-=G.duration}return A===0?T:A===T.length?null:(V1=T.slice(A),V1.byteLength=v1,V1.duration=H1,V1.nalCount=Q,V1.pts=V1[0].pts,V1.dts=V1[0].dts,V1)},this.alignGopsAtEnd_=function(T){var O,A,I,G,v1,Q;for(O=p.length-1,A=T.length-1,v1=null,Q=!1;O>=0&&A>=0;){if(I=p[O],G=T[A],I.pts===G.pts){Q=!0;break}if(I.pts>G.pts){O--;continue}O===p.length-1&&(v1=A),A--}if(!Q&&v1===null)return null;var H1;if(Q?H1=A:H1=v1,H1===0)return T;var V1=T.slice(H1),xt=V1.reduce(function(S2,Y0){return S2.byteLength+=Y0.byteLength,S2.duration+=Y0.duration,S2.nalCount+=Y0.nalCount,S2},{byteLength:0,duration:0,nalCount:0});return V1.byteLength=xt.byteLength,V1.duration=xt.duration,V1.nalCount=xt.nalCount,V1.pts=V1[0].pts,V1.dts=V1[0].dts,V1},this.alignGopsWith=function(T){p=T}},wr.prototype=new R5,K0=function(o,s){this.numberOfTracks=0,this.metadataStream=s,o=o||{},typeof o.remux<"u"?this.remuxTracks=!!o.remux:this.remuxTracks=!0,typeof o.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=o.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,K0.prototype.init.call(this),this.push=function(u){if(u.text)return this.pendingCaptions.push(u);if(u.frames)return this.pendingMetadata.push(u);this.pendingTracks.push(u.track),this.pendingBytes+=u.boxes.byteLength,u.track.type==="video"&&(this.videoTrack=u.track,this.pendingBoxes.push(u.boxes)),u.track.type==="audio"&&(this.audioTrack=u.track,this.pendingBoxes.unshift(u.boxes))}},K0.prototype=new R5,K0.prototype.flush=function(o){var s=0,u={captions:[],captionStreams:{},metadata:[],info:{}},d,p,f,C=0,T;if(this.pendingTracks.length<this.numberOfTracks){if(o!=="VideoSegmentStream"&&o!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(C=this.videoTrack.timelineStartInfo.pts,xl.forEach(function(O){u.info[O]=this.videoTrack[O]},this)):this.audioTrack&&(C=this.audioTrack.timelineStartInfo.pts,Hl.forEach(function(O){u.info[O]=this.audioTrack[O]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?u.type=this.pendingTracks[0].type:u.type="combined",this.emittedTracks+=this.pendingTracks.length,f=xr.initSegment(this.pendingTracks),u.initSegment=new Uint8Array(f.byteLength),u.initSegment.set(f),u.data=new Uint8Array(this.pendingBytes),T=0;T<this.pendingBoxes.length;T++)u.data.set(this.pendingBoxes[T],s),s+=this.pendingBoxes[T].byteLength;for(T=0;T<this.pendingCaptions.length;T++)d=this.pendingCaptions[T],d.startTime=N5.metadataTsToSeconds(d.startPts,C,this.keepOriginalTimestamps),d.endTime=N5.metadataTsToSeconds(d.endPts,C,this.keepOriginalTimestamps),u.captionStreams[d.stream]=!0,u.captions.push(d);for(T=0;T<this.pendingMetadata.length;T++)p=this.pendingMetadata[T],p.cueTime=N5.metadataTsToSeconds(p.pts,C,this.keepOriginalTimestamps),u.metadata.push(p);for(u.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",u),T=0;T<u.captions.length;T++)d=u.captions[T],this.trigger("caption",d);for(T=0;T<u.metadata.length;T++)p=u.metadata[T],this.trigger("id3Frame",p)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},K0.prototype.setRemux=function(o){this.remuxTracks=o},F5=function(o){var s=this,u=!0,d,p;F5.prototype.init.call(this),o=o||{},this.baseMediaDecodeTime=o.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var f={};this.transmuxPipeline_=f,f.type="aac",f.metadataStream=new De.MetadataStream,f.aacStream=new mm,f.audioTimestampRolloverStream=new De.TimestampRolloverStream("audio"),f.timedMetadataTimestampRolloverStream=new De.TimestampRolloverStream("timed-metadata"),f.adtsStream=new Z6,f.coalesceStream=new K0(o,f.metadataStream),f.headOfPipeline=f.aacStream,f.aacStream.pipe(f.audioTimestampRolloverStream).pipe(f.adtsStream),f.aacStream.pipe(f.timedMetadataTimestampRolloverStream).pipe(f.metadataStream).pipe(f.coalesceStream),f.metadataStream.on("timestamp",function(C){f.aacStream.setTimestamp(C.timeStamp)}),f.aacStream.on("data",function(C){C.type!=="timed-metadata"&&C.type!=="audio"||f.audioSegmentStream||(p=p||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},f.coalesceStream.numberOfTracks++,f.audioSegmentStream=new I4(p,o),f.audioSegmentStream.on("log",s.getLogTrigger_("audioSegmentStream")),f.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),f.adtsStream.pipe(f.audioSegmentStream).pipe(f.coalesceStream),s.trigger("trackinfo",{hasAudio:!!p,hasVideo:!!d}))}),f.coalesceStream.on("data",this.trigger.bind(this,"data")),f.coalesceStream.on("done",this.trigger.bind(this,"done")),tv(this,f)},this.setupTsPipeline=function(){var f={};this.transmuxPipeline_=f,f.type="ts",f.metadataStream=new De.MetadataStream,f.packetStream=new De.TransportPacketStream,f.parseStream=new De.TransportParseStream,f.elementaryStream=new De.ElementaryStream,f.timestampRolloverStream=new De.TimestampRolloverStream,f.adtsStream=new Z6,f.h264Stream=new Mm,f.captionStream=new De.CaptionStream(o),f.coalesceStream=new K0(o,f.metadataStream),f.headOfPipeline=f.packetStream,f.packetStream.pipe(f.parseStream).pipe(f.elementaryStream).pipe(f.timestampRolloverStream),f.timestampRolloverStream.pipe(f.h264Stream),f.timestampRolloverStream.pipe(f.adtsStream),f.timestampRolloverStream.pipe(f.metadataStream).pipe(f.coalesceStream),f.h264Stream.pipe(f.captionStream).pipe(f.coalesceStream),f.elementaryStream.on("data",function(C){var T;if(C.type==="metadata"){for(T=C.tracks.length;T--;)!d&&C.tracks[T].type==="video"?(d=C.tracks[T],d.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):!p&&C.tracks[T].type==="audio"&&(p=C.tracks[T],p.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime);d&&!f.videoSegmentStream&&(f.coalesceStream.numberOfTracks++,f.videoSegmentStream=new wr(d,o),f.videoSegmentStream.on("log",s.getLogTrigger_("videoSegmentStream")),f.videoSegmentStream.on("timelineStartInfo",function(O){p&&!o.keepOriginalTimestamps&&(p.timelineStartInfo=O,f.audioSegmentStream.setEarliestDts(O.dts-s.baseMediaDecodeTime))}),f.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),f.videoSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"videoSegmentTimingInfo")),f.videoSegmentStream.on("baseMediaDecodeTime",function(O){p&&f.audioSegmentStream.setVideoBaseMediaDecodeTime(O)}),f.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),f.h264Stream.pipe(f.videoSegmentStream).pipe(f.coalesceStream)),p&&!f.audioSegmentStream&&(f.coalesceStream.numberOfTracks++,f.audioSegmentStream=new I4(p,o),f.audioSegmentStream.on("log",s.getLogTrigger_("audioSegmentStream")),f.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),f.audioSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"audioSegmentTimingInfo")),f.adtsStream.pipe(f.audioSegmentStream).pipe(f.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!p,hasVideo:!!d})}}),f.coalesceStream.on("data",this.trigger.bind(this,"data")),f.coalesceStream.on("id3Frame",function(C){C.dispatchType=f.metadataStream.dispatchType,s.trigger("id3Frame",C)}),f.coalesceStream.on("caption",this.trigger.bind(this,"caption")),f.coalesceStream.on("done",this.trigger.bind(this,"done")),tv(this,f)},this.setBaseMediaDecodeTime=function(f){var C=this.transmuxPipeline_;o.keepOriginalTimestamps||(this.baseMediaDecodeTime=f),p&&(p.timelineStartInfo.dts=void 0,p.timelineStartInfo.pts=void 0,K2.clearDtsInfo(p),C.audioTimestampRolloverStream&&C.audioTimestampRolloverStream.discontinuity()),d&&(C.videoSegmentStream&&(C.videoSegmentStream.gopCache_=[]),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,K2.clearDtsInfo(d),C.captionStream.reset()),C.timestampRolloverStream&&C.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(f){p&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(f)},this.setRemux=function(f){var C=this.transmuxPipeline_;o.remux=f,C&&C.coalesceStream&&C.coalesceStream.setRemux(f)},this.alignGopsWith=function(f){d&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(f)},this.getLogTrigger_=function(f){var C=this;return function(T){T.stream=f,C.trigger("log",T)}},this.push=function(f){if(u){var C=Hm(f);C&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!C&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),u=!1}this.transmuxPipeline_.headOfPipeline.push(f)},this.flush=function(){u=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},F5.prototype=new R5;var wm={Transmuxer:F5,VideoSegmentStream:wr,AudioSegmentStream:I4,AUDIO_PROPERTIES:Hl,VIDEO_PROPERTIES:xl,generateSegmentTimingInfo:Vl},Lm=function(o){return o>>>0},ym=function(o){return("00"+o.toString(16)).slice(-2)},U5={toUnsigned:Lm,toHexString:ym},Bm=function(o){var s="";return s+=String.fromCharCode(o[0]),s+=String.fromCharCode(o[1]),s+=String.fromCharCode(o[2]),s+=String.fromCharCode(o[3]),s},av=Bm,Cm=U5.toUnsigned,Sm=av,rv=function(o,s){var u=[],d,p,f,C,T;if(!s.length)return null;for(d=0;d<o.byteLength;)p=Cm(o[d]<<24|o[d+1]<<16|o[d+2]<<8|o[d+3]),f=Sm(o.subarray(d+4,d+8)),C=p>1?d+p:o.byteLength,f===s[0]&&(s.length===1?u.push(o.subarray(d+8,C)):(T=rv(o.subarray(d+8,C),s.slice(1)),T.length&&(u=u.concat(T)))),d=C;return u},nv=rv,_m=U5.toUnsigned,Tm=i.getUint64,bm=function(o){var s={version:o[0],flags:new Uint8Array(o.subarray(1,4))};return s.version===1?s.baseMediaDecodeTime=Tm(o.subarray(4)):s.baseMediaDecodeTime=_m(o[4]<<24|o[5]<<16|o[6]<<8|o[7]),s},iv=bm,Om=function(o){return{isLeading:(o[0]&12)>>>2,dependsOn:o[0]&3,isDependedOn:(o[1]&192)>>>6,hasRedundancy:(o[1]&48)>>>4,paddingValue:(o[1]&14)>>>1,isNonSyncSample:o[1]&1,degradationPriority:o[2]<<8|o[3]}},Am=Om,hv=Am,Em=function(o){var s={version:o[0],flags:new Uint8Array(o.subarray(1,4)),samples:[]},u=new DataView(o.buffer,o.byteOffset,o.byteLength),d=s.flags[2]&1,p=s.flags[2]&4,f=s.flags[1]&1,C=s.flags[1]&2,T=s.flags[1]&4,O=s.flags[1]&8,A=u.getUint32(4),I=8,G;for(d&&(s.dataOffset=u.getInt32(I),I+=4),p&&A&&(G={flags:hv(o.subarray(I,I+4))},I+=4,f&&(G.duration=u.getUint32(I),I+=4),C&&(G.size=u.getUint32(I),I+=4),O&&(s.version===1?G.compositionTimeOffset=u.getInt32(I):G.compositionTimeOffset=u.getUint32(I),I+=4),s.samples.push(G),A--);A--;)G={},f&&(G.duration=u.getUint32(I),I+=4),C&&(G.size=u.getUint32(I),I+=4),T&&(G.flags=hv(o.subarray(I,I+4)),I+=4),O&&(s.version===1?G.compositionTimeOffset=u.getInt32(I):G.compositionTimeOffset=u.getUint32(I),I+=4),s.samples.push(G);return s},lv=Em,km=function(o){var s=new DataView(o.buffer,o.byteOffset,o.byteLength),u={version:o[0],flags:new Uint8Array(o.subarray(1,4)),trackId:s.getUint32(4)},d=u.flags[2]&1,p=u.flags[2]&2,f=u.flags[2]&8,C=u.flags[2]&16,T=u.flags[2]&32,O=u.flags[0]&65536,A=u.flags[0]&131072,I;return I=8,d&&(I+=4,u.baseDataOffset=s.getUint32(12),I+=4),p&&(u.sampleDescriptionIndex=s.getUint32(I),I+=4),f&&(u.defaultSampleDuration=s.getUint32(I),I+=4),C&&(u.defaultSampleSize=s.getUint32(I),I+=4),T&&(u.defaultSampleFlags=s.getUint32(I)),O&&(u.durationIsEmpty=!0),!d&&A&&(u.baseDataOffsetIsMoof=!0),u},ov=km,Lr;typeof window<"u"?Lr=window:typeof e<"u"?Lr=e:typeof self<"u"?Lr=self:Lr={};var cv=Lr,Pm=T1.discardEmulationPreventionBytes,Dm=R6.CaptionStream,yr=nv,Im=iv,Rm=lv,jm=ov,sv=cv,Nm=function(o,s){for(var u=o,d=0;d<s.length;d++){var p=s[d];if(u<p.size)return p;u-=p.size}return null},Fm=function(o,s,u){var d=new DataView(o.buffer,o.byteOffset,o.byteLength),p={logs:[],seiNals:[]},f,C,T,O;for(C=0;C+4<o.length;C+=T)if(T=d.getUint32(C),C+=4,!(T<=0))switch(o[C]&31){case 6:var A=o.subarray(C+1,C+1+T),I=Nm(C,s);if(f={nalUnitType:"sei_rbsp",size:T,data:A,escapedRBSP:Pm(A),trackId:u},I)f.pts=I.pts,f.dts=I.dts,O=I;else if(O)f.pts=O.pts,f.dts=O.dts;else{p.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+C+" for trackId "+u+". See mux.js#223."});break}p.seiNals.push(f);break}return p},Um=function(o,s,u){var d=s,p=u.defaultSampleDuration||0,f=u.defaultSampleSize||0,C=u.trackId,T=[];return o.forEach(function(O){var A=Rm(O),I=A.samples;I.forEach(function(G){G.duration===void 0&&(G.duration=p),G.size===void 0&&(G.size=f),G.trackId=C,G.dts=d,G.compositionTimeOffset===void 0&&(G.compositionTimeOffset=0),typeof d=="bigint"?(G.pts=d+sv.BigInt(G.compositionTimeOffset),d+=sv.BigInt(G.duration)):(G.pts=d+G.compositionTimeOffset,d+=G.duration)}),T=T.concat(I)}),T},$m=function(o,s){var u=yr(o,["moof","traf"]),d=yr(o,["mdat"]),p={},f=[];return d.forEach(function(C,T){var O=u[T];f.push({mdat:C,traf:O})}),f.forEach(function(C){var T=C.mdat,O=C.traf,A=yr(O,["tfhd"]),I=jm(A[0]),G=I.trackId,v1=yr(O,["tfdt"]),Q=v1.length>0?Im(v1[0]).baseMediaDecodeTime:0,H1=yr(O,["trun"]),V1,xt;s===G&&H1.length>0&&(V1=Um(H1,Q,I),xt=Fm(T,V1,G),p[G]||(p[G]={seiNals:[],logs:[]}),p[G].seiNals=p[G].seiNals.concat(xt.seiNals),p[G].logs=p[G].logs.concat(xt.logs))}),p},Wm=function(o,s,u){var d;if(s===null)return null;d=$m(o,s);var p=d[s]||{};return{seiNals:p.seiNals,logs:p.logs,timescale:u}},Gm=function(){var o=!1,s,u,d,p,f,C;this.isInitialized=function(){return o},this.init=function(T){s=new Dm,o=!0,C=T?T.isPartial:!1,s.on("data",function(O){O.startTime=O.startPts/p,O.endTime=O.endPts/p,f.captions.push(O),f.captionStreams[O.stream]=!0}),s.on("log",function(O){f.logs.push(O)})},this.isNewInit=function(T,O){return T&&T.length===0||O&&typeof O=="object"&&Object.keys(O).length===0?!1:d!==T[0]||p!==O[d]},this.parse=function(T,O,A){var I;if(this.isInitialized()){if(!O||!A)return null;if(this.isNewInit(O,A))d=O[0],p=A[d];else if(d===null||!p)return u.push(T),null}else return null;for(;u.length>0;){var G=u.shift();this.parse(G,O,A)}return I=Wm(T,d,p),I&&I.logs&&(f.logs=f.logs.concat(I.logs)),I===null||!I.seiNals?f.logs.length?{logs:f.logs,captions:[],captionStreams:[]}:null:(this.pushNals(I.seiNals),this.flushStream(),f)},this.pushNals=function(T){if(!this.isInitialized()||!T||T.length===0)return null;T.forEach(function(O){s.push(O)})},this.flushStream=function(){if(!this.isInitialized())return null;C?s.partialFlush():s.flush()},this.clearParsedCaptions=function(){f.captions=[],f.captionStreams={},f.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;s.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){u=[],d=null,p=null,f?this.clearParsedCaptions():f={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},qm=Gm,Km=function(o){for(var s=0,u=String.fromCharCode(o[s]),d="";u!=="\0";)d+=u,s++,u=String.fromCharCode(o[s]);return d+=u,d},Xm={uint8ToCString:Km},$5=Xm.uint8ToCString,Ym=i.getUint64,Qm=function(o){var s=4,u=o[0],d,p,f,C,T,O,A,I;if(u===0){d=$5(o.subarray(s)),s+=d.length,p=$5(o.subarray(s)),s+=p.length;var G=new DataView(o.buffer);f=G.getUint32(s),s+=4,T=G.getUint32(s),s+=4,O=G.getUint32(s),s+=4,A=G.getUint32(s),s+=4}else if(u===1){var G=new DataView(o.buffer);f=G.getUint32(s),s+=4,C=Ym(o.subarray(s)),s+=8,O=G.getUint32(s),s+=4,A=G.getUint32(s),s+=4,d=$5(o.subarray(s)),s+=d.length,p=$5(o.subarray(s)),s+=p.length}I=new Uint8Array(o.subarray(s,o.byteLength));var v1={scheme_id_uri:d,value:p,timescale:f||1,presentation_time:C,presentation_time_delta:T,event_duration:O,id:A,message_data:I};return Zm(u,v1)?v1:void 0},Jm=function(o,s,u,d){return o||o===0?o/s:d+u/s},Zm=function(o,s){var u=s.scheme_id_uri!=="\0",d=o===0&&vv(s.presentation_time_delta)&&u,p=o===1&&vv(s.presentation_time)&&u;return!(o>1)&&d||p},vv=function(o){return o!==void 0||o!==null},tH={parseEmsgBox:Qm,scaleTime:Jm},W5=U5.toUnsigned,Br=U5.toHexString,ut=nv,R4=av,wl=tH,eH=ov,aH=lv,rH=iv,nH=i.getUint64,dv,uv,gv,pv,fv,Ll,zv,yl=cv,iH=U6.parseId3Frames;dv=function(o){var s={},u=ut(o,["moov","trak"]);return u.reduce(function(d,p){var f,C,T,O,A;return f=ut(p,["tkhd"])[0],!f||(C=f[0],T=C===0?12:20,O=W5(f[T]<<24|f[T+1]<<16|f[T+2]<<8|f[T+3]),A=ut(p,["mdia","mdhd"])[0],!A)?null:(C=A[0],T=C===0?12:20,d[O]=W5(A[T]<<24|A[T+1]<<16|A[T+2]<<8|A[T+3]),d)},s)},uv=function(o,s){var u;u=ut(s,["moof","traf"]);var d=u.reduce(function(p,f){var C=ut(f,["tfhd"])[0],T=W5(C[4]<<24|C[5]<<16|C[6]<<8|C[7]),O=o[T]||9e4,A=ut(f,["tfdt"])[0],I=new DataView(A.buffer,A.byteOffset,A.byteLength),G;A[0]===1?G=nH(A.subarray(4,12)):G=I.getUint32(4);let v1;return typeof G=="bigint"?v1=G/yl.BigInt(O):typeof G=="number"&&!isNaN(G)&&(v1=G/O),v1<Number.MAX_SAFE_INTEGER&&(v1=Number(v1)),v1<p&&(p=v1),p},1/0);return typeof d=="bigint"||isFinite(d)?d:0},gv=function(o,s){var u=ut(s,["moof","traf"]),d=0,p=0,f;if(u&&u.length){var C=ut(u[0],["tfhd"])[0],T=ut(u[0],["trun"])[0],O=ut(u[0],["tfdt"])[0];if(C){var A=eH(C);f=A.trackId}if(O){var I=rH(O);d=I.baseMediaDecodeTime}if(T){var G=aH(T);G.samples&&G.samples.length&&(p=G.samples[0].compositionTimeOffset||0)}}var v1=o[f]||9e4;typeof d=="bigint"&&(p=yl.BigInt(p),v1=yl.BigInt(v1));var Q=(d+p)/v1;return typeof Q=="bigint"&&Q<Number.MAX_SAFE_INTEGER&&(Q=Number(Q)),Q},pv=function(o){var s=ut(o,["moov","trak"]),u=[];return s.forEach(function(d){var p=ut(d,["mdia","hdlr"]),f=ut(d,["tkhd"]);p.forEach(function(C,T){var O=R4(C.subarray(8,12)),A=f[T],I,G,v1;O==="vide"&&(I=new DataView(A.buffer,A.byteOffset,A.byteLength),G=I.getUint8(0),v1=G===0?I.getUint32(12):I.getUint32(20),u.push(v1))})}),u},Ll=function(o){var s=o[0],u=s===0?12:20;return W5(o[u]<<24|o[u+1]<<16|o[u+2]<<8|o[u+3])},fv=function(o){var s=ut(o,["moov","trak"]),u=[];return s.forEach(function(d){var p={},f=ut(d,["tkhd"])[0],C,T;f&&(C=new DataView(f.buffer,f.byteOffset,f.byteLength),T=C.getUint8(0),p.id=T===0?C.getUint32(12):C.getUint32(20));var O=ut(d,["mdia","hdlr"])[0];if(O){var A=R4(O.subarray(8,12));A==="vide"?p.type="video":A==="soun"?p.type="audio":p.type=A}var I=ut(d,["mdia","minf","stbl","stsd"])[0];if(I){var G=I.subarray(8);p.codec=R4(G.subarray(4,8));var v1=ut(G,[p.codec])[0],Q,H1;v1&&(/^[asm]vc[1-9]$/i.test(p.codec)?(Q=v1.subarray(78),H1=R4(Q.subarray(4,8)),H1==="avcC"&&Q.length>11?(p.codec+=".",p.codec+=Br(Q[9]),p.codec+=Br(Q[10]),p.codec+=Br(Q[11])):p.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(p.codec)?(Q=v1.subarray(28),H1=R4(Q.subarray(4,8)),H1==="esds"&&Q.length>20&&Q[19]!==0?(p.codec+="."+Br(Q[19]),p.codec+="."+Br(Q[20]>>>2&63).replace(/^0/,"")):p.codec="mp4a.40.2"):p.codec=p.codec.toLowerCase())}var V1=ut(d,["mdia","mdhd"])[0];V1&&(p.timescale=Ll(V1)),u.push(p)}),u},zv=function(o,s=0){var u=ut(o,["emsg"]);return u.map(d=>{var p=wl.parseEmsgBox(new Uint8Array(d)),f=iH(p.message_data);return{cueTime:wl.scaleTime(p.presentation_time,p.timescale,p.presentation_time_delta,s),duration:wl.scaleTime(p.event_duration,p.timescale),frames:f}})};var Mv={findBox:ut,parseType:R4,timescale:dv,startTime:uv,compositionStartTime:gv,videoTrackIds:pv,tracks:fv,getTimescaleFromMediaHeader:Ll,getEmsgID3:zv},Bl=T5,mv=function(o){var s=o[1]&31;return s<<=8,s|=o[2],s},G5=function(o){return!!(o[1]&64)},q5=function(o){var s=0;return(o[3]&48)>>>4>1&&(s+=o[4]+1),s},hH=function(o,s){var u=mv(o);return u===0?"pat":u===s?"pmt":s?"pes":null},lH=function(o){var s=G5(o),u=4+q5(o);return s&&(u+=o[u]+1),(o[u+10]&31)<<8|o[u+11]},oH=function(o){var s={},u=G5(o),d=4+q5(o);if(u&&(d+=o[d]+1),!!(o[d+5]&1)){var p,f,C;p=(o[d+1]&15)<<8|o[d+2],f=3+p-4,C=(o[d+10]&15)<<8|o[d+11];for(var T=12+C;T<f;){var O=d+T;s[(o[O+1]&31)<<8|o[O+2]]=o[O],T+=((o[O+3]&15)<<8|o[O+4])+5}return s}},cH=function(o,s){var u=mv(o),d=s[u];switch(d){case Bl.H264_STREAM_TYPE:return"video";case Bl.ADTS_STREAM_TYPE:return"audio";case Bl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},sH=function(o){var s=G5(o);if(!s)return null;var u=4+q5(o);if(u>=o.byteLength)return null;var d=null,p;return p=o[u+7],p&192&&(d={},d.pts=(o[u+9]&14)<<27|(o[u+10]&255)<<20|(o[u+11]&254)<<12|(o[u+12]&255)<<5|(o[u+13]&254)>>>3,d.pts*=4,d.pts+=(o[u+13]&6)>>>1,d.dts=d.pts,p&64&&(d.dts=(o[u+14]&14)<<27|(o[u+15]&255)<<20|(o[u+16]&254)<<12|(o[u+17]&255)<<5|(o[u+18]&254)>>>3,d.dts*=4,d.dts+=(o[u+18]&6)>>>1)),d},Cl=function(o){switch(o){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},vH=function(o){for(var s=4+q5(o),u=o.subarray(s),d=0,p=0,f=!1,C;p<u.byteLength-3;p++)if(u[p+2]===1){d=p+5;break}for(;d<u.byteLength;)switch(u[d]){case 0:if(u[d-1]!==0){d+=2;break}else if(u[d-2]!==0){d++;break}p+3!==d-2&&(C=Cl(u[p+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(f=!0));do d++;while(u[d]!==1&&d<u.length);p=d-2,d+=3;break;case 1:if(u[d-1]!==0||u[d-2]!==0){d+=3;break}C=Cl(u[p+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(f=!0),p=d-2,d+=3;break;default:d+=3;break}return u=u.subarray(p),d-=p,p=0,u&&u.byteLength>3&&(C=Cl(u[p+3]&31),C==="slice_layer_without_partitioning_rbsp_idr"&&(f=!0)),f},dH={parseType:hH,parsePat:lH,parsePmt:oH,parsePayloadUnitStartIndicator:G5,parsePesType:cH,parsePesTime:sH,videoPacketContainsKeyFrame:vH},Hv=T5,j4=N6.handleRollover,j1={};j1.ts=dH,j1.aac=ml;var X0=I1.ONE_SECOND_IN_TS,$t=188,pe=71,uH=function(o,s){for(var u=0,d=$t,p,f;d<o.byteLength;){if(o[u]===pe&&o[d]===pe){switch(p=o.subarray(u,d),f=j1.ts.parseType(p,s.pid),f){case"pat":s.pid=j1.ts.parsePat(p);break;case"pmt":var C=j1.ts.parsePmt(p);s.table=s.table||{},Object.keys(C).forEach(function(T){s.table[T]=C[T]});break}u+=$t,d+=$t;continue}u++,d++}},xv=function(o,s,u){for(var d=0,p=$t,f,C,T,O,A,I=!1;p<=o.byteLength;){if(o[d]===pe&&(o[p]===pe||p===o.byteLength)){switch(f=o.subarray(d,p),C=j1.ts.parseType(f,s.pid),C){case"pes":T=j1.ts.parsePesType(f,s.table),O=j1.ts.parsePayloadUnitStartIndicator(f),T==="audio"&&O&&(A=j1.ts.parsePesTime(f),A&&(A.type="audio",u.audio.push(A),I=!0));break}if(I)break;d+=$t,p+=$t;continue}d++,p++}for(p=o.byteLength,d=p-$t,I=!1;d>=0;){if(o[d]===pe&&(o[p]===pe||p===o.byteLength)){switch(f=o.subarray(d,p),C=j1.ts.parseType(f,s.pid),C){case"pes":T=j1.ts.parsePesType(f,s.table),O=j1.ts.parsePayloadUnitStartIndicator(f),T==="audio"&&O&&(A=j1.ts.parsePesTime(f),A&&(A.type="audio",u.audio.push(A),I=!0));break}if(I)break;d-=$t,p-=$t;continue}d--,p--}},gH=function(o,s,u){for(var d=0,p=$t,f,C,T,O,A,I,G,v1,Q=!1,H1={data:[],size:0};p<o.byteLength;){if(o[d]===pe&&o[p]===pe){switch(f=o.subarray(d,p),C=j1.ts.parseType(f,s.pid),C){case"pes":if(T=j1.ts.parsePesType(f,s.table),O=j1.ts.parsePayloadUnitStartIndicator(f),T==="video"&&(O&&!Q&&(A=j1.ts.parsePesTime(f),A&&(A.type="video",u.video.push(A),Q=!0)),!u.firstKeyFrame)){if(O&&H1.size!==0){for(I=new Uint8Array(H1.size),G=0;H1.data.length;)v1=H1.data.shift(),I.set(v1,G),G+=v1.byteLength;if(j1.ts.videoPacketContainsKeyFrame(I)){var V1=j1.ts.parsePesTime(I);V1?(u.firstKeyFrame=V1,u.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}H1.size=0}H1.data.push(f),H1.size+=f.byteLength}break}if(Q&&u.firstKeyFrame)break;d+=$t,p+=$t;continue}d++,p++}for(p=o.byteLength,d=p-$t,Q=!1;d>=0;){if(o[d]===pe&&o[p]===pe){switch(f=o.subarray(d,p),C=j1.ts.parseType(f,s.pid),C){case"pes":T=j1.ts.parsePesType(f,s.table),O=j1.ts.parsePayloadUnitStartIndicator(f),T==="video"&&O&&(A=j1.ts.parsePesTime(f),A&&(A.type="video",u.video.push(A),Q=!0));break}if(Q)break;d-=$t,p-=$t;continue}d--,p--}},pH=function(o,s){if(o.audio&&o.audio.length){var u=s;(typeof u>"u"||isNaN(u))&&(u=o.audio[0].dts),o.audio.forEach(function(f){f.dts=j4(f.dts,u),f.pts=j4(f.pts,u),f.dtsTime=f.dts/X0,f.ptsTime=f.pts/X0})}if(o.video&&o.video.length){var d=s;if((typeof d>"u"||isNaN(d))&&(d=o.video[0].dts),o.video.forEach(function(f){f.dts=j4(f.dts,d),f.pts=j4(f.pts,d),f.dtsTime=f.dts/X0,f.ptsTime=f.pts/X0}),o.firstKeyFrame){var p=o.firstKeyFrame;p.dts=j4(p.dts,d),p.pts=j4(p.pts,d),p.dtsTime=p.dts/X0,p.ptsTime=p.pts/X0}}},fH=function(o){for(var s=!1,u=0,d=null,p=null,f=0,C=0,T;o.length-C>=3;){var O=j1.aac.parseType(o,C);switch(O){case"timed-metadata":if(o.length-C<10){s=!0;break}if(f=j1.aac.parseId3TagSize(o,C),f>o.length){s=!0;break}p===null&&(T=o.subarray(C,C+f),p=j1.aac.parseAacTimestamp(T)),C+=f;break;case"audio":if(o.length-C<7){s=!0;break}if(f=j1.aac.parseAdtsSize(o,C),f>o.length){s=!0;break}d===null&&(T=o.subarray(C,C+f),d=j1.aac.parseSampleRate(T)),u++,C+=f;break;default:C++;break}if(s)return null}if(d===null||p===null)return null;var A=X0/d,I={audio:[{type:"audio",dts:p,pts:p},{type:"audio",dts:p+u*1024*A,pts:p+u*1024*A}]};return I},zH=function(o){var s={pid:null,table:null},u={};uH(o,s);for(var d in s.table)if(s.table.hasOwnProperty(d)){var p=s.table[d];switch(p){case Hv.H264_STREAM_TYPE:u.video=[],gH(o,s,u),u.video.length===0&&delete u.video;break;case Hv.ADTS_STREAM_TYPE:u.audio=[],xv(o,s,u),u.audio.length===0&&delete u.audio;break}}return u},MH=function(o,s){var u=j1.aac.isLikelyAacData(o),d;return u?d=fH(o):d=zH(o),!d||!d.audio&&!d.video?null:(pH(d,s),d)},mH={inspect:MH,parseAudioPes_:xv};let HH=function(o,s){s.on("data",function(u){let d=u.initSegment;u.initSegment={data:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength};let p=u.data;u.data=p.buffer,o.postMessage({action:"data",segment:u,byteOffset:p.byteOffset,byteLength:p.byteLength},[u.data])}),s.on("done",function(u){o.postMessage({action:"done"})}),s.on("gopInfo",function(u){o.postMessage({action:"gopInfo",gopInfo:u})}),s.on("videoSegmentTimingInfo",function(u){let d={start:{decode:I1.videoTsToSeconds(u.start.dts),presentation:I1.videoTsToSeconds(u.start.pts)},end:{decode:I1.videoTsToSeconds(u.end.dts),presentation:I1.videoTsToSeconds(u.end.pts)},baseMediaDecodeTime:I1.videoTsToSeconds(u.baseMediaDecodeTime)};u.prependedContentDuration&&(d.prependedContentDuration=I1.videoTsToSeconds(u.prependedContentDuration)),o.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:d})}),s.on("audioSegmentTimingInfo",function(u){let d={start:{decode:I1.videoTsToSeconds(u.start.dts),presentation:I1.videoTsToSeconds(u.start.pts)},end:{decode:I1.videoTsToSeconds(u.end.dts),presentation:I1.videoTsToSeconds(u.end.pts)},baseMediaDecodeTime:I1.videoTsToSeconds(u.baseMediaDecodeTime)};u.prependedContentDuration&&(d.prependedContentDuration=I1.videoTsToSeconds(u.prependedContentDuration)),o.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:d})}),s.on("id3Frame",function(u){o.postMessage({action:"id3Frame",id3Frame:u})}),s.on("caption",function(u){o.postMessage({action:"caption",caption:u})}),s.on("trackinfo",function(u){o.postMessage({action:"trackinfo",trackInfo:u})}),s.on("audioTimingInfo",function(u){o.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:I1.videoTsToSeconds(u.start),end:I1.videoTsToSeconds(u.end)}})}),s.on("videoTimingInfo",function(u){o.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:I1.videoTsToSeconds(u.start),end:I1.videoTsToSeconds(u.end)}})}),s.on("log",function(u){o.postMessage({action:"log",log:u})})};class Vv{constructor(s,u){this.options=u||{},this.self=s,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new wm.Transmuxer(this.options),HH(this.self,this.transmuxer)}pushMp4Captions(s){this.captionParser||(this.captionParser=new qm,this.captionParser.init());let u=new Uint8Array(s.data,s.byteOffset,s.byteLength),d=this.captionParser.parse(u,s.trackIds,s.timescales);this.self.postMessage({action:"mp4Captions",captions:d&&d.captions||[],logs:d&&d.logs||[],data:u.buffer},[u.buffer])}probeMp4StartTime({timescales:s,data:u}){let d=Mv.startTime(s,u);this.self.postMessage({action:"probeMp4StartTime",startTime:d,data:u},[u.buffer])}probeMp4Tracks({data:s}){let u=Mv.tracks(s);this.self.postMessage({action:"probeMp4Tracks",tracks:u,data:s},[s.buffer])}probeTs({data:s,baseStartTime:u}){let d=typeof u=="number"&&!isNaN(u)?u*I1.ONE_SECOND_IN_TS:void 0,p=mH.inspect(s,d),f=null;p&&(f={hasVideo:p.video&&p.video.length===2||!1,hasAudio:p.audio&&p.audio.length===2||!1},f.hasVideo&&(f.videoStart=p.video[0].ptsTime),f.hasAudio&&(f.audioStart=p.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:f,data:s},[s.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(s){let u=new Uint8Array(s.data,s.byteOffset,s.byteLength);this.transmuxer.push(u)}reset(){this.transmuxer.reset()}setTimestampOffset(s){let u=s.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(I1.secondsToVideoTs(u)))}setAudioAppendStart(s){this.transmuxer.setAudioAppendStart(Math.ceil(I1.secondsToVideoTs(s.appendStart)))}setRemux(s){this.transmuxer.setRemux(s.remux)}flush(s){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(s){this.transmuxer.alignGopsWith(s.gopsToAlignWith.slice())}}self.onmessage=function(o){if(o.data.action==="init"&&o.data.options){this.messageHandlers=new Vv(self,o.data.options);return}this.messageHandlers||(this.messageHandlers=new Vv(self)),o.data&&o.data.action&&o.data.action!=="init"&&this.messageHandlers[o.data.action]&&this.messageHandlers[o.data.action](o.data)}})),wC=Uz(VC),LC=(e,t,a)=>{let{type:r,initSegment:n,captions:i,captionStreams:h,metadata:l,videoFrameDtsTime:c,videoFramePtsTime:v}=e.data.segment;t.buffer.push({captions:i,captionStreams:h,metadata:l});let g=e.data.segment.boxes||{data:e.data.segment.data},z={type:r,data:new Uint8Array(g.data,g.data.byteOffset,g.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof c<"u"&&(z.videoFrameDtsTime=c),typeof v<"u"&&(z.videoFramePtsTime=v),a(z)},yC=({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)},BC=(e,t)=>{t.gopInfo=e.data.gopInfo},Gz=e=>{let{transmuxer:t,bytes:a,audioAppendStart:r,gopsToAlignWith:n,remux:i,onData:h,onTrackInfo:l,onAudioTimingInfo:c,onVideoTimingInfo:v,onVideoSegmentTimingInfo:g,onAudioSegmentTimingInfo:z,onId3:w,onCaptions:L,onDone:V,onEndedTimeline:b,onTransmuxerLog:k,isEndOfTimeline:m}=e,H={buffer:[]},y=m,B=_=>{t.currentTransmux===e&&(_.data.action==="data"&&LC(_,H,h),_.data.action==="trackinfo"&&l(_.data.trackInfo),_.data.action==="gopInfo"&&BC(_,H),_.data.action==="audioTimingInfo"&&c(_.data.audioTimingInfo),_.data.action==="videoTimingInfo"&&v(_.data.videoTimingInfo),_.data.action==="videoSegmentTimingInfo"&&g(_.data.videoSegmentTimingInfo),_.data.action==="audioSegmentTimingInfo"&&z(_.data.audioSegmentTimingInfo),_.data.action==="id3Frame"&&w([_.data.id3Frame],_.data.id3Frame.dispatchType),_.data.action==="caption"&&L(_.data.caption),_.data.action==="endedtimeline"&&(y=!1,b()),_.data.action==="log"&&k(_.data.log),_.data.type==="transmuxed"&&(y||(t.onmessage=null,yC({transmuxedData:H,callback:V}),qz(t))))};if(t.onmessage=B,r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(n)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof i<"u"&&t.postMessage({action:"setRemux",remux:i}),a.byteLength){let _=a instanceof ArrayBuffer?a:a.buffer,j=a instanceof ArrayBuffer?0:a.byteOffset;t.postMessage({action:"push",data:_,byteOffset:j,byteLength:a.byteLength},[_])}m&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},qz=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():Gz(e.currentTransmux))},gf=(e,t)=>{e.postMessage({action:t}),qz(e)},Kz=(e,t)=>{if(!t.currentTransmux){t.currentTransmux=e,gf(t,e);return}t.transmuxQueue.push(gf.bind(null,t,e))},CC=e=>{Kz("reset",e)},SC=e=>{Kz("endTimeline",e)},Xz=e=>{if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,Gz(e);return}e.transmuxer.transmuxQueue.push(e)},_C=e=>{let t=new wC;t.currentTransmux=null,t.transmuxQueue=[];let a=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,a.call(t)),t.postMessage({action:"init",options:e}),t},p9={reset:CC,endTimeline:SC,transmux:Xz,createTransmuxer:_C},A3=function(e){let t=e.transmuxer,a=e.endAction||e.action,r=e.callback,n=re({},e,{endAction:null,transmuxer:null,callback:null}),i=h=>{h.data.action===a&&(t.removeEventListener("message",i),h.data.data&&(h.data.data=new Uint8Array(h.data.data,e.byteOffset||0,e.byteLength||h.data.data.byteLength),e.data&&(e.data=h.data.data)),r(h.data))};if(t.addEventListener("message",i),e.data){let h=e.data instanceof ArrayBuffer;n.byteOffset=h?0:e.data.byteOffset,n.byteLength=e.data.byteLength;let l=[h?e.data:e.data.buffer];t.postMessage(n,l)}else t.postMessage(n)},_e={FAILURE:2,TIMEOUT:-101,ABORTED:-102},J9=e=>{e.forEach(t=>{t.abort()})},TC=e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}),bC=e=>{let t=e.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},L6=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:_e.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:_e.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:_e.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:_e.FAILURE,xhr:t}:null,pf=(e,t,a)=>(r,n)=>{let i=n.response,h=L6(r,n);if(h)return a(h,e);if(i.byteLength!==16)return a({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:_e.FAILURE,xhr:n},e);let l=new DataView(i),c=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let v=0;v<t.length;v++)t[v].bytes=c;return a(null,e)},Yz=(e,t)=>{let a=Fh(e.map.bytes);if(a!=="mp4"){let r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${a||"unknown"} container for initialization segment at URL: ${r}`,code:_e.FAILURE})}A3({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:r,data:n})=>(e.map.bytes=n,r.forEach(function(i){e.map.tracks=e.map.tracks||{},!e.map.tracks[i.type]&&(e.map.tracks[i.type]=i,typeof i.id=="number"&&i.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[i.id]=i.timescale))}),t(null))})},OC=({segment:e,finishProcessingFn:t})=>(a,r)=>{let n=L6(a,r);if(n)return t(n,e);let i=new Uint8Array(r.response);if(e.map.key)return e.map.encryptedBytes=i,t(null,e);e.map.bytes=i,Yz(e,function(h){if(h)return h.xhr=r,h.status=r.status,t(h,e);t(null,e)})},AC=({segment:e,finishProcessingFn:t,responseType:a})=>(r,n)=>{let i=L6(r,n);if(i)return t(i,e);let h=a==="arraybuffer"||!n.responseText?n.response:HC(n.responseText.substring(e.lastReachedChar||0));return e.stats=TC(n),e.key?e.encryptedBytes=new Uint8Array(h):e.bytes=new Uint8Array(h),t(null,e)},EC=({segment:e,bytes:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})=>{let L=e.map&&e.map.tracks||{},V=!!(L.audio&&L.video),b=r.bind(null,e,"audio","start"),k=r.bind(null,e,"audio","end"),m=r.bind(null,e,"video","start"),H=r.bind(null,e,"video","end"),y=()=>Xz({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:V,onData:B=>{B.type=B.type==="combined"?"video":B.type,g(e,B)},onTrackInfo:B=>{a&&(V&&(B.isMuxed=!0),a(e,B))},onAudioTimingInfo:B=>{b&&typeof B.start<"u"&&(b(B.start),b=null),k&&typeof B.end<"u"&&k(B.end)},onVideoTimingInfo:B=>{m&&typeof B.start<"u"&&(m(B.start),m=null),H&&typeof B.end<"u"&&H(B.end)},onVideoSegmentTimingInfo:B=>{n(B)},onAudioSegmentTimingInfo:B=>{i(B)},onId3:(B,_)=>{h(e,B,_)},onCaptions:B=>{l(e,[B])},isEndOfTimeline:c,onEndedTimeline:()=>{v()},onTransmuxerLog:w,onDone:B=>{z&&(B.type=B.type==="combined"?"video":B.type,z(null,e,B))}});A3({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:B=>{e.bytes=t=B.data;let _=B.result;_&&(a(e,{hasAudio:_.hasAudio,hasVideo:_.hasVideo,isMuxed:V}),a=null,_.hasAudio&&!V&&b(_.audioStart),_.hasVideo&&m(_.videoStart),b=null,m=null),y()}})},Qz=({segment:e,bytes:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})=>{let L=new Uint8Array(t);if(Ap(L)){e.isFmp4=!0;let{tracks:V}=e.map,b={isFmp4:!0,hasVideo:!!V.video,hasAudio:!!V.audio};V.audio&&V.audio.codec&&V.audio.codec!=="enca"&&(b.audioCodec=V.audio.codec),V.video&&V.video.codec&&V.video.codec!=="encv"&&(b.videoCodec=V.video.codec),V.video&&V.audio&&(b.isMuxed=!0),a(e,b);let k=m=>{g(e,{data:L,type:b.hasAudio&&!b.isMuxed?"audio":"video"}),m&&m.length&&l(e,m),z(null,e,{})};A3({action:"probeMp4StartTime",timescales:e.map.timescales,data:L,transmuxer:e.transmuxer,callback:({data:m,startTime:H})=>{if(t=m.buffer,e.bytes=L=m,b.hasAudio&&!b.isMuxed&&r(e,"audio","start",H),b.hasVideo&&r(e,"video","start",H),!V.video||!m.byteLength||!e.transmuxer){k();return}A3({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:L,timescales:e.map.timescales,trackIds:[V.video.id],callback:y=>{t=y.data.buffer,e.bytes=L=y.data,y.logs.forEach(function(B){w(J1(B,{stream:"mp4CaptionParser"}))}),k(y.captions)}})}});return}if(!e.transmuxer){z(null,e,{});return}if(typeof e.container>"u"&&(e.container=Fh(L)),e.container!=="ts"&&e.container!=="aac"){a(e,{hasAudio:!1,hasVideo:!1}),z(null,e,{});return}EC({segment:e,bytes:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})},Jz=function({id:e,key:t,encryptedBytes:a,decryptionWorker:r},n){let i=l=>{if(l.data.source===e){r.removeEventListener("message",i);let c=l.data.decrypted;n(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};r.addEventListener("message",i);let h;t.bytes.slice?h=t.bytes.slice():h=new Uint32Array(Array.prototype.slice.call(t.bytes)),r.postMessage(Dz({source:e,encrypted:a,key:h,iv:t.iv}),[a.buffer,h.buffer])},kC=({decryptionWorker:e,segment:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})=>{Jz({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},L=>{t.bytes=L,Qz({segment:t,bytes:t.bytes,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})})},PC=({activeXhrs:e,decryptionWorker:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})=>{let L=0,V=!1;return(b,k)=>{if(!V){if(b)return V=!0,J9(e),z(b,k);if(L+=1,L===e.length){let m=function(){if(k.encryptedBytes)return kC({decryptionWorker:t,segment:k,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w});Qz({segment:k,bytes:k.bytes,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g,doneFn:z,onTransmuxerLog:w})};if(k.endOfAllRequests=Date.now(),k.map&&k.map.encryptedBytes&&!k.map.bytes)return Jz({decryptionWorker:t,id:k.requestId+"-init",encryptedBytes:k.map.encryptedBytes,key:k.map.key},H=>{k.map.bytes=H,Yz(k,y=>{if(y)return J9(e),z(y,k);m()})});m()}}}},DC=({loadendState:e,abortFn:t})=>a=>{a.target.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)},IC=({segment:e,progressFn:t,trackInfoFn:a,timingInfoFn:r,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:i,id3Fn:h,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:v,dataFn:g})=>z=>{if(!z.target.aborted)return e.stats=J1(e.stats,bC(z)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(z,e)},RC=({xhr:e,xhrOptions:t,decryptionWorker:a,segment:r,abortFn:n,progressFn:i,trackInfoFn:h,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:v,id3Fn:g,captionsFn:z,isEndOfTimeline:w,endedTimelineFn:L,dataFn:V,doneFn:b,onTransmuxerLog:k})=>{let m=[],H=PC({activeXhrs:m,decryptionWorker:a,trackInfoFn:h,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:v,id3Fn:g,captionsFn:z,isEndOfTimeline:w,endedTimelineFn:L,dataFn:V,doneFn:b,onTransmuxerLog:k});if(r.key&&!r.key.bytes){let U=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&U.push(r.map.key);let q=J1(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),D=pf(r,U,H),J=e(q,D);m.push(J)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){let t1=J1(t,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Z=pf(r,[r.map.key],H),F=e(t1,Z);m.push(F)}let q=J1(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Q9(r.map)}),D=OC({segment:r,finishProcessingFn:H}),J=e(q,D);m.push(J)}let y=J1(t,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:Q9(r)}),B=AC({segment:r,finishProcessingFn:H,responseType:y.responseType}),_=e(y,B);_.addEventListener("progress",IC({segment:r,progressFn:i,trackInfoFn:h,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:v,id3Fn:g,captionsFn:z,isEndOfTimeline:w,endedTimelineFn:L,dataFn:V})),m.push(_);let j={};return m.forEach(U=>{U.addEventListener("loadend",DC({loadendState:j,abortFn:n}))}),()=>J9(m)},jC=ce("CodecUtils"),NC=function(e){let t=e.attributes||{};if(t.CODECS)return ne(t.CODECS)},Zz=(e,t)=>{let a=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&a.AUDIO&&e.mediaGroups.AUDIO[a.AUDIO]},FC=(e,t)=>{if(!Zz(e,t))return!0;let a=t.attributes||{},r=e.mediaGroups.AUDIO[a.AUDIO];for(let n in r)if(!r[n].uri&&!r[n].playlists)return!0;return!1},E3=function(e){let t={};return e.forEach(({mediaType:a,type:r,details:n})=>{t[a]=t[a]||[],t[a].push(Ms(`${r}${n}`))}),Object.keys(t).forEach(function(a){if(t[a].length>1){jC(`multiple ${a} codecs found as attributes: ${t[a].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),t[a]=null;return}t[a]=t[a][0]}),t},ff=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Qn=function(e,t){let a=t.attributes||{},r=E3(NC(t)||[]);if(Zz(e,t)&&!r.audio&&!FC(e,t)){let n=E3(ag(e,a.AUDIO)||[]);n.audio&&(r.audio=n.audio)}return r},qh=ce("PlaylistSelector"),zf=function(e){if(!e||!e.playlist)return;let t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},k3=function(e,t){if(!e)return"";let a=P.default.getComputedStyle(e);return a?a[t]:""},Ua=function(e,t){let a=e.slice();e.sort(function(r,n){let i=t(r,n);return i===0?a.indexOf(r)-a.indexOf(n):i})},y6=function(e,t){let a,r;return e.attributes.BANDWIDTH&&(a=e.attributes.BANDWIDTH),a=a||P.default.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||P.default.Number.MAX_VALUE,a-r},UC=function(e,t){let a,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(a=e.attributes.RESOLUTION.width),a=a||P.default.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||P.default.Number.MAX_VALUE,a===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:a-r},tM=function(e,t,a,r,n,i){if(!e)return;let h={bandwidth:t,width:a,height:r,limitRenditionByPlayerDimensions:n},l=e.playlists;u2.isAudioOnly(e)&&(l=i.getAudioTrackPlaylists_(),h.audioOnly=!0);let c=l.map(_=>{let j,U=_.attributes&&_.attributes.RESOLUTION&&_.attributes.RESOLUTION.width,q=_.attributes&&_.attributes.RESOLUTION&&_.attributes.RESOLUTION.height;return j=_.attributes&&_.attributes.BANDWIDTH,j=j||P.default.Number.MAX_VALUE,{bandwidth:j,width:U,height:q,playlist:_}});Ua(c,(_,j)=>_.bandwidth-j.bandwidth),c=c.filter(_=>!u2.isIncompatible(_.playlist));let v=c.filter(_=>u2.isEnabled(_.playlist));v.length||(v=c.filter(_=>!u2.isDisabled(_.playlist)));let g=v.filter(_=>_.bandwidth*St.BANDWIDTH_VARIANCE<t),z=g[g.length-1],w=g.filter(_=>_.bandwidth===z.bandwidth)[0];if(n===!1){let _=w||v[0]||c[0];if(_&&_.playlist){let j="sortedPlaylistReps";return w&&(j="bandwidthBestRep"),v[0]&&(j="enabledPlaylistReps"),qh(`choosing ${zf(_)} using ${j} with options`,h),_.playlist}return qh("could not choose a playlist with options",h),null}let L=g.filter(_=>_.width&&_.height);Ua(L,(_,j)=>_.width-j.width);let V=L.filter(_=>_.width===a&&_.height===r);z=V[V.length-1];let b=V.filter(_=>_.bandwidth===z.bandwidth)[0],k,m,H;b||(k=L.filter(_=>_.width>a||_.height>r),m=k.filter(_=>_.width===k[0].width&&_.height===k[0].height),z=m[m.length-1],H=m.filter(_=>_.bandwidth===z.bandwidth)[0]);let y;if(i.leastPixelDiffSelector){let _=L.map(j=>(j.pixelDiff=Math.abs(j.width-a)+Math.abs(j.height-r),j));Ua(_,(j,U)=>j.pixelDiff===U.pixelDiff?U.bandwidth-j.bandwidth:j.pixelDiff-U.pixelDiff),y=_[0]}let B=y||H||b||w||v[0]||c[0];if(B&&B.playlist){let _="sortedPlaylistReps";return y?_="leastPixelDiffRep":H?_="resolutionPlusOneRep":b?_="resolutionBestRep":w?_="bandwidthBestRep":v[0]&&(_="enabledPlaylistReps"),qh(`choosing ${zf(B)} using ${_} with options`,h),B.playlist}return qh("could not choose a playlist with options",h),null},Mf=function(){let e=this.useDevicePixelRatio&&P.default.devicePixelRatio||1;return tM(this.playlists.main,this.systemBandwidth,parseInt(k3(this.tech_.el(),"width"),10)*e,parseInt(k3(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},$C=function(e){let t=-1,a=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&P.default.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,a=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==a&&(t=e*this.systemBandwidth+(1-e)*t,a=this.systemBandwidth),tM(this.playlists.main,t,parseInt(k3(this.tech_.el(),"width"),10)*r,parseInt(k3(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},WC=function(e){let{main:t,currentTime:a,bandwidth:r,duration:n,segmentDuration:i,timeUntilRebuffer:h,currentTimeline:l,syncController:c}=e,v=t.playlists.filter(V=>!u2.isIncompatible(V)),g=v.filter(u2.isEnabled);g.length||(g=v.filter(V=>!u2.isDisabled(V)));let w=g.filter(u2.hasAttribute.bind(null,"BANDWIDTH")).map(V=>{let k=c.getSyncPoint(V,n,l,a)?1:2,H=u2.estimateSegmentRequestTime(i,r,V)*k-h;return{playlist:V,rebufferingImpact:H}}),L=w.filter(V=>V.rebufferingImpact<=0);return Ua(L,(V,b)=>y6(b.playlist,V.playlist)),L.length?L[0]:(Ua(w,(V,b)=>V.rebufferingImpact-b.rebufferingImpact),w[0]||null)},GC=function(){let e=this.playlists.main.playlists.filter(u2.isEnabled);return Ua(e,(a,r)=>y6(a,r)),e.filter(a=>!!Qn(this.playlists.main,a).video)[0]||null},qC=e=>{let t=0,a;return e.bytes&&(a=new Uint8Array(e.bytes),e.segments.forEach(r=>{a.set(r,t),t+=r.byteLength})),a},KC=function(e,t,a){if(!e[a]){t.trigger({type:"usage",name:"vhs-608"});let r=a;/^cc708_/.test(a)&&(r="SERVICE"+a.split("_")[1]);let n=t.textTracks().getTrackById(r);if(n)e[a]=n;else{let i=t.options_.vhs&&t.options_.vhs.captionServices||{},h=a,l=a,c=!1,v=i[r];v&&(h=v.label,l=v.language,c=v.default),e[a]=t.addRemoteTextTrack({kind:"captions",id:r,default:c,label:h,language:l},!1).track}}},XC=function({inbandTextTracks:e,captionArray:t,timestampOffset:a}){if(!t)return;let r=P.default.WebKitDataCue||P.default.VTTCue;t.forEach(n=>{let i=n.stream;e[i].addCue(new r(n.startTime+a,n.endTime+a,n.text))})},YC=function(e){Object.defineProperties(e.frame,{id:{get(){return $.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get(){return $.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get(){return $.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},QC=({inbandTextTracks:e,metadataArray:t,timestampOffset:a,videoDuration:r})=>{if(!t)return;let n=P.default.WebKitDataCue||P.default.VTTCue,i=e.metadataTrack_;if(!i||(t.forEach(g=>{let z=g.cueTime+a;typeof z!="number"||P.default.isNaN(z)||z<0||!(z<1/0)||g.frames.forEach(w=>{let L=new n(z,z,w.value||w.url||w.data||"");L.frame=w,L.value=w,YC(L),i.addCue(L)})}),!i.cues||!i.cues.length))return;let h=i.cues,l=[];for(let g=0;g<h.length;g++)h[g]&&l.push(h[g]);let c=l.reduce((g,z)=>{let w=g[z.startTime]||[];return w.push(z),g[z.startTime]=w,g},{}),v=Object.keys(c).sort((g,z)=>Number(g)-Number(z));v.forEach((g,z)=>{let w=c[g],L=Number(v[z+1])||r;w.forEach(V=>{V.endTime=L})})},JC=(e,t,a)=>{e.metadataTrack_||(e.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},Gn=function(e,t,a){let r,n;if(a&&a.cues)for(r=a.cues.length;r--;)n=a.cues[r],n.startTime>=e&&n.endTime<=t&&a.removeCue(n)},ZC=function(e){let t=e.cues;if(t)for(let a=0;a<t.length;a++){let r=[],n=0;for(let i=0;i<t.length;i++)t[a].startTime===t[i].startTime&&t[a].endTime===t[i].endTime&&t[a].text===t[i].text&&(n++,n>1&&r.push(t[i]));r.length&&r.forEach(i=>e.removeCue(i))}},tS=(e,t,a)=>{if(typeof t>"u"||t===null||!e.length)return[];let r=Math.ceil((t-a+3)*Jn.ONE_SECOND_IN_TS),n;for(n=0;n<e.length&&!(e[n].pts>r);n++);return e.slice(n)},eS=(e,t,a)=>{if(!t.length)return e;if(a)return t.slice();let r=t[0].pts,n=0;for(n;n<e.length&&!(e[n].pts>=r);n++);return e.slice(0,n).concat(t)},aS=(e,t,a,r)=>{let n=Math.ceil((t-r)*Jn.ONE_SECOND_IN_TS),i=Math.ceil((a-r)*Jn.ONE_SECOND_IN_TS),h=e.slice(),l=e.length;for(;l--&&!(e[l].pts<=i););if(l===-1)return h;let c=l+1;for(;c--&&!(e[c].pts<=n););return c=Math.max(c,0),h.splice(c,l-c+1),h},rS=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;let a=Object.keys(e).sort(),r=Object.keys(t).sort();if(a.length!==r.length)return!1;for(let n=0;n<a.length;n++){let i=a[n];if(i!==r[n]||e[i]!==t[i])return!1}return!0},eM=22,nS=function(e,t,a){t=t||[];let r=[],n=0;for(let i=0;i<t.length;i++){let h=t[i];if(e===h.timeline&&(r.push(i),n+=h.duration,n>a))return i}return r.length===0?0:r[r.length-1]},$n=1,iS=500,mf=e=>typeof e=="number"&&isFinite(e),Kh=1/60,hS=(e,t,a)=>e!=="main"||!t||!a?null:!a.hasAudio&&!a.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!a.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&a.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,lS=(e,t,a)=>{let r=t-St.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));let n=t-a;return Math.min(n,r)},Pa=e=>{let{startOfSegment:t,duration:a,segment:r,part:n,playlist:{mediaSequence:i,id:h,segments:l=[]},mediaIndex:c,partIndex:v,timeline:g}=e,z=l.length-1,w="mediaIndex/partIndex increment";e.getMediaInfoForTime?w=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(w="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(w+=` with independent ${e.independent}`);let L=typeof v=="number",V=e.segment.uri?"segment":"pre-segment",b=L?wz({preloadSegment:r})-1:0;return`${V} [${i+c}/${i+z}]`+(L?` part [${v}/${b}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(L?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${t}] duration [${a}] timeline [${g}] selected by [${w}] playlist [${h}]`},Hf=e=>`${e}TimingInfo`,oS=({segmentTimeline:e,currentTimeline:t,startOfSegment:a,buffered:r,overrideCheck:n})=>!n&&e===t?null:e<t?a:r.length?r.end(r.length-1):a,xf=({timelineChangeController:e,currentTimeline:t,segmentTimeline:a,loaderType:r,audioDisabled:n})=>{if(t===a)return!1;if(r==="audio"){let i=e.lastTimelineChange({type:"main"});return!i||i.to!==a}if(r==="main"&&n){let i=e.pendingTimelineChange({type:"audio"});return!(i&&i.to===a)}return!1},cS=e=>{let t=0;return["video","audio"].forEach(function(a){let r=e[`${a}TimingInfo`];if(!r)return;let{start:n,end:i}=r,h;typeof n=="bigint"||typeof i=="bigint"?h=P.default.BigInt(i)-P.default.BigInt(n):typeof n=="number"&&typeof i=="number"&&(h=i-n),typeof h<"u"&&h>t&&(t=h)}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},Vf=({segmentDuration:e,maxDuration:t})=>e?Math.round(e)>t+j0:!1,sS=(e,t)=>{if(t!=="hls")return null;let a=cS({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!a)return null;let r=e.playlist.targetDuration,n=Vf({segmentDuration:a,maxDuration:r*2}),i=Vf({segmentDuration:a,maxDuration:r}),h=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${a} when the reported duration is ${e.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||i?{severity:n?"warn":"info",message:h}:null},H5=class extends $.EventTarget{constructor(t,a={}){if(super(),!t)throw new TypeError("Initialization settings are required");if(typeof t.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=$.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=ce(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return p9.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&P.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,P.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==t}error(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&p9.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){let t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return Nt();if(this.loaderType_==="main"){let{hasAudio:a,hasVideo:r,isMuxed:n}=t;if(r&&a&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,a=!1){if(!t)return null;let r=O3(t),n=this.initSegments_[r];return a&&!n&&t.bytes&&(this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),n||t}segmentKey(t,a=!1){if(!t)return null;let r=Iz(t),n=this.keyCache_[r];this.cacheEncryptionKeys_&&a&&!n&&t.bytes&&(this.keyCache_[r]=n={resolvedUri:t.resolvedUri,bytes:t.bytes});let i={resolvedUri:(n||t).resolvedUri};return n&&(i.bytes=n.bytes),i}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,a={}){if(!t)return;let r=this.playlist_,n=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=a,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));let i=null;if(r&&(r.id?i=r.id:r.uri&&(i=r.uri)),this.logger_(`playlist update [${i} => ${t.id||t.uri}]`),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==t.uri){this.mediaIndex!==null&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}let h=t.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${h}]`),this.mediaIndex!==null)if(this.mediaIndex-=h,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{let l=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!l.parts||!l.parts.length||!l.parts[this.partIndex])){let c=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=c}}n&&(n.mediaIndex-=h,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=t.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,t)}pause(){this.checkBufferTimeout_&&(P.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&p9.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,a,r=()=>{},n=!1){if(a===1/0&&(a=this.duration_()),a<=t){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let i=1,h=()=>{i--,i===0&&r()};(n||!this.audioDisabled_)&&(i++,this.sourceUpdater_.removeAudio(t,a,h)),(n||this.loaderType_==="main")&&(this.gopBuffer_=aS(this.gopBuffer_,t,a,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(t,a,h));for(let l in this.inbandTextTracks_)Gn(t,a,this.inbandTextTracks_[l]);Gn(t,a,this.segmentMetadataTrack_),h()}monitorBuffer_(){this.checkBufferTimeout_&&P.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=P.default.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&P.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=P.default.setTimeout(this.monitorBufferTick_.bind(this),iS)}fillBuffer_(){if(this.sourceUpdater_.updating())return;let t=this.chooseNextRequest_();t&&(typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}isEndOfStream_(t=this.mediaIndex,a=this.playlist_,r=this.partIndex){if(!a||!this.mediaSource_)return!1;let n=typeof t=="number"&&a.segments[t],i=t+1===a.segments.length,h=!n||!n.parts||r+1===n.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&i&&h}chooseNextRequest_(){let t=this.buffered_(),a=sf(t)||0,r=m6(t,this.currentTime_()),n=!this.hasPlayed_()&&r>=1,i=r>=this.goalBufferLength_(),h=this.playlist_.segments;if(!h.length||n||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());let l={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(l.isSyncRequest)l.mediaIndex=nS(this.currentTimeline_,h,a);else if(this.mediaIndex!==null){let z=h[this.mediaIndex],w=typeof this.partIndex=="number"?this.partIndex:-1;l.startOfSegment=z.end?z.end:a,z.parts&&z.parts[w+1]?(l.mediaIndex=this.mediaIndex,l.partIndex=w+1):l.mediaIndex=this.mediaIndex+1}else{let{segmentIndex:z,startTime:w,partIndex:L}=u2.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});l.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${a}`:`currentTime ${this.currentTime_()}`,l.mediaIndex=z,l.startOfSegment=w,l.partIndex=L}let c=h[l.mediaIndex],v=c&&typeof l.partIndex=="number"&&c.parts&&c.parts[l.partIndex];if(!c||typeof l.partIndex=="number"&&!v)return null;if(typeof l.partIndex!="number"&&c.parts&&(l.partIndex=0,v=c.parts[0]),!r&&v&&!v.independent)if(l.partIndex===0){let z=h[l.mediaIndex-1],w=z.parts&&z.parts.length&&z.parts[z.parts.length-1];w&&w.independent&&(l.mediaIndex-=1,l.partIndex=z.parts.length-1,l.independent="previous segment")}else c.parts[l.partIndex-1].independent&&(l.partIndex-=1,l.independent="previous part");let g=this.mediaSource_&&this.mediaSource_.readyState==="ended";return l.mediaIndex>=h.length-1&&g&&!this.seeking_()?null:this.generateSegmentInfo_(l)}generateSegmentInfo_(t){let{independent:a,playlist:r,mediaIndex:n,startOfSegment:i,isSyncRequest:h,partIndex:l,forceTimestampOffset:c,getMediaInfoForTime:v}=t,g=r.segments[n],z=typeof l=="number"&&g.parts[l],w={requestId:"segment-loader-"+Math.random(),uri:z&&z.resolvedUri||g.resolvedUri,mediaIndex:n,partIndex:z?l:null,isSyncRequest:h,startOfSegment:i,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:g.timeline,duration:z&&z.duration||g.duration,segment:g,part:z,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:a},L=typeof c<"u"?c:this.isPendingTimestampOffset_;w.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:g.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:L});let V=sf(this.sourceUpdater_.audioBuffered());return typeof V=="number"&&(w.audioAppendStart=V-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(w.gopsToAlignWith=tS(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),w}timestampOffsetForSegment_(t){return oS(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;let a=this.currentTime_(),r=t.bandwidth,n=this.pendingSegment_.duration,i=u2.estimateSegmentRequestTime(n,r,this.playlist_,t.bytesReceived),h=AB(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(i<=h)return;let l=WC({main:this.vhs_.playlists.main,currentTime:a,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:h,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!l)return;let v=i-h-l.rebufferingImpact,g=.5;h<=j0&&(g=1),!(!l.playlist||l.playlist.uri===this.playlist_.uri||v<g)&&(this.bandwidth=l.playlist.attributes.BANDWIDTH*St.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${Pa(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")}handleTrackInfo_(t,a){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},rS(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(t,a,r,n){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;let i=this.pendingSegment_,h=Hf(a);i[h]=i[h]||{},i[h][r]=n,this.logger_(`timinginfo: ${a} - ${r} - ${n}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(t,a){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,a));return}let n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};a.forEach(h=>{i[h.stream]=i[h.stream]||{startTime:1/0,captions:[],endTime:0};let l=i[h.stream];l.startTime=Math.min(l.startTime,h.startTime+n),l.endTime=Math.max(l.endTime,h.endTime+n),l.captions.push(h)}),Object.keys(i).forEach(h=>{let{startTime:l,endTime:c,captions:v}=i[h],g=this.inbandTextTracks_;this.logger_(`adding cues from ${l} -> ${c} for ${h}`),KC(g,this.vhs_.tech_,h),Gn(l,c,g[h]),XC({captionArray:v,inbandTextTracks:g,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,a,r){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,a,r));return}let i=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();JC(this.inbandTextTracks_,r,this.vhs_.tech_),QC({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:i,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){let t=this.callQueue_;this.callQueue_=[],t.forEach(a=>a())}processLoadQueue_(){let t=this.loadQueue_;this.loadQueue_=[],t.forEach(a=>a())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;let t=this.pendingSegment_;return t?this.getCurrentMediaInfo_()?!xf({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;let t=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!t||!a)return!1;let{hasAudio:r,hasVideo:n,isMuxed:i}=a;return!(n&&!t.videoTimingInfo||r&&!this.audioDisabled_&&!i&&!t.audioTimingInfo||xf({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,a){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,t,a));return}let r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),r.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),r.isFmp4=t.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[Hf(a.type)].start;else{let n=this.getCurrentMediaInfo_(),i=this.loaderType_==="main"&&n&&n.hasVideo,h;i&&(h=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:i,firstVideoFrameTimeForData:h,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,a.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});let n=this.chooseNextRequest_();if(n.mediaIndex!==r.mediaIndex||n.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,a)}}updateAppendInitSegmentStatus(t,a){this.loaderType_==="main"&&typeof t.timestampOffset=="number"&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==t.playlist&&(this.appendInitSegment_[a]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:a,map:r,playlist:n}){if(r){let i=O3(r);if(this.activeInitSegmentId_===i)return null;a=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=i}return a&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=n,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,a):null}handleQuotaExceededError_({segmentInfo:t,type:a,bytes:r},n){let i=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();i.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+V4(i).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+V4(h).join(", "));let l=i.length?i.start(0):0,c=i.length?i.end(i.length-1):0,v=h.length?h.start(0):0,g=h.length?h.end(h.length-1):0;if(c-l<=$n&&g-v<=$n){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${V4(i).join(", ")}, video buffer: ${V4(h).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:a,bytes:r}));let w=this.currentTime_()-$n;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${w}`),this.remove(0,w,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${$n}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=P.default.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},$n*1e3)},!0)}handleAppendError_({segmentInfo:t,type:a,bytes:r},n){if(n){if(n.code===eM){this.handleQuotaExceededError_({segmentInfo:t,type:a,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(`${a} append of ${r.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:t,type:a,initSegment:r,data:n,bytes:i}){if(!i){let h=[n],l=n.byteLength;r&&(h.unshift(r),l+=r.byteLength),i=qC({bytes:l,segments:h})}this.sourceUpdater_.appendBuffer({segmentInfo:t,type:a,bytes:i},this.handleAppendError_.bind(this,{segmentInfo:t,type:a,bytes:i}))}handleSegmentTimingInfo_(t,a,r){if(!this.pendingSegment_||a!==this.pendingSegment_.requestId)return;let n=this.pendingSegment_.segment,i=`${t}TimingInfo`;n[i]||(n[i]={}),n[i].transmuxerPrependedSeconds=r.prependedContentDuration||0,n[i].transmuxedPresentationStart=r.start.presentation,n[i].transmuxedDecodeStart=r.start.decode,n[i].transmuxedPresentationEnd=r.end.presentation,n[i].transmuxedDecodeEnd=r.end.decode,n[i].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(t,a){let{type:r,data:n}=a;if(!n||!n.byteLength||r==="audio"&&this.audioDisabled_)return;let i=this.getInitSegmentAndUpdateState_({type:r,initSegment:a.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:r,initSegment:i,data:n})}loadSegment_(t){if(this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{let a=re({},t,{forceTimestampOffset:!0});re(t,this.generateSegmentInfo_(a)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)});return}this.updateTransmuxerAndRequestSegment_(t)}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));let a=this.createSimplifiedSegmentObj_(t),r=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),n=this.mediaIndex!==null,i=t.timeline!==this.currentTimeline_&&t.timeline>0,h=r||n&&i;this.logger_(`Requesting ${Pa(t)}`),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=RC({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:h,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:l,level:c,stream:v})=>{this.logger_(`${Pa(t)} logged from transmuxer stream ${v} as a ${c}: ${l}`)}})}trimBackBuffer_(t){let a=lS(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)}createSimplifiedSegmentObj_(t){let a=t.segment,r=t.part,n={resolvedUri:r?r.resolvedUri:a.resolvedUri,byterange:r?r.byterange:a.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},i=t.playlist.segments[t.mediaIndex-1];if(i&&i.timeline===a.timeline&&(i.videoTimingInfo?n.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(n.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),a.key){let h=a.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key=this.segmentKey(a.key),n.key.iv=h}return a.map&&(n.map=this.initSegmentForMap(a.map)),n}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,a){if(this.pendingSegment_.byteLength=a.bytesReceived,t<Kh){this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record ${Kh}`);return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,a,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,a,r));return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_||a.requestId!==this.pendingSegment_.requestId)return;if(t){if(this.pendingSegment_=null,this.state="READY",t.code===_e.ABORTED)return;if(this.pause(),t.code===_e.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(t),this.trigger("error");return}let n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,a.stats),n.endOfAllRequests=a.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=eS(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(t){let a=this.syncController_.mappingForTimeline(t);a!==null&&(this.timeMapping_=a)}updateMediaSecondsLoaded_(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return t===null?!1:this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:t,playlist:a,mediaIndex:r,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:i,useVideoTimingInfo:h,videoTimingInfo:l,audioTimingInfo:c}){if(typeof t<"u")return t;if(!h)return c.start;let v=a.segments[r-1];return r===0||!v||typeof v.start>"u"||v.end!==n+i?n:l.start}waitForAppendsToComplete_(t){let a=this.getCurrentMediaInfo_(t);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}let{hasAudio:r,hasVideo:n,isMuxed:i}=a,h=this.loaderType_==="main"&&n,l=!this.audioDisabled_&&r&&!i;if(t.waitingOnAppends=0,!t.hasAppendedData_){!t.timingInfo&&typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),this.checkAppendsDone_(t);return}h&&t.waitingOnAppends++,l&&t.waitingOnAppends++,h&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),l&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){let a=hS(this.loaderType_,this.getCurrentMediaInfo_(),t);return a?(this.error({message:a,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(t){if(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")return;let a=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),a=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:a,timingInfo:r}){return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};let a=this.getMediaInfo_(),n=this.loaderType_==="main"&&a&&a.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;n&&(t.timingInfo.end=typeof n.end=="number"?n.end:n.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}let t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});let a=sS(t,this.sourceType_);if(a&&(a.severity==="warn"?$.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Pa(t)}`);return}this.logger_(`Appended ${Pa(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");let r=t.segment,n=t.part,i=r.end&&this.currentTime_()-r.end>t.playlist.targetDuration*3,h=n&&n.end&&this.currentTime_()-n.end>t.playlist.partTargetDuration*3;if(i||h){this.logger_(`bad ${i?"segment":"part"} ${Pa(t)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<Kh){this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record ${Kh}`);return}let a=this.throughput.rate,r=Date.now()-t.endOfAllRequests+1,n=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(n-a)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;let a=t.segment,r=a.start,n=a.end;if(!mf(r)||!mf(n))return;Gn(r,n,this.segmentMetadataTrack_);let i=P.default.WebKitDataCue||P.default.VTTCue,h={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:r,end:n},l=JSON.stringify(h),c=new i(r,n,l);c.value=h,this.segmentMetadataTrack_.addCue(c)}};function n0(){}var aM=function(e){return typeof e!="string"?e:e.replace(/./,t=>t.toUpperCase())},vS=["video","audio"],Z9=(e,t)=>{let a=t[`${e}Buffer`];return a&&a.updating||t.queuePending[e]},dS=(e,t)=>{for(let a=0;a<t.length;a++){let r=t[a];if(r.type==="mediaSource")return null;if(r.type===e)return a}return null},$a=(e,t)=>{if(t.queue.length===0)return;let a=0,r=t.queue[a];if(r.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),$a("audio",t),$a("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||Z9(e,t))){if(r.type!==e){if(a=dS(e,t.queue),a===null)return;r=t.queue[a]}if(t.queue.splice(a,1),t.queuePending[e]=r,r.action(e,t),!r.doneFn){t.queuePending[e]=null,$a(e,t);return}}},rM=(e,t)=>{let a=t[`${e}Buffer`],r=aM(e);a&&(a.removeEventListener("updateend",t[`on${r}UpdateEnd_`]),a.removeEventListener("error",t[`on${r}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},Be=(e,t)=>e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1,w2={appendBuffer:(e,t,a)=>(r,n)=>{let i=n[`${r}Buffer`];if(Be(n.mediaSource,i)){n.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${r}Buffer`);try{i.appendBuffer(e)}catch(h){n.logger_(`Error with code ${h.code} `+(h.code===eM?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${r}Buffer`),n.queuePending[r]=null,a(h)}}},remove:(e,t)=>(a,r)=>{let n=r[`${a}Buffer`];if(Be(r.mediaSource,n)){r.logger_(`Removing ${e} to ${t} from ${a}Buffer`);try{n.remove(e,t)}catch{r.logger_(`Remove ${e} to ${t} from ${a}Buffer failed`)}}},timestampOffset:e=>(t,a)=>{let r=a[`${t}Buffer`];Be(a.mediaSource,r)&&(a.logger_(`Setting ${t}timestampOffset to ${e}`),r.timestampOffset=e)},callback:e=>(t,a)=>{e()},endOfStream:e=>t=>{if(t.mediaSource.readyState==="open"){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(a){$.log.warn("Failed to call media source endOfStream",a)}}},duration:e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(a){$.log.warn("Failed to set media source duration",a)}},abort:()=>(e,t)=>{if(t.mediaSource.readyState!=="open")return;let a=t[`${e}Buffer`];if(Be(t.mediaSource,a)){t.logger_(`calling abort on ${e}Buffer`);try{a.abort()}catch(r){$.log.warn(`Failed to abort on ${e}Buffer`,r)}}},addSourceBuffer:(e,t)=>a=>{let r=aM(e),n=xa(t);a.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);let i=a.mediaSource.addSourceBuffer(n);i.addEventListener("updateend",a[`on${r}UpdateEnd_`]),i.addEventListener("error",a[`on${r}Error_`]),a.codecs[e]=t,a[`${e}Buffer`]=i},removeSourceBuffer:e=>t=>{let a=t[`${e}Buffer`];if(rM(e,t),!!Be(t.mediaSource,a)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(a)}catch(r){$.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,r)}}},changeType:e=>(t,a)=>{let r=a[`${t}Buffer`],n=xa(e);Be(a.mediaSource,r)&&a.codecs[t]!==e&&(a.logger_(`changing ${t}Buffer codec from ${a.codecs[t]} to ${e}`),r.changeType(n),a.codecs[t]=e)}},L2=({type:e,sourceUpdater:t,action:a,doneFn:r,name:n})=>{t.queue.push({type:e,action:a,doneFn:r,name:n}),$a(e,t)},wf=(e,t)=>a=>{if(t.queuePending[e]){let r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[`${e}Error_`])}$a(e,t)},P3=class extends $.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>$a("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=ce("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=wf("video",this),this.onAudioUpdateEnd_=wf("audio",this),this.onVideoError_=a=>{this.videoError_=a},this.onAudioError_=a=>{this.audioError_=a},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,a){L2({type:"mediaSource",sourceUpdater:this,action:w2.addSourceBuffer(t,a),name:"addSourceBuffer"})}abort(t){L2({type:t,sourceUpdater:this,action:w2.abort(t),name:"abort"})}removeSourceBuffer(t){if(!this.canRemoveSourceBuffer()){$.log.error("removeSourceBuffer is not supported!");return}L2({type:"mediaSource",sourceUpdater:this,action:w2.removeSourceBuffer(t),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!$.browser.IE_VERSION&&!$.browser.IS_FIREFOX&&P.default.MediaSource&&P.default.MediaSource.prototype&&typeof P.default.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return P.default.SourceBuffer&&P.default.SourceBuffer.prototype&&typeof P.default.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(t,a){if(!this.canChangeType()){$.log.error("changeType is not supported!");return}L2({type:t,sourceUpdater:this,action:w2.changeType(a),name:"changeType"})}addOrChangeSourceBuffers(t){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(a=>{let r=t[a];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(a,r);this.canChangeType()&&this.changeType(a,r)})}appendBuffer(t,a){let{segmentInfo:r,type:n,bytes:i}=t;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([t,a]),this.logger_(`delayed audio append of ${i.length} until video append`);return}let h=a;if(L2({type:n,sourceUpdater:this,action:w2.appendBuffer(i,r||{mediaIndex:-1},h),doneFn:a,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;let l=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${l.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,l.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return Be(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Nt()}videoBuffered(){return Be(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Nt()}buffered(){let t=Be(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Be(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!t?this.audioBuffered():t&&!a?this.videoBuffered():OB(this.audioBuffered(),this.videoBuffered())}setDuration(t,a=n0){L2({type:"mediaSource",sourceUpdater:this,action:w2.duration(t),name:"duration",doneFn:a})}endOfStream(t=null,a=n0){typeof t!="string"&&(t=void 0),L2({type:"mediaSource",sourceUpdater:this,action:w2.endOfStream(t),name:"endOfStream",doneFn:a})}removeAudio(t,a,r=n0){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}L2({type:"audio",sourceUpdater:this,action:w2.remove(t,a),doneFn:r,name:"remove"})}removeVideo(t,a,r=n0){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}L2({type:"video",sourceUpdater:this,action:w2.remove(t,a),doneFn:r,name:"remove"})}updating(){return!!(Z9("audio",this)||Z9("video",this))}audioTimestampOffset(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(L2({type:"audio",sourceUpdater:this,action:w2.timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(L2({type:"video",sourceUpdater:this,action:w2.timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&L2({type:"audio",sourceUpdater:this,action:w2.callback(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&L2({type:"video",sourceUpdater:this,action:w2.callback(t),name:"callback"})}dispose(){this.trigger("dispose"),vS.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`](()=>rM(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}},Lf=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),yf=new Uint8Array(`

`.split("").map(e=>e.charCodeAt(0))),t6=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},e6=class extends H5{constructor(t,a={}){super(t,a),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Nt();let t=this.subtitlesTrack_.cues,a=t[0].startTime,r=t[t.length-1].startTime;return Nt([[a,r]])}initSegmentForMap(t,a=!1){if(!t)return null;let r=O3(t),n=this.initSegments_[r];if(a&&!n&&t.bytes){let i=yf.byteLength+t.bytes.byteLength,h=new Uint8Array(i);h.set(t.bytes),h.set(yf,t.bytes.byteLength),this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:h}}return n||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return typeof t>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(t,a){Gn(t,a,this.subtitlesTrack_)}fillBuffer_(){let t=this.chooseNextRequest_();if(t){if(this.syncController_.timestampOffsetForTimeline(t.timeline)===null){let a=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,a,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(t){t.code===_e.TIMEOUT&&this.handleTimeout_(),t.code===_e.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(t);return}let n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");let i=n.segment;if(i.map&&(i.map.bytes=a.map.bytes),n.bytes=a.bytes,typeof P.default.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(t,a,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}i.requested=!0;try{this.parseVTTCues_(n)}catch(h){this.stopForError({message:h.message});return}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,n.cues.forEach(h=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new P.default.VTTCue(h.startTime,h.endTime,h.text):h)}),ZC(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(t){let a,r=!1;if(typeof P.default.WebVTT!="function")throw new t6;typeof P.default.TextDecoder=="function"?a=new P.default.TextDecoder("utf8"):(a=P.default.WebVTT.StringDecoder(),r=!0);let n=new P.default.WebVTT.Parser(P.default,P.default.vttjs,a);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=t.cues.push.bind(t.cues),n.ontimestampmap=h=>{t.timestampmap=h},n.onparsingerror=h=>{$.log.warn("Error encountered when parsing cues: "+h.message)},t.segment.map){let h=t.segment.map.bytes;r&&(h=Lf(h)),n.parse(h)}let i=t.bytes;r&&(i=Lf(i)),n.parse(i),n.flush()}updateTimeMapping_(t,a,r){let n=t.segment;if(!a)return;if(!t.cues.length){n.empty=!0;return}let i=t.timestampmap,h=i.MPEGTS/Jn.ONE_SECOND_IN_TS-i.LOCAL+a.mapping;if(t.cues.forEach(l=>{l.startTime+=h,l.endTime+=h}),!r.syncInfo){let l=t.cues[0].startTime,c=t.cues[t.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:Math.min(l,c-n.duration)}}}},uS=function(e,t){let a=e.cues;for(let r=0;r<a.length;r++){let n=a[r];if(t>=n.adStartTime&&t<=n.adEndTime)return n}return null},gS=function(e,t,a=0){if(!e.segments)return;let r=a,n;for(let i=0;i<e.segments.length;i++){let h=e.segments[i];if(n||(n=uS(t,r+h.duration/2)),n){if("cueIn"in h){n.endTime=r,n.adEndTime=r,r+=h.duration,n=null;continue}if(r<n.endTime){r+=h.duration;continue}n.endTime+=h.duration}else if("cueOut"in h&&(n=new P.default.VTTCue(r,r+h.duration,h.cueOut),n.adStartTime=r,n.adEndTime=r+parseFloat(h.cueOut),t.addCue(n)),"cueOutCont"in h){let[l,c]=h.cueOutCont.split("/").map(parseFloat);n=new P.default.VTTCue(r,r+h.duration,""),n.adStartTime=r-l,n.adEndTime=n.adStartTime+c,t.addCue(n)}r+=h.duration}},pS=86400,Bf=[{name:"VOD",run:(e,t,a,r,n)=>a!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(e,t,a,r,n)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let i=null,h=null,l=G9(t);n=n||0;for(let c=0;c<l.length;c++){let v=t.endList||n===0?c:l.length-(c+1),g=l[v],z=g.segment,w=e.timelineToDatetimeMappings[z.timeline];if(!w||!z.dateTimeObject)continue;let V=z.dateTimeObject.getTime()/1e3+w;if(z.parts&&typeof g.partIndex=="number")for(let k=0;k<g.partIndex;k++)V+=z.parts[k].duration;let b=Math.abs(n-V);if(h!==null&&(b===0||h<b))break;h=b,i={time:V,segmentIndex:g.segmentIndex,partIndex:g.partIndex}}return i}},{name:"Segment",run:(e,t,a,r,n)=>{let i=null,h=null;n=n||0;let l=G9(t);for(let c=0;c<l.length;c++){let v=t.endList||n===0?c:l.length-(c+1),g=l[v],z=g.segment,w=g.part&&g.part.start||z&&z.start;if(z.timeline===r&&typeof w<"u"){let L=Math.abs(n-w);if(h!==null&&h<L)break;(!i||h===null||h>=L)&&(h=L,i={time:w,segmentIndex:g.segmentIndex,partIndex:g.partIndex})}}return i}},{name:"Discontinuity",run:(e,t,a,r,n)=>{let i=null;if(n=n||0,t.discontinuityStarts&&t.discontinuityStarts.length){let h=null;for(let l=0;l<t.discontinuityStarts.length;l++){let c=t.discontinuityStarts[l],v=t.discontinuitySequence+l+1,g=e.discontinuities[v];if(g){let z=Math.abs(n-g.time);if(h!==null&&h<z)break;(!i||h===null||h>=z)&&(h=z,i={time:g.time,segmentIndex:c,partIndex:null})}}}return i}},{name:"Playlist",run:(e,t,a,r,n)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}],a6=class extends $.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=ce("SyncController")}getSyncPoint(t,a,r,n){let i=this.runStrategies_(t,a,r,n);return i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null}getExpiredTime(t,a){if(!t||!t.segments)return null;let r=this.runStrategies_(t,a,t.discontinuitySequence,0);if(!r.length)return null;let n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+Yn({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(t,a,r,n){let i=[];for(let h=0;h<Bf.length;h++){let l=Bf[h],c=l.run(this,t,a,r,n);c&&(c.strategy=l.name,i.push({strategy:l.name,syncPoint:c}))}return i}selectSyncPoint_(t,a){let r=t[0].syncPoint,n=Math.abs(t[0].syncPoint[a.key]-a.value),i=t[0].strategy;for(let h=1;h<t.length;h++){let l=Math.abs(t[h].syncPoint[a.key]-a.value);l<n&&(n=l,r=t[h].syncPoint,i=t[h].strategy)}return this.logger_(`syncPoint for [${a.key}: ${a.value}] chosen with strategy [${i}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(t,a){let r=a.mediaSequence-t.mediaSequence;if(r>pS){$.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let n=r-1;n>=0;n--){let i=t.segments[n];if(i&&typeof i.start<"u"){a.syncInfo={mediaSequence:t.mediaSequence+n,time:i.start},this.logger_(`playlist refresh sync: [time:${a.syncInfo.time}, mediaSequence: ${a.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){let a=t.segments[0],r=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:a}){let r=this.calculateSegmentTimeMapping_(t,t.timingInfo,a),n=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:n.start}));let i=n.dateTimeObject;n.discontinuity&&a&&i&&(this.timelineToDatetimeMappings[n.timeline]=-(i.getTime()/1e3))}timestampOffsetForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time}mappingForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,a,r){let n=t.segment,i=t.part,h=this.timelines[t.timeline],l,c;if(typeof t.timestampOffset=="number")h={time:t.startOfSegment,mapping:t.startOfSegment-a.start},r&&(this.timelines[t.timeline]=h,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${h.time}] [mapping: ${h.mapping}]`)),l=t.startOfSegment,c=a.end+h.mapping;else if(h)l=a.start+h.mapping,c=a.end+h.mapping;else return!1;return i&&(i.start=l,i.end=c),(!n.start||l<n.start)&&(n.start=l),n.end=c,!0}saveDiscontinuitySyncInfo_(t){let a=t.playlist,r=t.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(let n=0;n<a.discontinuityStarts.length;n++){let i=a.discontinuityStarts[n],h=a.discontinuitySequence+n+1,l=i-t.mediaIndex,c=Math.abs(l);if(!this.discontinuities[h]||this.discontinuities[h].accuracy>c){let v;l<0?v=r.start-Yn({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex,endIndex:i}):v=r.end+Yn({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex+1,endIndex:i}),this.discontinuities[h]={time:v,accuracy:c}}}}dispose(){this.trigger("dispose"),this.off()}},r6=class extends $.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:a,to:r}){return typeof a=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:a,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:a,to:r}){return typeof a=="number"&&typeof r=="number"&&(this.lastTimelineChanges_[t]={type:t,from:a,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}},fS=$z(Wz(function(){var e=function(){function b(){this.listeners={}}var k=b.prototype;return k.on=function(H,y){this.listeners[H]||(this.listeners[H]=[]),this.listeners[H].push(y)},k.off=function(H,y){if(!this.listeners[H])return!1;var B=this.listeners[H].indexOf(y);return this.listeners[H]=this.listeners[H].slice(0),this.listeners[H].splice(B,1),B>-1},k.trigger=function(H){var y=this.listeners[H];if(y)if(arguments.length===2)for(var B=y.length,_=0;_<B;++_)y[_].call(this,arguments[1]);else for(var j=Array.prototype.slice.call(arguments,1),U=y.length,q=0;q<U;++q)y[q].apply(this,j)},k.dispose=function(){this.listeners={}},k.pipe=function(H){this.on("data",function(y){H.push(y)})},b}();function t(b){return b.subarray(0,b.byteLength-b[b.byteLength-1])}let a=function(){let b=[[[],[],[],[],[]],[[],[],[],[],[]]],k=b[0],m=b[1],H=k[4],y=m[4],B,_,j,U=[],q=[],D,J,t1,Z,F,c1;for(B=0;B<256;B++)q[(U[B]=B<<1^(B>>7)*283)^B]=B;for(_=j=0;!H[_];_^=D||1,j=q[j]||1)for(Z=j^j<<1^j<<2^j<<3^j<<4,Z=Z>>8^Z&255^99,H[_]=Z,y[Z]=_,t1=U[J=U[D=U[_]]],c1=t1*16843009^J*65537^D*257^_*16843008,F=U[Z]*257^Z*16843008,B=0;B<4;B++)k[B][_]=F=F<<24^F>>>8,m[B][Z]=c1=c1<<24^c1>>>8;for(B=0;B<5;B++)k[B]=k[B].slice(0),m[B]=m[B].slice(0);return b},r=null;class n{constructor(k){r||(r=a()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let m,H,y,B=this._tables[0][4],_=this._tables[1],j=k.length,U=1;if(j!==4&&j!==6&&j!==8)throw new Error("Invalid aes key size");let q=k.slice(0),D=[];for(this._key=[q,D],m=j;m<4*j+28;m++)y=q[m-1],(m%j===0||j===8&&m%j===4)&&(y=B[y>>>24]<<24^B[y>>16&255]<<16^B[y>>8&255]<<8^B[y&255],m%j===0&&(y=y<<8^y>>>24^U<<24,U=U<<1^(U>>7)*283)),q[m]=q[m-j]^y;for(H=0;m;H++,m--)y=q[H&3?m:m-4],m<=4||H<4?D[H]=y:D[H]=_[0][B[y>>>24]]^_[1][B[y>>16&255]]^_[2][B[y>>8&255]]^_[3][B[y&255]]}decrypt(k,m,H,y,B,_){let j=this._key[1],U=k^j[0],q=y^j[1],D=H^j[2],J=m^j[3],t1,Z,F,c1=j.length/4-2,a1,l1=4,s1=this._tables[1],m1=s1[0],O1=s1[1],k1=s1[2],q1=s1[3],A1=s1[4];for(a1=0;a1<c1;a1++)t1=m1[U>>>24]^O1[q>>16&255]^k1[D>>8&255]^q1[J&255]^j[l1],Z=m1[q>>>24]^O1[D>>16&255]^k1[J>>8&255]^q1[U&255]^j[l1+1],F=m1[D>>>24]^O1[J>>16&255]^k1[U>>8&255]^q1[q&255]^j[l1+2],J=m1[J>>>24]^O1[U>>16&255]^k1[q>>8&255]^q1[D&255]^j[l1+3],l1+=4,U=t1,q=Z,D=F;for(a1=0;a1<4;a1++)B[(3&-a1)+_]=A1[U>>>24]<<24^A1[q>>16&255]<<16^A1[D>>8&255]<<8^A1[J&255]^j[l1++],t1=U,U=q,q=D,D=J,J=t1}}class i extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(k){this.jobs.push(k),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}let h=function(b){return b<<24|(b&65280)<<8|(b&16711680)>>8|b>>>24},l=function(b,k,m){let H=new Int32Array(b.buffer,b.byteOffset,b.byteLength>>2),y=new n(Array.prototype.slice.call(k)),B=new Uint8Array(b.byteLength),_=new Int32Array(B.buffer),j,U,q,D,J,t1,Z,F,c1;for(j=m[0],U=m[1],q=m[2],D=m[3],c1=0;c1<H.length;c1+=4)J=h(H[c1]),t1=h(H[c1+1]),Z=h(H[c1+2]),F=h(H[c1+3]),y.decrypt(J,t1,Z,F,_,c1),_[c1]=h(_[c1]^j),_[c1+1]=h(_[c1+1]^U),_[c1+2]=h(_[c1+2]^q),_[c1+3]=h(_[c1+3]^D),j=J,U=t1,q=Z,D=F;return B};class c{constructor(k,m,H,y){let B=c.STEP,_=new Int32Array(k.buffer),j=new Uint8Array(k.byteLength),U=0;for(this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(_.subarray(U,U+B),m,H,j)),U=B;U<_.length;U+=B)H=new Uint32Array([h(_[U-4]),h(_[U-3]),h(_[U-2]),h(_[U-1])]),this.asyncStream_.push(this.decryptChunk_(_.subarray(U,U+B),m,H,j));this.asyncStream_.push(function(){y(null,t(j))})}static get STEP(){return 32e3}decryptChunk_(k,m,H,y){return function(){let B=l(k,m,H);y.set(B,k.byteOffset)}}}var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g;typeof window<"u"?g=window:typeof v<"u"?g=v:typeof self<"u"?g=self:g={};var z=g,w=function(k){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(k):k&&k.buffer instanceof ArrayBuffer},L=z.BigInt||Number;L("0x1"),L("0x100"),L("0x10000"),L("0x1000000"),L("0x100000000"),L("0x10000000000"),L("0x1000000000000"),L("0x100000000000000"),L("0x10000000000000000"),function(){var b=new Uint16Array([65484]),k=new Uint8Array(b.buffer,b.byteOffset,b.byteLength);return k[0]===255?"big":k[0]===204?"little":"unknown"}();let V=function(b){let k={};return Object.keys(b).forEach(m=>{let H=b[m];w(H)?k[m]={bytes:H.buffer,byteOffset:H.byteOffset,byteLength:H.byteLength}:k[m]=H}),k};self.onmessage=function(b){let k=b.data,m=new Uint8Array(k.encrypted.bytes,k.encrypted.byteOffset,k.encrypted.byteLength),H=new Uint32Array(k.key.bytes,k.key.byteOffset,k.key.byteLength/4),y=new Uint32Array(k.iv.bytes,k.iv.byteOffset,k.iv.byteLength/4);new c(m,H,y,function(B,_){self.postMessage(V({source:k.source,decrypted:_}),[_.buffer])})}})),zS=Uz(fS),MS=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},D3=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},n6=(e,t)=>{t.activePlaylistLoader=e,e.load()},mS=(e,t)=>()=>{let{segmentLoaders:{[e]:a,main:r},mediaTypes:{[e]:n}}=t,i=n.activeTrack(),h=n.getActiveGroup(),l=n.activePlaylistLoader,c=n.lastGroup_;if(!(h&&c&&h.id===c.id)&&(n.lastGroup_=h,n.lastTrack_=i,D3(a,n),!(!h||h.isMainPlaylist))){if(!h.playlistLoader){l&&r.resetEverything();return}a.resyncLoader(),n6(h.playlistLoader,n)}},HS=(e,t)=>()=>{let{segmentLoaders:{[e]:a},mediaTypes:{[e]:r}}=t;r.lastGroup_=null,a.abort(),a.pause()},xS=(e,t)=>()=>{let{mainPlaylistLoader:a,segmentLoaders:{[e]:r,main:n},mediaTypes:{[e]:i}}=t,h=i.activeTrack(),l=i.getActiveGroup(),c=i.activePlaylistLoader,v=i.lastTrack_;if(!(v&&h&&v.id===h.id)&&(i.lastGroup_=l,i.lastTrack_=h,D3(r,i),!!l)){if(l.isMainPlaylist){if(!h||!v||h.id===v.id)return;let g=t.vhs.playlistController_,z=g.selectPlaylist();if(g.media()===z)return;i.logger_(`track change. Switching main audio from ${v.id} to ${h.id}`),a.pause(),n.resetEverything(),g.fastQualityChange_(z);return}if(e==="AUDIO"){if(!l.playlistLoader){n.setAudio(!0),n.resetEverything();return}r.setAudio(!0),n.setAudio(!1)}if(c===l.playlistLoader){n6(l.playlistLoader,i);return}r.track&&r.track(h),r.resetEverything(),n6(l.playlistLoader,i)}},I3={AUDIO:(e,t)=>()=>{let{segmentLoaders:{[e]:a},mediaTypes:{[e]:r},excludePlaylist:n}=t;D3(a,r);let i=r.activeTrack(),h=r.activeGroup(),l=(h.filter(v=>v.default)[0]||h[0]).id,c=r.tracks[l];if(i===c){n({error:{message:"Problem encountered loading the default audio track."}});return}$.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(let v in r.tracks)r.tracks[v].enabled=r.tracks[v]===c;r.onTrackChanged()},SUBTITLES:(e,t)=>()=>{let{segmentLoaders:{[e]:a},mediaTypes:{[e]:r}}=t;$.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),D3(a,r);let n=r.activeTrack();n&&(n.mode="disabled"),r.onTrackChanged()}},Cf={AUDIO:(e,t,a)=>{if(!t)return;let{tech:r,requestOptions:n,segmentLoaders:{[e]:i}}=a;t.on("loadedmetadata",()=>{let h=t.media();i.playlist(h,n),(!r.paused()||h.endList&&r.preload()!=="none")&&i.load()}),t.on("loadedplaylist",()=>{i.playlist(t.media(),n),r.paused()||i.load()}),t.on("error",I3[e](e,a))},SUBTITLES:(e,t,a)=>{let{tech:r,requestOptions:n,segmentLoaders:{[e]:i},mediaTypes:{[e]:h}}=a;t.on("loadedmetadata",()=>{let l=t.media();i.playlist(l,n),i.track(h.activeTrack()),(!r.paused()||l.endList&&r.preload()!=="none")&&i.load()}),t.on("loadedplaylist",()=>{i.playlist(t.media(),n),r.paused()||i.load()}),t.on("error",I3[e](e,a))}},VS={AUDIO:(e,t)=>{let{vhs:a,sourceType:r,segmentLoaders:{[e]:n},requestOptions:i,main:{mediaGroups:h},mediaTypes:{[e]:{groups:l,tracks:c,logger_:v}},mainPlaylistLoader:g}=t,z=V5(g.main);(!h[e]||Object.keys(h[e]).length===0)&&(h[e]={main:{default:{default:!0}}},z&&(h[e].main.default.playlists=g.main.playlists));for(let w in h[e]){l[w]||(l[w]=[]);for(let L in h[e][w]){let V=h[e][w][L],b;if(z?(v(`AUDIO group '${w}' label '${L}' is a main playlist`),V.isMainPlaylist=!0,b=null):r==="vhs-json"&&V.playlists?b=new A0(V.playlists[0],a,i):V.resolvedUri?b=new A0(V.resolvedUri,a,i):V.playlists&&r==="dash"?b=new m5(V.playlists[0],a,i,g):b=null,V=J1({id:L,playlistLoader:b},V),Cf[e](e,V.playlistLoader,t),l[w].push(V),typeof c[L]>"u"){let k=new $.AudioTrack({id:L,kind:MS(V),enabled:!1,language:V.language,default:V.default,label:L});c[L]=k}}}n.on("error",I3[e](e,t))},SUBTITLES:(e,t)=>{let{tech:a,vhs:r,sourceType:n,segmentLoaders:{[e]:i},requestOptions:h,main:{mediaGroups:l},mediaTypes:{[e]:{groups:c,tracks:v}},mainPlaylistLoader:g}=t;for(let z in l[e]){c[z]||(c[z]=[]);for(let w in l[e][z]){if(l[e][z][w].forced)continue;let L=l[e][z][w],V;if(n==="hls")V=new A0(L.resolvedUri,r,h);else if(n==="dash"){if(!L.playlists.filter(k=>k.excludeUntil!==1/0).length)return;V=new m5(L.playlists[0],r,h,g)}else n==="vhs-json"&&(V=new A0(L.playlists?L.playlists[0]:L.resolvedUri,r,h));if(L=J1({id:w,playlistLoader:V},L),Cf[e](e,L.playlistLoader,t),c[z].push(L),typeof v[w]>"u"){let b=a.addRemoteTextTrack({id:w,kind:"subtitles",default:L.default&&L.autoselect,language:L.language,label:w},!1).track;v[w]=b}}}i.on("error",I3[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{let{tech:a,main:{mediaGroups:r},mediaTypes:{[e]:{groups:n,tracks:i}}}=t;for(let h in r[e]){n[h]||(n[h]=[]);for(let l in r[e][h]){let c=r[e][h][l];if(!/^(?:CC|SERVICE)/.test(c.instreamId))continue;let v=a.options_.vhs&&a.options_.vhs.captionServices||{},g={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(v[g.instreamId]&&(g=J1(g,v[g.instreamId])),g.default===void 0&&delete g.default,n[h].push(J1({id:l},c)),typeof i[l]>"u"){let z=a.addRemoteTextTrack({id:g.instreamId,kind:"captions",default:g.default,language:g.language,label:g.label},!1).track;i[l]=z}}}}},nM=(e,t)=>{for(let a=0;a<e.length;a++)if(V6(t,e[a])||e[a].playlists&&nM(e[a].playlists,t))return!0;return!1},wS=(e,t)=>a=>{let{mainPlaylistLoader:r,mediaTypes:{[e]:{groups:n}}}=t,i=r.media();if(!i)return null;let h=null;i.attributes[e]&&(h=n[i.attributes[e]]);let l=Object.keys(n);if(!h)if(e==="AUDIO"&&l.length>1&&V5(t.main))for(let c=0;c<l.length;c++){let v=n[l[c]];if(nM(v,i)){h=v;break}}else n.main?h=n.main:l.length===1&&(h=n[l[0]]);return typeof a>"u"?h:a===null||!h?null:h.filter(c=>c.id===a.id)[0]||null},LS={AUDIO:(e,t)=>()=>{let{mediaTypes:{[e]:{tracks:a}}}=t;for(let r in a)if(a[r].enabled)return a[r];return null},SUBTITLES:(e,t)=>()=>{let{mediaTypes:{[e]:{tracks:a}}}=t;for(let r in a)if(a[r].mode==="showing"||a[r].mode==="hidden")return a[r];return null}},yS=(e,{mediaTypes:t})=>()=>{let a=t[e].activeTrack();return a?t[e].activeGroup(a):null},BS=e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(v=>{VS[v](v,e)});let{mediaTypes:t,mainPlaylistLoader:a,tech:r,vhs:n,segmentLoaders:{["AUDIO"]:i,main:h}}=e;["AUDIO","SUBTITLES"].forEach(v=>{t[v].activeGroup=wS(v,e),t[v].activeTrack=LS[v](v,e),t[v].onGroupChanged=mS(v,e),t[v].onGroupChanging=HS(v,e),t[v].onTrackChanged=xS(v,e),t[v].getActiveGroup=yS(v,e)});let l=t.AUDIO.activeGroup();if(l){let v=(l.filter(z=>z.default)[0]||l[0]).id;t.AUDIO.tracks[v].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(h.setAudio(!1),i.setAudio(!0)):h.setAudio(!0)}a.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(v=>t[v].onGroupChanged())}),a.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(v=>t[v].onGroupChanging())});let c=()=>{t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",c),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),n.on("dispose",()=>{r.audioTracks().removeEventListener("change",c),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(let v in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[v])},CS=()=>{let e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:n0,activeTrack:n0,getActiveGroup:n0,onGroupChanged:n0,onTrackChanged:n0,lastTrack_:null,logger_:ce(`MediaGroups[${t}]`)}}),e},SS=60*2,a0,_S=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],TS=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},bS=function({currentPlaylist:e,buffered:t,currentTime:a,nextPlaylist:r,bufferLowWaterLine:n,bufferHighWaterLine:i,duration:h,bufferBasedABR:l,log:c}){if(!r)return $.log.warn("We received no playlist to switch to. Please check your stream."),!1;let v=`allowing switch ${e&&e.id||"null"} -> ${r.id}`;if(!e)return c(`${v} as current playlist is not set`),!0;if(r.id===e.id)return!1;let g=!!Ia(t,a).length;if(!e.endList)return!g&&typeof e.partTargetDuration=="number"?(c(`not ${v} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(c(`${v} as current playlist is live`),!0);let z=m6(t,a),w=l?St.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:St.MAX_BUFFER_LOW_WATER_LINE;if(h<w)return c(`${v} as duration < max low water line (${h} < ${w})`),!0;let L=r.attributes.BANDWIDTH,V=e.attributes.BANDWIDTH;if(L<V&&(!l||z<i)){let b=`${v} as next bandwidth < current bandwidth (${L} < ${V})`;return l&&(b+=` and forwardBuffer < bufferHighWaterLine (${z} < ${i})`),c(b),!0}if((!l||L>V)&&z>=n){let b=`${v} as forwardBuffer >= bufferLowWaterLine (${z} >= ${n})`;return l&&(b+=` and next bandwidth > current bandwidth (${L} > ${V})`),c(b),!0}return c(`not ${v} as no switching criteria met`),!1},i6=class extends $.EventTarget{constructor(t){super();let{src:a,withCredentials:r,tech:n,bandwidth:i,externVhs:h,useCueTags:l,playlistExclusionDuration:c,enableLowInitialPlaylist:v,sourceType:g,cacheEncryptionKeys:z,bufferBasedABR:w,leastPixelDiffSelector:L,captionServices:V}=t;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:b}=t;(b===null||typeof b>"u")&&(b=1/0),a0=h,this.bufferBasedABR=!!w,this.leastPixelDiffSelector=!!L,this.withCredentials=r,this.tech_=n,this.vhs_=n.vhs,this.sourceType_=g,this.useCueTags_=l,this.playlistExclusionDuration=c,this.maxPlaylistRetries=b,this.enableLowInitialPlaylist=v,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:b,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=CS(),this.mediaSource=new P.default.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=Nt(),this.hasPlayed_=!1,this.syncController_=new a6(t),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new zS,this.sourceUpdater_=new P3(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new r6;let k={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:V,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:i,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:z,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings};this.mainPlaylistLoader_=this.sourceType_==="dash"?new m5(a,this.vhs_,this.requestOptions_):new A0(a,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new H5(J1(k,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new H5(J1(k,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new e6(J1(k,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((H,y)=>{function B(){n.off("vttjserror",_),H()}function _(){n.off("vttjsloaded",B),y()}n.one("vttjsloaded",B),n.one("vttjserror",_),n.addWebVttScript_()})}),t),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),_S.forEach(H=>{this[H+"_"]=TS.bind(this,H)}),this.logger_=ce("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;let m=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(m,()=>{let H=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-H,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){let t=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return t===-1||a===-1?-1:t+a}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){let a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,t)}switchMedia_(t,a,r){let n=this.media(),i=n&&(n.id||n.uri),h=t.id||t.uri;i&&i!==h&&(this.logger_(`switch media ${i} -> ${h} from ${a}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${a}`})),this.mainPlaylistLoader_.media(t,r)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=P.default.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(P.default.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){let t=this.main(),a=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return a;let r=t.mediaGroups.AUDIO,n=Object.keys(r),i;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)i=this.mediaTypes_.AUDIO.activeTrack();else{let l=r.main||n.length&&r[n[0]];for(let c in l)if(l[c].default){i={label:c};break}}if(!i)return a;let h=[];for(let l in r)if(r[l][i.label]){let c=r[l][i.label];if(c.playlists&&c.playlists.length)h.push.apply(h,c.playlists);else if(c.uri)h.push(c);else if(t.playlists.length)for(let v=0;v<t.playlists.length;v++){let g=t.playlists[v];g.attributes&&g.attributes.AUDIO&&g.attributes.AUDIO===l&&h.push(g)}}return h.length?h:a}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{let t=this.mainPlaylistLoader_.media(),a=t.targetDuration*1.5*1e3;q9(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=a,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),BS({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.excludeUnsupportedVariants_();let a;if(this.enableLowInitialPlaylist&&(a=this.selectInitialPlaylist()),a||(a=this.selectPlaylist()),!a||!this.shouldSwitchToMedia_(a)||(this.initialMedia_=a,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{let t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{let t=this.mainPlaylistLoader_.media(),a=t.targetDuration*1.5*1e3;q9(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=a,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{let t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,a){let r=t.mediaGroups||{},n=!0,i=Object.keys(r.AUDIO);for(let h in r.AUDIO)for(let l in r.AUDIO[h])r.AUDIO[h][l].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),a0.Playlist.isAes(a)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),i.length&&Object.keys(r.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){let a=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),n=this.bufferLowWaterLine(),i=this.bufferHighWaterLine(),h=this.tech_.buffered();return bS({buffered:h,currentTime:r,currentPlaylist:a,nextPlaylist:t,bufferLowWaterLine:n,bufferHighWaterLine:i,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{let a=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:a.playlist,error:a})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",a=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:SS}))});let t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();let a=this.getCodecsOrExclude_();a&&this.sourceUpdater_.addOrChangeSourceBuffers(a)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(t=this.selectPlaylist()){if(t===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{$.browser.IE_VERSION||$.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();let t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}setupFirstPlay(){let t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){let a=this.seekable();if(!a.length)return!1;if($.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){let t=this.tech_.play();typeof t<"u"&&typeof t.then=="function"&&t.then(null,a=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;let t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;let a=this.duration();t[t.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){let a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?t=t&&this.audioSegmentLoader_.ended_:t=this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;let r=this.syncController_.getExpiredTime(t,this.duration());if(r===null)return!1;let n=a0.Playlist.playlistEnd(t,r),i=this.tech_.currentTime(),h=this.tech_.buffered();if(!h.length)return n-i<=Se;let l=h.end(h.length-1);return l-i<=Se&&n-l<=Se}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:a={},playlistExclusionDuration:r}){if(t=t||this.mainPlaylistLoader_.media(),r=r||a.playlistExclusionDuration||this.playlistExclusionDuration,!t){this.error=a,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}t.playlistErrors_++;let n=this.mainPlaylistLoader_.main.playlists,i=n.filter(tl),h=i.length===1&&i[0]===t;if(n.length===1&&r!==1/0)return $.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(h);if(h){let L=!1;n.forEach(V=>{if(V===t)return;let b=V.excludeUntil;typeof b<"u"&&b!==1/0&&(L=!0,delete V.excludeUntil)}),L&&($.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let l;t.playlistErrors_>this.maxPlaylistRetries?l=1/0:l=Date.now()+r*1e3,t.excludeUntil=l,a.reason&&(t.lastExcludeReason_=a.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});let c=this.selectPlaylist();if(!c){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}let v=a.internal?this.logger_:$.log.warn,g=a.message?" "+a.message:"";v(`${a.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${g} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);let z=c.targetDuration/2*1e3||5*1e3,w=typeof c.lastRequest=="number"&&Date.now()-c.lastRequest<=z;return this.switchMedia_(c,"exclude",h||w)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,a){let r=[],n=t==="all";(n||t==="main")&&r.push(this.mainPlaylistLoader_);let i=[];(n||t==="audio")&&i.push("AUDIO"),(n||t==="subtitle")&&(i.push("CLOSED-CAPTIONS"),i.push("SUBTITLES")),i.forEach(h=>{let l=this.mediaTypes_[h]&&this.mediaTypes_[h].activePlaylistLoader;l&&r.push(l)}),["main","audio","subtitle"].forEach(h=>{let l=this[`${h}SegmentLoader_`];l&&(t===h||t==="all")&&r.push(l)}),r.forEach(h=>a.forEach(l=>{typeof h[l]=="function"&&h[l]()}))}setCurrentTime(t){let a=Ia(this.tech_.buffered(),t);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(a&&a.length)return t;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;let t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:a0.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let t;if(!this.mainPlaylistLoader_)return;let a=this.mainPlaylistLoader_.media();if(!a)return;let r=this.syncController_.getExpiredTime(a,this.duration());if(r===null)return;let n=this.mainPlaylistLoader_.main,i=a0.Playlist.seekable(a,r,a0.Playlist.liveEdgeDelay(n,a));if(i.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(a,this.duration()),r===null||(t=a0.Playlist.seekable(a,r,a0.Playlist.liveEdgeDelay(n,a)),t.length===0)))return;let h,l;this.seekable_&&this.seekable_.length&&(h=this.seekable_.end(0),l=this.seekable_.start(0)),t?t.start(0)>i.end(0)||i.start(0)>t.end(0)?this.seekable_=i:this.seekable_=Nt([[t.start(0)>i.start(0)?t.start(0):i.start(0),t.end(0)<i.end(0)?t.end(0):i.end(0)]]):this.seekable_=i,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===h&&this.seekable_.start(0)===l)&&(this.logger_(`seekable updated [${xz(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,t),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(t){let n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}let a=this.tech_.buffered(),r=a0.Playlist.duration(this.mainPlaylistLoader_.media());a.length>0&&(r=Math.max(r,a.end(a.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{let a=this.mediaTypes_[t].groups;for(let r in a)a[r].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){let t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=t?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!r)}getCodecsOrExclude_(){let t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;let r=Qn(this.main(),a),n={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(n.video=r.video||t.main.videoCodec||rg),t.main.isMuxed&&(n.video+=`,${r.audio||t.main.audioCodec||Hs}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(n.audio=r.audio||t.main.audioCodec||t.audio.audioCodec||Hs,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:a,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}let h=(v,g)=>v?Bn(g):yh(g),l={},c;if(["video","audio"].forEach(function(v){if(n.hasOwnProperty(v)&&!h(t[v].isFmp4,n[v])){let g=t[v].isFmp4?"browser":"muxer";l[g]=l[g]||[],l[g].push(n[v]),v==="audio"&&(c=g)}}),i&&c&&a.attributes.AUDIO){let v=a.attributes.AUDIO;this.main().playlists.forEach(g=>{(g.attributes&&g.attributes.AUDIO)===v&&g!==a&&(g.excludeUntil=1/0)}),this.logger_(`excluding audio group ${v} as ${c} does not support codec(s): "${n.audio}"`)}if(Object.keys(l).length){let v=Object.keys(l).reduce((g,z)=>(g&&(g+=", "),g+=`${z} does not support codec(s): "${l[z].join(",")}"`,g),"")+".";this.excludePlaylist({playlistToExclude:a,error:{internal:!0,message:v},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let v=[];if(["video","audio"].forEach(g=>{let z=(ne(this.sourceUpdater_.codecs[g]||"")[0]||{}).type,w=(ne(n[g]||"")[0]||{}).type;z&&w&&z.toLowerCase()!==w.toLowerCase()&&v.push(`"${this.sourceUpdater_.codecs[g]}" -> "${n[g]}"`)}),v.length){this.excludePlaylist({playlistToExclude:a,error:{message:`Codec switching not supported: ${v.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;let t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);let a=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}excludeUnsupportedVariants_(){let t=this.main().playlists,a=[];Object.keys(t).forEach(r=>{let n=t[r];if(a.indexOf(n.id)!==-1)return;a.push(n.id);let i=Qn(this.main,n),h=[];i.audio&&!yh(i.audio)&&!Bn(i.audio)&&h.push(`audio codec ${i.audio}`),i.video&&!yh(i.video)&&!Bn(i.video)&&h.push(`video codec ${i.video}`),i.text&&i.text==="stpp.ttml.im1t"&&h.push(`text codec ${i.text}`),h.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${h.join(", ")}`))})}excludeIncompatibleVariants_(t){let a=[],r=this.main().playlists,n=E3(ne(t)),i=ff(n),h=n.video&&ne(n.video)[0]||null,l=n.audio&&ne(n.audio)[0]||null;Object.keys(r).forEach(c=>{let v=r[c];if(a.indexOf(v.id)!==-1||v.excludeUntil===1/0)return;a.push(v.id);let g=[],z=Qn(this.mainPlaylistLoader_.main,v),w=ff(z);if(!(!z.audio&&!z.video)){if(w!==i&&g.push(`codec count "${w}" !== "${i}"`),!this.sourceUpdater_.canChangeType()){let L=z.video&&ne(z.video)[0]||null,V=z.audio&&ne(z.audio)[0]||null;L&&h&&L.type.toLowerCase()!==h.type.toLowerCase()&&g.push(`video codec "${L.type}" !== "${h.type}"`),V&&l&&V.type.toLowerCase()!==l.type.toLowerCase()&&g.push(`audio codec "${V.type}" !== "${l.type}"`)}g.length&&(v.excludeUntil=1/0,this.logger_(`excluding ${v.id}: ${g.join(" && ")}`))}})}updateAdCues_(t){let a=0,r=this.seekable();r.length&&(a=r.start(0)),gS(t,this.cueTagsTrack_,a)}goalBufferLength(){let t=this.tech_.currentTime(),a=St.GOAL_BUFFER_LENGTH,r=St.GOAL_BUFFER_LENGTH_RATE,n=Math.max(a,St.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+t*r,n)}bufferLowWaterLine(){let t=this.tech_.currentTime(),a=St.BUFFER_LOW_WATER_LINE,r=St.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(a,St.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(a,St.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+t*r,this.bufferBasedABR?i:n)}bufferHighWaterLine(){return St.BUFFER_HIGH_WATER_LINE}},OS=(e,t,a)=>r=>{let n=e.main.playlists[t],i=x6(n),h=tl(n);return typeof r>"u"?h:(r?delete n.disabled:n.disabled=!0,r!==h&&!i&&(a(),r?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),r)},h6=class{constructor(t,a,r){let{playlistController_:n}=t,i=n.fastQualityChange_.bind(n);if(a.attributes){let h=a.attributes.RESOLUTION;this.width=h&&h.width,this.height=h&&h.height,this.bandwidth=a.attributes.BANDWIDTH,this.frameRate=a.attributes["FRAME-RATE"]}this.codecs=Qn(n.main(),a),this.playlist=a,this.id=r,this.enabled=OS(t.playlists,a.id,i)}},AS=function(e){e.representations=()=>{let t=e.playlistController_.main(),a=V5(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return a?a.filter(r=>!x6(r)).map((r,n)=>new h6(e,r,r.id)):[]}},Sf=["seeking","seeked","pause","playing","error"],l6=class{constructor(t){this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=ce("PlaybackWatcher"),this.logger_("initialize");let a=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),i=()=>this.resetTimeUpdate_(),h=this.playlistController_,l=["main","subtitle","audio"],c={};l.forEach(g=>{c[g]={reset:()=>this.resetSegmentDownloads_(g),updateend:()=>this.checkSegmentDownloads_(g)},h[`${g}SegmentLoader_`].on("appendsdone",c[g].updateend),h[`${g}SegmentLoader_`].on("playlistupdate",c[g].reset),this.tech_.on(["seeked","seeking"],c[g].reset)});let v=g=>{["main","audio"].forEach(z=>{h[`${z}SegmentLoader_`][g]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=()=>v("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(Sf,i),this.tech_.on("canplay",r),this.tech_.one("play",a),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(Sf,i),this.tech_.off("canplay",r),this.tech_.off("play",a),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),l.forEach(g=>{h[`${g}SegmentLoader_`].off("appendsdone",c[g].updateend),h[`${g}SegmentLoader_`].off("playlistupdate",c[g].reset),this.tech_.off(["seeked","seeking"],c[g].reset)}),this.checkCurrentTimeTimeout_&&P.default.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&P.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=P.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){let a=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=a.buffered_()}checkSegmentDownloads_(t){let a=this.playlistController_,r=a[`${t}SegmentLoader_`],n=r.buffered_(),i=EB(this[`${t}Buffered_`],n);if(this[`${t}Buffered_`]=n,i){this.resetSegmentDownloads_(t);return}this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:V4(n)}),!(this[`${t}StalledDownloads_`]<10)&&(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),t!=="subtitle"&&a.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;let t=this.tech_.currentTime(),a=this.tech_.buffered();if(this.lastRecordedTime===t&&(!a.length||t+Se>=a.end(a.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;let a=this.seekable(),r=this.tech_.currentTime(),n=this.afterSeekableWindow_(a,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow),i;if(n&&(i=a.end(a.length-1)),this.beforeSeekableWindow_(a,r)){let V=a.start(0);i=V+(V===a.end(0)?0:Se)}if(typeof i<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${xz(a)}. Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0;let h=this.playlistController_.sourceUpdater_,l=this.tech_.buffered(),c=h.audioBuffer?h.audioBuffered():null,v=h.videoBuffer?h.videoBuffered():null,g=this.media(),z=g.partTargetDuration?g.partTargetDuration:(g.targetDuration-j0)*2,w=[c,v];for(let V=0;V<w.length;V++){if(!w[V])continue;if(m6(w[V],r)<z)return!1}let L=Gh(l,r);return L.length===0?!1:(i=L.start(0)+Se,this.logger_(`Buffered region starts (${L.start(0)})  just beyond seek point (${r}). Seeking to ${i}.`),this.tech_.setCurrentTime(i),!0)}waiting_(){if(this.techWaiting_())return;let t=this.tech_.currentTime(),a=this.tech_.buffered(),r=Ia(a,t);if(r.length&&t+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){let t=this.seekable(),a=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,a)){let l=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${a}. Seeking to live point (seekable end) ${l}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(l),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}let r=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:a}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;let h=Gh(n,a);return h.length>0?(this.logger_(`Stopped at ${a} and seeking to ${h.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(a),!0):!1}afterSeekableWindow_(t,a,r,n=!1){if(!t.length)return!1;let i=t.end(t.length-1)+Se;return!r.endList&&n&&(i=t.end(t.length-1)+r.targetDuration*3),a>i}beforeSeekableWindow_(t,a){return!!(t.length&&t.start(0)>0&&a<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:a,currentTime:r}){if(!t)return;let n;if(t.length&&a.length){let i=Ia(t,r-3),h=Ia(t,r),l=Ia(a,r);l.length&&!h.length&&i.length&&(n={start:i.end(0),end:l.end(0)})}else Gh(t,r).length||(n=this.gapFromVideoUnderflow_(t,r));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(t){let a=this.tech_.buffered(),r=this.tech_.currentTime(),n=Gh(a,r);this.resetTimeUpdate_(),!(n.length===0||r!==t)&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+j0),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(t,a){let r=bB(t);for(let n=0;n<r.length;n++){let i=r.start(n),h=r.end(n);if(a-i<4&&a-i>2)return{start:i,end:h}}return null}},ES={errorInterval:30,getSource(e){let a=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return e(a)}},iM=function(e,t){let a=0,r=0,n=J1(ES,t);e.ready(()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})});let i=function(){r&&e.currentTime(r)},h=function(g){g!=null&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",i),e.src(g),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},l=function(){if(Date.now()-a<n.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){$.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return a=Date.now(),n.getSource.call(e,h)},c=function(){e.off("loadedmetadata",i),e.off("error",l),e.off("dispose",c)},v=function(g){c(),iM(e,g)};e.on("error",l),e.on("dispose",c),e.reloadSourceOnError=v},kS=function(e){iM(this,e)},hM="3.0.2",PS="6.3.0",DS="1.0.1",IS="6.0.0",RS="4.0.1",e2={PlaylistLoader:A0,Playlist:u2,utils:nC,STANDARD_PLAYLIST_SELECTOR:Mf,INITIAL_PLAYLIST_SELECTOR:GC,lastBandwidthSelector:Mf,movingAverageBandwidthSelector:$C,comparePlaylistBandwidth:y6,comparePlaylistResolution:UC,xhr:Pz()};Object.keys(St).forEach(e=>{Object.defineProperty(e2,e,{get(){return $.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),St[e]},set(t){if($.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),typeof t!="number"||t<0){$.log.warn(`value of Vhs.${e} must be greater than or equal to 0`);return}St[e]=t}})});var lM="videojs-vhs",oM=function(e,t){let a=t.media(),r=-1;for(let n=0;n<e.length;n++)if(e[n].id===a.id){r=n;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},jS=function(e,t){t.representations().forEach(a=>{e.addQualityLevel(a)}),oM(e,t.playlists)};e2.canPlaySource=function(){return $.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var NS=(e,t,a)=>{if(!e)return e;let r={};t&&t.attributes&&t.attributes.CODECS&&(r=E3(ne(t.attributes.CODECS))),a&&a.attributes&&a.attributes.CODECS&&(r.audio=a.attributes.CODECS);let n=xa(r.video),i=xa(r.audio),h={};for(let l in e)h[l]={},i&&(h[l].audioContentType=i),n&&(h[l].videoContentType=n),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(h[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(h[l].url=e[l]);return J1(e,h)},FS=(e,t)=>e.reduce((a,r)=>{if(!r.contentProtection)return a;let n=t.reduce((i,h)=>{let l=r.contentProtection[h];return l&&l.pssh&&(i[h]={pssh:l.pssh}),i},{});return Object.keys(n).length&&a.push(n),a},[]),US=({player:e,sourceKeySystems:t,audioMedia:a,mainPlaylists:r})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();let n=a?r.concat([a]):r,i=FS(n,Object.keys(t)),h=[],l=[];return i.forEach(c=>{l.push(new Promise((v,g)=>{e.tech_.one("keysessioncreated",v)})),h.push(new Promise((v,g)=>{e.eme.initializeMediaKeys({keySystems:c},z=>{if(z){g(z);return}v()})}))}),Promise.race([Promise.all(h),Promise.race(l)])},$S=({player:e,sourceKeySystems:t,media:a,audioMedia:r})=>{let n=NS(t,a,r);return n?(e.currentSource().keySystems=n,n&&!e.eme?($.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},cM=()=>{if(!P.default.localStorage)return null;let e=P.default.localStorage.getItem(lM);if(!e)return null;try{return JSON.parse(e)}catch{return null}},WS=e=>{if(!P.default.localStorage)return!1;let t=cM();t=t?J1(t,e):e;try{P.default.localStorage.setItem(lM,JSON.stringify(t))}catch{return!1}return t},GS=e=>e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e;e2.supportsNativeHls=function(){if(!h1.default||!h1.default.createElement)return!1;let e=h1.default.createElement("video");return $.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(e.canPlayType(a))}):!1}();e2.supportsNativeDash=function(){return!h1.default||!h1.default.createElement||!$.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(h1.default.createElement("video").canPlayType("application/dash+xml"))}();e2.supportsTypeNatively=e=>e==="hls"?e2.supportsNativeHls:e==="dash"?e2.supportsNativeDash:!1;e2.isSupported=function(){return $.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var qS=$.getComponent("Component"),R3=class extends qS{constructor(t,a,r){if(super(a,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=ce("VhsHandler"),a.options_&&a.options_.playerId){let n=$.getPlayer(a.options_.playerId);this.player_=n}if(this.tech_=a,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&a.overrideNativeAudioTracks&&a.overrideNativeVideoTracks)a.overrideNativeAudioTracks(!0),a.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(a.featuresNativeVideoTracks||a.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(h1.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{let i=h1.default.fullscreenElement||h1.default.webkitFullscreenElement||h1.default.mozFullScreenElement||h1.default.msFullscreenElement;i&&i.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){let t=cM();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=St.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===St.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(t=>{typeof this.source_[t]<"u"&&(this.options_[t]=this.source_[t])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(t,a){if(!t)return;this.setOptions_(),this.options_.src=GS(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=e2,this.options_.sourceType=xs(a),this.options_.seekTo=i=>{this.tech_.setCurrentTime(i)},this.playlistController_=new i6(this.options_);let r=J1({liveRangeSafeTimeDelta:Se},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new l6(r),this.playlistController_.on("error",()=>{let i=$.players[this.tech_.options_.playerId],h=this.playlistController_.error;typeof h=="object"&&!h.code?h.code=3:typeof h=="string"&&(h={message:h,code:3}),i.error(h)});let n=this.options_.bufferBasedABR?e2.movingAverageBandwidthSelector(.55):e2.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=e2.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(i){this.playlistController_.selectPlaylist=i.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(i){this.playlistController_.mainSegmentLoader_.throughput.rate=i,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let i=this.playlistController_.mainSegmentLoader_.bandwidth,h=P.default.navigator.connection||P.default.navigator.mozConnection||P.default.navigator.webkitConnection,l=1e7;if(this.options_.useNetworkInformationApi&&h){let c=h.downlink*1e3*1e3;c>=l&&i>=l?i=Math.max(i,c):i=c}return i},set(i){this.playlistController_.mainSegmentLoader_.bandwidth=i,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let i=1/(this.bandwidth||1),h;return this.throughput>0?h=1/this.throughput:h=0,Math.floor(1/(i+h))},set(){$.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>V4(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>V4(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&WS({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{AS(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=P.default.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){let t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),US({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(a=>{this.logger_("error while creating EME key session",a),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){let t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=$S({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});if(this.player_.tech_.on("keystatuschange",r=>{if(r.status!=="output-restricted")return;let n=this.playlistController_.main();if(!n||!n.playlists)return;let i=[];n.playlists.forEach(h=>{h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,i.push(h))}),i.length&&($.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...i),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),$.browser.IE_VERSION===11||!a){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){let t=$.players[this.tech_.options_.playerId];!t||!t.qualityLevels||this.qualityLevels_||(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{jS(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{oM(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":hM,"mux.js":PS,"mpd-parser":DS,"m3u8-parser":IS,"aes-decrypter":RS}}version(){return this.constructor.version()}canChangeType(){return P3.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&P.default.URL.revokeObjectURL&&(P.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,a){return vC({playlist:this.playlistController_.media(),time:t,callback:a})}seekToProgramTime(t,a,r=!0,n=2){return Nz({programTime:t,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})}},j3={name:"videojs-http-streaming",VERSION:hM,canHandleSource(e,t={}){let a=J1($.options,t);return j3.canPlayType(e.type,a)},handleSource(e,t,a={}){let r=J1($.options,a);return t.vhs=new R3(e,t,r),t.vhs.xhr=Pz(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t){let a=xs(e);if(!a)return"";let r=j3.getOverrideNative(t);return!e2.supportsTypeNatively(a)||r?"maybe":""},getOverrideNative(e={}){let{vhs:t={}}=e,a=!($.browser.IS_ANY_SAFARI||$.browser.IS_IOS),{overrideNative:r=a}=t;return r}},KS=()=>Bn("avc1.4d400d,mp4a.40.2");KS()&&$.getTech("Html5").registerSourceHandler(j3,0);$.VhsHandler=R3;$.VhsSourceHandler=j3;$.Vhs=e2;$.use||$.registerComponent("Vhs",e2);$.options.vhs=$.options.vhs||{};(!$.getPlugin||!$.getPlugin("reloadSourceOnError"))&&$.registerPlugin("reloadSourceOnError",kS);document.getElementById("4948d515ff475a0415740e31d2e2c02f5d7787804f2f50f9ea3e23cf0d92469d")||(el=document.createElement("style"),el.id="4948d515ff475a0415740e31d2e2c02f5d7787804f2f50f9ea3e23cf0d92469d",el.textContent='\uFEFF.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABUgAAsAAAAAItAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV33Y21hcAAAAYQAAAEJAAAD5p42+VxnbHlmAAACkAAADwwAABdk9R/WHmhlYWQAABGcAAAAKwAAADYn8kSnaGhlYQAAEcgAAAAdAAAAJA+RCL1obXR4AAAR6AAAABMAAAC8Q44AAGxvY2EAABH8AAAAYAAAAGB7SIHGbWF4cAAAElwAAAAfAAAAIAFAAI9uYW1lAAASfAAAASUAAAIK1cf1oHBvc3QAABOkAAABfAAAAnXdFqh1eJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGR7xDiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGPHcRdyA4RZgQRADbZCycAAHic7dPXbcMwAEXRK1vuvffem749XAbKV3bjBA6fXsaIgMMLEWoQJaAEFKNnlELyQ4K27zib5PNF6vl8yld+TKr5kH0+cUw0xv00Hwvx2DResUyFKrV4XoMmLdp06NKjz4AhI8ZMmDJjzoIlK9Zs2LJjz4EjJ85cuHLjziPe/0UWL17mf2tqKLz/9jK9f8tXpGCoRdPKhtS0RqFkWvVQNtSKoVYNtWaoddPXEBqG2jQ9XWgZattQO4baNdSeofYNdWCoQ0MdGerYUCeGOjXUmaHODXVhqEtDXRnq2lA3hro11J2h7g31YKhHQz0Z6tlQL4Z6NdSbod4N9WGoT9MfHF6GmhnZLxyDcRMAAAB4nJ1YC1gUV5auc6urCmxEGrq6VRD6ATQP5dHPKK8GRIyoKApoEBUDAiGzGmdUfKNRM4qLZrUZdGKcGN/GZJKd0SyOWTbfbmZ2NxqzM5IxRtNZd78vwYlJdtREoO7sudVNq6PmmxmKqrqPU+eee173P80Bh39Cu9DOEY4DHZBK3i20D/QRLcfxbE5sEVtwLpZzclw4ibFIkSCJUcZ4MBpMnnzwuKNsGWBL5i3qy6kO2dVpvUpKbkAP9fq62rdeGJ+TM/7C1nbIutfuWrWk5ci4zMxxR1qW/N+9JsmCGXj9VKWhFx/6tr/nz78INDm2C9yPF/fDcxLuyKxLBZ1ZBz2QTi+RSkiH5RrDQJ/GgGQadX9m0YSURs7GpSG905Zsk41uj14yul1OtieZ7QUk5GRG/YiS7PYYPSAZNRed9sq3+bOpz00rKb7pe/ZEZvbALxZAHT3AFoH8GXP3rt67QFn40kt8W13FjLTDb48c+fSi5/7h0P4dL5yz7DPtbmgmYxfQA9RL2+EOfTcvdp+1vmuBpvOll1As1S6ak0IvJzC7sKWJFtJgBd2uWcg+0Zyg7dzQfhcjXRgXGZRf5/a4A58IDU777Nl252AUk4m2ByRRjqTNqIDCEJeAnU3iCFwrkrNwXEzg4yFevBwypzxkcX+AIfk3VEKl3XmWbT8788SzvpvFJaiOezL6QyuSr9VNf97csNu0z3LuhR0wATUxZAfVBwVOy+nQFhxYdWaXlXe4HC4zWGWzzsrLDtmhI9pOWOHv7PTT7XybH1Z0+v2d5Abd3kmG+TsH23CS/KwTxx/JkzEwx6jcQOUc42LLwHJ/J93uZ9ygh3HuZGwqsY9dWDHQ58dxNqyqKRQTYdxwTubiOSs3FiMDkq0WSZQgCT0GBDOg2lxOAd1FlPVGs4AKBAcYHHaP2wPkHaivmLF5zYqnIZrvcHx5gN4k/6tchNW1DtdgNL2KrxEkS/kfnIHoVnp1VjmjpTf5r0lTzLj0mdS28tX+XGorU364eMPmnWVl8J36nlKGw3CZhjEiuMw8h8mKvhGD+4/lElBWjAhLJMg6fTw4zPZ8cOmcGQBm2Qxml1nAm13CpYGq1JKUlJJUzQn1PTAO0mgv6VMMpA/DuRfSWEu4lDIxdbAtdWIKvnn2Vk766CWfz9fpY0sH/UpdP50rfszaVpdVRmvIejEdLMk45s4Bu0EWHjeOySmFyZSiMahvZdNSn29peoI/YexYfKQTLeurTXXwEVLeSfInTWHkkMaeUx7sBvOCSTSj3AlcKjfueyS36tCrXDlgRtF0etFq9jhc1kfKuBT/OwMr0F4UUTTh1AN0g20+H/ScPcsIEsYu9d/zN5PmjprPtNwI1ZZcDK6iC97Mcjp2y2aX36f+QbpGHrgRuHlXJ+Zf6PFRL2uQSp8vxHeF2IoRb8Rd2rhMzsNxSRmEuKK4JFnkojhMcx6jzqHzGMGFcW+MhBj0bhf6cowN+45I4LHvwT6fteu7M42wGRI/pxcg6/MZdEvt1U1XaulHFXuLmqov/MukvRVL35/b3ODM1+4aPjtzeK7zmUkV2h3DN54HaQ9GzJvxHRb6Ks2gB81fwqraT+A7GvZJrRLRofU6G0urNL+zFw3v0FaVDFxsKEZW56F31r6ip6vOL+FCObBPuIMRiXld9RaMdLzRIOGhPey2T9vA/35DmZPK9IWaT9d/WgOGMieYqJ/dzjLIhZU118gbysxrNUGefxD6UO/hyNNllpFTOIbx32kSFQctnweV5PxTMHLjRqiAN+fQE9gL+Xy5WB6MOS4GJJuYbDUHhcKDhHGRbLzOpjsjdM1+iwAZLGeieehACX2hhI7SjK/ZUTNrvVje31TxJiFBGYViWFkCn9PMeX9fS6qVbzfCj4fOCTzDnuWy2c4xA7mdNkA3RS9FH2VeqzdCBlixxbzXjvkHU1I8BOYFb1pZvPIHSSIj4svT8xpzcxtXN+ZKyjdDvbz08niiF3PqV9Tn5NST8vg48MTaY8E5xqSSIsWoWHo+LtAzxdH/GDUyp37CBEYfso04F/NlMTcDJUTpECLY0HFGQHImE8xsEUdgnrQlixIvGhJA1BvxpDHGxEMBYFeNOHcBJlSjwe2JcSfbBEsGOPPBHg/6SBBOCsLLw0SpUxod0Z1bFMfLkbQ3UiZxEyd0Dx8t+SRBu18Q9msFbI4e3p1THEfkSEh7kEJ5orR10qTWDvbgPWn5aWvCYyOAjwgXyjJi34uMjo58L25cmRAeQZWI2PA1QQLsPESAH8WGFwZZ4SPoR73BHPzIPMJj9AreBzKUmrH4todT18ANvi1oc3YGjUT/0j+ExUwq8PI9BLaCQIpvewwYu2evAG/Vo/5avPdY7o+BemLLXw3y+AdkzP9bpIxB1wm5EYq8fesHbPEPtm6HrHvtx4jcGPR8fDDpkZBefIjB46QnlUNRltv4Z/pO/J6dxEjhYAtmoMeq+GozvUVvNYOW3m6GCIhoprcfr97B8AcIQYsfD8ljUvGNjvkrpj0ETA48ZMIxCeqsRIsQALE0gi2GB+glSOfbOjW3GSBM9yPq8/rpJXrJDz0BPxV6xdN4uiCGDQed3WhgFkBUZEFsmeyyBpzXrm7UGTBZG8Lh5aubFufk5eUsbrrFGr7McYdbltxa0nKYqRKbQjvikXYkTGM0f2xuyM3Ly21oXnWfvf6I1BmZwfh7EWWIYsg2nHhsDhOnczhJcmI6eBAmy3jZ3RiJmKQR/JA99FcwsfaVbNDDyi1rL9NPj9hfo61wjM6BjzOLijLpeTgk/pL+ip6tfYWupzeOgPny2tcUu9J/9mhxJlgyi985NFRbvCVewXUNXLJaW0RxZqtRYtnfYdcYomXQWdnJHQA3jiEEkeTQWcWxdDP9IvvVWvo2TK553XEMEq+s69/QDU1Q7p0zxwsm9qS379whr8NI2PJqLUyGyfNeX3eFfnJU2U+uHR9cVV1IqgurqwuV44XVp0h2qN55X5XJwtk59yP0IZuHrqBOBIuIYhkcoT6Kx79Pu2HS/IPZIMOqLWs/pteOOk4NPgEb6QAIdAPsyZk5Mwd+wVaHMexJv719W7xCu2l37UG6lvYdBcvHa08p89741zd63phTRGqL5ggo6SlvdbWXzCqsPq78NnSu7wnKy2HNZbVoRCI7UJEOyRj+sPE002tOOY7Qa5fXboFWkLNeqYUSZRocp9XwSUZxcQZ9Hw6LV2pOoVmvHQEDbGIENEG5i6bLgMSM4n8+FNLTtAds99DaWEvgcf4o5SyYe9x+kF6/tGoTPAdRmS/XQIEy//QxKC2oqioAI3tS5auvxCtzT6y6RK8fhChYcwCJaMJhxc0vqSxQ/qmgsrKAlBZUHlauheTpvd9uj5DnLzJct6qfq5fXbYHVIGcfrIVJihbaVLu1wW7Vbs8zK0A8e9Jvb91S9cVMjPrazD6gpfeZTXzYbCFMcppVRsGMpp55OWgx1/3JeAxW1Y7AORgM/m3rWrsdLkQVmEVSU16cX/e7uvkvpqRiQsG06XJ0t64Tf+l0nG1dt025gyOIZlvq5u9KSU1N2TW/rsWnnMRPyTDkctbhvIcNvYIXWyLzdwYLoYesUbaQG4iK2cWO2gdpeUYLqDD0MUTOPhDIGnZEs58yArR86FznuWEsU4YDi2x26dA4klkn8Qa6vhk2QUfX4Jxm/ngX9r7ogn1dmlmwqZmuhxtdg9XN/DEcUgqb+9hMyNansfaQET2mcROCmGEMVqxm5u+h6kN2MOwgqykV2wH9yQG9DvVFU38Pogaf4FVuE62KI/oJ02RDdWW2w5dqQwU/8+N1q1DlvsL863u61KLE7x/o8w0VJQM/Y/SQ3unIrqxueEa1BqT5VFNsO7p39/UC771a77RowpaKe9nvJQIT1Pog5LGx8XblBKmCNGTf3xMogAQvPnz9PYKX/08sVDTG1OKUlOLUgS/UaZtm1NAaYTsl7i9ZQ+L6O4Rl0OGa577LuWvc+C+x96/vYh0lLBuM+7XwI/dTLtdT7v4d6rRTWDnku0IBrqFnZ5bVIqKP8lasJlithWnaLhTsr8qFJBulF/70p4undou36HeTJ5+jv1fCybeQ8nH3+Xv6aENczmOFlab+hqMDg1rLOt12A+tiUFrYDwQ6c3RUJp601nzegTNX6WlYAI2zSUV945F6zU56ZmZVQaWspWcIADxJ9GmljQUnL2p2Dpr5T8H+5KJFu+vqBq8qvyHRzStLHPEO5SPYCV9nZe0yZT2RcH0oHvegSzNEJ0oGWU8iQWM12dgPEugngVceGIwZgPFp0BiT1a0a3R5Rcot7ihfA1J/20v96jX7zmTX9s583H0kwx6WnLd09cXrR9LGroOa9sHNbdyz8wcKk5lqhaVFJZNwmqtw884MXNdvJujpBa3xzuSaZH9sxa06Z7x+HJSduPbdYHv/DgmEhfbehvlmGN7JUkcG78GDM12CeyFFTPNqVeNxC1gzjz+c2nVo63Xxs8rKJWXoBJM0tmEbfGm4qzpoOH3xpzQfyxLzW1gnE9NHo6tol1eMEic4ZVPrjnVi0kqAe2sQ2bgqupScaq8WGlUWgWHI51SKJl/UYT6zccNsCSkBtiVZLsiefuFSDYT3Fi8Zk7EUnmjTRYtsFeuDDJS05MW79M3mr3mla+d8dzac31KTPmBYfFiYSUef48PhPjm9ryZsSGZZkdNvzq0Y9rdNcwDq5Dg5C3QW+7UN64IKptvS3tvHbvu5c9pv1Exau21rc9LIpwpQwUjTq8576yeVDz5+4WZ1nXT43wV60rPLJbDp/UksNrP3iQ2SA63Pst058gOYDbhRnRUw8l/sRt4HbxPzO4WYpInCpuVgSbVh6JXuwnnJngKTTCwaPWmG5Xbhpm1U0Yt3FyBGpGYemPM77p2TD904JjgJ2QFpFLeYpGx8X15Qx1Zk31p5ki9ZLUuXE0lmuJlcakJMVLeFS1iIvrB8drY0aloilakqCZwzwRORtxlgwxS4IThggJd4TDxoiaAIT80fFPGrCPPru+puFn504P/ybr4ihA/6dKASLshEJic7xE8tmzu3KzA7TABBe8y5fNbWo3ilQn/SuFKM16b2l5bOeayqfGhYmhIulU+fVNDdWVv4NMzX10MBHyPR5uhWUu8D9P1VnIMt4nGNgZGBgAOJ/1bf64vltvjJwszOAwAOlmqvINEc/WJyDgQlEAQA+dgnjAHicY2BkYGBnAAGOPgaG//85+hkYGVCBPgBGJwNkAAAAeJxjYGBgYB/EmKMPtxwAhg4B0gAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAe4CLgKKAtAC/ANiA4wDqAPgBDAEsATaBQgFWgXABggGLgZwBqwG9gdOB4oH0ggqCHAIhgicCMgJJAlWCYgJrAnyCkAKdgrkC7J4nGNgZGBg0GdoZmBnAAEmIOYCQgaG/2A+AwAaqwHQAHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkXlT2zAQxf1C4thJAwRajt4HRy8VMwwfSJHXsQZZcnUQ+PYoTtwpM+wf2t9brWZ2n5JBsol58nJcYYAdDDFCijEy5JhgileYYRd72MccBzjEa7zBEY5xglO8xTu8xwd8xCd8xhd8xTec4RwXuMR3/MBP/MJvMPzBFYpk2Cr+OF0fTEgrFI1aHhxN740KDbEmeJpsWZlVj40s+45aLuv9KijlhCXSjLQnu/d/4UH6sWul1mRzFxZeekUuE7z10mg3qMtM1FGQddPSrLQyvJR6OaukItYXDp6pCJrmz0umqkau5pZ2hFmm7m+ImG5W2t0kZoJXUtPhVnYTbbdOBdeCVGqpJe7XKTqSbRK7zbdwXfR0U+SVsStuS3Y76em6+Ic3xYiHUppc04Nn0lMzay3dSxNcp8auDlWlaCi48yetFD7Y9USsx87G45cuop1ZxQUtjLnL4j53FO0a+5X08UXqQ7NQNo92R0XOz7sxWEnxN2TneJI8Acttu4Q=) format("woff");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:"\uF101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\uF102"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:"\uF103"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:"\uF104"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:"\uF105"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:"\uF106"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:"\uF107"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:"\uF108"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:"\uF109"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\uF10A"}.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:"\uF10B"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:"\uF10C"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\uF10D"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:"\uF10E"}.vjs-icon-downloading{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-downloading:before{content:"\uF10F"}.vjs-icon-file-download{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download:before{content:"\uF110"}.vjs-icon-file-download-done{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-done:before{content:"\uF111"}.vjs-icon-file-download-off{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-off:before{content:"\uF112"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\uF113"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\uF114"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\uF115"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before{content:"\uF116"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\uF117"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\uF118"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:"\uF119"}.vjs-icon-repeat{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-repeat:before{content:"\uF11A"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:"\uF11B"}.video-js .vjs-skip-backward-5 .vjs-icon-placeholder,.vjs-icon-replay-5{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-backward-5 .vjs-icon-placeholder:before,.vjs-icon-replay-5:before{content:"\uF11C"}.video-js .vjs-skip-backward-10 .vjs-icon-placeholder,.vjs-icon-replay-10{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-backward-10 .vjs-icon-placeholder:before,.vjs-icon-replay-10:before{content:"\uF11D"}.video-js .vjs-skip-backward-30 .vjs-icon-placeholder,.vjs-icon-replay-30{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-backward-30 .vjs-icon-placeholder:before,.vjs-icon-replay-30:before{content:"\uF11E"}.video-js .vjs-skip-forward-5 .vjs-icon-placeholder,.vjs-icon-forward-5{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-forward-5 .vjs-icon-placeholder:before,.vjs-icon-forward-5:before{content:"\uF11F"}.video-js .vjs-skip-forward-10 .vjs-icon-placeholder,.vjs-icon-forward-10{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-forward-10 .vjs-icon-placeholder:before,.vjs-icon-forward-10:before{content:"\uF120"}.video-js .vjs-skip-forward-30 .vjs-icon-placeholder,.vjs-icon-forward-30{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-skip-forward-30 .vjs-icon-placeholder:before,.vjs-icon-forward-30:before{content:"\uF121"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:"\uF122"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\uF123"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\uF124"}.vjs-icon-shuffle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-shuffle:before{content:"\uF125"}.vjs-icon-cast{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cast:before{content:"\uF126"}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-enter:before{content:"\uF127"}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-exit:before{content:"\uF128"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\uF129"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\uF12A"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\uF12B"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\uF12C"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\uF12D"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:"\uF12E"}.video-js{display:inline-block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100% !important;height:100% !important}.video-js[tabindex="-1"]{outline:0}.video-js *,.video-js :after,.video-js :before{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.video-js.vjs-1-1,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-fluid{width:100%;max-width:100%}.video-js.vjs-1-1:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-fluid:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window,body.vjs-pip-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen,body.vjs-pip-window .video-js{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs),body.vjs-pip-window .video-js{width:100% !important;height:100% !important;padding-top:0 !important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-pip-container .vjs-pip-text{position:absolute;bottom:10%;font-size:2em;background-color:rgba(0, 0, 0, 0.7);padding:.5em;text-align:center;width:100%}.vjs-layout-small.vjs-pip-container .vjs-pip-text,.vjs-layout-tiny.vjs-pip-container .vjs-pip-text,.vjs-layout-x-small.vjs-pip-container .vjs-pip-text{bottom:0;font-size:1.4em}.vjs-hidden{display:none !important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block !important;opacity:1 !important;visibility:visible !important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:50%;left:50%;padding:0;margin-top:-0.81666em;margin-left:-1.5em;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7);border-radius:.3em;transition:all .4s}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:rgba(115, 133, 159, 0.5);transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:0 0;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0, 0, 0, 0.8);background:linear-gradient(180deg, rgba(0, 0, 0, 0.8), rgba(255, 255, 255, 0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.js-focus-visible .vjs-menu li.vjs-menu-item:hover,.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:rgba(115, 133, 159, 0.5)}.js-focus-visible .vjs-menu li.vjs-selected:hover,.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.js-focus-visible .vjs-menu :not(.vjs-selected):focus:not(.focus-visible),.video-js .vjs-menu :not(.vjs-selected):focus:not(:focus-visible){background:0 0}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em 0;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:rgba(43, 51, 63, 0.7)}.vjs-pip-window .vjs-menu-button-popup .vjs-menu{left:unset;right:1em}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7);position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7)}.vjs-audio-only-mode .vjs-control-bar,.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none !important}.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js :not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-0.5em;line-height:.35em;z-index:1}.video-js .vjs-load-progress{background:rgba(115, 133, 159, 0.5)}.video-js .vjs-load-progress div{background:rgba(115, 133, 159, 0.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:rgba(255, 255, 255, 0.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:rgba(0, 0, 0, 0.8)}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em 0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#73859f;background-color:rgba(115, 133, 159, 0.5)}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-0.5em;left:-0.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{line-height:.35em;right:-0.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:rgba(43, 51, 63, 0.7)}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:rgba(255, 255, 255, 0.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:rgba(0, 0, 0, 0.8)}.vjs-poster{display:inline-block;vertical-align:middle;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster,.vjs-pip-container.vjs-has-started .vjs-poster{display:block}.vjs-poster img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.video-js.vjs-liveui .vjs-live-control,.video-js:not(.vjs-live) .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.video-js .vjs-current-time,.video-js .vjs-duration,.vjs-live .vjs-time-control,.vjs-live .vjs-time-divider{display:none}.vjs-time-divider{display:none;line-height:3em}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control,.vjs-pip-window .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control,.vjs-pip-window .vjs-fullscreen-control{display:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-0.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43, 51, 63, 0.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{animation:vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{100%{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}100%{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-0.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\uF10C";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-0.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \uF12E";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:auto;width:initial}.video-js.vjs-layout-tiny .vjs-progress-control,.video-js.vjs-layout-x-small .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:rgba(43, 51, 63, 0.75);color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports(display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0 24px}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:10px;border:none}.vjs-text-track-settings fieldset span{display:inline-block;padding:0 6px 8px}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;font-weight:700;font-size:14px}.vjs-text-track-settings .vjs-label{clip:rect(1px 1px 1px 1px);clip:rect(1px, 1px, 1px, 1px);margin:0 5px 5px 0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg, #fff 88%, #73859f 100%)}.vjs-track-settings-controls button:hover{color:rgba(43, 51, 63, 0.75)}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg, #fff 88%, #73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}.vjs-title-bar{background:rgba(0, 0, 0, 0.9);background:linear-gradient(180deg, rgba(0, 0, 0, 0.9) 0, rgba(0, 0, 0, 0.7) 60%, rgba(0, 0, 0, 0) 100%);font-size:1.2em;line-height:1.5;transition:opacity .1s;padding:.666em 1.333em 4em;pointer-events:none;position:absolute;top:0;width:100%}.vjs-title-bar-description,.vjs-title-bar-title{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vjs-title-bar-title{font-weight:700;margin-bottom:.333em}.vjs-playing.vjs-user-inactive .vjs-title-bar{opacity:0;transition:opacity 1s}.video-js .vjs-skip-forward-5{cursor:pointer}.video-js .vjs-skip-forward-10{cursor:pointer}.video-js .vjs-skip-forward-30{cursor:pointer}.video-js .vjs-skip-backward-5{cursor:pointer}.video-js .vjs-skip-backward-10{cursor:pointer}.video-js .vjs-skip-backward-30{cursor:pointer}@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js :focus:not(.focus-visible){outline:0}.video-js :focus:not(:focus-visible){outline:0}',document.head.appendChild(el));var el;var se=z1(At()),_4=z1(G1()),XS=({src:e,id:t,children:a,options:r={},...n})=>{let i=(0,se.useRef)(),[h,l]=(0,se.useState)(!1);return(0,se.useEffect)(()=>{let c=document.querySelector(`#${t}`);c!==null&&(i.current=$(c,r,()=>{l(!0)}))},[]),(0,se.useEffect)(()=>{i.current?.src(e)},[e]),(0,_4.jsxs)(_4.Fragment,{children:[(0,_4.jsx)("video",{id:t,className:"video-js",...n}),h&&i.current!==void 0&&(0,_4.jsx)(vM.Provider,{value:i.current,children:a})]})},sM=XS,vM=(0,se.createContext)(null),F2=()=>(0,se.useContext)(vM);var dM=z1(At());var al=z1(G1()),YS=()=>{let e=F2(),t=ma();return(0,dM.useEffect)(()=>{if(t!==null&&e!==null){t.sendParent("videojsAttached",null),t.addMessageListener("setTime",({value:n})=>{e.currentTime(n)}),t.addMessageListener("pause",()=>{e.pause()}),t.addMessageListener("play",()=>{e.play()}),t.addMessageListener("setVolume",({value:n})=>{e.volume(n)});let a=()=>{let n=e.duration(),i=e.currentTime();n-i<30&&(t.sendParent("nextPlayingGetStartReqest",null),e.off("timeupdate",a))};e.on("loadeddata",()=>{t.sendParent("loadeddata",null),e.one("playing",()=>{t.sendParent("firstPlaying",null),e.on("timeupdate",a)})}),e.on("ended",()=>{t.sendParent("ended",null)});let r=()=>{document.visibilityState==="hidden"&&e.play()};navigator.userAgent.match("iPhone|iPad")!==null&&e.on("pause",()=>{document.addEventListener("visibilitychange",r),setTimeout(()=>{document.removeEventListener("visibilitychange",r)},500)})}},[]),(0,al.jsx)(al.Fragment,{})},uM=YS;var EM=z1(At());var ve=z1(At());async function B6(e){return await fetch(e.data.comment.nvComment.server+"/v1/threads",{method:"POST",body:JSON.stringify({additionals:{},threadKey:e.data.comment.nvComment.threadKey,params:e.data.comment.nvComment.params}),headers:{"X-Frontend-Id":"6","X-Frontend-Version":"0","Content-Type":"application/json"}}).then(async a=>await a.text()).then(a=>JSON.parse(a))}var pM=z1(gM());var rl=z1(G1()),QS=({children:e})=>{let{initialWatchData:t}=zh(),a=(0,ve.useRef)(),r=(0,ve.useRef)(),n=F2(),[i,h]=(0,ve.useState)(!0);return(0,ve.useEffect)(()=>{let l=document.querySelector("#comment-layer");l!==null&&t!==void 0&&(clearInterval(r.current),B6(t).then(c=>{a.current=new pM.default(l,c.data.threads,{format:"v1",scale:1,mode:"default"})}),r.current=setInterval(()=>{let c=n?.currentTime();if(c===void 0){clearInterval(r.current);return}a.current?.drawCanvas(Math.floor(c*100))},10))},[t]),(0,rl.jsxs)(zM.Provider,{value:{enable:()=>{h(!0)},disable:()=>{h(!1)},get:()=>i},children:[(0,rl.jsx)("canvas",{id:"comment-layer",className:i?"":"comment-layer-hide",width:1920,height:1080}),e]})},fM=QS,zM=(0,ve.createContext)(void 0),MM=()=>(0,ve.useContext)(zM);document.getElementById("8d15ab5042517d76de6434f7e51169b629ad9808c457740b63ec6ccdf140f839")||(nl=document.createElement("style"),nl.id="8d15ab5042517d76de6434f7e51169b629ad9808c457740b63ec6ccdf140f839",nl.textContent=".video-controls{position:absolute;top:0;left:0;height:100%;width:100%}.video-controls .overlay{position:absolute;top:0;left:0;height:100%;width:100%}.video-controls .initial-play-click-overlay{display:flex;align-items:center;justify-content:center}.video-controls .initial-play-click-overlay .playButton{background-color:#292929;color:#fff;width:80px;height:80px;border-radius:80px;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer}.video-controls .initial-play-click-overlay .playButton svg{width:40px;height:40px}.video-controls .control-container .control-bar{height:45px;width:100%;position:absolute;left:0;bottom:0;background:linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3));transition:ease 200ms opacity;opacity:1;overflow:hidden}.video-controls .control-container .control-bar .control-bar-button{float:left;background-color:rgba(0,0,0,0);border:none;cursor:pointer;width:45px;height:45px;margin:0 2px;padding:0;display:flex;justify-content:center;align-items:center}.video-controls .control-container .control-bar .control-bar-button svg{color:#fff;width:27px;height:27px}.video-controls .control-container .control-bar .video-time{float:left;height:100%;display:flex;justify-self:center;align-items:center;margin-left:10px;padding:0}.video-controls .control-container .control-bar .video-time span{color:#fff;font-size:1rem}.video-controls .control-container .control-bar-hide{opacity:0}",document.head.appendChild(nl));var nl;var hl=z1(At());var ir=z1(At());var _6=z1(At()),T6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},b6=_6.default.createContext&&_6.default.createContext(T6);var F0=function(){return F0=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++){t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},F0.apply(this,arguments)},JS=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function mM(e){return e&&e.map(function(t,a){return ir.default.createElement(t.tag,F0({key:a},t.attr),mM(t.child))})}function T4(e){return function(t){return ir.default.createElement(ZS,F0({attr:F0({},e.attr)},t),mM(e.child))}}function ZS(e){var t=function(a){var r=e.attr,n=e.size,i=e.title,h=JS(e,["attr","size","title"]),l=n||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),ir.default.createElement("svg",F0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,h,{className:c,style:F0(F0({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&ir.default.createElement("title",null,i),e.children)};return b6!==void 0?ir.default.createElement(b6.Consumer,null,function(a){return t(a)}):t(T6)}function HM(e){return T4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"}}]})(e)}function xM(e){return T4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 12V6H4v12h10v2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2v6h-2zm-1 2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm-4.34-6H9v5.66l2.12-2.12 2.83 2.83 1.41-1.41-2.83-2.83L14.66 8z"}}]})(e)}function VM(e){return T4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}}]})(e)}function il(e){return T4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M8 5v14l11-7z"}}]})(e)}function wM(e){return T4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM20 4v13.17L18.83 16H4V4h16zM6 12h12v2H6zm0-3h12v2H6zm0-3h12v2H6z"}}]})(e)}function LM(e){return T4({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.83 16H20V4H6.83l-2-2H20c1.1 0 2 .9 2 2v15.17L18.83 16zM18 6H8.83l2 2H18V6zm0 3h-6.17l2 2H18V9zm0 5v-2h-3.17l2 2H18zm3.9 7.9l-1.41 1.41L15.17 18H4c-1.1 0-2-.9-2-2V4.83L.69 3.51 2.1 2.1l19.8 19.8zM13.17 16l-2-2H6v-2h3.17l-1-1H6V9h.17L4 6.83V16h9.17z"}}]})(e)}var b4=z1(G1()),t_=()=>{let e=F2(),[t,a]=(0,hl.useState)(!1);return(0,hl.useEffect)(()=>{e?.one("canplay",()=>{a(!0)})},[]),t?(0,b4.jsx)("div",{className:"overlay initial-play-click-overlay",children:(0,b4.jsx)("button",{className:"playButton",onClick:()=>{e?.play(),a(!1)},children:(0,b4.jsx)(il,{})})}):(0,b4.jsx)(b4.Fragment,{})},yM=t_;var U0=z1(At());var w5=z1(At());var A4=z1(At()),O4=z1(Qc()),SM=z1(BM()),_M=z1(CM()),ll=z1(G1()),e_=()=>{let e=F2(),t=(0,A4.useRef)(void 0),[a,r]=(0,A4.useState)(0),[n,i]=(0,A4.useState)(0);(0,A4.useEffect)(()=>{let l=()=>{if(e!==null){t.current=setInterval(()=>{r(e.currentTime()),i(e.duration())},500);let c=()=>{e.off("pause",c),e.off("ended",c),clearInterval(t.current)};e.one("pause",c),e.one("ended",c)}};e?.on("play",()=>{t.current!==void 0&&clearInterval(t.current),l()}),l()},[]);function h(l){O4.default.extend(SM.default),O4.default.extend(_M.default);let c=(0,O4.default)().subtract(Math.round(l),"seconds"),v=O4.default.duration((0,O4.default)().diff(c));return O4.default.utc(v.asMilliseconds()).format("mm:ss")}return(0,ll.jsx)("div",{className:"video-time",children:(0,ll.jsxs)("span",{children:[h(a)," / ",h(n)]})})},TM=e_;var B2=z1(G1()),a_=({show:e,isPlay:t})=>{let a=F2(),r=MM(),[n,i]=(0,w5.useState)(!0),[h,l]=(0,w5.useState)(!1);(0,w5.useEffect)(()=>{a?.on("leavepictureinpicture",()=>{l(!1)}),a?.on("enterpictureinpicture",()=>{l(!0)})},[]);let c=w=>{w.stopPropagation(),t?a?.pause():a?.play()},v=w=>{w.stopPropagation(),h?a?.exitPictureInPicture():a?.requestPictureInPicture()},g=()=>{n?(r?.disable(),i(!1)):(r?.enable(),i(!0))},z=w=>{w.stopPropagation()};return(0,B2.jsxs)("div",{className:"control-bar"+(e?"":" control-bar-hide"),onClick:z,children:[(0,B2.jsx)("button",{className:"control-bar-button",onClick:c,children:t?(0,B2.jsx)(VM,{}):(0,B2.jsx)(il,{})}),(0,B2.jsx)("button",{className:"control-bar-button",onClick:g,children:n?(0,B2.jsx)(LM,{}):(0,B2.jsx)(wM,{})}),(0,B2.jsx)("button",{className:"control-bar-button",onClick:v,children:h?(0,B2.jsx)(xM,{}):(0,B2.jsx)(HM,{})}),(0,B2.jsx)(TM,{})]})},bM=a_;var hr=z1(G1()),r_=()=>{let[e,t]=(0,U0.useState)(!1),[a,r]=(0,U0.useState)(!1),[n,i]=(0,U0.useState)(!1),h=(0,U0.useRef)(),l=ma(),c=F2();(0,U0.useEffect)(()=>{c?.one("playing",()=>{t(!0)}),c?.on("play",()=>{r(!0),l?.sendParent("timeSyncRequest",null)}),c?.on("pause",()=>{r(!1)})},[]);let v=()=>{a?c?.pause():c?.play()},g=()=>{i(!0),clearTimeout(h.current),h.current=setTimeout(()=>{i(!1)},5e3)};return e?(0,hr.jsx)("div",{className:"control-container overlay",onClick:v,onMouseOver:g,onMouseMove:g,onTouchStartCapture:g,children:(0,hr.jsx)(bM,{show:n,isPlay:a})}):(0,hr.jsx)(hr.Fragment,{})},OM=r_;var L5=z1(G1()),n_=()=>(0,L5.jsxs)("div",{className:"video-controls",children:[(0,L5.jsx)(OM,{}),(0,L5.jsx)(yM,{})]}),AM=n_;var E4=z1(G1()),i_=()=>{let{session:e,initialWatchData:t}=zh();return(0,EM.useEffect)(()=>{if(t!==void 0){let a=t?.data.owner?.nickname??t?.data.channel.name??"UNKNOWN";h_(String(t?.data.video.thumbnail.player)).then(r=>{navigator.mediaSession.metadata=new MediaMetadata({title:t?.data.video.title,artist:a,artwork:[{src:r,sizes:"540x540",type:"image/png"}]})})}},[t]),(0,E4.jsx)("div",{className:"nico-player-outer",children:(0,E4.jsxs)(sM,{src:e?.data.session.content_uri,id:"nico-player",autoPlay:!0,playsInline:!0,options:{},children:[(0,E4.jsx)(uM,{}),(0,E4.jsx)(fM,{children:(0,E4.jsx)(AM,{})})]})})};async function h_(e){return await new Promise(t=>{let a=document.createElement("canvas"),r=540,n=960;a.width=r,a.height=r;let i=a.getContext("2d"),h=new Image;h.onload=()=>{i?.drawImage(h,(n-r)/2*-1,0);let l=a.toDataURL("image/png");a.remove(),t(l)},h.crossOrigin="anonymous",h.src=e})}var kM=i_;var ol=z1(G1()),l_=()=>{let[e,t]=(0,y5.useState)(null),a=ma();return(0,y5.useEffect)(()=>{Ve("Kiite plus niconico client"),a?.addMessageListener("setVideoId",({value:r})=>{Ve(`new VideoId: ${String(r)}`),t(r)}),a?.sendParent("playerRendered",null)},[]),(0,y5.useEffect)(()=>{},[e]),(0,ol.jsx)("div",{className:"embed-wrapper",children:e!==null&&(0,ol.jsx)(gu,{videoId:e,children:(0,ol.jsx)(kM,{})})})},PM=l_;var P6=z1(G1());function D6(){document.body.innerHTML="";let e=document.createElement("div");e.id="root",document.body.appendChild(e),DM.default.createRoot(e).render((0,P6.jsx)(zu,{origin:"https://cafe.kiite.jp",children:(0,P6.jsx)(PM,{})}))}document.getElementById("9829630aad96f4c13ea759798dcbbda4942aa9810aa1d2a5aec09e254a97a4db")||(cl=document.createElement("style"),cl.id="9829630aad96f4c13ea759798dcbbda4942aa9810aa1d2a5aec09e254a97a4db",cl.textContent="#niconico-client{width:100%;height:100%;z-index:99}",document.head.appendChild(cl));var cl;var B5=class{iframe;postMessage;origin;nowPlayData;nextPlayData;mode;constructor(t="mobile"){this.origin="https://embed.nicovideo.jp",this.mode=t,t==="mobile"?this.iframe=this.overridePlayer():this.iframe=this.overridePlayerPC(),this.postMessage=new za(this.origin)}async start(){this.postMessage.addMessageListener("videojsAttached",()=>{this.mode==="pc"&&this.volumeChangeHandler()}),this.postMessage.addMessageListener("playerRendered",async()=>{Ve("Player rendered"),this.getNowPlaying().then(t=>{this.sendMessage("setVideoId",t.video_id),this.nowPlayData=t})}),this.postMessage.addMessageListener("firstPlaying",()=>{Ve("Playing"),this.sendMessage("setTime",this.getNowCurrentTime(this.nowPlayData.start_time))}),this.postMessage.addMessageListener("nextPlayingGetStartReqest",()=>{Ve("Get nextsong"),this.getNextSong().then(t=>{Ve(`Nextsong: ${t.video_id}`),this.nextPlayData=t})}),this.postMessage.addMessageListener("ended",()=>{Ve("Ended"),this.nowPlayData=this.nextPlayData,this.sendMessage("setVideoId",this.nowPlayData.video_id)}),this.postMessage.addMessageListener("timeSyncRequest",()=>{this.sendMessage("setTime",this.getNowCurrentTime(this.nowPlayData.start_time))})}overridePlayer(){let t=document.createElement("iframe");t.src="https://embed.nicovideo.jp/kiite-embed-client",t.id="niconico-client";let a=document.querySelector("#videos");return a!==null&&(a.innerHTML="",a.appendChild(t)),t}overridePlayerPC(){let t=document.createElement("iframe");t.src="https://embed.nicovideo.jp/kiite-embed-client",t.id="niconico-client",document.querySelector("#cafe_player > .front")?.remove();let r=document.querySelector("#cafe_player > .videos");return r!==null&&(r.innerHTML="",r.appendChild(t)),t}volumeChangeHandler(){let t=document.querySelector(".volume > .button > .value"),a=()=>{let n=Number(t?.innerHTML)/100;this.sendMessage("setVolume",n),Ve("setvol")},r=new MutationObserver(()=>{a()});t!==null&&(r.observe(t,{childList:!0,attributes:!0,characterData:!0}),a())}getNowCurrentTime(t){let a=new Date(t),n=new Date().getTime()-a.getTime();return Math.floor(n/1e3)}sendMessage(t,a){this.iframe.contentWindow?.window?.postMessage({type:t,value:a},this.origin)}async getNowPlaying(){let t=await fetch("https://cafeapi.kiite.jp/api/cafe/now_playing");return JSON.parse(await t.text())}async getNextSong(){let t=await fetch("https://cafeapi.kiite.jp/api/cafe/next_song");return JSON.parse(await t.text())}};function I6(){location.href==="https://cafe.kiite.jp/"&&new B5("mobile").start(),location.href==="https://cafe.kiite.jp/pc"&&new B5("pc").start(),location.href==="https://embed.nicovideo.jp/kiite-embed-client"&&D6()}var IM={};typeof GM_info<"u"&&GM_info.script.grant.forEach(e=>{let t=e.split("GM_")[1];t==="xmlhttpRequest"&&(t="xmlHttpRequest"),IM[e]=GM[t]});I6(IM);
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

@videojs/xhr/lib/index.js:
  (**
   * @license
   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
   * Copyright (c) 2014 David Björklund
   * Available under the MIT license
   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
   *)

@xpadev-net/niconicomments/dist/bundle.js:
  (*!
    niconicomments.js v0.2.48
    (c) 2021 xpadev-net https://xpadev.net
    Released under the MIT License.
  *)

m3u8-parser/dist/m3u8-parser.es.js:
  (*! @name m3u8-parser @version 6.2.0 @license Apache-2.0 *)

mpd-parser/dist/mpd-parser.es.js:
  (*! @name mpd-parser @version 1.1.1 @license Apache-2.0 *)

video.js/dist/video.es.js:
  (**
   * @license
   * Video.js 8.3.0 <http://videojs.com/>
   * Copyright Brightcove, Inc. <https://www.brightcove.com/>
   * Available under Apache License Version 2.0
   * <https://github.com/videojs/video.js/blob/main/LICENSE>
   *
   * Includes vtt.js <https://github.com/mozilla/vtt.js>
   * Available under Apache License Version 2.0
   * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
   *)
  (*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 *)
  (*! @name @videojs/http-streaming @version 3.0.2 @license Apache-2.0 *)
  (*! @name pkcs7 @version 1.0.4 @license Apache-2.0 *)
  (*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 *)
*/
